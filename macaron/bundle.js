!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){o["default"].render(o["default"].createElement(s,null),document.getElementById("app"))}var a=n(2),o=r(a),s=n(36);n(54),i()},function(e,t,n){"use strict";var r=n(43);r.connect=n(45),r.connectFilter=n(46),r.ListenerMixin=n(17),r.listenTo=n(47),r.listenToMany=n(48),e.exports=r},function(e,t,n){var r,r;!function(t){e.exports=t()}(function(){return function e(t,n,i){function a(s,u){if(!n[s]){if(!t[s]){var l="function"==typeof r&&r;if(!u&&l)return r(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return a(n?n:e)},f,f.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof r&&r,s=0;s<i.length;s++)a(i[s]);return a}({1:[function(e,t,n){"use strict";var r=e(19),i=e(32),a=e(34),o=e(33),s=e(38),u=e(39),l=e(55),c=(e(56),e(40)),f=e(51),h=e(54),p=e(64),d=e(68),m=e(73),g=e(76),v=e(79),y=e(82),b=e(27),w=e(115),x=e(142);h.inject();var S=l.createElement,C=l.createFactory,_=l.cloneElement,k=m.measure("React","render",d.render),T={Children:{map:i.map,forEach:i.forEach,count:i.count,only:x},Component:a,DOM:c,PropTypes:g,initializeTouchEvents:function(e){r.useTouchEvents=e},createClass:o.createClass,createElement:S,cloneElement:_,createFactory:C,createMixin:function(e){return e},constructAndRenderComponent:d.constructAndRenderComponent,constructAndRenderComponentByID:d.constructAndRenderComponentByID,findDOMNode:w,render:k,renderToString:y.renderToString,renderToStaticMarkup:y.renderToStaticMarkup,unmountComponentAtNode:d.unmountComponentAtNode,isValidElement:l.isValidElement,withContext:s.withContext,__spread:b};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({CurrentOwner:u,InstanceHandles:p,Mount:d,Reconciler:v,TextComponent:f}),T.version="0.13.3",t.exports=T},{115:115,142:142,19:19,27:27,32:32,33:33,34:34,38:38,39:39,40:40,51:51,54:54,55:55,56:56,64:64,68:68,73:73,76:76,79:79,82:82}],2:[function(e,t,n){"use strict";var r=e(117),i={componentDidMount:function(){this.props.autoFocus&&r(this.getDOMNode())}};t.exports=i},{117:117}],3:[function(e,t,n){"use strict";function r(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}function i(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}function a(e){switch(e){case A.topCompositionStart:return E.compositionStart;case A.topCompositionEnd:return E.compositionEnd;case A.topCompositionUpdate:return E.compositionUpdate}}function o(e,t){return e===A.topKeyDown&&t.keyCode===x}function s(e,t){switch(e){case A.topKeyUp:return-1!==w.indexOf(t.keyCode);case A.topKeyDown:return t.keyCode!==x;case A.topKeyPress:case A.topMouseDown:case A.topBlur:return!0;default:return!1}}function u(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}function l(e,t,n,r){var i,l;if(S?i=a(e):N?s(e,r)&&(i=E.compositionEnd):o(e,r)&&(i=E.compositionStart),!i)return null;k&&(N||i!==E.compositionStart?i===E.compositionEnd&&N&&(l=N.getData()):N=g.getPooled(t));var c=v.getPooled(i,n,r);if(l)c.data=l;else{var f=u(r);null!==f&&(c.data=f)}return d.accumulateTwoPhaseDispatches(c),c}function c(e,t){switch(e){case A.topCompositionEnd:return u(t);case A.topKeyPress:var n=t.which;return n!==T?null:(P=!0,M);case A.topTextInput:var r=t.data;return r===M&&P?null:r;default:return null}}function f(e,t){if(N){if(e===A.topCompositionEnd||s(e,t)){var n=N.getData();return g.release(N),N=null,n}return null}switch(e){case A.topPaste:return null;case A.topKeyPress:return t.which&&!i(t)?String.fromCharCode(t.which):null;case A.topCompositionEnd:return k?null:t.data;default:return null}}function h(e,t,n,r){var i;if(i=_?c(e,r):f(e,r),!i)return null;var a=y.getPooled(E.beforeInput,n,r);return a.data=i,d.accumulateTwoPhaseDispatches(a),a}var p=e(15),d=e(20),m=e(21),g=e(22),v=e(91),y=e(95),b=e(139),w=[9,13,27,32],x=229,S=m.canUseDOM&&"CompositionEvent"in window,C=null;m.canUseDOM&&"documentMode"in document&&(C=document.documentMode);var _=m.canUseDOM&&"TextEvent"in window&&!C&&!r(),k=m.canUseDOM&&(!S||C&&C>8&&11>=C),T=32,M=String.fromCharCode(T),A=p.topLevelTypes,E={beforeInput:{phasedRegistrationNames:{bubbled:b({onBeforeInput:null}),captured:b({onBeforeInputCapture:null})},dependencies:[A.topCompositionEnd,A.topKeyPress,A.topTextInput,A.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:b({onCompositionEnd:null}),captured:b({onCompositionEndCapture:null})},dependencies:[A.topBlur,A.topCompositionEnd,A.topKeyDown,A.topKeyPress,A.topKeyUp,A.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:b({onCompositionStart:null}),captured:b({onCompositionStartCapture:null})},dependencies:[A.topBlur,A.topCompositionStart,A.topKeyDown,A.topKeyPress,A.topKeyUp,A.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:b({onCompositionUpdate:null}),captured:b({onCompositionUpdateCapture:null})},dependencies:[A.topBlur,A.topCompositionUpdate,A.topKeyDown,A.topKeyPress,A.topKeyUp,A.topMouseDown]}},P=!1,N=null,O={eventTypes:E,extractEvents:function(e,t,n,r){return[l(e,t,n,r),h(e,t,n,r)]}};t.exports=O},{139:139,15:15,20:20,21:21,22:22,91:91,95:95}],4:[function(e,t,n){"use strict";function r(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var i={boxFlex:!0,boxFlexGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0},a=["Webkit","ms","Moz","O"];Object.keys(i).forEach(function(e){a.forEach(function(t){i[r(t,e)]=i[e]})});var o={background:{backgroundImage:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundColor:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0}},s={isUnitlessNumber:i,shorthandPropertyExpansions:o};t.exports=s},{}],5:[function(e,t,n){"use strict";var r=e(4),i=e(21),a=(e(106),e(111)),o=e(131),s=e(141),u=(e(150),s(function(e){return o(e)})),l="cssFloat";i.canUseDOM&&void 0===document.documentElement.style.cssFloat&&(l="styleFloat");var c={createMarkupForStyles:function(e){var t="";for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];null!=r&&(t+=u(n)+":",t+=a(n,r)+";")}return t||null},setValueForStyles:function(e,t){var n=e.style;for(var i in t)if(t.hasOwnProperty(i)){var o=a(i,t[i]);if("float"===i&&(i=l),o)n[i]=o;else{var s=r.shorthandPropertyExpansions[i];if(s)for(var u in s)n[u]="";else n[i]=""}}}};t.exports=c},{106:106,111:111,131:131,141:141,150:150,21:21,4:4}],6:[function(e,t,n){"use strict";function r(){this._callbacks=null,this._contexts=null}var i=e(28),a=e(27),o=e(133);a(r.prototype,{enqueue:function(e,t){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(e),this._contexts.push(t)},notifyAll:function(){var e=this._callbacks,t=this._contexts;if(e){o(e.length===t.length),this._callbacks=null,this._contexts=null;for(var n=0,r=e.length;r>n;n++)e[n].call(t[n]);e.length=0,t.length=0}},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),i.addPoolingTo(r),t.exports=r},{133:133,27:27,28:28}],7:[function(e,t,n){"use strict";function r(e){return"SELECT"===e.nodeName||"INPUT"===e.nodeName&&"file"===e.type}function i(e){var t=C.getPooled(A.change,P,e);w.accumulateTwoPhaseDispatches(t),S.batchedUpdates(a,t)}function a(e){b.enqueueEvents(e),b.processEventQueue()}function o(e,t){E=e,P=t,E.attachEvent("onchange",i)}function s(){E&&(E.detachEvent("onchange",i),E=null,P=null)}function u(e,t,n){return e===M.topChange?n:void 0}function l(e,t,n){e===M.topFocus?(s(),o(t,n)):e===M.topBlur&&s()}function c(e,t){E=e,P=t,N=e.value,O=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(E,"value",I),E.attachEvent("onpropertychange",h)}function f(){E&&(delete E.value,E.detachEvent("onpropertychange",h),E=null,P=null,N=null,O=null)}function h(e){if("value"===e.propertyName){var t=e.srcElement.value;t!==N&&(N=t,i(e))}}function p(e,t,n){return e===M.topInput?n:void 0}function d(e,t,n){e===M.topFocus?(f(),c(t,n)):e===M.topBlur&&f()}function m(e,t,n){return e!==M.topSelectionChange&&e!==M.topKeyUp&&e!==M.topKeyDown||!E||E.value===N?void 0:(N=E.value,P)}function g(e){return"INPUT"===e.nodeName&&("checkbox"===e.type||"radio"===e.type)}function v(e,t,n){return e===M.topClick?n:void 0}var y=e(15),b=e(17),w=e(20),x=e(21),S=e(85),C=e(93),_=e(134),k=e(136),T=e(139),M=y.topLevelTypes,A={change:{phasedRegistrationNames:{bubbled:T({onChange:null}),captured:T({onChangeCapture:null})},dependencies:[M.topBlur,M.topChange,M.topClick,M.topFocus,M.topInput,M.topKeyDown,M.topKeyUp,M.topSelectionChange]}},E=null,P=null,N=null,O=null,R=!1;x.canUseDOM&&(R=_("change")&&(!("documentMode"in document)||document.documentMode>8));var D=!1;x.canUseDOM&&(D=_("input")&&(!("documentMode"in document)||document.documentMode>9));var I={get:function(){return O.get.call(this)},set:function(e){N=""+e,O.set.call(this,e)}},F={eventTypes:A,extractEvents:function(e,t,n,i){var a,o;if(r(t)?R?a=u:o=l:k(t)?D?a=p:(a=m,o=d):g(t)&&(a=v),a){var s=a(e,t,n);if(s){var c=C.getPooled(A.change,s,i);return w.accumulateTwoPhaseDispatches(c),c}}o&&o(e,t,n)}};t.exports=F},{134:134,136:136,139:139,15:15,17:17,20:20,21:21,85:85,93:93}],8:[function(e,t,n){"use strict";var r=0,i={createReactRootIndex:function(){return r++}};t.exports=i},{}],9:[function(e,t,n){"use strict";function r(e,t,n){e.insertBefore(t,e.childNodes[n]||null)}var i=e(12),a=e(70),o=e(145),s=e(133),u={dangerouslyReplaceNodeWithMarkup:i.dangerouslyReplaceNodeWithMarkup,updateTextContent:o,processUpdates:function(e,t){for(var n,u=null,l=null,c=0;c<e.length;c++)if(n=e[c],n.type===a.MOVE_EXISTING||n.type===a.REMOVE_NODE){var f=n.fromIndex,h=n.parentNode.childNodes[f],p=n.parentID;s(h),u=u||{},u[p]=u[p]||[],u[p][f]=h,l=l||[],l.push(h)}var d=i.dangerouslyRenderMarkup(t);if(l)for(var m=0;m<l.length;m++)l[m].parentNode.removeChild(l[m]);for(var g=0;g<e.length;g++)switch(n=e[g],n.type){case a.INSERT_MARKUP:r(n.parentNode,d[n.markupIndex],n.toIndex);break;case a.MOVE_EXISTING:r(n.parentNode,u[n.parentID][n.fromIndex],n.toIndex);break;case a.TEXT_CONTENT:o(n.parentNode,n.textContent);break;case a.REMOVE_NODE:}}};t.exports=u},{12:12,133:133,145:145,70:70}],10:[function(e,t,n){"use strict";function r(e,t){return(e&t)===t}var i=e(133),a={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_NUMERIC_VALUE:16,HAS_POSITIVE_NUMERIC_VALUE:48,HAS_OVERLOADED_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(e){var t=e.Properties||{},n=e.DOMAttributeNames||{},o=e.DOMPropertyNames||{},u=e.DOMMutationMethods||{};e.isCustomAttribute&&s._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var l in t){i(!s.isStandardName.hasOwnProperty(l)),s.isStandardName[l]=!0;var c=l.toLowerCase();if(s.getPossibleStandardName[c]=l,n.hasOwnProperty(l)){var f=n[l];s.getPossibleStandardName[f]=l,s.getAttributeName[l]=f}else s.getAttributeName[l]=c;s.getPropertyName[l]=o.hasOwnProperty(l)?o[l]:l,u.hasOwnProperty(l)?s.getMutationMethod[l]=u[l]:s.getMutationMethod[l]=null;var h=t[l];s.mustUseAttribute[l]=r(h,a.MUST_USE_ATTRIBUTE),s.mustUseProperty[l]=r(h,a.MUST_USE_PROPERTY),s.hasSideEffects[l]=r(h,a.HAS_SIDE_EFFECTS),s.hasBooleanValue[l]=r(h,a.HAS_BOOLEAN_VALUE),s.hasNumericValue[l]=r(h,a.HAS_NUMERIC_VALUE),s.hasPositiveNumericValue[l]=r(h,a.HAS_POSITIVE_NUMERIC_VALUE),s.hasOverloadedBooleanValue[l]=r(h,a.HAS_OVERLOADED_BOOLEAN_VALUE),i(!s.mustUseAttribute[l]||!s.mustUseProperty[l]),i(s.mustUseProperty[l]||!s.hasSideEffects[l]),i(!!s.hasBooleanValue[l]+!!s.hasNumericValue[l]+!!s.hasOverloadedBooleanValue[l]<=1)}}},o={},s={ID_ATTRIBUTE_NAME:"data-reactid",isStandardName:{},getPossibleStandardName:{},getAttributeName:{},getPropertyName:{},getMutationMethod:{},mustUseAttribute:{},mustUseProperty:{},hasSideEffects:{},hasBooleanValue:{},hasNumericValue:{},hasPositiveNumericValue:{},hasOverloadedBooleanValue:{},_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<s._isCustomAttributeFunctions.length;t++){var n=s._isCustomAttributeFunctions[t];if(n(e))return!0}return!1},getDefaultValueForProperty:function(e,t){var n,r=o[e];return r||(o[e]=r={}),t in r||(n=document.createElement(e),r[t]=n[t]),r[t]},injection:a};t.exports=s},{133:133}],11:[function(e,t,n){"use strict";function r(e,t){return null==t||i.hasBooleanValue[e]&&!t||i.hasNumericValue[e]&&isNaN(t)||i.hasPositiveNumericValue[e]&&1>t||i.hasOverloadedBooleanValue[e]&&t===!1}var i=e(10),a=e(143),o=(e(150),{createMarkupForID:function(e){return i.ID_ATTRIBUTE_NAME+"="+a(e)},createMarkupForProperty:function(e,t){if(i.isStandardName.hasOwnProperty(e)&&i.isStandardName[e]){if(r(e,t))return"";var n=i.getAttributeName[e];return i.hasBooleanValue[e]||i.hasOverloadedBooleanValue[e]&&t===!0?n:n+"="+a(t)}return i.isCustomAttribute(e)?null==t?"":e+"="+a(t):null},setValueForProperty:function(e,t,n){if(i.isStandardName.hasOwnProperty(t)&&i.isStandardName[t]){var a=i.getMutationMethod[t];if(a)a(e,n);else if(r(t,n))this.deleteValueForProperty(e,t);else if(i.mustUseAttribute[t])e.setAttribute(i.getAttributeName[t],""+n);else{var o=i.getPropertyName[t];i.hasSideEffects[t]&&""+e[o]==""+n||(e[o]=n)}}else i.isCustomAttribute(t)&&(null==n?e.removeAttribute(t):e.setAttribute(t,""+n))},deleteValueForProperty:function(e,t){if(i.isStandardName.hasOwnProperty(t)&&i.isStandardName[t]){var n=i.getMutationMethod[t];if(n)n(e,void 0);else if(i.mustUseAttribute[t])e.removeAttribute(i.getAttributeName[t]);else{var r=i.getPropertyName[t],a=i.getDefaultValueForProperty(e.nodeName,r);i.hasSideEffects[t]&&""+e[r]===a||(e[r]=a)}}else i.isCustomAttribute(t)&&e.removeAttribute(t)}});t.exports=o},{10:10,143:143,150:150}],12:[function(e,t,n){"use strict";function r(e){return e.substring(1,e.indexOf(" "))}var i=e(21),a=e(110),o=e(112),s=e(125),u=e(133),l=/^(<[^ \/>]+)/,c="data-danger-index",f={dangerouslyRenderMarkup:function(e){u(i.canUseDOM);for(var t,n={},f=0;f<e.length;f++)u(e[f]),t=r(e[f]),t=s(t)?t:"*",n[t]=n[t]||[],n[t][f]=e[f];var h=[],p=0;for(t in n)if(n.hasOwnProperty(t)){var d,m=n[t];for(d in m)if(m.hasOwnProperty(d)){var g=m[d];m[d]=g.replace(l,"$1 "+c+'="'+d+'" ')}for(var v=a(m.join(""),o),y=0;y<v.length;++y){var b=v[y];b.hasAttribute&&b.hasAttribute(c)&&(d=+b.getAttribute(c),b.removeAttribute(c),u(!h.hasOwnProperty(d)),h[d]=b,p+=1)}}return u(p===h.length),u(h.length===e.length),h},dangerouslyReplaceNodeWithMarkup:function(e,t){u(i.canUseDOM),u(t),u("html"!==e.tagName.toLowerCase());var n=a(t,o)[0];e.parentNode.replaceChild(n,e)}};t.exports=f},{110:110,112:112,125:125,133:133,21:21}],13:[function(e,t,n){"use strict";var r=e(139),i=[r({ResponderEventPlugin:null}),r({SimpleEventPlugin:null}),r({TapEventPlugin:null}),r({EnterLeaveEventPlugin:null}),r({ChangeEventPlugin:null}),r({SelectEventPlugin:null}),r({BeforeInputEventPlugin:null}),r({AnalyticsEventPlugin:null}),r({MobileSafariClickEventPlugin:null})];t.exports=i},{139:139}],14:[function(e,t,n){"use strict";var r=e(15),i=e(20),a=e(97),o=e(68),s=e(139),u=r.topLevelTypes,l=o.getFirstReactDOM,c={mouseEnter:{registrationName:s({onMouseEnter:null}),dependencies:[u.topMouseOut,u.topMouseOver]},mouseLeave:{registrationName:s({onMouseLeave:null}),dependencies:[u.topMouseOut,u.topMouseOver]}},f=[null,null],h={eventTypes:c,extractEvents:function(e,t,n,r){if(e===u.topMouseOver&&(r.relatedTarget||r.fromElement))return null;if(e!==u.topMouseOut&&e!==u.topMouseOver)return null;var s;if(t.window===t)s=t;else{var h=t.ownerDocument;s=h?h.defaultView||h.parentWindow:window}var p,d;if(e===u.topMouseOut?(p=t,d=l(r.relatedTarget||r.toElement)||s):(p=s,d=t),p===d)return null;var m=p?o.getID(p):"",g=d?o.getID(d):"",v=a.getPooled(c.mouseLeave,m,r);v.type="mouseleave",v.target=p,v.relatedTarget=d;var y=a.getPooled(c.mouseEnter,g,r);return y.type="mouseenter",y.target=d,y.relatedTarget=p,i.accumulateEnterLeaveDispatches(v,y,m,g),f[0]=v,f[1]=y,f}};t.exports=h},{139:139,15:15,20:20,68:68,97:97}],15:[function(e,t,n){"use strict";var r=e(138),i=r({bubbled:null,captured:null}),a=r({topBlur:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topReset:null,topScroll:null,topSelectionChange:null,topSubmit:null,topTextInput:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topWheel:null}),o={topLevelTypes:a,PropagationPhases:i};t.exports=o},{138:138}],16:[function(e,t,n){var r=e(112),i={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):{remove:r}},registerDefault:function(){}};t.exports=i},{112:112}],17:[function(e,t,n){"use strict";var r=e(18),i=e(19),a=e(103),o=e(118),s=e(133),u={},l=null,c=function(e){if(e){var t=i.executeDispatch,n=r.getPluginModuleForEvent(e);n&&n.executeDispatch&&(t=n.executeDispatch),i.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e)}},f=null,h={injection:{injectMount:i.injection.injectMount,injectInstanceHandle:function(e){f=e},getInstanceHandle:function(){return f},injectEventPluginOrder:r.injectEventPluginOrder,injectEventPluginsByName:r.injectEventPluginsByName},eventNameDispatchConfigs:r.eventNameDispatchConfigs,registrationNameModules:r.registrationNameModules,putListener:function(e,t,n){s(!n||"function"==typeof n);var r=u[t]||(u[t]={});r[e]=n},getListener:function(e,t){var n=u[t];return n&&n[e]},deleteListener:function(e,t){var n=u[t];n&&delete n[e]},deleteAllListeners:function(e){for(var t in u)delete u[t][e]},extractEvents:function(e,t,n,i){for(var o,s=r.plugins,u=0,l=s.length;l>u;u++){var c=s[u];if(c){var f=c.extractEvents(e,t,n,i);f&&(o=a(o,f))}}return o},enqueueEvents:function(e){e&&(l=a(l,e))},processEventQueue:function(){var e=l;l=null,o(e,c),s(!l)},__purge:function(){u={}},__getListenerBank:function(){return u}};t.exports=h},{103:103,118:118,133:133,18:18,19:19}],18:[function(e,t,n){"use strict";function r(){if(s)for(var e in u){var t=u[e],n=s.indexOf(e);if(o(n>-1),!l.plugins[n]){o(t.extractEvents),l.plugins[n]=t;var r=t.eventTypes;for(var a in r)o(i(r[a],t,a))}}}function i(e,t,n){o(!l.eventNameDispatchConfigs.hasOwnProperty(n)),l.eventNameDispatchConfigs[n]=e;var r=e.phasedRegistrationNames;if(r){for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];a(s,t,n)}return!0}return e.registrationName?(a(e.registrationName,t,n),!0):!1}function a(e,t,n){o(!l.registrationNameModules[e]),l.registrationNameModules[e]=t,l.registrationNameDependencies[e]=t.eventTypes[n].dependencies}var o=e(133),s=null,u={},l={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(e){o(!s),s=Array.prototype.slice.call(e),r()},injectEventPluginsByName:function(e){var t=!1;for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];u.hasOwnProperty(n)&&u[n]===i||(o(!u[n]),u[n]=i,t=!0)}t&&r()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return l.registrationNameModules[t.registrationName]||null;for(var n in t.phasedRegistrationNames)if(t.phasedRegistrationNames.hasOwnProperty(n)){var r=l.registrationNameModules[t.phasedRegistrationNames[n]];if(r)return r}return null},_resetEventPlugins:function(){s=null;for(var e in u)u.hasOwnProperty(e)&&delete u[e];l.plugins.length=0;var t=l.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var r=l.registrationNameModules;for(var i in r)r.hasOwnProperty(i)&&delete r[i]}};t.exports=l},{133:133}],19:[function(e,t,n){"use strict";function r(e){return e===g.topMouseUp||e===g.topTouchEnd||e===g.topTouchCancel}function i(e){return e===g.topMouseMove||e===g.topTouchMove}function a(e){return e===g.topMouseDown||e===g.topTouchStart}function o(e,t){var n=e._dispatchListeners,r=e._dispatchIDs;if(Array.isArray(n))for(var i=0;i<n.length&&!e.isPropagationStopped();i++)t(e,n[i],r[i]);else n&&t(e,n,r)}function s(e,t,n){e.currentTarget=m.Mount.getNode(n);var r=t(e,n);return e.currentTarget=null,r}function u(e,t){o(e,t),e._dispatchListeners=null,e._dispatchIDs=null}function l(e){var t=e._dispatchListeners,n=e._dispatchIDs;if(Array.isArray(t)){for(var r=0;r<t.length&&!e.isPropagationStopped();r++)if(t[r](e,n[r]))return n[r]}else if(t&&t(e,n))return n;return null}function c(e){var t=l(e);return e._dispatchIDs=null,e._dispatchListeners=null,t}function f(e){var t=e._dispatchListeners,n=e._dispatchIDs;d(!Array.isArray(t));var r=t?t(e,n):null;return e._dispatchListeners=null,e._dispatchIDs=null,r}function h(e){return!!e._dispatchListeners}var p=e(15),d=e(133),m={Mount:null,injectMount:function(e){m.Mount=e}},g=p.topLevelTypes,v={isEndish:r,isMoveish:i,isStartish:a,executeDirectDispatch:f,executeDispatch:s,executeDispatchesInOrder:u,executeDispatchesInOrderStopAtTrue:c,hasDispatches:h,injection:m,useTouchEvents:!1};t.exports=v},{133:133,15:15}],20:[function(e,t,n){"use strict";function r(e,t,n){var r=t.dispatchConfig.phasedRegistrationNames[n];return g(e,r)}function i(e,t,n){var i=t?m.bubbled:m.captured,a=r(e,n,i);a&&(n._dispatchListeners=p(n._dispatchListeners,a),n._dispatchIDs=p(n._dispatchIDs,e))}function a(e){e&&e.dispatchConfig.phasedRegistrationNames&&h.injection.getInstanceHandle().traverseTwoPhase(e.dispatchMarker,i,e)}function o(e,t,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,i=g(e,r);i&&(n._dispatchListeners=p(n._dispatchListeners,i),n._dispatchIDs=p(n._dispatchIDs,e))}}function s(e){e&&e.dispatchConfig.registrationName&&o(e.dispatchMarker,null,e)}function u(e){d(e,a)}function l(e,t,n,r){h.injection.getInstanceHandle().traverseEnterLeave(n,r,o,e,t)}function c(e){d(e,s)}var f=e(15),h=e(17),p=e(103),d=e(118),m=f.PropagationPhases,g=h.getListener,v={accumulateTwoPhaseDispatches:u,accumulateDirectDispatches:c,accumulateEnterLeaveDispatches:l};t.exports=v},{103:103,118:118,15:15,17:17}],21:[function(e,t,n){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),i={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};t.exports=i},{}],22:[function(e,t,n){"use strict";function r(e){this._root=e,this._startText=this.getText(),this._fallbackText=null}var i=e(28),a=e(27),o=e(128);a(r.prototype,{getText:function(){return"value"in this._root?this._root.value:this._root[o()]},getData:function(){if(this._fallbackText)return this._fallbackText;var e,t,n=this._startText,r=n.length,i=this.getText(),a=i.length;for(e=0;r>e&&n[e]===i[e];e++);var o=r-e;for(t=1;o>=t&&n[r-t]===i[a-t];t++);var s=t>1?1-t:void 0;return this._fallbackText=i.slice(e,s),this._fallbackText}}),i.addPoolingTo(r),t.exports=r},{128:128,27:27,28:28}],23:[function(e,t,n){"use strict";var r,i=e(10),a=e(21),o=i.injection.MUST_USE_ATTRIBUTE,s=i.injection.MUST_USE_PROPERTY,u=i.injection.HAS_BOOLEAN_VALUE,l=i.injection.HAS_SIDE_EFFECTS,c=i.injection.HAS_NUMERIC_VALUE,f=i.injection.HAS_POSITIVE_NUMERIC_VALUE,h=i.injection.HAS_OVERLOADED_BOOLEAN_VALUE;if(a.canUseDOM){var p=document.implementation;r=p&&p.hasFeature&&p.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}var d={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,acceptCharset:null,accessKey:null,action:null,allowFullScreen:o|u,allowTransparency:o,alt:null,async:u,autoComplete:null,autoPlay:u,cellPadding:null,cellSpacing:null,charSet:o,checked:s|u,classID:o,className:r?o:s,cols:o|f,colSpan:null,content:null,contentEditable:null,contextMenu:o,controls:s|u,coords:null,crossOrigin:null,data:null,dateTime:o,defer:u,dir:null,disabled:o|u,download:h,draggable:null,encType:null,form:o,formAction:o,formEncType:o,formMethod:o,formNoValidate:u,formTarget:o,frameBorder:o,headers:null,height:o,hidden:o|u,high:null,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:s,label:null,lang:null,list:o,loop:s|u,low:null,manifest:o,marginHeight:null,marginWidth:null,max:null,maxLength:o,media:o,mediaGroup:null,method:null,min:null,multiple:s|u,muted:s|u,name:null,noValidate:u,open:u,optimum:null,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:s|u,rel:null,required:u,role:o,rows:o|f,rowSpan:null,sandbox:null,scope:null,scoped:u,scrolling:null,seamless:o|u,selected:s|u,shape:null,size:o|f,sizes:o,span:f,spellCheck:null,src:null,srcDoc:s,srcSet:o,start:c,step:null,style:null,tabIndex:null,target:null,title:null,type:null,useMap:null,value:s|l,width:o,wmode:o,autoCapitalize:null,autoCorrect:null,itemProp:o,itemScope:o|u,itemType:o,itemID:o,itemRef:o,property:null,unselectable:o},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{autoCapitalize:"autocapitalize",autoComplete:"autocomplete",autoCorrect:"autocorrect",autoFocus:"autofocus",autoPlay:"autoplay",encType:"encoding",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc",srcSet:"srcset"}};t.exports=d},{10:10,21:21}],24:[function(e,t,n){"use strict";function r(e){l(null==e.props.checkedLink||null==e.props.valueLink)}function i(e){r(e),l(null==e.props.value&&null==e.props.onChange)}function a(e){r(e),l(null==e.props.checked&&null==e.props.onChange)}function o(e){this.props.valueLink.requestChange(e.target.value)}function s(e){this.props.checkedLink.requestChange(e.target.checked)}var u=e(76),l=e(133),c={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},f={Mixin:{propTypes:{value:function(e,t,n){return!e[t]||c[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){return!e[t]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:u.func}},getValue:function(e){return e.props.valueLink?(i(e),e.props.valueLink.value):e.props.value},getChecked:function(e){return e.props.checkedLink?(a(e),e.props.checkedLink.value):e.props.checked},getOnChange:function(e){return e.props.valueLink?(i(e),o):e.props.checkedLink?(a(e),s):e.props.onChange}};t.exports=f},{133:133,76:76}],25:[function(e,t,n){"use strict";function r(e){e.remove()}var i=e(30),a=e(103),o=e(118),s=e(133),u={trapBubbledEvent:function(e,t){s(this.isMounted());var n=this.getDOMNode();s(n);var r=i.trapBubbledEvent(e,t,n);this._localEventListeners=a(this._localEventListeners,r)},componentWillUnmount:function(){this._localEventListeners&&o(this._localEventListeners,r)}};t.exports=u},{103:103,118:118,133:133,30:30}],26:[function(e,t,n){"use strict";var r=e(15),i=e(112),a=r.topLevelTypes,o={eventTypes:null,extractEvents:function(e,t,n,r){if(e===a.topTouchStart){var o=r.target;o&&!o.onclick&&(o.onclick=i)}}};t.exports=o},{112:112,15:15}],27:[function(e,t,n){"use strict";function r(e,t){if(null==e)throw new TypeError("Object.assign target cannot be null or undefined");for(var n=Object(e),r=Object.prototype.hasOwnProperty,i=1;i<arguments.length;i++){var a=arguments[i];if(null!=a){var o=Object(a);for(var s in o)r.call(o,s)&&(n[s]=o[s])}}return n}t.exports=r},{}],28:[function(e,t,n){"use strict";var r=e(133),i=function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)},a=function(e,t){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,e,t),r}return new n(e,t)},o=function(e,t,n){var r=this;if(r.instancePool.length){var i=r.instancePool.pop();return r.call(i,e,t,n),i}return new r(e,t,n)},s=function(e,t,n,r,i){var a=this;if(a.instancePool.length){var o=a.instancePool.pop();return a.call(o,e,t,n,r,i),o}return new a(e,t,n,r,i)},u=function(e){var t=this;r(e instanceof t),e.destructor&&e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},l=10,c=i,f=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||c,n.poolSize||(n.poolSize=l),n.release=u,n},h={addPoolingTo:f,oneArgumentPooler:i,twoArgumentPooler:a,threeArgumentPooler:o,fiveArgumentPooler:s};t.exports=h},{133:133}],29:[function(e,t,n){"use strict";var r=e(115),i={getDOMNode:function(){return r(this)}};t.exports=i},{115:115}],30:[function(e,t,n){"use strict";function r(e){return Object.prototype.hasOwnProperty.call(e,m)||(e[m]=p++,f[e[m]]={}),f[e[m]]}var i=e(15),a=e(17),o=e(18),s=e(59),u=e(102),l=e(27),c=e(134),f={},h=!1,p=0,d={topBlur:"blur",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topScroll:"scroll",topSelectionChange:"selectionchange",topTextInput:"textInput",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topWheel:"wheel"},m="_reactListenersID"+String(Math.random()).slice(2),g=l({},s,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(g.handleTopLevel),g.ReactEventListener=e}},setEnabled:function(e){g.ReactEventListener&&g.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!g.ReactEventListener||!g.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var n=t,a=r(n),s=o.registrationNameDependencies[e],u=i.topLevelTypes,l=0,f=s.length;f>l;l++){var h=s[l];a.hasOwnProperty(h)&&a[h]||(h===u.topWheel?c("wheel")?g.ReactEventListener.trapBubbledEvent(u.topWheel,"wheel",n):c("mousewheel")?g.ReactEventListener.trapBubbledEvent(u.topWheel,"mousewheel",n):g.ReactEventListener.trapBubbledEvent(u.topWheel,"DOMMouseScroll",n):h===u.topScroll?c("scroll",!0)?g.ReactEventListener.trapCapturedEvent(u.topScroll,"scroll",n):g.ReactEventListener.trapBubbledEvent(u.topScroll,"scroll",g.ReactEventListener.WINDOW_HANDLE):h===u.topFocus||h===u.topBlur?(c("focus",!0)?(g.ReactEventListener.trapCapturedEvent(u.topFocus,"focus",n),g.ReactEventListener.trapCapturedEvent(u.topBlur,"blur",n)):c("focusin")&&(g.ReactEventListener.trapBubbledEvent(u.topFocus,"focusin",n),
g.ReactEventListener.trapBubbledEvent(u.topBlur,"focusout",n)),a[u.topBlur]=!0,a[u.topFocus]=!0):d.hasOwnProperty(h)&&g.ReactEventListener.trapBubbledEvent(h,d[h],n),a[h]=!0)}},trapBubbledEvent:function(e,t,n){return g.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return g.ReactEventListener.trapCapturedEvent(e,t,n)},ensureScrollValueMonitoring:function(){if(!h){var e=u.refreshScrollValues;g.ReactEventListener.monitorScrollValue(e),h=!0}},eventNameDispatchConfigs:a.eventNameDispatchConfigs,registrationNameModules:a.registrationNameModules,putListener:a.putListener,getListener:a.getListener,deleteListener:a.deleteListener,deleteAllListeners:a.deleteAllListeners});t.exports=g},{102:102,134:134,15:15,17:17,18:18,27:27,59:59}],31:[function(e,t,n){"use strict";var r=e(79),i=e(116),a=e(132),o=e(147),s={instantiateChildren:function(e,t,n){var r=i(e);for(var o in r)if(r.hasOwnProperty(o)){var s=r[o],u=a(s,null);r[o]=u}return r},updateChildren:function(e,t,n,s){var u=i(t);if(!u&&!e)return null;var l;for(l in u)if(u.hasOwnProperty(l)){var c=e&&e[l],f=c&&c._currentElement,h=u[l];if(o(f,h))r.receiveComponent(c,h,n,s),u[l]=c;else{c&&r.unmountComponent(c,l);var p=a(h,null);u[l]=p}}for(l in e)!e.hasOwnProperty(l)||u&&u.hasOwnProperty(l)||r.unmountComponent(e[l]);return u},unmountChildren:function(e){for(var t in e){var n=e[t];r.unmountComponent(n)}}};t.exports=s},{116:116,132:132,147:147,79:79}],32:[function(e,t,n){"use strict";function r(e,t){this.forEachFunction=e,this.forEachContext=t}function i(e,t,n,r){var i=e;i.forEachFunction.call(i.forEachContext,t,r)}function a(e,t,n){if(null==e)return e;var a=r.getPooled(t,n);p(e,i,a),r.release(a)}function o(e,t,n){this.mapResult=e,this.mapFunction=t,this.mapContext=n}function s(e,t,n,r){var i=e,a=i.mapResult,o=!a.hasOwnProperty(n);if(o){var s=i.mapFunction.call(i.mapContext,t,r);a[n]=s}}function u(e,t,n){if(null==e)return e;var r={},i=o.getPooled(r,t,n);return p(e,s,i),o.release(i),h.create(r)}function l(e,t,n,r){return null}function c(e,t){return p(e,l,null)}var f=e(28),h=e(61),p=e(149),d=(e(150),f.twoArgumentPooler),m=f.threeArgumentPooler;f.addPoolingTo(r,d),f.addPoolingTo(o,m);var g={forEach:a,map:u,count:c};t.exports=g},{149:149,150:150,28:28,61:61}],33:[function(e,t,n){"use strict";function r(e,t){var n=_.hasOwnProperty(t)?_[t]:null;T.hasOwnProperty(t)&&y(n===S.OVERRIDE_BASE),e.hasOwnProperty(t)&&y(n===S.DEFINE_MANY||n===S.DEFINE_MANY_MERGED)}function i(e,t){if(t){y("function"!=typeof t),y(!h.isValidElement(t));var n=e.prototype;t.hasOwnProperty(x)&&k.mixins(e,t.mixins);for(var i in t)if(t.hasOwnProperty(i)&&i!==x){var a=t[i];if(r(n,i),k.hasOwnProperty(i))k[i](e,a);else{var o=_.hasOwnProperty(i),l=n.hasOwnProperty(i),c=a&&a.__reactDontBind,f="function"==typeof a,p=f&&!o&&!l&&!c;if(p)n.__reactAutoBindMap||(n.__reactAutoBindMap={}),n.__reactAutoBindMap[i]=a,n[i]=a;else if(l){var d=_[i];y(o&&(d===S.DEFINE_MANY_MERGED||d===S.DEFINE_MANY)),d===S.DEFINE_MANY_MERGED?n[i]=s(n[i],a):d===S.DEFINE_MANY&&(n[i]=u(n[i],a))}else n[i]=a}}}}function a(e,t){if(t)for(var n in t){var r=t[n];if(t.hasOwnProperty(n)){var i=n in k;y(!i);var a=n in e;y(!a),e[n]=r}}}function o(e,t){y(e&&t&&"object"==typeof e&&"object"==typeof t);for(var n in t)t.hasOwnProperty(n)&&(y(void 0===e[n]),e[n]=t[n]);return e}function s(e,t){return function(){var n=e.apply(this,arguments),r=t.apply(this,arguments);if(null==n)return r;if(null==r)return n;var i={};return o(i,n),o(i,r),i}}function u(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function l(e,t){var n=t.bind(e);return n}function c(e){for(var t in e.__reactAutoBindMap)if(e.__reactAutoBindMap.hasOwnProperty(t)){var n=e.__reactAutoBindMap[t];e[t]=l(e,p.guard(n,e.constructor.displayName+"."+t))}}var f=e(34),h=(e(39),e(55)),p=e(58),d=e(65),m=e(66),g=(e(75),e(74),e(84)),v=e(27),y=e(133),b=e(138),w=e(139),x=(e(150),w({mixins:null})),S=b({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),C=[],_={mixins:S.DEFINE_MANY,statics:S.DEFINE_MANY,propTypes:S.DEFINE_MANY,contextTypes:S.DEFINE_MANY,childContextTypes:S.DEFINE_MANY,getDefaultProps:S.DEFINE_MANY_MERGED,getInitialState:S.DEFINE_MANY_MERGED,getChildContext:S.DEFINE_MANY_MERGED,render:S.DEFINE_ONCE,componentWillMount:S.DEFINE_MANY,componentDidMount:S.DEFINE_MANY,componentWillReceiveProps:S.DEFINE_MANY,shouldComponentUpdate:S.DEFINE_ONCE,componentWillUpdate:S.DEFINE_MANY,componentDidUpdate:S.DEFINE_MANY,componentWillUnmount:S.DEFINE_MANY,updateComponent:S.OVERRIDE_BASE},k={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)i(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=v({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=v({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=s(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=v({},e.propTypes,t)},statics:function(e,t){a(e,t)}},T={replaceState:function(e,t){g.enqueueReplaceState(this,e),t&&g.enqueueCallback(this,t)},isMounted:function(){var e=d.get(this);return e&&e!==m.currentlyMountingInstance},setProps:function(e,t){g.enqueueSetProps(this,e),t&&g.enqueueCallback(this,t)},replaceProps:function(e,t){g.enqueueReplaceProps(this,e),t&&g.enqueueCallback(this,t)}},M=function(){};v(M.prototype,f.prototype,T);var A={createClass:function(e){var t=function(e,t){this.__reactAutoBindMap&&c(this),this.props=e,this.context=t,this.state=null;var n=this.getInitialState?this.getInitialState():null;y("object"==typeof n&&!Array.isArray(n)),this.state=n};t.prototype=new M,t.prototype.constructor=t,C.forEach(i.bind(null,t)),i(t,e),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),y(t.prototype.render);for(var n in _)t.prototype[n]||(t.prototype[n]=null);return t.type=t,t},injection:{injectMixin:function(e){C.push(e)}}};t.exports=A},{133:133,138:138,139:139,150:150,27:27,34:34,39:39,55:55,58:58,65:65,66:66,74:74,75:75,84:84}],34:[function(e,t,n){"use strict";function r(e,t){this.props=e,this.context=t}var i=e(84),a=e(133);e(150),r.prototype.setState=function(e,t){a("object"==typeof e||"function"==typeof e||null==e),i.enqueueSetState(this,e),t&&i.enqueueCallback(this,t)},r.prototype.forceUpdate=function(e){i.enqueueForceUpdate(this),e&&i.enqueueCallback(this,e)},t.exports=r},{133:133,150:150,84:84}],35:[function(e,t,n){"use strict";var r=e(44),i=e(68),a={processChildrenUpdates:r.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkupByID:r.dangerouslyReplaceNodeWithMarkupByID,unmountIDFromEnvironment:function(e){i.purgeID(e)}};t.exports=a},{44:44,68:68}],36:[function(e,t,n){"use strict";var r=e(133),i=!1,a={unmountIDFromEnvironment:null,replaceNodeWithMarkupByID:null,processChildrenUpdates:null,injection:{injectEnvironment:function(e){r(!i),a.unmountIDFromEnvironment=e.unmountIDFromEnvironment,a.replaceNodeWithMarkupByID=e.replaceNodeWithMarkupByID,a.processChildrenUpdates=e.processChildrenUpdates,i=!0}}};t.exports=a},{133:133}],37:[function(e,t,n){"use strict";function r(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" Check the render method of `"+n+"`."}return""}var i=e(36),a=e(38),o=e(39),s=e(55),u=(e(56),e(65)),l=e(66),c=e(71),f=e(73),h=e(75),p=(e(74),e(79)),d=e(85),m=e(27),g=e(113),v=e(133),y=e(147),b=(e(150),1),w={construct:function(e){this._currentElement=e,this._rootNodeID=null,this._instance=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._isTopLevel=!1,this._pendingCallbacks=null},mountComponent:function(e,t,n){this._context=n,this._mountOrder=b++,this._rootNodeID=e;var r=this._processProps(this._currentElement.props),i=this._processContext(this._currentElement._context),a=c.getComponentClassForElement(this._currentElement),o=new a(r,i);o.props=r,o.context=i,o.refs=g,this._instance=o,u.set(o,this);var s=o.state;void 0===s&&(o.state=s=null),v("object"==typeof s&&!Array.isArray(s)),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var f,h,d=l.currentlyMountingInstance;l.currentlyMountingInstance=this;try{o.componentWillMount&&(o.componentWillMount(),this._pendingStateQueue&&(o.state=this._processPendingState(o.props,o.context))),f=this._getValidatedChildContext(n),h=this._renderValidatedComponent(f)}finally{l.currentlyMountingInstance=d}this._renderedComponent=this._instantiateReactComponent(h,this._currentElement.type);var m=p.mountComponent(this._renderedComponent,e,t,this._mergeChildContext(n,f));return o.componentDidMount&&t.getReactMountReady().enqueue(o.componentDidMount,o),m},unmountComponent:function(){var e=this._instance;if(e.componentWillUnmount){var t=l.currentlyUnmountingInstance;l.currentlyUnmountingInstance=this;try{e.componentWillUnmount()}finally{l.currentlyUnmountingInstance=t}}p.unmountComponent(this._renderedComponent),this._renderedComponent=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=null,u.remove(e)},_setPropsInternal:function(e,t){var n=this._pendingElement||this._currentElement;this._pendingElement=s.cloneAndReplaceProps(n,m({},n.props,e)),d.enqueueUpdate(this,t)},_maskContext:function(e){var t=null;if("string"==typeof this._currentElement.type)return g;var n=this._currentElement.type.contextTypes;if(!n)return g;t={};for(var r in n)t[r]=e[r];return t},_processContext:function(e){var t=this._maskContext(e);return t},_getValidatedChildContext:function(e){var t=this._instance,n=t.getChildContext&&t.getChildContext();if(n){v("object"==typeof t.constructor.childContextTypes);for(var r in n)v(r in t.constructor.childContextTypes);return n}return null},_mergeChildContext:function(e,t){return t?m({},e,t):e},_processProps:function(e){return e},_checkPropTypes:function(e,t,n){var i=this.getName();for(var a in e)if(e.hasOwnProperty(a)){var o;try{v("function"==typeof e[a]),o=e[a](t,a,i,n)}catch(s){o=s}o instanceof Error&&(r(this),n===h.prop)}},receiveComponent:function(e,t,n){var r=this._currentElement,i=this._context;this._pendingElement=null,this.updateComponent(t,r,e,i,n)},performUpdateIfNecessary:function(e){null!=this._pendingElement&&p.receiveComponent(this,this._pendingElement||this._currentElement,e,this._context),(null!==this._pendingStateQueue||this._pendingForceUpdate)&&this.updateComponent(e,this._currentElement,this._currentElement,this._context,this._context)},_warnIfContextsDiffer:function(e,t){e=this._maskContext(e),t=this._maskContext(t);for(var n=Object.keys(t).sort(),r=(this.getName()||"ReactCompositeComponent",0);r<n.length;r++)n[r]},updateComponent:function(e,t,n,r,i){var a=this._instance,o=a.context,s=a.props;t!==n&&(o=this._processContext(n._context),s=this._processProps(n.props),a.componentWillReceiveProps&&a.componentWillReceiveProps(s,o));var u=this._processPendingState(s,o),l=this._pendingForceUpdate||!a.shouldComponentUpdate||a.shouldComponentUpdate(s,u,o);l?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,s,u,o,e,i)):(this._currentElement=n,this._context=i,a.props=s,a.state=u,a.context=o)},_processPendingState:function(e,t){var n=this._instance,r=this._pendingStateQueue,i=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!r)return n.state;if(i&&1===r.length)return r[0];for(var a=m({},i?r[0]:n.state),o=i?1:0;o<r.length;o++){var s=r[o];m(a,"function"==typeof s?s.call(n,a,e,t):s)}return a},_performComponentUpdate:function(e,t,n,r,i,a){var o=this._instance,s=o.props,u=o.state,l=o.context;o.componentWillUpdate&&o.componentWillUpdate(t,n,r),this._currentElement=e,this._context=a,o.props=t,o.state=n,o.context=r,this._updateRenderedComponent(i,a),o.componentDidUpdate&&i.getReactMountReady().enqueue(o.componentDidUpdate.bind(o,s,u,l),o)},_updateRenderedComponent:function(e,t){var n=this._renderedComponent,r=n._currentElement,i=this._getValidatedChildContext(),a=this._renderValidatedComponent(i);if(y(r,a))p.receiveComponent(n,a,e,this._mergeChildContext(t,i));else{var o=this._rootNodeID,s=n._rootNodeID;p.unmountComponent(n),this._renderedComponent=this._instantiateReactComponent(a,this._currentElement.type);var u=p.mountComponent(this._renderedComponent,o,e,this._mergeChildContext(t,i));this._replaceNodeWithMarkupByID(s,u)}},_replaceNodeWithMarkupByID:function(e,t){i.replaceNodeWithMarkupByID(e,t)},_renderValidatedComponentWithoutOwnerOrContext:function(){var e=this._instance,t=e.render();return t},_renderValidatedComponent:function(e){var t,n=a.current;a.current=this._mergeChildContext(this._currentElement._context,e),o.current=this;try{t=this._renderValidatedComponentWithoutOwnerOrContext()}finally{a.current=n,o.current=null}return v(null===t||t===!1||s.isValidElement(t)),t},attachRef:function(e,t){var n=this.getPublicInstance(),r=n.refs===g?n.refs={}:n.refs;r[e]=t.getPublicInstance()},detachRef:function(e){var t=this.getPublicInstance().refs;delete t[e]},getName:function(){var e=this._currentElement.type,t=this._instance&&this._instance.constructor;return e.displayName||t&&t.displayName||e.name||t&&t.name||null},getPublicInstance:function(){return this._instance},_instantiateReactComponent:null};f.measureMethods(w,"ReactCompositeComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent",_renderValidatedComponent:"_renderValidatedComponent"});var x={Mixin:w};t.exports=x},{113:113,133:133,147:147,150:150,27:27,36:36,38:38,39:39,55:55,56:56,65:65,66:66,71:71,73:73,74:74,75:75,79:79,85:85}],38:[function(e,t,n){"use strict";var r=e(27),i=e(113),a=(e(150),{current:i,withContext:function(e,t){var n,i=a.current;a.current=r({},i,e);try{n=t()}finally{a.current=i}return n}});t.exports=a},{113:113,150:150,27:27}],39:[function(e,t,n){"use strict";var r={current:null};t.exports=r},{}],40:[function(e,t,n){"use strict";function r(e){return i.createFactory(e)}var i=e(55),a=(e(56),e(140)),o=a({a:"a",abbr:"abbr",address:"address",area:"area",article:"article",aside:"aside",audio:"audio",b:"b",base:"base",bdi:"bdi",bdo:"bdo",big:"big",blockquote:"blockquote",body:"body",br:"br",button:"button",canvas:"canvas",caption:"caption",cite:"cite",code:"code",col:"col",colgroup:"colgroup",data:"data",datalist:"datalist",dd:"dd",del:"del",details:"details",dfn:"dfn",dialog:"dialog",div:"div",dl:"dl",dt:"dt",em:"em",embed:"embed",fieldset:"fieldset",figcaption:"figcaption",figure:"figure",footer:"footer",form:"form",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",head:"head",header:"header",hr:"hr",html:"html",i:"i",iframe:"iframe",img:"img",input:"input",ins:"ins",kbd:"kbd",keygen:"keygen",label:"label",legend:"legend",li:"li",link:"link",main:"main",map:"map",mark:"mark",menu:"menu",menuitem:"menuitem",meta:"meta",meter:"meter",nav:"nav",noscript:"noscript",object:"object",ol:"ol",optgroup:"optgroup",option:"option",output:"output",p:"p",param:"param",picture:"picture",pre:"pre",progress:"progress",q:"q",rp:"rp",rt:"rt",ruby:"ruby",s:"s",samp:"samp",script:"script",section:"section",select:"select",small:"small",source:"source",span:"span",strong:"strong",style:"style",sub:"sub",summary:"summary",sup:"sup",table:"table",tbody:"tbody",td:"td",textarea:"textarea",tfoot:"tfoot",th:"th",thead:"thead",time:"time",title:"title",tr:"tr",track:"track",u:"u",ul:"ul","var":"var",video:"video",wbr:"wbr",circle:"circle",clipPath:"clipPath",defs:"defs",ellipse:"ellipse",g:"g",line:"line",linearGradient:"linearGradient",mask:"mask",path:"path",pattern:"pattern",polygon:"polygon",polyline:"polyline",radialGradient:"radialGradient",rect:"rect",stop:"stop",svg:"svg",text:"text",tspan:"tspan"},r);t.exports=o},{140:140,55:55,56:56}],41:[function(e,t,n){"use strict";var r=e(2),i=e(29),a=e(33),o=e(55),s=e(138),u=o.createFactory("button"),l=s({onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0}),c=a.createClass({displayName:"ReactDOMButton",tagName:"BUTTON",mixins:[r,i],render:function(){var e={};for(var t in this.props)!this.props.hasOwnProperty(t)||this.props.disabled&&l[t]||(e[t]=this.props[t]);return u(e,this.props.children)}});t.exports=c},{138:138,2:2,29:29,33:33,55:55}],42:[function(e,t,n){"use strict";function r(e){e&&(null!=e.dangerouslySetInnerHTML&&(v(null==e.children),v("object"==typeof e.dangerouslySetInnerHTML&&"__html"in e.dangerouslySetInnerHTML)),v(null==e.style||"object"==typeof e.style))}function i(e,t,n,r){var i=h.findReactContainerForID(e);if(i){var a=i.nodeType===_?i.ownerDocument:i;w(t,a)}r.getPutListenerQueue().enqueuePutListener(e,t,n)}function a(e){E.call(A,e)||(v(M.test(e)),A[e]=!0)}function o(e){a(e),this._tag=e,this._renderedChildren=null,this._previousStyleCopy=null,this._rootNodeID=null}var s=e(5),u=e(10),l=e(11),c=e(30),f=e(35),h=e(68),p=e(69),d=e(73),m=e(27),g=e(114),v=e(133),y=(e(134),e(139)),b=(e(150),c.deleteListener),w=c.listenTo,x=c.registrationNameModules,S={string:!0,number:!0},C=y({style:null}),_=1,k=null,T={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},M=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,A={},E={}.hasOwnProperty;o.displayName="ReactDOMComponent",o.Mixin={construct:function(e){this._currentElement=e},mountComponent:function(e,t,n){this._rootNodeID=e,r(this._currentElement.props);var i=T[this._tag]?"":"</"+this._tag+">";return this._createOpenTagMarkupAndPutListeners(t)+this._createContentMarkup(t,n)+i},_createOpenTagMarkupAndPutListeners:function(e){var t=this._currentElement.props,n="<"+this._tag;for(var r in t)if(t.hasOwnProperty(r)){var a=t[r];if(null!=a)if(x.hasOwnProperty(r))i(this._rootNodeID,r,a,e);else{r===C&&(a&&(a=this._previousStyleCopy=m({},t.style)),a=s.createMarkupForStyles(a));var o=l.createMarkupForProperty(r,a);o&&(n+=" "+o)}}if(e.renderToStaticMarkup)return n+">";var u=l.createMarkupForID(this._rootNodeID);return n+" "+u+">"},_createContentMarkup:function(e,t){var n="";("listing"===this._tag||"pre"===this._tag||"textarea"===this._tag)&&(n="\n");var r=this._currentElement.props,i=r.dangerouslySetInnerHTML;if(null!=i){if(null!=i.__html)return n+i.__html}else{var a=S[typeof r.children]?r.children:null,o=null!=a?null:r.children;if(null!=a)return n+g(a);if(null!=o){var s=this.mountChildren(o,e,t);return n+s.join("")}}return n},receiveComponent:function(e,t,n){var r=this._currentElement;this._currentElement=e,this.updateComponent(t,r,e,n)},updateComponent:function(e,t,n,i){r(this._currentElement.props),this._updateDOMProperties(t.props,e),this._updateDOMChildren(t.props,e,i)},_updateDOMProperties:function(e,t){var n,r,a,o=this._currentElement.props;for(n in e)if(!o.hasOwnProperty(n)&&e.hasOwnProperty(n))if(n===C){var s=this._previousStyleCopy;for(r in s)s.hasOwnProperty(r)&&(a=a||{},a[r]="");this._previousStyleCopy=null}else x.hasOwnProperty(n)?b(this._rootNodeID,n):(u.isStandardName[n]||u.isCustomAttribute(n))&&k.deletePropertyByID(this._rootNodeID,n);for(n in o){var l=o[n],c=n===C?this._previousStyleCopy:e[n];if(o.hasOwnProperty(n)&&l!==c)if(n===C)if(l?l=this._previousStyleCopy=m({},l):this._previousStyleCopy=null,c){for(r in c)!c.hasOwnProperty(r)||l&&l.hasOwnProperty(r)||(a=a||{},a[r]="");for(r in l)l.hasOwnProperty(r)&&c[r]!==l[r]&&(a=a||{},a[r]=l[r])}else a=l;else x.hasOwnProperty(n)?i(this._rootNodeID,n,l,t):(u.isStandardName[n]||u.isCustomAttribute(n))&&k.updatePropertyByID(this._rootNodeID,n,l)}a&&k.updateStylesByID(this._rootNodeID,a)},_updateDOMChildren:function(e,t,n){var r=this._currentElement.props,i=S[typeof e.children]?e.children:null,a=S[typeof r.children]?r.children:null,o=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,s=r.dangerouslySetInnerHTML&&r.dangerouslySetInnerHTML.__html,u=null!=i?null:e.children,l=null!=a?null:r.children,c=null!=i||null!=o,f=null!=a||null!=s;null!=u&&null==l?this.updateChildren(null,t,n):c&&!f&&this.updateTextContent(""),null!=a?i!==a&&this.updateTextContent(""+a):null!=s?o!==s&&k.updateInnerHTMLByID(this._rootNodeID,s):null!=l&&this.updateChildren(l,t,n)},unmountComponent:function(){this.unmountChildren(),c.deleteAllListeners(this._rootNodeID),f.unmountIDFromEnvironment(this._rootNodeID),this._rootNodeID=null}},d.measureMethods(o,"ReactDOMComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent"}),m(o.prototype,o.Mixin,p.Mixin),o.injection={injectIDOperations:function(e){o.BackendIDOperations=k=e}},t.exports=o},{10:10,11:11,114:114,133:133,134:134,139:139,150:150,27:27,30:30,35:35,5:5,68:68,69:69,73:73}],43:[function(e,t,n){"use strict";var r=e(15),i=e(25),a=e(29),o=e(33),s=e(55),u=s.createFactory("form"),l=o.createClass({displayName:"ReactDOMForm",tagName:"FORM",mixins:[a,i],render:function(){return u(this.props)},componentDidMount:function(){this.trapBubbledEvent(r.topLevelTypes.topReset,"reset"),this.trapBubbledEvent(r.topLevelTypes.topSubmit,"submit")}});t.exports=l},{15:15,25:25,29:29,33:33,55:55}],44:[function(e,t,n){"use strict";var r=e(5),i=e(9),a=e(11),o=e(68),s=e(73),u=e(133),l=e(144),c={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},f={updatePropertyByID:function(e,t,n){var r=o.getNode(e);u(!c.hasOwnProperty(t)),null!=n?a.setValueForProperty(r,t,n):a.deleteValueForProperty(r,t)},deletePropertyByID:function(e,t,n){var r=o.getNode(e);u(!c.hasOwnProperty(t)),a.deleteValueForProperty(r,t,n)},updateStylesByID:function(e,t){var n=o.getNode(e);r.setValueForStyles(n,t)},updateInnerHTMLByID:function(e,t){var n=o.getNode(e);l(n,t)},updateTextContentByID:function(e,t){var n=o.getNode(e);i.updateTextContent(n,t)},dangerouslyReplaceNodeWithMarkupByID:function(e,t){var n=o.getNode(e);i.dangerouslyReplaceNodeWithMarkup(n,t)},dangerouslyProcessChildrenUpdates:function(e,t){for(var n=0;n<e.length;n++)e[n].parentNode=o.getNode(e[n].parentID);i.processUpdates(e,t)}};s.measureMethods(f,"ReactDOMIDOperations",{updatePropertyByID:"updatePropertyByID",deletePropertyByID:"deletePropertyByID",updateStylesByID:"updateStylesByID",updateInnerHTMLByID:"updateInnerHTMLByID",updateTextContentByID:"updateTextContentByID",dangerouslyReplaceNodeWithMarkupByID:"dangerouslyReplaceNodeWithMarkupByID",dangerouslyProcessChildrenUpdates:"dangerouslyProcessChildrenUpdates"}),t.exports=f},{11:11,133:133,144:144,5:5,68:68,73:73,9:9}],45:[function(e,t,n){"use strict";var r=e(15),i=e(25),a=e(29),o=e(33),s=e(55),u=s.createFactory("iframe"),l=o.createClass({displayName:"ReactDOMIframe",tagName:"IFRAME",mixins:[a,i],render:function(){return u(this.props)},componentDidMount:function(){this.trapBubbledEvent(r.topLevelTypes.topLoad,"load")}});t.exports=l},{15:15,25:25,29:29,33:33,55:55}],46:[function(e,t,n){"use strict";var r=e(15),i=e(25),a=e(29),o=e(33),s=e(55),u=s.createFactory("img"),l=o.createClass({displayName:"ReactDOMImg",tagName:"IMG",mixins:[a,i],render:function(){return u(this.props)},componentDidMount:function(){this.trapBubbledEvent(r.topLevelTypes.topLoad,"load"),this.trapBubbledEvent(r.topLevelTypes.topError,"error")}});t.exports=l},{15:15,25:25,29:29,33:33,55:55}],47:[function(e,t,n){"use strict";function r(){this.isMounted()&&this.forceUpdate()}var i=e(2),a=e(11),o=e(24),s=e(29),u=e(33),l=e(55),c=e(68),f=e(85),h=e(27),p=e(133),d=l.createFactory("input"),m={},g=u.createClass({displayName:"ReactDOMInput",tagName:"INPUT",mixins:[i,o.Mixin,s],getInitialState:function(){var e=this.props.defaultValue;return{initialChecked:this.props.defaultChecked||!1,initialValue:null!=e?e:null}},render:function(){var e=h({},this.props);e.defaultChecked=null,e.defaultValue=null;var t=o.getValue(this);e.value=null!=t?t:this.state.initialValue;var n=o.getChecked(this);return e.checked=null!=n?n:this.state.initialChecked,e.onChange=this._handleChange,d(e,this.props.children)},componentDidMount:function(){var e=c.getID(this.getDOMNode());m[e]=this},componentWillUnmount:function(){var e=this.getDOMNode(),t=c.getID(e);delete m[t]},componentDidUpdate:function(e,t,n){var r=this.getDOMNode();null!=this.props.checked&&a.setValueForProperty(r,"checked",this.props.checked||!1);var i=o.getValue(this);null!=i&&a.setValueForProperty(r,"value",""+i)},_handleChange:function(e){var t,n=o.getOnChange(this);n&&(t=n.call(this,e)),f.asap(r,this);var i=this.props.name;if("radio"===this.props.type&&null!=i){for(var a=this.getDOMNode(),s=a;s.parentNode;)s=s.parentNode;for(var u=s.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),l=0,h=u.length;h>l;l++){var d=u[l];if(d!==a&&d.form===a.form){var g=c.getID(d);p(g);var v=m[g];p(v),f.asap(r,v)}}}return t}});t.exports=g},{11:11,133:133,2:2,24:24,27:27,29:29,33:33,55:55,68:68,85:85}],48:[function(e,t,n){"use strict";var r=e(29),i=e(33),a=e(55),o=(e(150),a.createFactory("option")),s=i.createClass({displayName:"ReactDOMOption",tagName:"OPTION",mixins:[r],componentWillMount:function(){},render:function(){return o(this.props,this.props.children)}});t.exports=s},{150:150,29:29,33:33,55:55}],49:[function(e,t,n){"use strict";function r(){if(this._pendingUpdate){this._pendingUpdate=!1;var e=s.getValue(this);null!=e&&this.isMounted()&&a(this,e)}}function i(e,t,n){if(null==e[t])return null;if(e.multiple){if(!Array.isArray(e[t]))return new Error("The `"+t+"` prop supplied to <select> must be an array if `multiple` is true.")}else if(Array.isArray(e[t]))return new Error("The `"+t+"` prop supplied to <select> must be a scalar value if `multiple` is false.")}function a(e,t){var n,r,i,a=e.getDOMNode().options;if(e.props.multiple){for(n={},r=0,i=t.length;i>r;r++)n[""+t[r]]=!0;for(r=0,i=a.length;i>r;r++){var o=n.hasOwnProperty(a[r].value);a[r].selected!==o&&(a[r].selected=o)}}else{for(n=""+t,r=0,i=a.length;i>r;r++)if(a[r].value===n)return void(a[r].selected=!0);a.length&&(a[0].selected=!0)}}var o=e(2),s=e(24),u=e(29),l=e(33),c=e(55),f=e(85),h=e(27),p=c.createFactory("select"),d=l.createClass({displayName:"ReactDOMSelect",tagName:"SELECT",mixins:[o,s.Mixin,u],propTypes:{defaultValue:i,value:i},render:function(){var e=h({},this.props);return e.onChange=this._handleChange,e.value=null,p(e,this.props.children)},componentWillMount:function(){this._pendingUpdate=!1},componentDidMount:function(){var e=s.getValue(this);null!=e?a(this,e):null!=this.props.defaultValue&&a(this,this.props.defaultValue)},componentDidUpdate:function(e){var t=s.getValue(this);null!=t?(this._pendingUpdate=!1,a(this,t)):!e.multiple!=!this.props.multiple&&(null!=this.props.defaultValue?a(this,this.props.defaultValue):a(this,this.props.multiple?[]:""))},_handleChange:function(e){var t,n=s.getOnChange(this);return n&&(t=n.call(this,e)),this._pendingUpdate=!0,f.asap(r,this),t}});t.exports=d},{2:2,24:24,27:27,29:29,33:33,55:55,85:85}],50:[function(e,t,n){"use strict";function r(e,t,n,r){return e===n&&t===r}function i(e){var t=document.selection,n=t.createRange(),r=n.text.length,i=n.duplicate();i.moveToElementText(e),i.setEndPoint("EndToStart",n);var a=i.text.length,o=a+r;return{start:a,end:o}}function a(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,i=t.anchorOffset,a=t.focusNode,o=t.focusOffset,s=t.getRangeAt(0),u=r(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),l=u?0:s.toString().length,c=s.cloneRange();c.selectNodeContents(e),c.setEnd(s.startContainer,s.startOffset);var f=r(c.startContainer,c.startOffset,c.endContainer,c.endOffset),h=f?0:c.toString().length,p=h+l,d=document.createRange();d.setStart(n,i),d.setEnd(a,o);var m=d.collapsed;return{start:m?p:h,end:m?h:p}}function o(e,t){var n,r,i=document.selection.createRange().duplicate();"undefined"==typeof t.end?(n=t.start,r=n):t.start>t.end?(n=t.end,r=t.start):(n=t.start,r=t.end),i.moveToElementText(e),i.moveStart("character",n),i.setEndPoint("EndToStart",i),i.moveEnd("character",r-n),i.select()}function s(e,t){if(window.getSelection){var n=window.getSelection(),r=e[c()].length,i=Math.min(t.start,r),a="undefined"==typeof t.end?i:Math.min(t.end,r);if(!n.extend&&i>a){var o=a;a=i,i=o}var s=l(e,i),u=l(e,a);if(s&&u){var f=document.createRange();f.setStart(s.node,s.offset),n.removeAllRanges(),i>a?(n.addRange(f),n.extend(u.node,u.offset)):(f.setEnd(u.node,u.offset),n.addRange(f))}}}var u=e(21),l=e(126),c=e(128),f=u.canUseDOM&&"selection"in document&&!("getSelection"in window),h={getOffsets:f?i:a,setOffsets:f?o:s};t.exports=h},{126:126,128:128,21:21}],51:[function(e,t,n){"use strict";var r=e(11),i=e(35),a=e(42),o=e(27),s=e(114),u=function(e){};o(u.prototype,{construct:function(e){this._currentElement=e,this._stringText=""+e,this._rootNodeID=null,this._mountIndex=0},mountComponent:function(e,t,n){this._rootNodeID=e;var i=s(this._stringText);return t.renderToStaticMarkup?i:"<span "+r.createMarkupForID(e)+">"+i+"</span>"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var n=""+e;n!==this._stringText&&(this._stringText=n,a.BackendIDOperations.updateTextContentByID(this._rootNodeID,n))}},unmountComponent:function(){i.unmountIDFromEnvironment(this._rootNodeID)}}),t.exports=u},{11:11,114:114,27:27,35:35,42:42}],52:[function(e,t,n){"use strict";function r(){this.isMounted()&&this.forceUpdate()}var i=e(2),a=e(11),o=e(24),s=e(29),u=e(33),l=e(55),c=e(85),f=e(27),h=e(133),p=(e(150),l.createFactory("textarea")),d=u.createClass({displayName:"ReactDOMTextarea",tagName:"TEXTAREA",mixins:[i,o.Mixin,s],getInitialState:function(){var e=this.props.defaultValue,t=this.props.children;null!=t&&(h(null==e),Array.isArray(t)&&(h(t.length<=1),t=t[0]),e=""+t),null==e&&(e="");var n=o.getValue(this);return{initialValue:""+(null!=n?n:e)}},render:function(){var e=f({},this.props);return h(null==e.dangerouslySetInnerHTML),e.defaultValue=null,e.value=null,e.onChange=this._handleChange,p(e,this.state.initialValue)},componentDidUpdate:function(e,t,n){var r=o.getValue(this);if(null!=r){var i=this.getDOMNode();a.setValueForProperty(i,"value",""+r)}},_handleChange:function(e){var t,n=o.getOnChange(this);return n&&(t=n.call(this,e)),c.asap(r,this),t}});t.exports=d},{11:11,133:133,150:150,2:2,24:24,27:27,29:29,33:33,55:55,85:85}],53:[function(e,t,n){"use strict";function r(){this.reinitializeTransaction()}var i=e(85),a=e(101),o=e(27),s=e(112),u={initialize:s,close:function(){h.isBatchingUpdates=!1}},l={initialize:s,close:i.flushBatchedUpdates.bind(i)},c=[l,u];o(r.prototype,a.Mixin,{getTransactionWrappers:function(){return c}});var f=new r,h={isBatchingUpdates:!1,batchedUpdates:function(e,t,n,r,i){var a=h.isBatchingUpdates;h.isBatchingUpdates=!0,a?e(t,n,r,i):f.perform(e,null,t,n,r,i)}};t.exports=h},{101:101,112:112,27:27,85:85}],54:[function(e,t,n){"use strict";function r(e){return d.createClass({tagName:e.toUpperCase(),render:function(){return new A(e,null,null,null,null,this.props)}})}function i(){P.EventEmitter.injectReactEventListener(E),P.EventPluginHub.injectEventPluginOrder(u),P.EventPluginHub.injectInstanceHandle(N),P.EventPluginHub.injectMount(O),P.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:F,EnterLeaveEventPlugin:l,ChangeEventPlugin:o,MobileSafariClickEventPlugin:h,SelectEventPlugin:D,BeforeInputEventPlugin:a}),P.NativeComponent.injectGenericComponentClass(v),P.NativeComponent.injectTextComponentClass(M),P.NativeComponent.injectAutoWrapper(r),P.Class.injectMixin(p),P.NativeComponent.injectComponentClasses({button:y,form:b,iframe:S,img:w,input:C,option:_,select:k,textarea:T,html:j("html"),head:j("head"),body:j("body")}),P.DOMProperty.injectDOMPropertyConfig(f),P.DOMProperty.injectDOMPropertyConfig(L),P.EmptyComponent.injectEmptyComponent("noscript"),P.Updates.injectReconcileTransaction(R),P.Updates.injectBatchingStrategy(g),P.RootIndex.injectCreateReactRootIndex(c.canUseDOM?s.createReactRootIndex:I.createReactRootIndex),P.Component.injectEnvironment(m),P.DOMComponent.injectIDOperations(x)}var a=e(3),o=e(7),s=e(8),u=e(13),l=e(14),c=e(21),f=e(23),h=e(26),p=e(29),d=e(33),m=e(35),g=e(53),v=e(42),y=e(41),b=e(43),w=e(46),x=e(44),S=e(45),C=e(47),_=e(48),k=e(49),T=e(52),M=e(51),A=e(55),E=e(60),P=e(62),N=e(64),O=e(68),R=e(78),D=e(87),I=e(88),F=e(89),L=e(86),j=e(109);
t.exports={inject:i}},{109:109,13:13,14:14,21:21,23:23,26:26,29:29,3:3,33:33,35:35,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,51:51,52:52,53:53,55:55,60:60,62:62,64:64,68:68,7:7,78:78,8:8,86:86,87:87,88:88,89:89}],55:[function(e,t,n){"use strict";var r=e(38),i=e(39),a=e(27),o=(e(150),{key:!0,ref:!0}),s=function(e,t,n,r,i,a){this.type=e,this.key=t,this.ref=n,this._owner=r,this._context=i,this.props=a};s.prototype={_isReactElement:!0},s.createElement=function(e,t,n){var a,u={},l=null,c=null;if(null!=t){c=void 0===t.ref?null:t.ref,l=void 0===t.key?null:""+t.key;for(a in t)t.hasOwnProperty(a)&&!o.hasOwnProperty(a)&&(u[a]=t[a])}var f=arguments.length-2;if(1===f)u.children=n;else if(f>1){for(var h=Array(f),p=0;f>p;p++)h[p]=arguments[p+2];u.children=h}if(e&&e.defaultProps){var d=e.defaultProps;for(a in d)"undefined"==typeof u[a]&&(u[a]=d[a])}return new s(e,l,c,i.current,r.current,u)},s.createFactory=function(e){var t=s.createElement.bind(null,e);return t.type=e,t},s.cloneAndReplaceProps=function(e,t){var n=new s(e.type,e.key,e.ref,e._owner,e._context,t);return n},s.cloneElement=function(e,t,n){var r,u=a({},e.props),l=e.key,c=e.ref,f=e._owner;if(null!=t){void 0!==t.ref&&(c=t.ref,f=i.current),void 0!==t.key&&(l=""+t.key);for(r in t)t.hasOwnProperty(r)&&!o.hasOwnProperty(r)&&(u[r]=t[r])}var h=arguments.length-2;if(1===h)u.children=n;else if(h>1){for(var p=Array(h),d=0;h>d;d++)p[d]=arguments[d+2];u.children=p}return new s(e.type,l,c,f,e._context,u)},s.isValidElement=function(e){var t=!(!e||!e._isReactElement);return t},t.exports=s},{150:150,27:27,38:38,39:39}],56:[function(e,t,n){"use strict";function r(){if(y.current){var e=y.current.getName();if(e)return" Check the render method of `"+e+"`."}return""}function i(e){var t=e&&e.getPublicInstance();if(t){var n=t.constructor;return n?n.displayName||n.name||void 0:void 0}}function a(){var e=y.current;return e&&i(e)||void 0}function o(e,t){e._store.validated||null!=e.key||(e._store.validated=!0,u('Each child in an array or iterator should have a unique "key" prop.',e,t))}function s(e,t,n){_.test(e)&&u("Child objects should have non-numeric keys so ordering is preserved.",t,n)}function u(e,t,n){var r=a(),o="string"==typeof n?n:n.displayName||n.name,s=r||o,u=S[e]||(S[e]={});if(!u.hasOwnProperty(s)){u[s]=!0;var l="";if(t&&t._owner&&t._owner!==y.current){var c=i(t._owner);l=" It was passed a child from "+c+"."}}}function l(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++){var r=e[n];m.isValidElement(r)&&o(r,t)}else if(m.isValidElement(e))e._store.validated=!0;else if(e){var i=w(e);if(i){if(i!==e.entries)for(var a,u=i.call(e);!(a=u.next()).done;)m.isValidElement(a.value)&&o(a.value,t)}else if("object"==typeof e){var l=g.extractIfFragment(e);for(var c in l)l.hasOwnProperty(c)&&s(c,l[c],t)}}}function c(e,t,n,i){for(var a in t)if(t.hasOwnProperty(a)){var o;try{x("function"==typeof t[a]),o=t[a](n,a,e,i)}catch(s){o=s}o instanceof Error&&!(o.message in C)&&(C[o.message]=!0,r(this))}}function f(e,t){var n=t.type,r="string"==typeof n?n:n.displayName,i=t._owner?t._owner.getPublicInstance().constructor.displayName:null,a=e+"|"+r+"|"+i;if(!k.hasOwnProperty(a)){k[a]=!0;var o="";r&&(o=" <"+r+" />");var s="";i&&(s=" The element was created by "+i+".")}}function h(e,t){return e!==e?t!==t:0===e&&0===t?1/e===1/t:e===t}function p(e){if(e._store){var t=e._store.originalProps,n=e.props;for(var r in n)n.hasOwnProperty(r)&&(t.hasOwnProperty(r)&&h(t[r],n[r])||(f(r,e),t[r]=n[r]))}}function d(e){if(null!=e.type){var t=b.getComponentClassForElement(e),n=t.displayName||t.name;t.propTypes&&c(n,t.propTypes,e.props,v.prop),"function"==typeof t.getDefaultProps}}var m=e(55),g=e(61),v=e(75),y=(e(74),e(39)),b=e(71),w=e(124),x=e(133),S=(e(150),{}),C={},_=/^\d+$/,k={},T={checkAndWarnForMutatedProps:p,createElement:function(e,t,n){var r=m.createElement.apply(this,arguments);if(null==r)return r;for(var i=2;i<arguments.length;i++)l(arguments[i],e);return d(r),r},createFactory:function(e){var t=T.createElement.bind(null,e);return t.type=e,t},cloneElement:function(e,t,n){for(var r=m.cloneElement.apply(this,arguments),i=2;i<arguments.length;i++)l(arguments[i],r.type);return d(r),r}};t.exports=T},{124:124,133:133,150:150,39:39,55:55,61:61,71:71,74:74,75:75}],57:[function(e,t,n){"use strict";function r(e){c[e]=!0}function i(e){delete c[e]}function a(e){return!!c[e]}var o,s=e(55),u=e(65),l=e(133),c={},f={injectEmptyComponent:function(e){o=s.createFactory(e)}},h=function(){};h.prototype.componentDidMount=function(){var e=u.get(this);e&&r(e._rootNodeID)},h.prototype.componentWillUnmount=function(){var e=u.get(this);e&&i(e._rootNodeID)},h.prototype.render=function(){return l(o),o()};var p=s.createElement(h),d={emptyElement:p,injection:f,isNullComponentID:a};t.exports=d},{133:133,55:55,65:65}],58:[function(e,t,n){"use strict";var r={guard:function(e,t){return e}};t.exports=r},{}],59:[function(e,t,n){"use strict";function r(e){i.enqueueEvents(e),i.processEventQueue()}var i=e(17),a={handleTopLevel:function(e,t,n,a){var o=i.extractEvents(e,t,n,a);r(o)}};t.exports=a},{17:17}],60:[function(e,t,n){"use strict";function r(e){var t=f.getID(e),n=c.getReactRootIDFromNodeID(t),r=f.findReactContainerForID(n),i=f.getFirstReactDOM(r);return i}function i(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function a(e){for(var t=f.getFirstReactDOM(d(e.nativeEvent))||window,n=t;n;)e.ancestors.push(n),n=r(n);for(var i=0,a=e.ancestors.length;a>i;i++){t=e.ancestors[i];var o=f.getID(t)||"";g._handleTopLevel(e.topLevelType,t,o,e.nativeEvent)}}function o(e){var t=m(window);e(t)}var s=e(16),u=e(21),l=e(28),c=e(64),f=e(68),h=e(85),p=e(27),d=e(123),m=e(129);p(i.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),l.addPoolingTo(i,l.twoArgumentPooler);var g={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:u.canUseDOM?window:null,setHandleTopLevel:function(e){g._handleTopLevel=e},setEnabled:function(e){g._enabled=!!e},isEnabled:function(){return g._enabled},trapBubbledEvent:function(e,t,n){var r=n;return r?s.listen(r,t,g.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){var r=n;return r?s.capture(r,t,g.dispatchEvent.bind(null,e)):null},monitorScrollValue:function(e){var t=o.bind(null,e);s.listen(window,"scroll",t)},dispatchEvent:function(e,t){if(g._enabled){var n=i.getPooled(e,t);try{h.batchedUpdates(a,n)}finally{i.release(n)}}}};t.exports=g},{123:123,129:129,16:16,21:21,27:27,28:28,64:64,68:68,85:85}],61:[function(e,t,n){"use strict";var r=(e(55),e(150),{create:function(e){return e},extract:function(e){return e},extractIfFragment:function(e){return e}});t.exports=r},{150:150,55:55}],62:[function(e,t,n){"use strict";var r=e(10),i=e(17),a=e(36),o=e(33),s=e(57),u=e(30),l=e(71),c=e(42),f=e(73),h=e(81),p=e(85),d={Component:a.injection,Class:o.injection,DOMComponent:c.injection,DOMProperty:r.injection,EmptyComponent:s.injection,EventPluginHub:i.injection,EventEmitter:u.injection,NativeComponent:l.injection,Perf:f.injection,RootIndex:h.injection,Updates:p.injection};t.exports=d},{10:10,17:17,30:30,33:33,36:36,42:42,57:57,71:71,73:73,81:81,85:85}],63:[function(e,t,n){"use strict";function r(e){return a(document.documentElement,e)}var i=e(50),a=e(107),o=e(117),s=e(119),u={hasSelectionCapabilities:function(e){return e&&("INPUT"===e.nodeName&&"text"===e.type||"TEXTAREA"===e.nodeName||"true"===e.contentEditable)},getSelectionInformation:function(){var e=s();return{focusedElem:e,selectionRange:u.hasSelectionCapabilities(e)?u.getSelection(e):null}},restoreSelection:function(e){var t=s(),n=e.focusedElem,i=e.selectionRange;t!==n&&r(n)&&(u.hasSelectionCapabilities(n)&&u.setSelection(n,i),o(n))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&"INPUT"===e.nodeName){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=i.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,r=t.end;if("undefined"==typeof r&&(r=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(r,e.value.length);else if(document.selection&&"INPUT"===e.nodeName){var a=e.createTextRange();a.collapse(!0),a.moveStart("character",n),a.moveEnd("character",r-n),a.select()}else i.setOffsets(e,t)}};t.exports=u},{107:107,117:117,119:119,50:50}],64:[function(e,t,n){"use strict";function r(e){return p+e.toString(36)}function i(e,t){return e.charAt(t)===p||t===e.length}function a(e){return""===e||e.charAt(0)===p&&e.charAt(e.length-1)!==p}function o(e,t){return 0===t.indexOf(e)&&i(t,e.length)}function s(e){return e?e.substr(0,e.lastIndexOf(p)):""}function u(e,t){if(h(a(e)&&a(t)),h(o(e,t)),e===t)return e;var n,r=e.length+d;for(n=r;n<t.length&&!i(t,n);n++);return t.substr(0,n)}function l(e,t){var n=Math.min(e.length,t.length);if(0===n)return"";for(var r=0,o=0;n>=o;o++)if(i(e,o)&&i(t,o))r=o;else if(e.charAt(o)!==t.charAt(o))break;var s=e.substr(0,r);return h(a(s)),s}function c(e,t,n,r,i,a){e=e||"",t=t||"",h(e!==t);var l=o(t,e);h(l||o(e,t));for(var c=0,f=l?s:u,p=e;;p=f(p,t)){var d;if(i&&p===e||a&&p===t||(d=n(p,l,r)),d===!1||p===t)break;h(c++<m)}}var f=e(81),h=e(133),p=".",d=p.length,m=100,g={createReactRootID:function(){return r(f.createReactRootIndex())},createReactID:function(e,t){return e+t},getReactRootIDFromNodeID:function(e){if(e&&e.charAt(0)===p&&e.length>1){var t=e.indexOf(p,1);return t>-1?e.substr(0,t):e}return null},traverseEnterLeave:function(e,t,n,r,i){var a=l(e,t);a!==e&&c(e,a,n,r,!1,!0),a!==t&&c(a,t,n,i,!0,!1)},traverseTwoPhase:function(e,t,n){e&&(c("",e,t,n,!0,!1),c(e,"",t,n,!1,!0))},traverseAncestors:function(e,t,n){c("",e,t,n,!0,!1)},_getFirstCommonAncestorID:l,_getNextDescendantID:u,isAncestorIDOf:o,SEPARATOR:p};t.exports=g},{133:133,81:81}],65:[function(e,t,n){"use strict";var r={remove:function(e){e._reactInternalInstance=void 0},get:function(e){return e._reactInternalInstance},has:function(e){return void 0!==e._reactInternalInstance},set:function(e,t){e._reactInternalInstance=t}};t.exports=r},{}],66:[function(e,t,n){"use strict";var r={currentlyMountingInstance:null,currentlyUnmountingInstance:null};t.exports=r},{}],67:[function(e,t,n){"use strict";var r=e(104),i={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=r(e);return e.replace(">"," "+i.CHECKSUM_ATTR_NAME+'="'+t+'">')},canReuseMarkup:function(e,t){var n=t.getAttribute(i.CHECKSUM_ATTR_NAME);n=n&&parseInt(n,10);var a=r(e);return a===n}};t.exports=i},{104:104}],68:[function(e,t,n){"use strict";function r(e,t){for(var n=Math.min(e.length,t.length),r=0;n>r;r++)if(e.charAt(r)!==t.charAt(r))return r;return e.length===t.length?-1:n}function i(e){var t=E(e);return t&&z.getID(t)}function a(e){var t=o(e);if(t)if(F.hasOwnProperty(t)){var n=F[t];n!==e&&(N(!c(n,t)),F[t]=e)}else F[t]=e;return t}function o(e){return e&&e.getAttribute&&e.getAttribute(I)||""}function s(e,t){var n=o(e);n!==t&&delete F[n],e.setAttribute(I,t),F[t]=e}function u(e){return F.hasOwnProperty(e)&&c(F[e],e)||(F[e]=z.findReactNodeByID(e)),F[e]}function l(e){var t=x.get(e)._rootNodeID;return b.isNullComponentID(t)?null:(F.hasOwnProperty(t)&&c(F[t],t)||(F[t]=z.findReactNodeByID(t)),F[t])}function c(e,t){if(e){N(o(e)===t);var n=z.findReactContainerForID(t);if(n&&A(n,e))return!0}return!1}function f(e){delete F[e]}function h(e){var t=F[e];return t&&c(t,e)?void(V=t):!1}function p(e){V=null,w.traverseAncestors(e,h);var t=V;return V=null,t}function d(e,t,n,r,i){var a=_.mountComponent(e,t,r,M);e._isTopLevel=!0,z._mountImageIntoNode(a,n,i)}function m(e,t,n,r){var i=T.ReactReconcileTransaction.getPooled();i.perform(d,null,e,t,n,i,r),T.ReactReconcileTransaction.release(i)}var g=e(10),v=e(30),y=(e(39),e(55)),b=(e(56),e(57)),w=e(64),x=e(65),S=e(67),C=e(73),_=e(79),k=e(84),T=e(85),M=e(113),A=e(107),E=e(127),P=e(132),N=e(133),O=e(144),R=e(147),D=(e(150),w.SEPARATOR),I=g.ID_ATTRIBUTE_NAME,F={},L=1,j=9,B={},U={},q=[],V=null,z={_instancesByReactRootID:B,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,r){return z.scrollMonitor(n,function(){k.enqueueElementInternal(e,t),r&&k.enqueueCallbackInternal(e,r)}),e},_registerComponent:function(e,t){N(t&&(t.nodeType===L||t.nodeType===j)),v.ensureScrollValueMonitoring();var n=z.registerContainer(t);return B[n]=e,n},_renderNewRootComponent:function(e,t,n){var r=P(e,null),i=z._registerComponent(r,t);return T.batchedUpdates(m,r,i,t,n),r},render:function(e,t,n){N(y.isValidElement(e));var r=B[i(t)];if(r){var a=r._currentElement;if(R(a,e))return z._updateRootComponent(r,e,t,n).getPublicInstance();z.unmountComponentAtNode(t)}var o=E(t),s=o&&z.isRenderedByReact(o),u=s&&!r,l=z._renderNewRootComponent(e,t,u).getPublicInstance();return n&&n.call(l),l},constructAndRenderComponent:function(e,t,n){var r=y.createElement(e,t);return z.render(r,n)},constructAndRenderComponentByID:function(e,t,n){var r=document.getElementById(n);return N(r),z.constructAndRenderComponent(e,t,r)},registerContainer:function(e){var t=i(e);return t&&(t=w.getReactRootIDFromNodeID(t)),t||(t=w.createReactRootID()),U[t]=e,t},unmountComponentAtNode:function(e){N(e&&(e.nodeType===L||e.nodeType===j));var t=i(e),n=B[t];return n?(z.unmountComponentFromNode(n,e),delete B[t],delete U[t],!0):!1},unmountComponentFromNode:function(e,t){for(_.unmountComponent(e),t.nodeType===j&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)},findReactContainerForID:function(e){var t=w.getReactRootIDFromNodeID(e),n=U[t];return n},findReactNodeByID:function(e){var t=z.findReactContainerForID(e);return z.findComponentRoot(t,e)},isRenderedByReact:function(e){if(1!==e.nodeType)return!1;var t=z.getID(e);return t?t.charAt(0)===D:!1},getFirstReactDOM:function(e){for(var t=e;t&&t.parentNode!==t;){if(z.isRenderedByReact(t))return t;t=t.parentNode}return null},findComponentRoot:function(e,t){var n=q,r=0,i=p(t)||e;for(n[0]=i.firstChild,n.length=1;r<n.length;){for(var a,o=n[r++];o;){var s=z.getID(o);s?t===s?a=o:w.isAncestorIDOf(s,t)&&(n.length=r=0,n.push(o.firstChild)):n.push(o.firstChild),o=o.nextSibling}if(a)return n.length=0,a}n.length=0,N(!1)},_mountImageIntoNode:function(e,t,n){if(N(t&&(t.nodeType===L||t.nodeType===j)),n){var i=E(t);if(S.canReuseMarkup(e,i))return;var a=i.getAttribute(S.CHECKSUM_ATTR_NAME);i.removeAttribute(S.CHECKSUM_ATTR_NAME);var o=i.outerHTML;i.setAttribute(S.CHECKSUM_ATTR_NAME,a);var s=r(e,o);" (client) "+e.substring(s-20,s+20)+"\n (server) "+o.substring(s-20,s+20),N(t.nodeType!==j)}N(t.nodeType!==j),O(t,e)},getReactRootID:i,getID:a,setID:s,getNode:u,getNodeFromInstance:l,purgeID:f};C.measureMethods(z,"ReactMount",{_renderNewRootComponent:"_renderNewRootComponent",_mountImageIntoNode:"_mountImageIntoNode"}),t.exports=z},{10:10,107:107,113:113,127:127,132:132,133:133,144:144,147:147,150:150,30:30,39:39,55:55,56:56,57:57,64:64,65:65,67:67,73:73,79:79,84:84,85:85}],69:[function(e,t,n){"use strict";function r(e,t,n){d.push({parentID:e,parentNode:null,type:c.INSERT_MARKUP,markupIndex:m.push(t)-1,textContent:null,fromIndex:null,toIndex:n})}function i(e,t,n){d.push({parentID:e,parentNode:null,type:c.MOVE_EXISTING,markupIndex:null,textContent:null,fromIndex:t,toIndex:n})}function a(e,t){d.push({parentID:e,parentNode:null,type:c.REMOVE_NODE,markupIndex:null,textContent:null,fromIndex:t,toIndex:null})}function o(e,t){d.push({parentID:e,parentNode:null,type:c.TEXT_CONTENT,markupIndex:null,textContent:t,fromIndex:null,toIndex:null})}function s(){d.length&&(l.processChildrenUpdates(d,m),u())}function u(){d.length=0,m.length=0}var l=e(36),c=e(70),f=e(79),h=e(31),p=0,d=[],m=[],g={Mixin:{mountChildren:function(e,t,n){var r=h.instantiateChildren(e,t,n);this._renderedChildren=r;var i=[],a=0;for(var o in r)if(r.hasOwnProperty(o)){var s=r[o],u=this._rootNodeID+o,l=f.mountComponent(s,u,t,n);s._mountIndex=a,i.push(l),a++}return i},updateTextContent:function(e){p++;var t=!0;try{var n=this._renderedChildren;h.unmountChildren(n);for(var r in n)n.hasOwnProperty(r)&&this._unmountChildByName(n[r],r);this.setTextContent(e),t=!1}finally{p--,p||(t?u():s())}},updateChildren:function(e,t,n){p++;var r=!0;try{this._updateChildren(e,t,n),r=!1}finally{p--,p||(r?u():s())}},_updateChildren:function(e,t,n){var r=this._renderedChildren,i=h.updateChildren(r,e,t,n);if(this._renderedChildren=i,i||r){var a,o=0,s=0;for(a in i)if(i.hasOwnProperty(a)){var u=r&&r[a],l=i[a];u===l?(this.moveChild(u,s,o),o=Math.max(u._mountIndex,o),u._mountIndex=s):(u&&(o=Math.max(u._mountIndex,o),this._unmountChildByName(u,a)),this._mountChildByNameAtIndex(l,a,s,t,n)),s++}for(a in r)!r.hasOwnProperty(a)||i&&i.hasOwnProperty(a)||this._unmountChildByName(r[a],a)}},unmountChildren:function(){var e=this._renderedChildren;h.unmountChildren(e),this._renderedChildren=null},moveChild:function(e,t,n){e._mountIndex<n&&i(this._rootNodeID,e._mountIndex,t)},createChild:function(e,t){r(this._rootNodeID,t,e._mountIndex)},removeChild:function(e){a(this._rootNodeID,e._mountIndex)},setTextContent:function(e){o(this._rootNodeID,e)},_mountChildByNameAtIndex:function(e,t,n,r,i){var a=this._rootNodeID+t,o=f.mountComponent(e,a,r,i);e._mountIndex=n,this.createChild(e,o)},_unmountChildByName:function(e,t){this.removeChild(e),e._mountIndex=null}}};t.exports=g},{31:31,36:36,70:70,79:79}],70:[function(e,t,n){"use strict";var r=e(138),i=r({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,TEXT_CONTENT:null});t.exports=i},{138:138}],71:[function(e,t,n){"use strict";function r(e){if("function"==typeof e.type)return e.type;var t=e.type,n=f[t];return null==n&&(f[t]=n=l(t)),n}function i(e){return u(c),new c(e.type,e.props)}function a(e){return new h(e)}function o(e){return e instanceof h}var s=e(27),u=e(133),l=null,c=null,f={},h=null,p={injectGenericComponentClass:function(e){c=e},injectTextComponentClass:function(e){h=e},injectComponentClasses:function(e){s(f,e)},injectAutoWrapper:function(e){l=e}},d={getComponentClassForElement:r,createInternalComponent:i,createInstanceForText:a,isTextComponent:o,injection:p};t.exports=d},{133:133,27:27}],72:[function(e,t,n){"use strict";var r=e(133),i={isValidOwner:function(e){return!(!e||"function"!=typeof e.attachRef||"function"!=typeof e.detachRef)},addComponentAsRefTo:function(e,t,n){r(i.isValidOwner(n)),n.attachRef(t,e)},removeComponentAsRefFrom:function(e,t,n){r(i.isValidOwner(n)),n.getPublicInstance().refs[t]===e.getPublicInstance()&&n.detachRef(t)}};t.exports=i},{133:133}],73:[function(e,t,n){"use strict";function r(e,t,n){return n}var i={enableMeasure:!1,storedMeasure:r,measureMethods:function(e,t,n){},measure:function(e,t,n){return n},injection:{injectMeasure:function(e){i.storedMeasure=e}}};t.exports=i},{}],74:[function(e,t,n){"use strict";var r={};t.exports=r},{}],75:[function(e,t,n){"use strict";var r=e(138),i=r({prop:null,context:null,childContext:null});t.exports=i},{138:138}],76:[function(e,t,n){"use strict";function r(e){function t(t,n,r,i,a){if(i=i||x,null==n[r]){var o=b[a];return t?new Error("Required "+o+" `"+r+"` was not specified in "+("`"+i+"`.")):null}return e(n,r,i,a)}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function i(e){function t(t,n,r,i){var a=t[n],o=m(a);if(o!==e){var s=b[i],u=g(a);return new Error("Invalid "+s+" `"+n+"` of type `"+u+"` "+("supplied to `"+r+"`, expected `"+e+"`."))}return null}return r(t)}function a(){return r(w.thatReturns(null))}function o(e){function t(t,n,r,i){var a=t[n];if(!Array.isArray(a)){var o=b[i],s=m(a);return new Error("Invalid "+o+" `"+n+"` of type "+("`"+s+"` supplied to `"+r+"`, expected an array."))}for(var u=0;u<a.length;u++){var l=e(a,u,r,i);if(l instanceof Error)return l}return null}return r(t)}function s(){function e(e,t,n,r){if(!v.isValidElement(e[t])){var i=b[r];return new Error("Invalid "+i+" `"+t+"` supplied to "+("`"+n+"`, expected a ReactElement."))}return null}return r(e)}function u(e){function t(t,n,r,i){if(!(t[n]instanceof e)){var a=b[i],o=e.name||x;return new Error("Invalid "+a+" `"+n+"` supplied to "+("`"+r+"`, expected instance of `"+o+"`."))}return null}return r(t)}function l(e){function t(t,n,r,i){for(var a=t[n],o=0;o<e.length;o++)if(a===e[o])return null;var s=b[i],u=JSON.stringify(e);return new Error("Invalid "+s+" `"+n+"` of value `"+a+"` "+("supplied to `"+r+"`, expected one of "+u+"."))}return r(t)}function c(e){function t(t,n,r,i){var a=t[n],o=m(a);if("object"!==o){var s=b[i];return new Error("Invalid "+s+" `"+n+"` of type "+("`"+o+"` supplied to `"+r+"`, expected an object."))}for(var u in a)if(a.hasOwnProperty(u)){var l=e(a,u,r,i);if(l instanceof Error)return l}return null}return r(t)}function f(e){function t(t,n,r,i){for(var a=0;a<e.length;a++){var o=e[a];if(null==o(t,n,r,i))return null}var s=b[i];return new Error("Invalid "+s+" `"+n+"` supplied to "+("`"+r+"`."))}return r(t)}function h(){function e(e,t,n,r){if(!d(e[t])){var i=b[r];return new Error("Invalid "+i+" `"+t+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return null}return r(e)}function p(e){function t(t,n,r,i){var a=t[n],o=m(a);if("object"!==o){var s=b[i];return new Error("Invalid "+s+" `"+n+"` of type `"+o+"` "+("supplied to `"+r+"`, expected `object`."))}for(var u in e){var l=e[u];if(l){var c=l(a,u,r,i);if(c)return c}}return null}return r(t)}function d(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(d);if(null===e||v.isValidElement(e))return!0;e=y.extractIfFragment(e);for(var t in e)if(!d(e[t]))return!1;return!0;default:return!1}}function m(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":t}function g(e){var t=m(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}var v=e(55),y=e(61),b=e(74),w=e(112),x="<<anonymous>>",S=s(),C=h(),_={array:i("array"),bool:i("boolean"),func:i("function"),number:i("number"),object:i("object"),string:i("string"),any:a(),arrayOf:o,element:S,instanceOf:u,node:C,objectOf:c,oneOf:l,oneOfType:f,shape:p};t.exports=_},{112:112,55:55,61:61,74:74}],77:[function(e,t,n){"use strict";function r(){this.listenersToPut=[]}var i=e(28),a=e(30),o=e(27);o(r.prototype,{enqueuePutListener:function(e,t,n){this.listenersToPut.push({rootNodeID:e,propKey:t,propValue:n})},putListeners:function(){for(var e=0;e<this.listenersToPut.length;e++){var t=this.listenersToPut[e];a.putListener(t.rootNodeID,t.propKey,t.propValue)}},reset:function(){this.listenersToPut.length=0},destructor:function(){this.reset()}}),i.addPoolingTo(r),t.exports=r},{27:27,28:28,30:30}],78:[function(e,t,n){"use strict";function r(){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=i.getPooled(null),this.putListenerQueue=u.getPooled()}var i=e(6),a=e(28),o=e(30),s=e(63),u=e(77),l=e(101),c=e(27),f={initialize:s.getSelectionInformation,close:s.restoreSelection},h={initialize:function(){var e=o.isEnabled();return o.setEnabled(!1),e},close:function(e){o.setEnabled(e)}},p={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},d={initialize:function(){this.putListenerQueue.reset()},close:function(){this.putListenerQueue.putListeners()}},m=[d,f,h,p],g={getTransactionWrappers:function(){return m},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){i.release(this.reactMountReady),this.reactMountReady=null,u.release(this.putListenerQueue),this.putListenerQueue=null}};c(r.prototype,l.Mixin,g),a.addPoolingTo(r),t.exports=r},{101:101,27:27,28:28,30:30,6:6,63:63,77:77}],79:[function(e,t,n){"use strict";function r(){i.attachRefs(this,this._currentElement)}var i=e(80),a=(e(56),{mountComponent:function(e,t,n,i){var a=e.mountComponent(t,n,i);return n.getReactMountReady().enqueue(r,e),a},unmountComponent:function(e){i.detachRefs(e,e._currentElement),e.unmountComponent()},receiveComponent:function(e,t,n,a){var o=e._currentElement;if(t!==o||null==t._owner){var s=i.shouldUpdateRefs(o,t);s&&i.detachRefs(e,o),e.receiveComponent(t,n,a),s&&n.getReactMountReady().enqueue(r,e)}},performUpdateIfNecessary:function(e,t){e.performUpdateIfNecessary(t)}});t.exports=a},{56:56,80:80}],80:[function(e,t,n){"use strict";function r(e,t,n){"function"==typeof e?e(t.getPublicInstance()):a.addComponentAsRefTo(t,e,n)}function i(e,t,n){"function"==typeof e?e(null):a.removeComponentAsRefFrom(t,e,n)}var a=e(72),o={};o.attachRefs=function(e,t){var n=t.ref;null!=n&&r(n,e,t._owner)},o.shouldUpdateRefs=function(e,t){return t._owner!==e._owner||t.ref!==e.ref},o.detachRefs=function(e,t){var n=t.ref;null!=n&&i(n,e,t._owner)},t.exports=o},{72:72}],81:[function(e,t,n){"use strict";var r={injectCreateReactRootIndex:function(e){i.createReactRootIndex=e}},i={createReactRootIndex:null,injection:r};t.exports=i},{}],82:[function(e,t,n){"use strict";function r(e){f(a.isValidElement(e));var t;try{var n=o.createReactRootID();return t=u.getPooled(!1),t.perform(function(){var r=c(e,null),i=r.mountComponent(n,t,l);return s.addChecksumToMarkup(i)},null)}finally{u.release(t)}}function i(e){f(a.isValidElement(e));var t;try{var n=o.createReactRootID();return t=u.getPooled(!0),t.perform(function(){var r=c(e,null);return r.mountComponent(n,t,l)},null)}finally{u.release(t)}}var a=e(55),o=e(64),s=e(67),u=e(83),l=e(113),c=e(132),f=e(133);t.exports={renderToString:r,renderToStaticMarkup:i}},{113:113,132:132,133:133,55:55,64:64,67:67,83:83}],83:[function(e,t,n){"use strict";function r(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.reactMountReady=a.getPooled(null),this.putListenerQueue=o.getPooled()}var i=e(28),a=e(6),o=e(77),s=e(101),u=e(27),l=e(112),c={initialize:function(){this.reactMountReady.reset()},close:l},f={initialize:function(){this.putListenerQueue.reset()},close:l},h=[f,c],p={getTransactionWrappers:function(){return h},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){a.release(this.reactMountReady),this.reactMountReady=null,o.release(this.putListenerQueue),this.putListenerQueue=null}};u(r.prototype,s.Mixin,p),i.addPoolingTo(r),t.exports=r},{101:101,112:112,27:27,28:28,6:6,77:77}],84:[function(e,t,n){"use strict";function r(e){e!==a.currentlyMountingInstance&&l.enqueueUpdate(e)}function i(e,t){f(null==o.current);var n=u.get(e);return n?n===a.currentlyUnmountingInstance?null:n:null}var a=e(66),o=e(39),s=e(55),u=e(65),l=e(85),c=e(27),f=e(133),h=(e(150),{enqueueCallback:function(e,t){f("function"==typeof t);var n=i(e);return n&&n!==a.currentlyMountingInstance?(n._pendingCallbacks?n._pendingCallbacks.push(t):n._pendingCallbacks=[t],void r(n)):null},enqueueCallbackInternal:function(e,t){f("function"==typeof t),e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t],r(e)},enqueueForceUpdate:function(e){var t=i(e,"forceUpdate");t&&(t._pendingForceUpdate=!0,r(t))},enqueueReplaceState:function(e,t){var n=i(e,"replaceState");n&&(n._pendingStateQueue=[t],n._pendingReplaceState=!0,r(n))},enqueueSetState:function(e,t){var n=i(e,"setState");if(n){var a=n._pendingStateQueue||(n._pendingStateQueue=[]);a.push(t),r(n)}},enqueueSetProps:function(e,t){var n=i(e,"setProps");if(n){f(n._isTopLevel);var a=n._pendingElement||n._currentElement,o=c({},a.props,t);n._pendingElement=s.cloneAndReplaceProps(a,o),r(n)}},enqueueReplaceProps:function(e,t){var n=i(e,"replaceProps");if(n){f(n._isTopLevel);var a=n._pendingElement||n._currentElement;n._pendingElement=s.cloneAndReplaceProps(a,t),r(n)}},enqueueElementInternal:function(e,t){e._pendingElement=t,r(e)}});t.exports=h},{133:133,150:150,27:27,39:39,55:55,65:65,66:66,85:85}],85:[function(e,t,n){"use strict";function r(){g(T.ReactReconcileTransaction&&w)}function i(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=c.getPooled(),this.reconcileTransaction=T.ReactReconcileTransaction.getPooled()}function a(e,t,n,i,a){r(),w.batchedUpdates(e,t,n,i,a)}function o(e,t){return e._mountOrder-t._mountOrder}function s(e){var t=e.dirtyComponentsLength;g(t===v.length),v.sort(o);for(var n=0;t>n;n++){var r=v[n],i=r._pendingCallbacks;if(r._pendingCallbacks=null,p.performUpdateIfNecessary(r,e.reconcileTransaction),i)for(var a=0;a<i.length;a++)e.callbackQueue.enqueue(i[a],r.getPublicInstance())}}function u(e){return r(),w.isBatchingUpdates?void v.push(e):void w.batchedUpdates(u,e)}function l(e,t){g(w.isBatchingUpdates),y.enqueue(e,t),b=!0}var c=e(6),f=e(28),h=(e(39),e(73)),p=e(79),d=e(101),m=e(27),g=e(133),v=(e(150),[]),y=c.getPooled(),b=!1,w=null,x={initialize:function(){this.dirtyComponentsLength=v.length},close:function(){this.dirtyComponentsLength!==v.length?(v.splice(0,this.dirtyComponentsLength),_()):v.length=0}},S={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},C=[x,S];m(i.prototype,d.Mixin,{getTransactionWrappers:function(){return C},destructor:function(){this.dirtyComponentsLength=null,c.release(this.callbackQueue),this.callbackQueue=null,T.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,n){return d.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,n)}}),f.addPoolingTo(i);var _=function(){for(;v.length||b;){if(v.length){var e=i.getPooled();e.perform(s,null,e),i.release(e)}if(b){b=!1;var t=y;y=c.getPooled(),t.notifyAll(),c.release(t)}}};_=h.measure("ReactUpdates","flushBatchedUpdates",_);var k={injectReconcileTransaction:function(e){g(e),T.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){g(e),g("function"==typeof e.batchedUpdates),g("boolean"==typeof e.isBatchingUpdates),w=e}},T={ReactReconcileTransaction:null,batchedUpdates:a,enqueueUpdate:u,flushBatchedUpdates:_,injection:k,asap:l};t.exports=T},{101:101,133:133,150:150,27:27,28:28,39:39,6:6,73:73,79:79}],86:[function(e,t,n){"use strict";var r=e(10),i=r.injection.MUST_USE_ATTRIBUTE,a={Properties:{clipPath:i,cx:i,cy:i,d:i,dx:i,dy:i,fill:i,fillOpacity:i,fontFamily:i,fontSize:i,fx:i,fy:i,gradientTransform:i,gradientUnits:i,markerEnd:i,markerMid:i,markerStart:i,offset:i,opacity:i,patternContentUnits:i,patternUnits:i,points:i,preserveAspectRatio:i,r:i,rx:i,ry:i,spreadMethod:i,stopColor:i,stopOpacity:i,stroke:i,strokeDasharray:i,strokeLinecap:i,strokeOpacity:i,strokeWidth:i,textAnchor:i,transform:i,version:i,viewBox:i,x1:i,x2:i,x:i,y1:i,y2:i,y:i},DOMAttributeNames:{clipPath:"clip-path",fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",patternContentUnits:"patternContentUnits",patternUnits:"patternUnits",preserveAspectRatio:"preserveAspectRatio",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox"}};t.exports=a},{10:10}],87:[function(e,t,n){"use strict";function r(e){if("selectionStart"in e&&s.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function i(e){if(y||null==m||m!==l())return null;var t=r(m);if(!v||!h(v,t)){v=t;var n=u.getPooled(d.select,g,e);return n.type="select",n.target=m,o.accumulateTwoPhaseDispatches(n),n}}var a=e(15),o=e(20),s=e(63),u=e(93),l=e(119),c=e(136),f=e(139),h=e(146),p=a.topLevelTypes,d={select:{phasedRegistrationNames:{bubbled:f({onSelect:null}),captured:f({onSelectCapture:null})},dependencies:[p.topBlur,p.topContextMenu,p.topFocus,p.topKeyDown,p.topMouseDown,p.topMouseUp,p.topSelectionChange]
}},m=null,g=null,v=null,y=!1,b={eventTypes:d,extractEvents:function(e,t,n,r){switch(e){case p.topFocus:(c(t)||"true"===t.contentEditable)&&(m=t,g=n,v=null);break;case p.topBlur:m=null,g=null,v=null;break;case p.topMouseDown:y=!0;break;case p.topContextMenu:case p.topMouseUp:return y=!1,i(r);case p.topSelectionChange:case p.topKeyDown:case p.topKeyUp:return i(r)}}};t.exports=b},{119:119,136:136,139:139,146:146,15:15,20:20,63:63,93:93}],88:[function(e,t,n){"use strict";var r=Math.pow(2,53),i={createReactRootIndex:function(){return Math.ceil(Math.random()*r)}};t.exports=i},{}],89:[function(e,t,n){"use strict";var r=e(15),i=e(19),a=e(20),o=e(90),s=e(93),u=e(94),l=e(96),c=e(97),f=e(92),h=e(98),p=e(99),d=e(100),m=e(120),g=e(133),v=e(139),y=(e(150),r.topLevelTypes),b={blur:{phasedRegistrationNames:{bubbled:v({onBlur:!0}),captured:v({onBlurCapture:!0})}},click:{phasedRegistrationNames:{bubbled:v({onClick:!0}),captured:v({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:v({onContextMenu:!0}),captured:v({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:v({onCopy:!0}),captured:v({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:v({onCut:!0}),captured:v({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:v({onDoubleClick:!0}),captured:v({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:v({onDrag:!0}),captured:v({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:v({onDragEnd:!0}),captured:v({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:v({onDragEnter:!0}),captured:v({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:v({onDragExit:!0}),captured:v({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:v({onDragLeave:!0}),captured:v({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:v({onDragOver:!0}),captured:v({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:v({onDragStart:!0}),captured:v({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:v({onDrop:!0}),captured:v({onDropCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:v({onFocus:!0}),captured:v({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:v({onInput:!0}),captured:v({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:v({onKeyDown:!0}),captured:v({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:v({onKeyPress:!0}),captured:v({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:v({onKeyUp:!0}),captured:v({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:v({onLoad:!0}),captured:v({onLoadCapture:!0})}},error:{phasedRegistrationNames:{bubbled:v({onError:!0}),captured:v({onErrorCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:v({onMouseDown:!0}),captured:v({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:v({onMouseMove:!0}),captured:v({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:v({onMouseOut:!0}),captured:v({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:v({onMouseOver:!0}),captured:v({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:v({onMouseUp:!0}),captured:v({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:v({onPaste:!0}),captured:v({onPasteCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:v({onReset:!0}),captured:v({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:v({onScroll:!0}),captured:v({onScrollCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:v({onSubmit:!0}),captured:v({onSubmitCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:v({onTouchCancel:!0}),captured:v({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:v({onTouchEnd:!0}),captured:v({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:v({onTouchMove:!0}),captured:v({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:v({onTouchStart:!0}),captured:v({onTouchStartCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:v({onWheel:!0}),captured:v({onWheelCapture:!0})}}},w={topBlur:b.blur,topClick:b.click,topContextMenu:b.contextMenu,topCopy:b.copy,topCut:b.cut,topDoubleClick:b.doubleClick,topDrag:b.drag,topDragEnd:b.dragEnd,topDragEnter:b.dragEnter,topDragExit:b.dragExit,topDragLeave:b.dragLeave,topDragOver:b.dragOver,topDragStart:b.dragStart,topDrop:b.drop,topError:b.error,topFocus:b.focus,topInput:b.input,topKeyDown:b.keyDown,topKeyPress:b.keyPress,topKeyUp:b.keyUp,topLoad:b.load,topMouseDown:b.mouseDown,topMouseMove:b.mouseMove,topMouseOut:b.mouseOut,topMouseOver:b.mouseOver,topMouseUp:b.mouseUp,topPaste:b.paste,topReset:b.reset,topScroll:b.scroll,topSubmit:b.submit,topTouchCancel:b.touchCancel,topTouchEnd:b.touchEnd,topTouchMove:b.touchMove,topTouchStart:b.touchStart,topWheel:b.wheel};for(var x in w)w[x].dependencies=[x];var S={eventTypes:b,executeDispatch:function(e,t,n){var r=i.executeDispatch(e,t,n);r===!1&&(e.stopPropagation(),e.preventDefault())},extractEvents:function(e,t,n,r){var i=w[e];if(!i)return null;var v;switch(e){case y.topInput:case y.topLoad:case y.topError:case y.topReset:case y.topSubmit:v=s;break;case y.topKeyPress:if(0===m(r))return null;case y.topKeyDown:case y.topKeyUp:v=l;break;case y.topBlur:case y.topFocus:v=u;break;case y.topClick:if(2===r.button)return null;case y.topContextMenu:case y.topDoubleClick:case y.topMouseDown:case y.topMouseMove:case y.topMouseOut:case y.topMouseOver:case y.topMouseUp:v=c;break;case y.topDrag:case y.topDragEnd:case y.topDragEnter:case y.topDragExit:case y.topDragLeave:case y.topDragOver:case y.topDragStart:case y.topDrop:v=f;break;case y.topTouchCancel:case y.topTouchEnd:case y.topTouchMove:case y.topTouchStart:v=h;break;case y.topScroll:v=p;break;case y.topWheel:v=d;break;case y.topCopy:case y.topCut:case y.topPaste:v=o}g(v);var b=v.getPooled(i,n,r);return a.accumulateTwoPhaseDispatches(b),b}};t.exports=S},{100:100,120:120,133:133,139:139,15:15,150:150,19:19,20:20,90:90,92:92,93:93,94:94,96:96,97:97,98:98,99:99}],90:[function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=e(93),a={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};i.augmentClass(r,a),t.exports=r},{93:93}],91:[function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=e(93),a={data:null};i.augmentClass(r,a),t.exports=r},{93:93}],92:[function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=e(97),a={dataTransfer:null};i.augmentClass(r,a),t.exports=r},{97:97}],93:[function(e,t,n){"use strict";function r(e,t,n){this.dispatchConfig=e,this.dispatchMarker=t,this.nativeEvent=n;var r=this.constructor.Interface;for(var i in r)if(r.hasOwnProperty(i)){var a=r[i];a?this[i]=a(n):this[i]=n[i]}var s=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;s?this.isDefaultPrevented=o.thatReturnsTrue:this.isDefaultPrevented=o.thatReturnsFalse,this.isPropagationStopped=o.thatReturnsFalse}var i=e(28),a=e(27),o=e(112),s=e(123),u={type:null,target:s,currentTarget:o.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};a(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e.preventDefault?e.preventDefault():e.returnValue=!1,this.isDefaultPrevented=o.thatReturnsTrue},stopPropagation:function(){var e=this.nativeEvent;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,this.isPropagationStopped=o.thatReturnsTrue},persist:function(){this.isPersistent=o.thatReturnsTrue},isPersistent:o.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),r.Interface=u,r.augmentClass=function(e,t){var n=this,r=Object.create(n.prototype);a(r,e.prototype),e.prototype=r,e.prototype.constructor=e,e.Interface=a({},n.Interface,t),e.augmentClass=n.augmentClass,i.addPoolingTo(e,i.threeArgumentPooler)},i.addPoolingTo(r,i.threeArgumentPooler),t.exports=r},{112:112,123:123,27:27,28:28}],94:[function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=e(99),a={relatedTarget:null};i.augmentClass(r,a),t.exports=r},{99:99}],95:[function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=e(93),a={data:null};i.augmentClass(r,a),t.exports=r},{93:93}],96:[function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=e(99),a=e(120),o=e(121),s=e(122),u={key:o,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:s,charCode:function(e){return"keypress"===e.type?a(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?a(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};i.augmentClass(r,u),t.exports=r},{120:120,121:121,122:122,99:99}],97:[function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=e(99),a=e(102),o=e(122),s={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:o,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+a.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+a.currentScrollTop}};i.augmentClass(r,s),t.exports=r},{102:102,122:122,99:99}],98:[function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=e(99),a=e(122),o={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:a};i.augmentClass(r,o),t.exports=r},{122:122,99:99}],99:[function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=e(93),a=e(123),o={view:function(e){if(e.view)return e.view;var t=a(e);if(null!=t&&t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};i.augmentClass(r,o),t.exports=r},{123:123,93:93}],100:[function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=e(97),a={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};i.augmentClass(r,a),t.exports=r},{97:97}],101:[function(e,t,n){"use strict";var r=e(133),i={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,n,i,a,o,s,u){r(!this.isInTransaction());var l,c;try{this._isInTransaction=!0,l=!0,this.initializeAll(0),c=e.call(t,n,i,a,o,s,u),l=!1}finally{try{if(l)try{this.closeAll(0)}catch(f){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return c},initializeAll:function(e){for(var t=this.transactionWrappers,n=e;n<t.length;n++){var r=t[n];try{this.wrapperInitData[n]=a.OBSERVED_ERROR,this.wrapperInitData[n]=r.initialize?r.initialize.call(this):null}finally{if(this.wrapperInitData[n]===a.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(i){}}}},closeAll:function(e){r(this.isInTransaction());for(var t=this.transactionWrappers,n=e;n<t.length;n++){var i,o=t[n],s=this.wrapperInitData[n];try{i=!0,s!==a.OBSERVED_ERROR&&o.close&&o.close.call(this,s),i=!1}finally{if(i)try{this.closeAll(n+1)}catch(u){}}}this.wrapperInitData.length=0}},a={Mixin:i,OBSERVED_ERROR:{}};t.exports=a},{133:133}],102:[function(e,t,n){"use strict";var r={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(e){r.currentScrollLeft=e.x,r.currentScrollTop=e.y}};t.exports=r},{}],103:[function(e,t,n){"use strict";function r(e,t){if(i(null!=t),null==e)return t;var n=Array.isArray(e),r=Array.isArray(t);return n&&r?(e.push.apply(e,t),e):n?(e.push(t),e):r?[e].concat(t):[e,t]}var i=e(133);t.exports=r},{133:133}],104:[function(e,t,n){"use strict";function r(e){for(var t=1,n=0,r=0;r<e.length;r++)t=(t+e.charCodeAt(r))%i,n=(n+t)%i;return t|n<<16}var i=65521;t.exports=r},{}],105:[function(e,t,n){function r(e){return e.replace(i,function(e,t){return t.toUpperCase()})}var i=/-(.)/g;t.exports=r},{}],106:[function(e,t,n){"use strict";function r(e){return i(e.replace(a,"ms-"))}var i=e(105),a=/^-ms-/;t.exports=r},{105:105}],107:[function(e,t,n){function r(e,t){var n=!0;e:for(;n;){var r=e,a=t;if(n=!1,r&&a){if(r===a)return!0;if(i(r))return!1;if(i(a)){e=r,t=a.parentNode,n=!0;continue e}return r.contains?r.contains(a):r.compareDocumentPosition?!!(16&r.compareDocumentPosition(a)):!1}return!1}}var i=e(137);t.exports=r},{137:137}],108:[function(e,t,n){function r(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}function i(e){return r(e)?Array.isArray(e)?e.slice():a(e):[e]}var a=e(148);t.exports=i},{148:148}],109:[function(e,t,n){"use strict";function r(e){var t=a.createFactory(e),n=i.createClass({tagName:e.toUpperCase(),displayName:"ReactFullPageComponent"+e,componentWillUnmount:function(){o(!1)},render:function(){return t(this.props)}});return n}var i=e(33),a=e(55),o=e(133);t.exports=r},{133:133,33:33,55:55}],110:[function(e,t,n){function r(e){var t=e.match(c);return t&&t[1].toLowerCase()}function i(e,t){var n=l;u(!!l);var i=r(e),a=i&&s(i);if(a){n.innerHTML=a[1]+e+a[2];for(var c=a[0];c--;)n=n.lastChild}else n.innerHTML=e;var f=n.getElementsByTagName("script");f.length&&(u(t),o(f).forEach(t));for(var h=o(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return h}var a=e(21),o=e(108),s=e(125),u=e(133),l=a.canUseDOM?document.createElement("div"):null,c=/^\s*<(\w+)/;t.exports=i},{108:108,125:125,133:133,21:21}],111:[function(e,t,n){"use strict";function r(e,t){var n=null==t||"boolean"==typeof t||""===t;if(n)return"";var r=isNaN(t);return r||0===t||a.hasOwnProperty(e)&&a[e]?""+t:("string"==typeof t&&(t=t.trim()),t+"px")}var i=e(4),a=i.isUnitlessNumber;t.exports=r},{4:4}],112:[function(e,t,n){function r(e){return function(){return e}}function i(){}i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},t.exports=i},{}],113:[function(e,t,n){"use strict";var r={};t.exports=r},{}],114:[function(e,t,n){"use strict";function r(e){return a[e]}function i(e){return(""+e).replace(o,r)}var a={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},o=/[&><"']/g;t.exports=i},{}],115:[function(e,t,n){"use strict";function r(e){return null==e?null:s(e)?e:i.has(e)?a.getNodeFromInstance(e):(o(null==e.render||"function"!=typeof e.render),void o(!1))}var i=(e(39),e(65)),a=e(68),o=e(133),s=e(135);e(150),t.exports=r},{133:133,135:135,150:150,39:39,65:65,68:68}],116:[function(e,t,n){"use strict";function r(e,t,n){var r=e,i=!r.hasOwnProperty(n);i&&null!=t&&(r[n]=t)}function i(e){if(null==e)return e;var t={};return a(e,r,t),t}var a=e(149);e(150),t.exports=i},{149:149,150:150}],117:[function(e,t,n){"use strict";function r(e){try{e.focus()}catch(t){}}t.exports=r},{}],118:[function(e,t,n){"use strict";var r=function(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)};t.exports=r},{}],119:[function(e,t,n){function r(){try{return document.activeElement||document.body}catch(e){return document.body}}t.exports=r},{}],120:[function(e,t,n){"use strict";function r(e){var t,n=e.keyCode;return"charCode"in e?(t=e.charCode,0===t&&13===n&&(t=13)):t=n,t>=32||13===t?t:0}t.exports=r},{}],121:[function(e,t,n){"use strict";function r(e){if(e.key){var t=a[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=i(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?o[e.keyCode]||"Unidentified":""}var i=e(120),a={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};t.exports=r},{120:120}],122:[function(e,t,n){"use strict";function r(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var r=a[e];return r?!!n[r]:!1}function i(e){return r}var a={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};t.exports=i},{}],123:[function(e,t,n){"use strict";function r(e){var t=e.target||e.srcElement||window;return 3===t.nodeType?t.parentNode:t}t.exports=r},{}],124:[function(e,t,n){"use strict";function r(e){var t=e&&(i&&e[i]||e[a]);return"function"==typeof t?t:void 0}var i="function"==typeof Symbol&&Symbol.iterator,a="@@iterator";t.exports=r},{}],125:[function(e,t,n){function r(e){return a(!!o),h.hasOwnProperty(e)||(e="*"),s.hasOwnProperty(e)||("*"===e?o.innerHTML="<link />":o.innerHTML="<"+e+"></"+e+">",s[e]=!o.firstChild),s[e]?h[e]:null}var i=e(21),a=e(133),o=i.canUseDOM?document.createElement("div"):null,s={circle:!0,clipPath:!0,defs:!0,ellipse:!0,g:!0,line:!0,linearGradient:!0,path:!0,polygon:!0,polyline:!0,radialGradient:!0,rect:!0,stop:!0,text:!0},u=[1,'<select multiple="true">',"</select>"],l=[1,"<table>","</table>"],c=[3,"<table><tbody><tr>","</tr></tbody></table>"],f=[1,"<svg>","</svg>"],h={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:u,option:u,caption:l,colgroup:l,tbody:l,tfoot:l,thead:l,td:c,th:c,circle:f,clipPath:f,defs:f,ellipse:f,g:f,line:f,linearGradient:f,path:f,polygon:f,polyline:f,radialGradient:f,rect:f,stop:f,text:f};t.exports=r},{133:133,21:21}],126:[function(e,t,n){"use strict";function r(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function i(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function a(e,t){for(var n=r(e),a=0,o=0;n;){if(3===n.nodeType){if(o=a+n.textContent.length,t>=a&&o>=t)return{node:n,offset:t-a};a=o}n=r(i(n))}}t.exports=a},{}],127:[function(e,t,n){"use strict";function r(e){return e?e.nodeType===i?e.documentElement:e.firstChild:null}var i=9;t.exports=r},{}],128:[function(e,t,n){"use strict";function r(){return!a&&i.canUseDOM&&(a="textContent"in document.documentElement?"textContent":"innerText"),a}var i=e(21),a=null;t.exports=r},{21:21}],129:[function(e,t,n){"use strict";function r(e){return e===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}t.exports=r},{}],130:[function(e,t,n){function r(e){return e.replace(i,"-$1").toLowerCase()}var i=/([A-Z])/g;t.exports=r},{}],131:[function(e,t,n){"use strict";function r(e){return i(e).replace(a,"-ms-")}var i=e(130),a=/^ms-/;t.exports=r},{130:130}],132:[function(e,t,n){"use strict";function r(e){return"function"==typeof e&&"undefined"!=typeof e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent}function i(e,t){var n;if((null===e||e===!1)&&(e=o.emptyElement),"object"==typeof e){var i=e;n=t===i.type&&"string"==typeof i.type?s.createInternalComponent(i):r(i.type)?new i.type(i):new c}else"string"==typeof e||"number"==typeof e?n=s.createInstanceForText(e):l(!1);return n.construct(e),n._mountIndex=0,n._mountImage=null,n}var a=e(37),o=e(57),s=e(71),u=e(27),l=e(133),c=(e(150),function(){});u(c.prototype,a.Mixin,{_instantiateReactComponent:i}),t.exports=i},{133:133,150:150,27:27,37:37,57:57,71:71}],133:[function(e,t,n){"use strict";var r=function(e,t,n,r,i,a,o,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,a,o,s],c=0;u=new Error("Invariant Violation: "+t.replace(/%s/g,function(){return l[c++]}))}throw u.framesToPop=1,u}};t.exports=r},{}],134:[function(e,t,n){"use strict";function r(e,t){if(!a.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,r=n in document;if(!r){var o=document.createElement("div");o.setAttribute(n,"return;"),r="function"==typeof o[n]}return!r&&i&&"wheel"===e&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var i,a=e(21);a.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),t.exports=r},{21:21}],135:[function(e,t,n){function r(e){return!(!e||!("function"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}t.exports=r},{}],136:[function(e,t,n){"use strict";function r(e){return e&&("INPUT"===e.nodeName&&i[e.type]||"TEXTAREA"===e.nodeName)}var i={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};t.exports=r},{}],137:[function(e,t,n){function r(e){return i(e)&&3==e.nodeType}var i=e(135);t.exports=r},{135:135}],138:[function(e,t,n){"use strict";var r=e(133),i=function(e){var t,n={};r(e instanceof Object&&!Array.isArray(e));for(t in e)e.hasOwnProperty(t)&&(n[t]=t);return n};t.exports=i},{133:133}],139:[function(e,t,n){var r=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return t;return null};t.exports=r},{}],140:[function(e,t,n){"use strict";function r(e,t,n){if(!e)return null;var r={};for(var a in e)i.call(e,a)&&(r[a]=t.call(n,e[a],a,e));return r}var i=Object.prototype.hasOwnProperty;t.exports=r},{}],141:[function(e,t,n){"use strict";function r(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}t.exports=r},{}],142:[function(e,t,n){"use strict";function r(e){return a(i.isValidElement(e)),e}var i=e(55),a=e(133);t.exports=r},{133:133,55:55}],143:[function(e,t,n){"use strict";function r(e){return'"'+i(e)+'"'}var i=e(114);t.exports=r},{114:114}],144:[function(e,t,n){"use strict";var r=e(21),i=/^[ \r\n\t\f]/,a=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,o=function(e,t){e.innerHTML=t};if("undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction&&(o=function(e,t){MSApp.execUnsafeLocalFunction(function(){e.innerHTML=t})}),r.canUseDOM){var s=document.createElement("div");s.innerHTML=" ",""===s.innerHTML&&(o=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),i.test(t)||"<"===t[0]&&a.test(t)){e.innerHTML="\ufeff"+t;var n=e.firstChild;1===n.data.length?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t})}t.exports=o},{21:21}],145:[function(e,t,n){"use strict";var r=e(21),i=e(114),a=e(144),o=function(e,t){e.textContent=t};r.canUseDOM&&("textContent"in document.documentElement||(o=function(e,t){a(e,i(t))})),t.exports=o},{114:114,144:144,21:21}],146:[function(e,t,n){"use strict";function r(e,t){if(e===t)return!0;var n;for(n in e)if(e.hasOwnProperty(n)&&(!t.hasOwnProperty(n)||e[n]!==t[n]))return!1;for(n in t)if(t.hasOwnProperty(n)&&!e.hasOwnProperty(n))return!1;return!0}t.exports=r},{}],147:[function(e,t,n){"use strict";function r(e,t){if(null!=e&&null!=t){var n=typeof e,r=typeof t;if("string"===n||"number"===n)return"string"===r||"number"===r;if("object"===r&&e.type===t.type&&e.key===t.key){var i=e._owner===t._owner;return i}}return!1}e(150),t.exports=r},{150:150}],148:[function(e,t,n){function r(e){var t=e.length;if(i(!Array.isArray(e)&&("object"==typeof e||"function"==typeof e)),i("number"==typeof t),i(0===t||t-1 in e),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(n){}for(var r=Array(t),a=0;t>a;a++)r[a]=e[a];return r}var i=e(133);t.exports=r},{133:133}],149:[function(e,t,n){"use strict";function r(e){return g[e]}function i(e,t){return e&&null!=e.key?o(e.key):t.toString(36)}function a(e){return(""+e).replace(v,r)}function o(e){return"$"+a(e)}function s(e,t,n,r,a){var u=typeof e;if(("undefined"===u||"boolean"===u)&&(e=null),null===e||"string"===u||"number"===u||l.isValidElement(e))return r(a,e,""===t?d+i(e,0):t,n),1;var f,g,v,y=0;if(Array.isArray(e))for(var b=0;b<e.length;b++)f=e[b],g=(""!==t?t+m:d)+i(f,b),v=n+y,y+=s(f,g,v,r,a);else{var w=h(e);if(w){var x,S=w.call(e);if(w!==e.entries)for(var C=0;!(x=S.next()).done;)f=x.value,g=(""!==t?t+m:d)+i(f,C++),v=n+y,y+=s(f,g,v,r,a);else for(;!(x=S.next()).done;){var _=x.value;_&&(f=_[1],g=(""!==t?t+m:d)+o(_[0])+m+i(f,0),v=n+y,y+=s(f,g,v,r,a))}}else if("object"===u){p(1!==e.nodeType);var k=c.extract(e);for(var T in k)k.hasOwnProperty(T)&&(f=k[T],g=(""!==t?t+m:d)+o(T)+m+i(f,0),v=n+y,y+=s(f,g,v,r,a))}}return y}function u(e,t,n){return null==e?0:s(e,"",0,t,n)}var l=e(55),c=e(61),f=e(64),h=e(124),p=e(133),d=(e(150),f.SEPARATOR),m=":",g={"=":"=0",".":"=1",":":"=2"},v=/[=.:]/g;t.exports=u},{124:124,133:133,150:150,55:55,61:61,64:64}],150:[function(e,t,n){"use strict";var r=e(112),i=r;t.exports=i},{112:112}]},{},[1])(1)})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=n(1),a=r(i),o=n(6),s=a["default"].createActions(["selectVTIcon","setVTIcon","newKeyframe","newMultipleKeyframes","selectKeyframe","selectKeyframes","addSelectedKeyframe","addSelectedKeyframes","addToggleSelectedKeyframe","selectKeyframesInRange","addSelectedKeyframesInRange","unselectKeyframe","unselectKeyframes","selectAllKeyframes","selectTimeRange","selectAllTimeRange","unselectTimeRange","moveSelectedKeyframes","startMovingSelectedKeyframes","undo","redo","deleteSelectedKeyframes"]),u=a["default"].createStore({listenables:[s],init:function(){this._data={main:{duration:3e3,selected:!0,selectedTimeRange:{active:!1,time1:0,time2:0},parameters:{amplitude:{valueScale:[0,1],data:[{id:0,t:1500,value:.5,selected:!1}]},frequency:{valueScale:[50,500],data:[{id:1,t:1500,value:250,selected:!1}]}}},example:{duration:3e3,selected:!1,selectedTimeRange:{active:!1,time1:0,time2:0},parameters:{amplitude:{valueScale:[0,1],data:[{id:6,t:600,value:.5,selected:!1},{id:7,t:1500,value:1,selected:!1},{id:8,t:3e3,value:0,selected:!1}]},frequency:{valueScale:[50,500],data:[{id:9,t:0,value:250,selected:!1},{id:10,t:1200,value:50,selected:!1},{id:11,t:1800,value:500,selected:!1}]}}}},this._previousStates=[],this._nextStates=[],this._kfuidCount=0;for(var e in this._data)for(var t in this._data[e].parameters)for(var n in this._data[e].parameters[t].data)this._kfuidCount+=1},getInitialState:function(){return this._data},_selectVTIcon:function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],t="";if(e in this._data){t=e;for(var n in this._data)this._data[n].selected=e===n}else for(var n in this._data)this._data[n].selected&&(t=n);return o.actions.log("VTICON_SELECT_"+t),t},onSelectVTIcon:function(e){this._selectVTIcon(e),this.trigger(this._data)},onSetVTIcon:function(e,t){if(t in this._data){this._data[t].duration=e.duration,this._data[t].selectedTimeRange.active=!1;for(var n in this._data[t].parameters){this._data[t].parameters[n].valueScale=e.parameters[n].valueScale,this._data[t].parameters[n].data=[];for(var r=0;r<e.parameters[n].data.length;r++){var i=e.parameters[n].data[r];this._addNewKeyframe(n,i.t,i.value,!1,t=t)}this._setAllKeyframes(!1,t)}}this.trigger(this._data)},onNewKeyframe:function(e,t,n){var r=arguments.length<=3||void 0===arguments[3]?!1:arguments[3],i=arguments.length<=4||void 0===arguments[4]?"":arguments[4];this._saveStateForUndo(),i=this._selectVTIcon(i),o.actions.log("VTICON_NEWKEYFRAME_"+i);var a=this._addNewKeyframe(e,t,n,r,i=i);a>=0&&(r?this.trigger(this._data):this.onSelectKeyframe(a))},onNewMultipleKeyframes:function(e){var t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],n=arguments.length<=2||void 0===arguments[2]?"":arguments[2];this._saveStateForUndo(),n=this._selectVTIcon(n);var r=[];if(t){var i={},a={};for(var o in e){o in i||(i[o]=-1),o in a||(a[o]=-1);for(var s=0;s<e[o].length;s++)(-1==i[o]||e[o][s].t<i[o])&&(i[o]=e[o][s].t),(-1==a[o]||e[o][s].t>a[o])&&(a[o]=e[o][s].t)}var u=[];for(var o in this._data[n].parameters)for(var s=0;s<this._data[n].parameters[o].data.length;s++)this._data[n].parameters[o].data[s].t>=i[o]&&this._data[n].parameters[o].data[s].t<=a[o]&&u.push(this._data[n].parameters[o].data[s].id);this._setSelectedKeyframes(u,!0,n=n),this.onDeleteSelectedKeyframes(n);for(var o in this._data[n].parameters)for(var s=0;s<this._data[n].parameters[o].data.length;s++)this._data[n].parameters[o].data[s].t>=i[o]&&this._data[n].parameters[o].data[s].t<=a[o]&&r.push(this._data[n].parameters[o].data[s].id)}this._setAllKeyframes(!1,n=n);for(var o in e)for(var s=0;s<e[o].length;s++)this._addNewKeyframe(o,e[o][s].t,e[o][s].value,!0,n=n);var l=function(e){return r.indexOf(e.id)<0};for(var o in this._data[n].parameters)this._data[n].parameters[o].data=this._data[n].parameters[o].data.filter(l);this.trigger(this._data)},_addNewKeyframe:function(e,t,n){var r=(arguments.length<=3||void 0===arguments[3]?!1:arguments[3],arguments.length<=4||void 0===arguments[4]?"":arguments[4]);r=this._selectVTIcon(r);var i=-1;return this._isValidKeyframePosition(e,t,n,r=r)&&(i=this._getNewKFUID(),this._data[r].parameters[e].data.push({id:i,t:t,value:n,selected:!0}),this._data[r].parameters[e].data.sort(this._keyframeCompare)),i},onSelectKeyframe:function(e){var t=arguments.length<=1||void 0===arguments[1]?"":arguments[1];t=this._selectVTIcon(t),this._setSelectedKeyframes([e],!0,t=t)},onSelectKeyframes:function(e){var t=arguments.length<=1||void 0===arguments[1]?"":arguments[1];t=this._selectVTIcon(t),this._setSelectedKeyframes(e,!0,t=t)},onAddSelectedKeyframe:function(e){var t=arguments.length<=1||void 0===arguments[1]?"":arguments[1];t=this._selectVTIcon(t),this._setSelectedKeyframes([e],!1,t=t)},onAddSelectedKeyframes:function(e){var t=arguments.length<=1||void 0===arguments[1]?"":arguments[1];t=this._selectVTIcon(t),this._setSelectedKeyframes(e,!0,t=t)},onAddToggleSelectedKeyframe:function(e){var t=arguments.length<=1||void 0===arguments[1]?"":arguments[1];t=this._selectVTIcon(t);for(var n in this._data[t].parameters)for(var r=0;r<this._data[t].parameters[n].data.length;r++)this._data[t].parameters[n].data[r].id==e&&(this._data[t].parameters[n].data[r].selected=!this._data[t].parameters[n].data[r].selected);this.trigger(this._data)},onUnselectKeyframe:function(e){var t=arguments.length<=1||void 0===arguments[1]?"":arguments[1];t=this._selectVTIcon(t),this._setUnselectedKeyframes([e],!1,t=t)},onUnselectKeyframes:function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];e=this._selectVTIcon(e),this._setAllKeyframes(!1,e=e)},onSelectAllKeyframes:function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];e=this._selectVTIcon(e),this._setAllKeyframes(!0,e=e)},onSelectKeyframesInRange:function(e,t,n){var r=arguments.length<=3||void 0===arguments[3]?"":arguments[3];r=this._selectVTIcon(r);var i=this._getKFIDSInRange(e,t,n,r=r);this._setSelectedKeyframes(i,!0,r=r)},onAddSelectedKeyframesInRange:function(e,t,n){var r=arguments.length<=3||void 0===arguments[3]?"":arguments[3];r=this._selectVTIcon(r);var i=this._getKFIDSInRange(e,t,n,r=r);this._setSelectedKeyframes(i,!1,r=r)},_getKFIDSInRange:function(e,t,n){var r=arguments.length<=3||void 0===arguments[3]?"":arguments[3];r=this._selectVTIcon(r);var i=e,a=t;i>a&&(i=t,a=e);var o=[];for(var s in n){var u=n[s].value1,l=n[s].value2;l>u&&(u=n[s].value2,l=n[s].value1);for(var c=0;c<this._data[r].parameters[s].data.length;c++)this._data[r].parameters[s].data[c].t>=i&&this._data[r].parameters[s].data[c].t<=a&&this._data[r].parameters[s].data[c].value<=u&&this._data[r].parameters[s].data[c].value>=l&&o.push(this._data[r].parameters[s].data[c].id);
}return o},_setAllKeyframes:function(e){var t=arguments.length<=1||void 0===arguments[1]?"":arguments[1];t=this._selectVTIcon(t);for(var n in this._data[t].parameters)for(var r=0;r<this._data[t].parameters[n].data.length;r++)this._data[t].parameters[n].data[r].selected=e;this.trigger(this._data)},_setSelectedKeyframes:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?"":arguments[2];n=this._selectVTIcon(n);for(var r in this._data[n].parameters)for(var i=0;i<this._data[n].parameters[r].data.length;i++)e.indexOf(this._data[n].parameters[r].data[i].id)>=0?this._data[n].parameters[r].data[i].selected=!0:t&&(this._data[n].parameters[r].data[i].selected=!1);this.trigger(this._data)},_setUnselectedKeyframes:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?"":arguments[2];n=this._selectVTIcon(n);for(var r in this._data[n].parameters)for(var i=0;i<this._data[n].parameters[r].data.length;i++)e.indexOf(this._data[n].parameters[r].data[i].id)>=0?this._data[n].parameters[r].data[i].selected=!1:t&&(this._data[n].parameters[r].data[i].selected=!0);this.trigger(this._data)},onSelectTimeRange:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?"":arguments[2];n=this._selectVTIcon(n),this._data[n].selectedTimeRange.active=!0,this._data[n].selectedTimeRange.time1=Math.max(0,Math.min(this._data[n].duration,e)),this._data[n].selectedTimeRange.time2=Math.max(0,Math.min(this._data[n].duration,t)),this.trigger(this._data)},onSelectAllTimeRange:function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];e=this._selectVTIcon(e),o.actions.log("VTICON_SELECTALLTIME_"+e),this.onSelectTimeRange(0,this._data[e].duration,e)},onUnselectTimeRange:function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];e=this._selectVTIcon(e),this._data[e].selectedTimeRange.active=!1,this.trigger(this._data)},onMoveSelectedKeyframes:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?"":arguments[2];n=this._selectVTIcon(n);var r=!0;for(var i in this._data[n].parameters)for(var a=0;a<this._data[n].parameters[i].data.length;a++)this._data[n].parameters[i].data[a].selected&&(this._isValidKeyframePosition(i,this._data[n].parameters[i].data[a].t+e,this._data[n].parameters[i].data[a].value+t[i],n=n)||(r=!1));if(r){for(var i in this._data[n].parameters){for(var a=0;a<this._data[n].parameters[i].data.length;a++)this._data[n].parameters[i].data[a].selected&&(this._data[n].parameters[i].data[a].t+=e,this._data[n].parameters[i].data[a].value+=t[i]);this._data[n].parameters[i].data.sort(this._keyframeCompare)}this.trigger(this._data)}},onStartMovingSelectedKeyframes:function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];e=this._selectVTIcon(e),this._saveStateForUndo()},onDeleteSelectedKeyframes:function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];e=this._selectVTIcon(e),o.actions.log("VTICON_DELETEKEYFRAMES_"+e);var t=function(e){return!e.selected};this._saveStateForUndo();for(var n in this._data[e].parameters)if(this._data[e].parameters[n].data=this._data[e].parameters[n].data.filter(t),0==this._data[e].parameters[n].data.length){var r=this._getNewKFUID(n),i=this._data[e].duration/2,a=(this._data[e].parameters[n].valueScale[0]+this._data[e].parameters[n].valueScale[1])/2;this._data[e].parameters[n].data.push({id:r,t:i,value:a,selected:!1})}this.trigger(this._data)},_isValidKeyframePosition:function(e,t,n){var r=arguments.length<=3||void 0===arguments[3]?"":arguments[3];r=this._selectVTIcon(r);var i=!1;if(t>=0&&t<=this._data[r].duration){var a=Math.min(this._data[r].parameters[e].valueScale[0],this._data[r].parameters[e].valueScale[1]),o=Math.max(this._data[r].parameters[e].valueScale[0],this._data[r].parameters[e].valueScale[1]);n>=a&&o>=n&&(i=!0)}return i},_copyState:function(){var e={};for(name in this._data){e[name]={},e[name].duration=this._data[name].duration,e[name].selectedTimeRange=this._data[name].selectedTimeRange,e[name].selected=this._data[name].selected,e[name].parameters={};for(var t in this._data[name].parameters){e[name].parameters[t]={},e[name].parameters[t].valueScale=this._data[name].parameters[t].valueScale,e[name].parameters[t].data=[];for(var n=0;n<this._data[name].parameters[t].data.length;n++){var r=this._data[name].parameters[t].data[n];e[name].parameters[t].data.push({t:r.t,value:r.value,selected:r.selected,id:r.id})}}}return e},_hasStateChanged:function(){var e=!0;if(this._previousStates.length>0){e=!1;var t=this._previousStates[this._previousStates.length-1];for(var n in this._data){this._data[n].duration!=t.duration&&(e=!0);for(var r in this._data[n].parameters)if(this._data[n].parameters[r].valueScale!=t[n].parameters[r].valueScale&&(e=!0),this._data[n].parameters[r].data.length!=t[n].parameters[r].data.length)e=!0;else for(var i=0;i<this._data[n].parameters[r].data.length;i++){var a=this._data[n].parameters[r].data[i],o=t[n].parameters[r].data[i];(a.t!=o.t||a.value!=o.value||a.id!=o.id)&&(e=!0)}}}return e},_saveStateForUndo:function(){this._hasStateChanged()&&(this._previousStates.push(this._copyState()),this._nextStates=[])},onUndo:function(){this._previousStates.length>0&&(o.actions.log("UNDO"),this._nextStates.push(this._copyState()),this._data=this._previousStates.pop(),this.trigger(this._data))},onRedo:function(){this._nextStates.length>0&&(o.actions.log("REDO"),this._previousStates.push(this._copyState()),this._data=this._nextStates.pop(),this.trigger(this._data))},_getNewKFUID:function(e){return this._kfuidCount+=1,this._kfuidCount},_keyframeCompare:function(e,t){return e.t-t.t}});e.exports={actions:s,store:u}},function(module,exports,__webpack_require__){(function(setImmediate){"use strict";function capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}function callbackName(e,t){return t=t||"on",t+exports.capitalize(e)}function checkEnv(target){var flag=void 0;try{eval(target)&&(flag=!0)}catch(e){flag=!1}environment[callbackName(target,"has")]=flag}function isObject(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function extend(e){if(!isObject(e))return e;for(var t,n,r=1,i=arguments.length;i>r;r++){t=arguments[r];for(n in t)if(Object.getOwnPropertyDescriptor&&Object.defineProperty){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,a)}else e[n]=t[n]}return e}function isFunction(e){return"function"==typeof e}function object(e,t){for(var n={},r=0;r<e.length;r++)n[e[r]]=t[r];return n}function isArguments(e){return"object"==typeof e&&"callee"in e&&"number"==typeof e.length}function throwIf(e,t){if(e)throw Error(t||e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.capitalize=capitalize,exports.callbackName=callbackName,exports.isObject=isObject,exports.extend=extend,exports.isFunction=isFunction,exports.object=object,exports.isArguments=isArguments,exports.throwIf=throwIf;var environment={};exports.environment=environment,checkEnv("setImmediate"),checkEnv("Promise"),exports.EventEmitter=__webpack_require__(40),environment.hasSetImmediate?exports.nextTick=function(e){setImmediate(e)}:exports.nextTick=function(e){setTimeout(e,0)},environment.hasPromise?(exports.Promise=Promise,exports.createPromise=function(e){return new exports.Promise(e)}):(exports.Promise=null,exports.createPromise=function(){})}).call(exports,__webpack_require__(14).setImmediate)},function(e,t,n){var r,i;!function(){function a(e){return e&&(e.ownerDocument||e.document||e).documentElement}function o(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}function s(e,t){return t>e?-1:e>t?1:e>=t?0:NaN}function u(e){return null===e?NaN:+e}function l(e){return!isNaN(e)}function c(e){return{left:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var a=r+i>>>1;e(t[a],n)<0?r=a+1:i=a}return r},right:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var a=r+i>>>1;e(t[a],n)>0?i=a:r=a+1}return r}}}function f(e){return e.length}function h(e){for(var t=1;e*t%1;)t*=10;return t}function p(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function d(){this._=Object.create(null)}function m(e){return(e+="")===To||e[0]===Mo?Mo+e:e}function g(e){return(e+="")[0]===Mo?e.slice(1):e}function v(e){return m(e)in this._}function y(e){return(e=m(e))in this._&&delete this._[e]}function b(){var e=[];for(var t in this._)e.push(g(t));return e}function w(){var e=0;for(var t in this._)++e;return e}function x(){for(var e in this._)return!1;return!0}function S(){this._=Object.create(null)}function C(e){return e}function _(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function k(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=Ao.length;r>n;++n){var i=Ao[n]+t;if(i in e)return i}}function T(){}function M(){}function A(e){function t(){for(var t,r=n,i=-1,a=r.length;++i<a;)(t=r[i].on)&&t.apply(this,arguments);return e}var n=[],r=new d;return t.on=function(t,i){var a,o=r.get(t);return arguments.length<2?o&&o.on:(o&&(o.on=null,n=n.slice(0,a=n.indexOf(o)).concat(n.slice(a+1)),r.remove(t)),i&&n.push(r.set(t,{on:i})),e)},t}function E(){ho.event.preventDefault()}function P(){for(var e,t=ho.event;e=t.sourceEvent;)t=e;return t}function N(e){for(var t=new M,n=0,r=arguments.length;++n<r;)t[arguments[n]]=A(t);return t.of=function(n,r){return function(i){try{var a=i.sourceEvent=ho.event;i.target=e,ho.event=i,t[i.type].apply(n,r)}finally{ho.event=a}}},t}function O(e){return Po(e,Do),e}function R(e){return"function"==typeof e?e:function(){return No(e,this)}}function D(e){return"function"==typeof e?e:function(){return Oo(e,this)}}function I(e,t){function n(){this.removeAttribute(e)}function r(){this.removeAttributeNS(e.space,e.local)}function i(){this.setAttribute(e,t)}function a(){this.setAttributeNS(e.space,e.local,t)}function o(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}function s(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}return e=ho.ns.qualify(e),null==t?e.local?r:n:"function"==typeof t?e.local?s:o:e.local?a:i}function F(e){return e.trim().replace(/\s+/g," ")}function L(e){return new RegExp("(?:^|\\s+)"+ho.requote(e)+"(?:\\s+|$)","g")}function j(e){return(e+"").trim().split(/^|\s+/)}function B(e,t){function n(){for(var n=-1;++n<i;)e[n](this,t)}function r(){for(var n=-1,r=t.apply(this,arguments);++n<i;)e[n](this,r)}e=j(e).map(U);var i=e.length;return"function"==typeof t?r:n}function U(e){var t=L(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||n.setAttribute("class",F(i+" "+e))):n.setAttribute("class",F(i.replace(t," ")))}}function q(e,t,n){function r(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,t,n)}function a(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}return null==t?r:"function"==typeof t?a:i}function V(e,t){function n(){delete this[e]}function r(){this[e]=t}function i(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}return null==t?n:"function"==typeof t?i:r}function z(e){function t(){var t=this.ownerDocument,n=this.namespaceURI;return n?t.createElementNS(n,e):t.createElement(e)}function n(){return this.ownerDocument.createElementNS(e.space,e.local)}return"function"==typeof e?e:(e=ho.ns.qualify(e)).local?n:t}function W(){var e=this.parentNode;e&&e.removeChild(this)}function K(e){return{__data__:e}}function H(e){return function(){return Ro(this,e)}}function Q(e){return arguments.length||(e=s),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function G(e,t){for(var n=0,r=e.length;r>n;n++)for(var i,a=e[n],o=0,s=a.length;s>o;o++)(i=a[o])&&t(i,o,n);return e}function Y(e){return Po(e,Fo),e}function X(e){var t,n;return function(r,i,a){var o,s=e[a].update,u=s.length;for(a!=n&&(n=a,t=0),i>=t&&(t=i+1);!(o=s[t])&&++t<u;);return o}}function Z(e,t,n){function r(){var t=this[o];t&&(this.removeEventListener(e,t,t.$),delete this[o])}function i(){var i=u(t,mo(arguments));r.call(this),this.addEventListener(e,this[o]=i,i.$=n),i._=t}function a(){var t,n=new RegExp("^__on([^.]+)"+ho.requote(e)+"$");for(var r in this)if(t=r.match(n)){var i=this[r];this.removeEventListener(t[1],i,i.$),delete this[r]}}var o="__on"+e,s=e.indexOf("."),u=J;s>0&&(e=e.slice(0,s));var l=Lo.get(e);return l&&(e=l,u=$),s?t?i:r:t?T:a}function J(e,t){return function(n){var r=ho.event;ho.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{ho.event=r}}}function $(e,t){var n=J(e,t);return function(e){var t=this,r=e.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||n.call(t,e)}}function ee(e){var t=".dragsuppress-"+ ++Bo,n="click"+t,r=ho.select(o(e)).on("touchmove"+t,E).on("dragstart"+t,E).on("selectstart"+t,E);if(null==jo&&(jo="onselectstart"in e?!1:k(e.style,"userSelect")),jo){var i=a(e).style,s=i[jo];i[jo]="none"}return function(e){if(r.on(t,null),jo&&(i[jo]=s),e){var a=function(){r.on(n,null)};r.on(n,function(){E(),a()},!0),setTimeout(a,0)}}}function te(e,t){t.changedTouches&&(t=t.changedTouches[0]);var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();if(0>Uo){var i=o(e);if(i.scrollX||i.scrollY){n=ho.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var a=n[0][0].getScreenCTM();Uo=!(a.f||a.e),n.remove()}}return Uo?(r.x=t.pageX,r.y=t.pageY):(r.x=t.clientX,r.y=t.clientY),r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}function ne(){return ho.event.changedTouches[0].identifier}function re(e){return e>0?1:0>e?-1:0}function ie(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function ae(e){return e>1?0:-1>e?zo:Math.acos(e)}function oe(e){return e>1?Ho:-1>e?-Ho:Math.asin(e)}function se(e){return((e=Math.exp(e))-1/e)/2}function ue(e){return((e=Math.exp(e))+1/e)/2}function le(e){return((e=Math.exp(2*e))-1)/(e+1)}function ce(e){return(e=Math.sin(e/2))*e}function fe(){}function he(e,t,n){return this instanceof he?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof he?new he(e.h,e.s,e.l):Te(""+e,Me,he):new he(e,t,n)}function pe(e,t,n){function r(e){return e>360?e-=360:0>e&&(e+=360),60>e?a+(o-a)*e/60:180>e?o:240>e?a+(o-a)*(240-e)/60:a}function i(e){return Math.round(255*r(e))}var a,o;return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:0>t?0:t>1?1:t,n=0>n?0:n>1?1:n,o=.5>=n?n*(1+t):n+t-n*t,a=2*n-o,new Se(i(e+120),i(e),i(e-120))}function de(e,t,n){return this instanceof de?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof de?new de(e.h,e.c,e.l):e instanceof ge?ye(e.l,e.a,e.b):ye((e=Ae((e=ho.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new de(e,t,n)}function me(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new ge(n,Math.cos(e*=Qo)*t,Math.sin(e)*t)}function ge(e,t,n){return this instanceof ge?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof ge?new ge(e.l,e.a,e.b):e instanceof de?me(e.h,e.c,e.l):Ae((e=Se(e)).r,e.g,e.b):new ge(e,t,n)}function ve(e,t,n){var r=(e+16)/116,i=r+t/500,a=r-n/200;return i=be(i)*is,r=be(r)*as,a=be(a)*os,new Se(xe(3.2404542*i-1.5371385*r-.4985314*a),xe(-.969266*i+1.8760108*r+.041556*a),xe(.0556434*i-.2040259*r+1.0572252*a))}function ye(e,t,n){return e>0?new de(Math.atan2(n,t)*Go,Math.sqrt(t*t+n*n),e):new de(NaN,NaN,e)}function be(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function we(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function xe(e){return Math.round(255*(.00304>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function Se(e,t,n){return this instanceof Se?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof Se?new Se(e.r,e.g,e.b):Te(""+e,Se,pe):new Se(e,t,n)}function Ce(e){return new Se(e>>16,e>>8&255,255&e)}function _e(e){return Ce(e)+""}function ke(e){return 16>e?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function Te(e,t,n){var r,i,a,o=0,s=0,u=0;if(r=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(Pe(i[0]),Pe(i[1]),Pe(i[2]))}return(a=ls.get(e))?t(a.r,a.g,a.b):(null==e||"#"!==e.charAt(0)||isNaN(a=parseInt(e.slice(1),16))||(4===e.length?(o=(3840&a)>>4,o=o>>4|o,s=240&a,s=s>>4|s,u=15&a,u=u<<4|u):7===e.length&&(o=(16711680&a)>>16,s=(65280&a)>>8,u=255&a)),t(o,s,u))}function Me(e,t,n){var r,i,a=Math.min(e/=255,t/=255,n/=255),o=Math.max(e,t,n),s=o-a,u=(o+a)/2;return s?(i=.5>u?s/(o+a):s/(2-o-a),r=e==o?(t-n)/s+(n>t?6:0):t==o?(n-e)/s+2:(e-t)/s+4,r*=60):(r=NaN,i=u>0&&1>u?0:r),new he(r,i,u)}function Ae(e,t,n){e=Ee(e),t=Ee(t),n=Ee(n);var r=we((.4124564*e+.3575761*t+.1804375*n)/is),i=we((.2126729*e+.7151522*t+.072175*n)/as),a=we((.0193339*e+.119192*t+.9503041*n)/os);return ge(116*i-16,500*(r-i),200*(i-a))}function Ee(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Pe(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}function Ne(e){return"function"==typeof e?e:function(){return e}}function Oe(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),Re(t,n,e,r)}}function Re(e,t,n,r){function i(){var e,t=u.status;if(!t&&Ie(u)||t>=200&&300>t||304===t){try{e=n.call(a,u)}catch(r){return void o.error.call(a,r)}o.load.call(a,e)}else o.error.call(a,u)}var a={},o=ho.dispatch("beforesend","progress","load","error"),s={},u=new XMLHttpRequest,l=null;return!this.XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(e)||(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=i:u.onreadystatechange=function(){u.readyState>3&&i()},u.onprogress=function(e){var t=ho.event;ho.event=e;try{o.progress.call(a,u)}finally{ho.event=t}},a.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?s[e]:(null==t?delete s[e]:s[e]=t+"",a)},a.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",a):t},a.responseType=function(e){return arguments.length?(l=e,a):l},a.response=function(e){return n=e,a},["get","post"].forEach(function(e){a[e]=function(){return a.send.apply(a,[e].concat(mo(arguments)))}}),a.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),u.open(n,e,!0),null==t||"accept"in s||(s.accept=t+",*/*"),u.setRequestHeader)for(var c in s)u.setRequestHeader(c,s[c]);return null!=t&&u.overrideMimeType&&u.overrideMimeType(t),null!=l&&(u.responseType=l),null!=i&&a.on("error",i).on("load",function(e){i(null,e)}),o.beforesend.call(a,u),u.send(null==r?null:r),a},a.abort=function(){return u.abort(),a},ho.rebind(a,o,"on"),null==r?a:a.get(De(r))}function De(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}function Ie(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function Fe(e,t,n){var r=arguments.length;2>r&&(t=0),3>r&&(n=Date.now());var i=n+t,a={c:e,t:i,n:null};return fs?fs.n=a:cs=a,fs=a,hs||(ps=clearTimeout(ps),hs=1,ds(Le)),a}function Le(){var e=je(),t=Be()-e;t>24?(isFinite(t)&&(clearTimeout(ps),ps=setTimeout(Le,t)),hs=0):(hs=1,ds(Le))}function je(){for(var e=Date.now(),t=cs;t;)e>=t.t&&t.c(e-t.t)&&(t.c=null),t=t.n;return e}function Be(){for(var e,t=cs,n=1/0;t;)t.c?(t.t<n&&(n=t.t),t=(e=t).n):t=e?e.n=t.n:cs=t.n;return fs=e,n}function Ue(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function qe(e,t){var n=Math.pow(10,3*ko(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function Ve(e){var t=e.decimal,n=e.thousands,r=e.grouping,i=e.currency,a=r&&n?function(e,t){for(var i=e.length,a=[],o=0,s=r[0],u=0;i>0&&s>0&&(u+s+1>t&&(s=Math.max(1,t-u)),a.push(e.substring(i-=s,i+s)),!((u+=s+1)>t));)s=r[o=(o+1)%r.length];return a.reverse().join(n)}:C;return function(e){var n=gs.exec(e),r=n[1]||" ",o=n[2]||">",s=n[3]||"-",u=n[4]||"",l=n[5],c=+n[6],f=n[7],h=n[8],p=n[9],d=1,m="",g="",v=!1,y=!0;switch(h&&(h=+h.substring(1)),(l||"0"===r&&"="===o)&&(l=r="0",o="="),p){case"n":f=!0,p="g";break;case"%":d=100,g="%",p="f";break;case"p":d=100,g="%",p="r";break;case"b":case"o":case"x":case"X":"#"===u&&(m="0"+p.toLowerCase());case"c":y=!1;case"d":v=!0,h=0;break;case"s":d=-1,p="r"}"$"===u&&(m=i[0],g=i[1]),"r"!=p||h||(p="g"),null!=h&&("g"==p?h=Math.max(1,Math.min(21,h)):("e"==p||"f"==p)&&(h=Math.max(0,Math.min(20,h)))),p=vs.get(p)||ze;var b=l&&f;return function(e){var n=g;if(v&&e%1)return"";var i=0>e||0===e&&0>1/e?(e=-e,"-"):"-"===s?"":s;if(0>d){var u=ho.formatPrefix(e,h);e=u.scale(e),n=u.symbol+g}else e*=d;e=p(e,h);var w,x,S=e.lastIndexOf(".");if(0>S){var C=y?e.lastIndexOf("e"):-1;0>C?(w=e,x=""):(w=e.substring(0,C),x=e.substring(C))}else w=e.substring(0,S),x=t+e.substring(S+1);!l&&f&&(w=a(w,1/0));var _=m.length+w.length+x.length+(b?0:i.length),k=c>_?new Array(_=c-_+1).join(r):"";return b&&(w=a(k+w,k.length?c-x.length:1/0)),i+=m,e=w+x,("<"===o?i+e+k:">"===o?k+i+e:"^"===o?k.substring(0,_>>=1)+i+e+k.substring(_):i+(b?e:k+e))+n}}}function ze(e){return e+""}function We(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ke(e,t,n){function r(t){var n=e(t),r=a(n,1);return r-t>t-n?n:r}function i(n){return t(n=e(new bs(n-1)),1),n}function a(e,n){return t(e=new bs(+e),n),e}function o(e,r,a){var o=i(e),s=[];if(a>1)for(;r>o;)n(o)%a||s.push(new Date(+o)),t(o,1);else for(;r>o;)s.push(new Date(+o)),t(o,1);return s}function s(e,t,n){try{bs=We;var r=new We;return r._=e,o(r,t,n)}finally{bs=Date}}e.floor=e,e.round=r,e.ceil=i,e.offset=a,e.range=o;var u=e.utc=He(e);return u.floor=u,u.round=He(r),u.ceil=He(i),u.offset=He(a),u.range=s,e}function He(e){return function(t,n){try{bs=We;var r=new We;return r._=t,e(r,n)._}finally{bs=Date}}}function Qe(e){function t(e){function t(t){for(var n,i,a,o=[],s=-1,u=0;++s<r;)37===e.charCodeAt(s)&&(o.push(e.slice(u,s)),null!=(i=xs[n=e.charAt(++s)])&&(n=e.charAt(++s)),(a=A[n])&&(n=a(t,null==i?"e"===n?" ":"0":i)),o.push(n),u=s+1);return o.push(e.slice(u,s)),o.join("")}var r=e.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=n(r,e,t,0);if(i!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var a=null!=r.Z&&bs!==We,o=new(a?We:bs);return"j"in r?o.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),a?o._:o},t.toString=function(){return e},t}function n(e,t,n,r){for(var i,a,o,s=0,u=t.length,l=n.length;u>s;){if(r>=l)return-1;if(i=t.charCodeAt(s++),37===i){if(o=t.charAt(s++),a=E[o in xs?t.charAt(s++):o],!a||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function r(e,t,n){S.lastIndex=0;var r=S.exec(t.slice(n));return r?(e.w=C.get(r[0].toLowerCase()),n+r[0].length):-1}function i(e,t,n){w.lastIndex=0;var r=w.exec(t.slice(n));return r?(e.w=x.get(r[0].toLowerCase()),n+r[0].length):-1}function a(e,t,n){T.lastIndex=0;var r=T.exec(t.slice(n));return r?(e.m=M.get(r[0].toLowerCase()),n+r[0].length):-1}function o(e,t,n){_.lastIndex=0;var r=_.exec(t.slice(n));return r?(e.m=k.get(r[0].toLowerCase()),n+r[0].length):-1}function s(e,t,r){return n(e,A.c.toString(),t,r)}function u(e,t,r){return n(e,A.x.toString(),t,r)}function l(e,t,r){return n(e,A.X.toString(),t,r)}function c(e,t,n){var r=b.get(t.slice(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)}var f=e.dateTime,h=e.date,p=e.time,d=e.periods,m=e.days,g=e.shortDays,v=e.months,y=e.shortMonths;t.utc=function(e){function n(e){try{bs=We;var t=new bs;return t._=e,r(t)}finally{bs=Date}}var r=t(e);return n.parse=function(e){try{bs=We;var t=r.parse(e);return t&&t._}finally{bs=Date}},n.toString=r.toString,n},t.multi=t.utc.multi=pt;var b=ho.map(),w=Ye(m),x=Xe(m),S=Ye(g),C=Xe(g),_=Ye(v),k=Xe(v),T=Ye(y),M=Xe(y);d.forEach(function(e,t){b.set(e.toLowerCase(),t)});var A={a:function(e){return g[e.getDay()]},A:function(e){return m[e.getDay()]},b:function(e){return y[e.getMonth()]},B:function(e){return v[e.getMonth()]},c:t(f),d:function(e,t){return Ge(e.getDate(),t,2)},e:function(e,t){return Ge(e.getDate(),t,2)},H:function(e,t){return Ge(e.getHours(),t,2)},I:function(e,t){return Ge(e.getHours()%12||12,t,2)},j:function(e,t){return Ge(1+ys.dayOfYear(e),t,3)},L:function(e,t){return Ge(e.getMilliseconds(),t,3)},m:function(e,t){return Ge(e.getMonth()+1,t,2)},M:function(e,t){return Ge(e.getMinutes(),t,2)},p:function(e){return d[+(e.getHours()>=12)]},S:function(e,t){return Ge(e.getSeconds(),t,2)},U:function(e,t){return Ge(ys.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Ge(ys.mondayOfYear(e),t,2)},x:t(h),X:t(p),y:function(e,t){return Ge(e.getFullYear()%100,t,2)},Y:function(e,t){return Ge(e.getFullYear()%1e4,t,4)},Z:ft,"%":function(){return"%"}},E={a:r,A:i,b:a,B:o,c:s,d:at,e:at,H:st,I:st,j:ot,L:ct,m:it,M:ut,p:c,S:lt,U:Je,w:Ze,W:$e,x:u,X:l,y:tt,Y:et,Z:nt,"%":ht};return t}function Ge(e,t,n){var r=0>e?"-":"",i=(r?-e:e)+"",a=i.length;return r+(n>a?new Array(n-a+1).join(t)+i:i)}function Ye(e){return new RegExp("^(?:"+e.map(ho.requote).join("|")+")","i")}function Xe(e){for(var t=new d,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function Ze(e,t,n){Ss.lastIndex=0;var r=Ss.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Je(e,t,n){Ss.lastIndex=0;var r=Ss.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function $e(e,t,n){Ss.lastIndex=0;var r=Ss.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function et(e,t,n){Ss.lastIndex=0;var r=Ss.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function tt(e,t,n){Ss.lastIndex=0;var r=Ss.exec(t.slice(n,n+2));return r?(e.y=rt(+r[0]),n+r[0].length):-1}function nt(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function rt(e){return e+(e>68?1900:2e3)}function it(e,t,n){Ss.lastIndex=0;var r=Ss.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function at(e,t,n){Ss.lastIndex=0;var r=Ss.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function ot(e,t,n){Ss.lastIndex=0;var r=Ss.exec(t.slice(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function st(e,t,n){Ss.lastIndex=0;var r=Ss.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function ut(e,t,n){Ss.lastIndex=0;var r=Ss.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function lt(e,t,n){Ss.lastIndex=0;var r=Ss.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function ct(e,t,n){Ss.lastIndex=0;var r=Ss.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function ft(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=ko(t)/60|0,i=ko(t)%60;return n+Ge(r,"0",2)+Ge(i,"0",2)}function ht(e,t,n){Cs.lastIndex=0;var r=Cs.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function pt(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,r=e[n];!r[1](t);)r=e[++n];return r[0](t)}}function dt(){}function mt(e,t,n){var r=n.s=e+t,i=r-e,a=r-i;n.t=e-a+(t-i)}function gt(e,t){e&&Ms.hasOwnProperty(e.type)&&Ms[e.type](e,t)}function vt(e,t,n){var r,i=-1,a=e.length-n;for(t.lineStart();++i<a;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function yt(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)vt(e[n],t,1);t.polygonEnd()}function bt(){function e(e,t){e*=Qo,t=t*Qo/2+zo/4;var n=e-r,o=n>=0?1:-1,s=o*n,u=Math.cos(t),l=Math.sin(t),c=a*l,f=i*u+c*Math.cos(s),h=c*o*Math.sin(s);Es.add(Math.atan2(h,f)),r=e,i=u,a=l}var t,n,r,i,a;Ps.point=function(o,s){Ps.point=e,r=(t=o)*Qo,i=Math.cos(s=(n=s)*Qo/2+zo/4),a=Math.sin(s)},Ps.lineEnd=function(){e(t,n)}}function wt(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function xt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function St(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Ct(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function _t(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function kt(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Tt(e){return[Math.atan2(e[1],e[0]),oe(e[2])]}function Mt(e,t){return ko(e[0]-t[0])<qo&&ko(e[1]-t[1])<qo}function At(e,t){e*=Qo;var n=Math.cos(t*=Qo);Et(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function Et(e,t,n){++Ns,Rs+=(e-Rs)/Ns,Ds+=(t-Ds)/Ns,Is+=(n-Is)/Ns}function Pt(){function e(e,i){e*=Qo;var a=Math.cos(i*=Qo),o=a*Math.cos(e),s=a*Math.sin(e),u=Math.sin(i),l=Math.atan2(Math.sqrt((l=n*u-r*s)*l+(l=r*o-t*u)*l+(l=t*s-n*o)*l),t*o+n*s+r*u);Os+=l,Fs+=l*(t+(t=o)),Ls+=l*(n+(n=s)),js+=l*(r+(r=u)),Et(t,n,r)}var t,n,r;Vs.point=function(i,a){i*=Qo;var o=Math.cos(a*=Qo);t=o*Math.cos(i),n=o*Math.sin(i),r=Math.sin(a),Vs.point=e,Et(t,n,r)}}function Nt(){Vs.point=At}function Ot(){function e(e,t){e*=Qo;var n=Math.cos(t*=Qo),o=n*Math.cos(e),s=n*Math.sin(e),u=Math.sin(t),l=i*u-a*s,c=a*o-r*u,f=r*s-i*o,h=Math.sqrt(l*l+c*c+f*f),p=r*o+i*s+a*u,d=h&&-ae(p)/h,m=Math.atan2(h,p);Bs+=d*l,Us+=d*c,qs+=d*f,Os+=m,Fs+=m*(r+(r=o)),Ls+=m*(i+(i=s)),js+=m*(a+(a=u)),Et(r,i,a)}var t,n,r,i,a;Vs.point=function(o,s){t=o,n=s,Vs.point=e,o*=Qo;var u=Math.cos(s*=Qo);r=u*Math.cos(o),i=u*Math.sin(o),a=Math.sin(s),Et(r,i,a)},Vs.lineEnd=function(){e(t,n),Vs.lineEnd=Nt,Vs.point=At}}function Rt(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])}),n}function Dt(){return!0}function It(e,t,n,r,i){var a=[],o=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],r=e[t];if(Mt(n,r)){i.lineStart();for(var s=0;t>s;++s)i.point((n=e[s])[0],n[1]);return void i.lineEnd()}var u=new Lt(n,e,null,!0),l=new Lt(n,null,u,!1);u.o=l,a.push(u),o.push(l),u=new Lt(r,e,null,!1),l=new Lt(r,null,u,!0),u.o=l,a.push(u),o.push(l)}}),o.sort(t),Ft(a),Ft(o),a.length){for(var s=0,u=n,l=o.length;l>s;++s)o[s].e=u=!u;for(var c,f,h=a[0];;){for(var p=h,d=!0;p.v;)if((p=p.n)===h)return;c=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(var s=0,l=c.length;l>s;++s)i.point((f=c[s])[0],f[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(d){c=p.p.z;for(var s=c.length-1;s>=0;--s)i.point((f=c[s])[0],f[1])}else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,c=p.z,d=!d}while(!p.v);i.lineEnd()}}}function Ft(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function Lt(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function jt(e,t,n,r){return function(i,a){function o(t,n){var r=i(t,n);e(t=r[0],n=r[1])&&a.point(t,n)}function s(e,t){var n=i(e,t);g.point(n[0],n[1])}function u(){y.point=s,g.lineStart()}function l(){y.point=o,g.lineEnd()}function c(e,t){m.push([e,t]);var n=i(e,t);w.point(n[0],n[1])}function f(){w.lineStart(),m=[]}function h(){c(m[0][0],m[0][1]),w.lineEnd();var e,t=w.clean(),n=b.buffer(),r=n.length;if(m.pop(),d.push(m),m=null,r)if(1&t){e=n[0];var i,r=e.length-1,o=-1;if(r>0){for(x||(a.polygonStart(),x=!0),a.lineStart();++o<r;)a.point((i=e[o])[0],i[1]);a.lineEnd()}}else r>1&&2&t&&n.push(n.pop().concat(n.shift())),p.push(n.filter(Bt))}var p,d,m,g=t(a),v=i.invert(r[0],r[1]),y={point:o,lineStart:u,lineEnd:l,polygonStart:function(){y.point=c,y.lineStart=f,y.lineEnd=h,p=[],d=[]},polygonEnd:function(){y.point=o,y.lineStart=u,y.lineEnd=l,p=ho.merge(p);var e=Kt(v,d);p.length?(x||(a.polygonStart(),x=!0),It(p,qt,e,n,a)):e&&(x||(a.polygonStart(),x=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),x&&(a.polygonEnd(),x=!1),p=d=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}},b=Ut(),w=t(b),x=!1;return y}}function Bt(e){return e.length>1}function Ut(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:T,buffer:function n(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function qt(e,t){return((e=e.x)[0]<0?e[1]-Ho-qo:Ho-e[1])-((t=t.x)[0]<0?t[1]-Ho-qo:Ho-t[1])}function Vt(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(a,o){var s=a>0?zo:-zo,u=ko(a-n);ko(u-zo)<qo?(e.point(n,r=(r+o)/2>0?Ho:-Ho),e.point(i,r),
e.lineEnd(),e.lineStart(),e.point(s,r),e.point(a,r),t=0):i!==s&&u>=zo&&(ko(n-i)<qo&&(n-=i*qo),ko(a-s)<qo&&(a-=s*qo),r=zt(n,r,a,o),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),t=0),e.point(n=a,r=o),i=s},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}function zt(e,t,n,r){var i,a,o=Math.sin(e-n);return ko(o)>qo?Math.atan((Math.sin(t)*(a=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(t))*Math.sin(e))/(i*a*o)):(t+r)/2}function Wt(e,t,n,r){var i;if(null==e)i=n*Ho,r.point(-zo,i),r.point(0,i),r.point(zo,i),r.point(zo,0),r.point(zo,-i),r.point(0,-i),r.point(-zo,-i),r.point(-zo,0),r.point(-zo,i);else if(ko(e[0]-t[0])>qo){var a=e[0]<t[0]?zo:-zo;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])}function Kt(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],a=0,o=0;Es.reset();for(var s=0,u=t.length;u>s;++s){var l=t[s],c=l.length;if(c)for(var f=l[0],h=f[0],p=f[1]/2+zo/4,d=Math.sin(p),m=Math.cos(p),g=1;;){g===c&&(g=0),e=l[g];var v=e[0],y=e[1]/2+zo/4,b=Math.sin(y),w=Math.cos(y),x=v-h,S=x>=0?1:-1,C=S*x,_=C>zo,k=d*b;if(Es.add(Math.atan2(k*S*Math.sin(C),m*w+k*Math.cos(C))),a+=_?x+S*Wo:x,_^h>=n^v>=n){var T=St(wt(f),wt(e));kt(T);var M=St(i,T);kt(M);var A=(_^x>=0?-1:1)*oe(M[2]);(r>A||r===A&&(T[0]||T[1]))&&(o+=_^x>=0?1:-1)}if(!g++)break;h=v,d=b,m=w,f=e}}return(-qo>a||qo>a&&0>Es)^1&o}function Ht(e){function t(e,t){return Math.cos(e)*Math.cos(t)>a}function n(e){var n,a,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(f,h){var p,d=[f,h],m=t(f,h),g=o?m?0:i(f,h):m?i(f+(0>f?zo:-zo),h):0;if(!n&&(l=u=m)&&e.lineStart(),m!==u&&(p=r(n,d),(Mt(n,p)||Mt(d,p))&&(d[0]+=qo,d[1]+=qo,m=t(d[0],d[1]))),m!==u)c=0,m?(e.lineStart(),p=r(d,n),e.point(p[0],p[1])):(p=r(n,d),e.point(p[0],p[1]),e.lineEnd()),n=p;else if(s&&n&&o^m){var v;g&a||!(v=r(d,n,!0))||(c=0,o?(e.lineStart(),e.point(v[0][0],v[0][1]),e.point(v[1][0],v[1][1]),e.lineEnd()):(e.point(v[1][0],v[1][1]),e.lineEnd(),e.lineStart(),e.point(v[0][0],v[0][1])))}!m||n&&Mt(n,d)||e.point(d[0],d[1]),n=d,u=m,a=g},lineEnd:function(){u&&e.lineEnd(),n=null},clean:function(){return c|(l&&u)<<1}}}function r(e,t,n){var r=wt(e),i=wt(t),o=[1,0,0],s=St(r,i),u=xt(s,s),l=s[0],c=u-l*l;if(!c)return!n&&e;var f=a*u/c,h=-a*l/c,p=St(o,s),d=_t(o,f),m=_t(s,h);Ct(d,m);var g=p,v=xt(d,g),y=xt(g,g),b=v*v-y*(xt(d,d)-1);if(!(0>b)){var w=Math.sqrt(b),x=_t(g,(-v-w)/y);if(Ct(x,d),x=Tt(x),!n)return x;var S,C=e[0],_=t[0],k=e[1],T=t[1];C>_&&(S=C,C=_,_=S);var M=_-C,A=ko(M-zo)<qo,E=A||qo>M;if(!A&&k>T&&(S=k,k=T,T=S),E?A?k+T>0^x[1]<(ko(x[0]-C)<qo?k:T):k<=x[1]&&x[1]<=T:M>zo^(C<=x[0]&&x[0]<=_)){var P=_t(g,(-v+w)/y);return Ct(P,d),[x,Tt(P)]}}}function i(t,n){var r=o?e:zo-e,i=0;return-r>t?i|=1:t>r&&(i|=2),-r>n?i|=4:n>r&&(i|=8),i}var a=Math.cos(e),o=a>0,s=ko(a)>qo,u=wn(e,6*Qo);return jt(t,n,u,o?[0,-e]:[-zo,e-zo])}function Qt(e,t,n,r){return function(i){var a,o=i.a,s=i.b,u=o.x,l=o.y,c=s.x,f=s.y,h=0,p=1,d=c-u,m=f-l;if(a=e-u,d||!(a>0)){if(a/=d,0>d){if(h>a)return;p>a&&(p=a)}else if(d>0){if(a>p)return;a>h&&(h=a)}if(a=n-u,d||!(0>a)){if(a/=d,0>d){if(a>p)return;a>h&&(h=a)}else if(d>0){if(h>a)return;p>a&&(p=a)}if(a=t-l,m||!(a>0)){if(a/=m,0>m){if(h>a)return;p>a&&(p=a)}else if(m>0){if(a>p)return;a>h&&(h=a)}if(a=r-l,m||!(0>a)){if(a/=m,0>m){if(a>p)return;a>h&&(h=a)}else if(m>0){if(h>a)return;p>a&&(p=a)}return h>0&&(i.a={x:u+h*d,y:l+h*m}),1>p&&(i.b={x:u+p*d,y:l+p*m}),i}}}}}}function Gt(e,t,n,r){function i(r,i){return ko(r[0]-e)<qo?i>0?0:3:ko(r[0]-n)<qo?i>0?2:1:ko(r[1]-t)<qo?i>0?1:0:i>0?3:2}function a(e,t){return o(e.x,t.x)}function o(e,t){var n=i(e,1),r=i(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(s){function u(e){for(var t=0,n=g.length,r=e[1],i=0;n>i;++i)for(var a,o=1,s=g[i],u=s.length,l=s[0];u>o;++o)a=s[o],l[1]<=r?a[1]>r&&ie(l,a,e)>0&&++t:a[1]<=r&&ie(l,a,e)<0&&--t,l=a;return 0!==t}function l(a,s,u,l){var c=0,f=0;if(null==a||(c=i(a,u))!==(f=i(s,u))||o(a,s)<0^u>0){do l.point(0===c||3===c?e:n,c>1?r:t);while((c=(c+u+4)%4)!==f)}else l.point(s[0],s[1])}function c(i,a){return i>=e&&n>=i&&a>=t&&r>=a}function f(e,t){c(e,t)&&s.point(e,t)}function h(){E.point=d,g&&g.push(v=[]),_=!0,C=!1,x=S=NaN}function p(){m&&(d(y,b),w&&C&&M.rejoin(),m.push(M.buffer())),E.point=f,C&&s.lineEnd()}function d(e,t){e=Math.max(-Ws,Math.min(Ws,e)),t=Math.max(-Ws,Math.min(Ws,t));var n=c(e,t);if(g&&v.push([e,t]),_)y=e,b=t,w=n,_=!1,n&&(s.lineStart(),s.point(e,t));else if(n&&C)s.point(e,t);else{var r={a:{x:x,y:S},b:{x:e,y:t}};A(r)?(C||(s.lineStart(),s.point(r.a.x,r.a.y)),s.point(r.b.x,r.b.y),n||s.lineEnd(),k=!1):n&&(s.lineStart(),s.point(e,t),k=!1)}x=e,S=t,C=n}var m,g,v,y,b,w,x,S,C,_,k,T=s,M=Ut(),A=Qt(e,t,n,r),E={point:f,lineStart:h,lineEnd:p,polygonStart:function(){s=M,m=[],g=[],k=!0},polygonEnd:function(){s=T,m=ho.merge(m);var t=u([e,r]),n=k&&t,i=m.length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),l(null,null,1,s),s.lineEnd()),i&&It(m,a,t,l,s),s.polygonEnd()),m=g=v=null}};return E}}function Yt(e){var t=0,n=zo/3,r=hn(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*zo/180,n=e[1]*zo/180):[t/zo*180,n/zo*180]},i}function Xt(e,t){function n(e,t){var n=Math.sqrt(a-2*i*Math.sin(t))/i;return[n*Math.sin(e*=i),o-n*Math.cos(e)]}var r=Math.sin(e),i=(r+Math.sin(t))/2,a=1+r*(2*i-r),o=Math.sqrt(a)/i;return n.invert=function(e,t){var n=o-t;return[Math.atan2(e,n)/i,oe((a-(e*e+n*n)*i*i)/(2*i))]},n}function Zt(){function e(e,t){Hs+=i*e-r*t,r=e,i=t}var t,n,r,i;Zs.point=function(a,o){Zs.point=e,t=r=a,n=i=o},Zs.lineEnd=function(){e(t,n)}}function Jt(e,t){Qs>e&&(Qs=e),e>Ys&&(Ys=e),Gs>t&&(Gs=t),t>Xs&&(Xs=t)}function $t(){function e(e,t){o.push("M",e,",",t,a)}function t(e,t){o.push("M",e,",",t),s.point=n}function n(e,t){o.push("L",e,",",t)}function r(){s.point=e}function i(){o.push("Z")}var a=en(4.5),o=[],s={point:e,lineStart:function(){s.point=t},lineEnd:r,polygonStart:function(){s.lineEnd=i},polygonEnd:function(){s.lineEnd=r,s.point=e},pointRadius:function(e){return a=en(e),s},result:function u(){if(o.length){var u=o.join("");return o=[],u}}};return s}function en(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function tn(e,t){Rs+=e,Ds+=t,++Is}function nn(){function e(e,r){var i=e-t,a=r-n,o=Math.sqrt(i*i+a*a);Fs+=o*(t+e)/2,Ls+=o*(n+r)/2,js+=o,tn(t=e,n=r)}var t,n;$s.point=function(r,i){$s.point=e,tn(t=r,n=i)}}function rn(){$s.point=tn}function an(){function e(e,t){var n=e-r,a=t-i,o=Math.sqrt(n*n+a*a);Fs+=o*(r+e)/2,Ls+=o*(i+t)/2,js+=o,o=i*e-r*t,Bs+=o*(r+e),Us+=o*(i+t),qs+=3*o,tn(r=e,i=t)}var t,n,r,i;$s.point=function(a,o){$s.point=e,tn(t=r=a,n=i=o)},$s.lineEnd=function(){e(t,n)}}function on(e){function t(t,n){e.moveTo(t+o,n),e.arc(t,n,o,0,Wo)}function n(t,n){e.moveTo(t,n),s.point=r}function r(t,n){e.lineTo(t,n)}function i(){s.point=t}function a(){e.closePath()}var o=4.5,s={point:t,lineStart:function(){s.point=n},lineEnd:i,polygonStart:function(){s.lineEnd=a},polygonEnd:function(){s.lineEnd=i,s.point=t},pointRadius:function(e){return o=e,s},result:T};return s}function sn(e){function t(e){return(s?r:n)(e)}function n(t){return cn(t,function(n,r){n=e(n,r),t.point(n[0],n[1])})}function r(t){function n(n,r){n=e(n,r),t.point(n[0],n[1])}function r(){b=NaN,_.point=a,t.lineStart()}function a(n,r){var a=wt([n,r]),o=e(n,r);i(b,w,y,x,S,C,b=o[0],w=o[1],y=n,x=a[0],S=a[1],C=a[2],s,t),t.point(b,w)}function o(){_.point=n,t.lineEnd()}function u(){r(),_.point=l,_.lineEnd=c}function l(e,t){a(f=e,h=t),p=b,d=w,m=x,g=S,v=C,_.point=a}function c(){i(b,w,y,x,S,C,p,d,f,m,g,v,s,t),_.lineEnd=o,o()}var f,h,p,d,m,g,v,y,b,w,x,S,C,_={point:n,lineStart:r,lineEnd:o,polygonStart:function(){t.polygonStart(),_.lineStart=u},polygonEnd:function(){t.polygonEnd(),_.lineStart=r}};return _}function i(t,n,r,s,u,l,c,f,h,p,d,m,g,v){var y=c-t,b=f-n,w=y*y+b*b;if(w>4*a&&g--){var x=s+p,S=u+d,C=l+m,_=Math.sqrt(x*x+S*S+C*C),k=Math.asin(C/=_),T=ko(ko(C)-1)<qo||ko(r-h)<qo?(r+h)/2:Math.atan2(S,x),M=e(T,k),A=M[0],E=M[1],P=A-t,N=E-n,O=b*P-y*N;(O*O/w>a||ko((y*P+b*N)/w-.5)>.3||o>s*p+u*d+l*m)&&(i(t,n,r,s,u,l,A,E,T,x/=_,S/=_,C,g,v),v.point(A,E),i(A,E,T,x,S,C,c,f,h,p,d,m,g,v))}}var a=.5,o=Math.cos(30*Qo),s=16;return t.precision=function(e){return arguments.length?(s=(a=e*e)>0&&16,t):Math.sqrt(a)},t}function un(e){var t=sn(function(t,n){return e([t*Go,n*Go])});return function(e){return pn(t(e))}}function ln(e){this.stream=e}function cn(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function fn(e){return hn(function(){return e})()}function hn(e){function t(e){return e=s(e[0]*Qo,e[1]*Qo),[e[0]*h+u,l-e[1]*h]}function n(e){return e=s.invert((e[0]-u)/h,(l-e[1])/h),e&&[e[0]*Go,e[1]*Go]}function r(){s=Rt(o=gn(v,y,b),a);var e=a(m,g);return u=p-e[0]*h,l=d+e[1]*h,i()}function i(){return c&&(c.valid=!1,c=null),t}var a,o,s,u,l,c,f=sn(function(e,t){return e=a(e,t),[e[0]*h+u,l-e[1]*h]}),h=150,p=480,d=250,m=0,g=0,v=0,y=0,b=0,w=zs,x=C,S=null,_=null;return t.stream=function(e){return c&&(c.valid=!1),c=pn(w(o,f(x(e)))),c.valid=!0,c},t.clipAngle=function(e){return arguments.length?(w=null==e?(S=e,zs):Ht((S=+e)*Qo),i()):S},t.clipExtent=function(e){return arguments.length?(_=e,x=e?Gt(e[0][0],e[0][1],e[1][0],e[1][1]):C,i()):_},t.scale=function(e){return arguments.length?(h=+e,r()):h},t.translate=function(e){return arguments.length?(p=+e[0],d=+e[1],r()):[p,d]},t.center=function(e){return arguments.length?(m=e[0]%360*Qo,g=e[1]%360*Qo,r()):[m*Go,g*Go]},t.rotate=function(e){return arguments.length?(v=e[0]%360*Qo,y=e[1]%360*Qo,b=e.length>2?e[2]%360*Qo:0,r()):[v*Go,y*Go,b*Go]},ho.rebind(t,f,"precision"),function(){return a=e.apply(this,arguments),t.invert=a.invert&&n,r()}}function pn(e){return cn(e,function(t,n){e.point(t*Qo,n*Qo)})}function dn(e,t){return[e,t]}function mn(e,t){return[e>zo?e-Wo:-zo>e?e+Wo:e,t]}function gn(e,t,n){return e?t||n?Rt(yn(e),bn(t,n)):yn(e):t||n?bn(t,n):mn}function vn(e){return function(t,n){return t+=e,[t>zo?t-Wo:-zo>t?t+Wo:t,n]}}function yn(e){var t=vn(e);return t.invert=vn(-e),t}function bn(e,t){function n(e,t){var n=Math.cos(t),s=Math.cos(e)*n,u=Math.sin(e)*n,l=Math.sin(t),c=l*r+s*i;return[Math.atan2(u*a-c*o,s*r-l*i),oe(c*a+u*o)]}var r=Math.cos(e),i=Math.sin(e),a=Math.cos(t),o=Math.sin(t);return n.invert=function(e,t){var n=Math.cos(t),s=Math.cos(e)*n,u=Math.sin(e)*n,l=Math.sin(t),c=l*a-u*o;return[Math.atan2(u*a+l*o,s*r+c*i),oe(c*r-s*i)]},n}function wn(e,t){var n=Math.cos(e),r=Math.sin(e);return function(i,a,o,s){var u=o*t;null!=i?(i=xn(n,i),a=xn(n,a),(o>0?a>i:i>a)&&(i+=o*Wo)):(i=e+o*Wo,a=e-.5*u);for(var l,c=i;o>0?c>a:a>c;c-=u)s.point((l=Tt([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],l[1])}}function xn(e,t){var n=wt(t);n[0]-=e,kt(n);var r=ae(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-qo)%(2*Math.PI)}function Sn(e,t,n){var r=ho.range(e,t-qo,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function Cn(e,t,n){var r=ho.range(e,t-qo,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function _n(e){return e.source}function kn(e){return e.target}function Tn(e,t,n,r){var i=Math.cos(t),a=Math.sin(t),o=Math.cos(r),s=Math.sin(r),u=i*Math.cos(e),l=i*Math.sin(e),c=o*Math.cos(n),f=o*Math.sin(n),h=2*Math.asin(Math.sqrt(ce(r-t)+i*o*ce(n-e))),p=1/Math.sin(h),d=h?function(e){var t=Math.sin(e*=h)*p,n=Math.sin(h-e)*p,r=n*u+t*c,i=n*l+t*f,o=n*a+t*s;return[Math.atan2(i,r)*Go,Math.atan2(o,Math.sqrt(r*r+i*i))*Go]}:function(){return[e*Go,t*Go]};return d.distance=h,d}function Mn(){function e(e,i){var a=Math.sin(i*=Qo),o=Math.cos(i),s=ko((e*=Qo)-t),u=Math.cos(s);eu+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=r*a-n*o*u)*s),n*a+r*o*u),t=e,n=a,r=o}var t,n,r;tu.point=function(i,a){t=i*Qo,n=Math.sin(a*=Qo),r=Math.cos(a),tu.point=e},tu.lineEnd=function(){tu.point=tu.lineEnd=T}}function An(e,t){function n(t,n){var r=Math.cos(t),i=Math.cos(n),a=e(r*i);return[a*i*Math.sin(t),a*Math.sin(n)]}return n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),i=t(r),a=Math.sin(i),o=Math.cos(i);return[Math.atan2(e*a,r*o),Math.asin(r&&n*a/r)]},n}function En(e,t){function n(e,t){o>0?-Ho+qo>t&&(t=-Ho+qo):t>Ho-qo&&(t=Ho-qo);var n=o/Math.pow(i(t),a);return[n*Math.sin(a*e),o-n*Math.cos(a*e)]}var r=Math.cos(e),i=function(e){return Math.tan(zo/4+e/2)},a=e===t?Math.sin(e):Math.log(r/Math.cos(t))/Math.log(i(t)/i(e)),o=r*Math.pow(i(e),a)/a;return a?(n.invert=function(e,t){var n=o-t,r=re(a)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/a,2*Math.atan(Math.pow(o/r,1/a))-Ho]},n):Nn}function Pn(e,t){function n(e,t){var n=a-t;return[n*Math.sin(i*e),a-n*Math.cos(i*e)]}var r=Math.cos(e),i=e===t?Math.sin(e):(r-Math.cos(t))/(t-e),a=r/i+e;return ko(i)<qo?dn:(n.invert=function(e,t){var n=a-t;return[Math.atan2(e,n)/i,a-re(i)*Math.sqrt(e*e+n*n)]},n)}function Nn(e,t){return[e,Math.log(Math.tan(zo/4+t/2))]}function On(e){var t,n=fn(e),r=n.scale,i=n.translate,a=n.clipExtent;return n.scale=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=i.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var o=a.apply(n,arguments);if(o===n){if(t=null==e){var s=zo*r(),u=i();a([[u[0]-s,u[1]-s],[u[0]+s,u[1]+s]])}}else t&&(o=null);return o},n.clipExtent(null)}function Rn(e,t){return[Math.log(Math.tan(zo/4+t/2)),-e]}function Dn(e){return e[0]}function In(e){return e[1]}function Fn(e){for(var t=e.length,n=[0,1],r=2,i=2;t>i;i++){for(;r>1&&ie(e[n[r-2]],e[n[r-1]],e[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function Ln(e,t){return e[0]-t[0]||e[1]-t[1]}function jn(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Bn(e,t,n,r){var i=e[0],a=n[0],o=t[0]-i,s=r[0]-a,u=e[1],l=n[1],c=t[1]-u,f=r[1]-l,h=(s*(u-l)-f*(i-a))/(f*o-s*c);return[i+h*o,u+h*c]}function Un(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function qn(){ur(this),this.edge=this.site=this.circle=null}function Vn(e){var t=pu.pop()||new qn;return t.site=e,t}function zn(e){$n(e),cu.remove(e),pu.push(e),ur(e)}function Wn(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},a=e.P,o=e.N,s=[e];zn(e);for(var u=a;u.circle&&ko(n-u.circle.x)<qo&&ko(r-u.circle.cy)<qo;)a=u.P,s.unshift(u),zn(u),u=a;s.unshift(u),$n(u);for(var l=o;l.circle&&ko(n-l.circle.x)<qo&&ko(r-l.circle.cy)<qo;)o=l.N,s.push(l),zn(l),l=o;s.push(l),$n(l);var c,f=s.length;for(c=1;f>c;++c)l=s[c],u=s[c-1],ar(l.edge,u.site,l.site,i);u=s[0],l=s[f-1],l.edge=rr(u.site,l.site,null,i),Jn(u),Jn(l)}function Kn(e){for(var t,n,r,i,a=e.x,o=e.y,s=cu._;s;)if(r=Hn(s,o)-a,r>qo)s=s.L;else{if(i=a-Qn(s,o),!(i>qo)){r>-qo?(t=s.P,n=s):i>-qo?(t=s,n=s.N):t=n=s;break}if(!s.R){t=s;break}s=s.R}var u=Vn(e);if(cu.insert(t,u),t||n){if(t===n)return $n(t),n=Vn(t.site),cu.insert(u,n),u.edge=n.edge=rr(t.site,u.site),Jn(t),void Jn(n);if(!n)return void(u.edge=rr(t.site,u.site));$n(t),$n(n);var l=t.site,c=l.x,f=l.y,h=e.x-c,p=e.y-f,d=n.site,m=d.x-c,g=d.y-f,v=2*(h*g-p*m),y=h*h+p*p,b=m*m+g*g,w={x:(g*y-p*b)/v+c,y:(h*b-m*y)/v+f};ar(n.edge,l,d,w),u.edge=rr(l,e,null,w),n.edge=rr(e,d,null,w),Jn(t),Jn(n)}}function Hn(e,t){var n=e.site,r=n.x,i=n.y,a=i-t;if(!a)return r;var o=e.P;if(!o)return-(1/0);n=o.site;var s=n.x,u=n.y,l=u-t;if(!l)return s;var c=s-r,f=1/a-1/l,h=c/l;return f?(-h+Math.sqrt(h*h-2*f*(c*c/(-2*l)-u+l/2+i-a/2)))/f+r:(r+s)/2}function Qn(e,t){var n=e.N;if(n)return Hn(n,t);var r=e.site;return r.y===t?r.x:1/0}function Gn(e){this.site=e,this.edges=[]}function Yn(e){for(var t,n,r,i,a,o,s,u,l,c,f=e[0][0],h=e[1][0],p=e[0][1],d=e[1][1],m=lu,g=m.length;g--;)if(a=m[g],a&&a.prepare())for(s=a.edges,u=s.length,o=0;u>o;)c=s[o].end(),r=c.x,i=c.y,l=s[++o%u].start(),t=l.x,n=l.y,(ko(r-t)>qo||ko(i-n)>qo)&&(s.splice(o,0,new or(ir(a.site,c,ko(r-f)<qo&&d-i>qo?{x:f,y:ko(t-f)<qo?n:d}:ko(i-d)<qo&&h-r>qo?{x:ko(n-d)<qo?t:h,y:d}:ko(r-h)<qo&&i-p>qo?{x:h,y:ko(t-h)<qo?n:p}:ko(i-p)<qo&&r-f>qo?{x:ko(n-p)<qo?t:f,y:p}:null),a.site,null)),++u)}function Xn(e,t){return t.angle-e.angle}function Zn(){ur(this),this.x=this.y=this.arc=this.site=this.cy=null}function Jn(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,a=n.site;if(r!==a){var o=i.x,s=i.y,u=r.x-o,l=r.y-s,c=a.x-o,f=a.y-s,h=2*(u*f-l*c);if(!(h>=-Vo)){var p=u*u+l*l,d=c*c+f*f,m=(f*p-l*d)/h,g=(u*d-c*p)/h,f=g+s,v=du.pop()||new Zn;v.arc=e,v.site=i,v.x=m+o,v.y=f+Math.sqrt(m*m+g*g),v.cy=f,e.circle=v;for(var y=null,b=hu._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}hu.insert(y,v),y||(fu=v)}}}}function $n(e){var t=e.circle;t&&(t.P||(fu=t.N),hu.remove(t),du.push(t),ur(t),e.circle=null)}function er(e){for(var t,n=uu,r=Qt(e[0][0],e[0][1],e[1][0],e[1][1]),i=n.length;i--;)t=n[i],(!tr(t,e)||!r(t)||ko(t.a.x-t.b.x)<qo&&ko(t.a.y-t.b.y)<qo)&&(t.a=t.b=null,n.splice(i,1))}function tr(e,t){var n=e.b;if(n)return!0;var r,i,a=e.a,o=t[0][0],s=t[1][0],u=t[0][1],l=t[1][1],c=e.l,f=e.r,h=c.x,p=c.y,d=f.x,m=f.y,g=(h+d)/2,v=(p+m)/2;if(m===p){if(o>g||g>=s)return;if(h>d){if(a){if(a.y>=l)return}else a={x:g,y:u};n={x:g,y:l}}else{if(a){if(a.y<u)return}else a={x:g,y:l};n={x:g,y:u}}}else if(r=(h-d)/(m-p),i=v-r*g,-1>r||r>1)if(h>d){if(a){if(a.y>=l)return}else a={x:(u-i)/r,y:u};n={x:(l-i)/r,y:l}}else{if(a){if(a.y<u)return}else a={x:(l-i)/r,y:l};n={x:(u-i)/r,y:u}}else if(m>p){if(a){if(a.x>=s)return}else a={x:o,y:r*o+i};n={x:s,y:r*s+i}}else{if(a){if(a.x<o)return}else a={x:s,y:r*s+i};n={x:o,y:r*o+i}}return e.a=a,e.b=n,!0}function nr(e,t){this.l=e,this.r=t,this.a=this.b=null}function rr(e,t,n,r){var i=new nr(e,t);return uu.push(i),n&&ar(i,e,t,n),r&&ar(i,t,e,r),lu[e.i].edges.push(new or(i,e,t)),lu[t.i].edges.push(new or(i,t,e)),i}function ir(e,t,n){var r=new nr(e,null);return r.a=t,r.b=n,uu.push(r),r}function ar(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function or(e,t,n){var r=e.a,i=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function sr(){this._=null}function ur(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function lr(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function cr(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function fr(e){for(;e.L;)e=e.L;return e}function hr(e,t){var n,r,i,a=e.sort(pr).pop();for(uu=[],lu=new Array(e.length),cu=new sr,hu=new sr;;)if(i=fu,a&&(!i||a.y<i.y||a.y===i.y&&a.x<i.x))(a.x!==n||a.y!==r)&&(lu[a.i]=new Gn(a),Kn(a),n=a.x,r=a.y),a=e.pop();else{if(!i)break;Wn(i.arc)}t&&(er(t),Yn(t));var o={cells:lu,edges:uu};return cu=hu=uu=lu=null,o}function pr(e,t){return t.y-e.y||t.x-e.x}function dr(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function mr(e){return e.x}function gr(e){return e.y}function vr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function yr(e,t,n,r,i,a){if(!e(t,n,r,i,a)){var o=.5*(n+i),s=.5*(r+a),u=t.nodes;u[0]&&yr(e,u[0],n,r,o,s),u[1]&&yr(e,u[1],o,r,i,s),u[2]&&yr(e,u[2],n,s,o,a),u[3]&&yr(e,u[3],o,s,i,a)}}function br(e,t,n,r,i,a,o){var s,u=1/0;return function l(e,c,f,h,p){if(!(c>a||f>o||r>h||i>p)){if(d=e.point){var d,m=t-e.x,g=n-e.y,v=m*m+g*g;if(u>v){var y=Math.sqrt(u=v);r=t-y,i=n-y,a=t+y,o=n+y,s=d}}for(var b=e.nodes,w=.5*(c+h),x=.5*(f+p),S=t>=w,C=n>=x,_=C<<1|S,k=_+4;k>_;++_)if(e=b[3&_])switch(3&_){case 0:l(e,c,f,w,x);break;case 1:l(e,w,f,h,x);break;case 2:l(e,c,x,w,p);break;case 3:l(e,w,x,h,p)}}}(e,r,i,a,o),s}function wr(e,t){e=ho.rgb(e),t=ho.rgb(t);var n=e.r,r=e.g,i=e.b,a=t.r-n,o=t.g-r,s=t.b-i;return function(e){return"#"+ke(Math.round(n+a*e))+ke(Math.round(r+o*e))+ke(Math.round(i+s*e))}}function xr(e,t){var n,r={},i={};for(n in e)n in t?r[n]=_r(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return function(e){for(n in r)i[n]=r[n](e);return i}}function Sr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Cr(e,t){var n,r,i,a=gu.lastIndex=vu.lastIndex=0,o=-1,s=[],u=[];for(e+="",t+="";(n=gu.exec(e))&&(r=vu.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:Sr(n,r)})),a=vu.lastIndex;return a<t.length&&(i=t.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?u[0]?(t=u[0].x,function(e){return t(e)+""}):function(){return t}:(t=u.length,function(e){for(var n,r=0;t>r;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})}function _r(e,t){for(var n,r=ho.interpolators.length;--r>=0&&!(n=ho.interpolators[r](e,t)););return n}function kr(e,t){var n,r=[],i=[],a=e.length,o=t.length,s=Math.min(e.length,t.length);for(n=0;s>n;++n)r.push(_r(e[n],t[n]));for(;a>n;++n)i[n]=e[n];for(;o>n;++n)i[n]=t[n];return function(e){for(n=0;s>n;++n)i[n]=r[n](e);return i}}function Tr(e){return function(t){return 0>=t?0:t>=1?1:e(t)}}function Mr(e){return function(t){return 1-e(1-t)}}function Ar(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}}function Er(e){return e*e}function Pr(e){return e*e*e}function Nr(e){if(0>=e)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(.5>e?n:3*(e-t)+n-.75)}function Or(e){return function(t){return Math.pow(t,e)}}function Rr(e){return 1-Math.cos(e*Ho)}function Dr(e){return Math.pow(2,10*(e-1))}function Ir(e){return 1-Math.sqrt(1-e*e)}function Fr(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/Wo*Math.asin(1/e):(e=1,n=t/4),function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*Wo/t)}}function Lr(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function jr(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Br(e,t){e=ho.hcl(e),t=ho.hcl(t);var n=e.h,r=e.c,i=e.l,a=t.h-n,o=t.c-r,s=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.c:r),isNaN(a)?(a=0,n=isNaN(n)?t.h:n):a>180?a-=360:-180>a&&(a+=360),function(e){return me(n+a*e,r+o*e,i+s*e)+""}}function Ur(e,t){e=ho.hsl(e),t=ho.hsl(t);var n=e.h,r=e.s,i=e.l,a=t.h-n,o=t.s-r,s=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.s:r),isNaN(a)?(a=0,n=isNaN(n)?t.h:n):a>180?a-=360:-180>a&&(a+=360),function(e){return pe(n+a*e,r+o*e,i+s*e)+""}}function qr(e,t){e=ho.lab(e),t=ho.lab(t);var n=e.l,r=e.a,i=e.b,a=t.l-n,o=t.a-r,s=t.b-i;return function(e){return ve(n+a*e,r+o*e,i+s*e)+""}}function Vr(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function zr(e){var t=[e.a,e.b],n=[e.c,e.d],r=Kr(t),i=Wr(t,n),a=Kr(Hr(n,t,-i))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*Go,this.translate=[e.e,e.f],this.scale=[r,a],this.skew=a?Math.atan2(i,a)*Go:0}function Wr(e,t){return e[0]*t[0]+e[1]*t[1]}function Kr(e){var t=Math.sqrt(Wr(e,e));return t&&(e[0]/=t,e[1]/=t),t}function Hr(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function Qr(e){return e.length?e.pop()+",":""}function Gr(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:Sr(e[0],t[0])},{i:i-2,x:Sr(e[1],t[1])})}else(t[0]||t[1])&&n.push("translate("+t+")")}function Yr(e,t,n,r){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),r.push({i:n.push(Qr(n)+"rotate(",null,")")-2,x:Sr(e,t)})):t&&n.push(Qr(n)+"rotate("+t+")")}function Xr(e,t,n,r){e!==t?r.push({i:n.push(Qr(n)+"skewX(",null,")")-2,x:Sr(e,t)}):t&&n.push(Qr(n)+"skewX("+t+")")}function Zr(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push(Qr(n)+"scale(",null,",",null,")");r.push({i:i-4,x:Sr(e[0],t[0])},{i:i-2,x:Sr(e[1],t[1])})}else(1!==t[0]||1!==t[1])&&n.push(Qr(n)+"scale("+t+")")}function Jr(e,t){var n=[],r=[];return e=ho.transform(e),t=ho.transform(t),Gr(e.translate,t.translate,n,r),Yr(e.rotate,t.rotate,n,r),Xr(e.skew,t.skew,n,r),Zr(e.scale,t.scale,n,r),e=t=null,function(e){for(var t,i=-1,a=r.length;++i<a;)n[(t=r[i]).i]=t.x(e);return n.join("")}}function $r(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function ei(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function ti(e){for(var t=e.source,n=e.target,r=ri(t,n),i=[t];t!==r;)t=t.parent,i.push(t);for(var a=i.length;n!==r;)i.splice(a,0,n),n=n.parent;return i}function ni(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function ri(e,t){if(e===t)return e;for(var n=ni(e),r=ni(t),i=n.pop(),a=r.pop(),o=null;i===a;)o=i,i=n.pop(),a=r.pop();return o}function ii(e){e.fixed|=2}function ai(e){e.fixed&=-7}function oi(e){e.fixed|=4,e.px=e.x,e.py=e.y}function si(e){e.fixed&=-5}function ui(e,t,n){var r=0,i=0;if(e.charge=0,!e.leaf)for(var a,o=e.nodes,s=o.length,u=-1;++u<s;)a=o[u],null!=a&&(ui(a,t,n),e.charge+=a.charge,r+=a.charge*a.cx,i+=a.charge*a.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var l=t*n[e.point.index];e.charge+=e.pointCharge=l,r+=l*e.point.x,i+=l*e.point.y}e.cx=r/e.charge,e.cy=i/e.charge}function li(e,t){return ho.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=mi,e}function ci(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(i=e.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function fi(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(a=e.children)&&(i=a.length))for(var i,a,o=-1;++o<i;)n.push(a[o]);for(;null!=(e=r.pop());)t(e)}function hi(e){return e.children}function pi(e){return e.value}function di(e,t){return t.value-e.value}function mi(e){return ho.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function gi(e){return e.x}function vi(e){return e.y}function yi(e,t,n){e.y0=t,e.y=n}function bi(e){return ho.range(e.length)}function wi(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function xi(e){for(var t,n=1,r=0,i=e[0][1],a=e.length;a>n;++n)(t=e[n][1])>i&&(r=n,i=t);return r}function Si(e){return e.reduce(Ci,0)}function Ci(e,t){return e+t[1]}function _i(e,t){return ki(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function ki(e,t){for(var n=-1,r=+e[0],i=(e[1]-r)/t,a=[];++n<=t;)a[n]=i*n+r;return a}function Ti(e){return[ho.min(e),ho.max(e)]}function Mi(e,t){return e.value-t.value}function Ai(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function Ei(e,t){e._pack_next=t,t._pack_prev=e}function Pi(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function Ni(e){function t(e){c=Math.min(e.x-e.r,c),f=Math.max(e.x+e.r,f),h=Math.min(e.y-e.r,h),p=Math.max(e.y+e.r,p)}if((n=e.children)&&(l=n.length)){var n,r,i,a,o,s,u,l,c=1/0,f=-(1/0),h=1/0,p=-(1/0);if(n.forEach(Oi),r=n[0],r.x=-r.r,r.y=0,t(r),l>1&&(i=n[1],i.x=i.r,i.y=0,t(i),l>2))for(a=n[2],Ii(r,i,a),t(a),Ai(r,a),r._pack_prev=a,Ai(a,i),i=r._pack_next,o=3;l>o;o++){Ii(r,i,a=n[o]);var d=0,m=1,g=1;for(s=i._pack_next;s!==i;s=s._pack_next,m++)if(Pi(s,a)){d=1;break}if(1==d)for(u=r._pack_prev;u!==s._pack_prev&&!Pi(u,a);u=u._pack_prev,g++);d?(g>m||m==g&&i.r<r.r?Ei(r,i=s):Ei(r=u,i),o--):(Ai(r,a),i=a,t(a))}var v=(c+f)/2,y=(h+p)/2,b=0;for(o=0;l>o;o++)a=n[o],a.x-=v,a.y-=y,b=Math.max(b,a.r+Math.sqrt(a.x*a.x+a.y*a.y));e.r=b,n.forEach(Ri)}}function Oi(e){e._pack_next=e._pack_prev=e}function Ri(e){delete e._pack_next,delete e._pack_prev}function Di(e,t,n,r){var i=e.children;if(e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r,i)for(var a=-1,o=i.length;++a<o;)Di(i[a],t,n,r)}function Ii(e,t,n){var r=e.r+n.r,i=t.x-e.x,a=t.y-e.y;if(r&&(i||a)){var o=t.r+n.r,s=i*i+a*a;o*=o,r*=r;var u=.5+(r-o)/(2*s),l=Math.sqrt(Math.max(0,2*o*(r+s)-(r-=s)*r-o*o))/(2*s);n.x=e.x+u*i+l*a,n.y=e.y+u*a-l*i}else n.x=e.x+r,n.y=e.y}function Fi(e,t){return e.parent==t.parent?1:2}function Li(e){var t=e.children;return t.length?t[0]:e.t}function ji(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function Bi(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Ui(e){for(var t,n=0,r=0,i=e.children,a=i.length;--a>=0;)t=i[a],t.z+=n,t.m+=n,n+=t.s+(r+=t.c)}function qi(e,t,n){return e.a.parent===t.parent?e.a:n}function Vi(e){return 1+ho.max(e,function(e){return e.y})}function zi(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function Wi(e){for(var t=!0;t;){var n=e;t=!1;var r=n.children;{if(!r||!r.length)return n;e=r[0],t=!0,r=void 0}}}function Ki(e){for(var t=!0;t;){var n=e;t=!1;var r,i=n.children;{if(!i||!(r=i.length))return n;e=i[r-1],t=!0,i=r=void 0}}}function Hi(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Qi(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],a=e.dy-t[0]-t[2];return 0>i&&(n+=i/2,i=0),0>a&&(r+=a/2,a=0),{x:n,y:r,dx:i,dy:a}}function Gi(e){var t=e[0],n=e[e.length-1];return n>t?[t,n]:[n,t]}function Yi(e){return e.rangeExtent?e.rangeExtent():Gi(e.range())}function Xi(e,t,n,r){var i=n(e[0],e[1]),a=r(t[0],t[1]);return function(e){return a(i(e))}}function Zi(e,t){var n,r=0,i=e.length-1,a=e[r],o=e[i];return a>o&&(n=r,r=i,i=n,n=a,a=o,o=n),e[r]=t.floor(a),e[i]=t.ceil(o),e}function Ji(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:Au}function $i(e,t,n,r){var i=[],a=[],o=0,s=Math.min(e.length,t.length)-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<=s;)i.push(n(e[o-1],e[o])),a.push(r(t[o-1],t[o]));return function(t){var n=ho.bisect(e,t,1,s)-1;return a[n](i[n](t))}}function ea(e,t,n,r){function i(){var i=Math.min(e.length,t.length)>2?$i:Xi,u=r?ei:$r;return o=i(e,t,u,n),s=i(t,e,u,_r),a}function a(e){return o(e)}var o,s;return a.invert=function(e){return s(e)},a.domain=function(t){return arguments.length?(e=t.map(Number),i()):e},a.range=function(e){return arguments.length?(t=e,i()):t},a.rangeRound=function(e){return a.range(e).interpolate(Vr)},a.clamp=function(e){return arguments.length?(r=e,i()):r},a.interpolate=function(e){return arguments.length?(n=e,i()):n},a.ticks=function(t){return ia(e,t)},a.tickFormat=function(t,n){return aa(e,t,n)},a.nice=function(t){return na(e,t),i()},a.copy=function(){return ea(e,t,n,r)},i()}function ta(e,t){return ho.rebind(e,t,"range","rangeRound","interpolate","clamp")}function na(e,t){return Zi(e,Ji(ra(e,t)[2]))}function ra(e,t){null==t&&(t=10);var n=Gi(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),a=t/r*i;return.15>=a?i*=10:.35>=a?i*=5:.75>=a&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function ia(e,t){return ho.range.apply(ho,ra(e,t))}function aa(e,t,n){var r=ra(e,t);if(n){var i=gs.exec(n);if(i.shift(),"s"===i[8]){var a=ho.formatPrefix(Math.max(ko(r[0]),ko(r[1])));return i[7]||(i[7]="."+oa(a.scale(r[2]))),i[8]="f",n=ho.format(i.join("")),function(e){return n(a.scale(e))+a.symbol}}i[7]||(i[7]="."+sa(i[8],r)),n=i.join("")}else n=",."+oa(r[2])+"f";return ho.format(n)}function oa(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function sa(e,t){var n=oa(t[2]);return e in Eu?Math.abs(n-oa(Math.max(ko(t[0]),ko(t[1]))))+ +("e"!==e):n-2*("%"===e)}function ua(e,t,n,r){function i(e){return(n?Math.log(0>e?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function a(e){return n?Math.pow(t,e):-Math.pow(t,-e)}function o(t){return e(i(t))}return o.invert=function(t){return a(e.invert(t))},o.domain=function(t){return arguments.length?(n=t[0]>=0,e.domain((r=t.map(Number)).map(i)),o):r},o.base=function(n){return arguments.length?(t=+n,e.domain(r.map(i)),o):t},o.nice=function(){var t=Zi(r.map(i),n?Math:Nu);return e.domain(t),r=t.map(a),o},o.ticks=function(){var e=Gi(r),o=[],s=e[0],u=e[1],l=Math.floor(i(s)),c=Math.ceil(i(u)),f=t%1?2:t;if(isFinite(c-l)){if(n){for(;c>l;l++)for(var h=1;f>h;h++)o.push(a(l)*h);o.push(a(l))}else for(o.push(a(l));l++<c;)for(var h=f-1;h>0;h--)o.push(a(l)*h);for(l=0;o[l]<s;l++);for(c=o.length;o[c-1]>u;c--);o=o.slice(l,c)}return o},o.tickFormat=function(e,t){if(!arguments.length)return Pu;arguments.length<2?t=Pu:"function"!=typeof t&&(t=ho.format(t));var r,s=Math.max(.1,e/o.ticks().length),u=n?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(e){return e/a(u(i(e)+r))<=s?t(e):""}},o.copy=function(){return ua(e.copy(),t,n,r)},ta(o,e)}function la(e,t,n){function r(t){return e(i(t))}var i=ca(t),a=ca(1/t);return r.invert=function(t){return a(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(i)),r):n},r.ticks=function(e){return ia(n,e)},r.tickFormat=function(e,t){return aa(n,e,t)},r.nice=function(e){return r.domain(na(n,e))},r.exponent=function(o){return arguments.length?(i=ca(t=o),a=ca(1/t),e.domain(n.map(i)),r):t},r.copy=function(){return la(e.copy(),t,n)},ta(r,e)}function ca(e){return function(t){return 0>t?-Math.pow(-t,e):Math.pow(t,e)}}function fa(e,t){function n(n){
return a[((i.get(n)||("range"===t.t?i.set(n,e.push(n)):NaN))-1)%a.length]}function r(t,n){return ho.range(e.length).map(function(e){return t+n*e})}var i,a,o;return n.domain=function(r){if(!arguments.length)return e;e=[],i=new d;for(var a,o=-1,s=r.length;++o<s;)i.has(a=r[o])||i.set(a,e.push(a));return n[t.t].apply(n,t.a)},n.range=function(e){return arguments.length?(a=e,o=0,t={t:"range",a:arguments},n):a},n.rangePoints=function(i,s){arguments.length<2&&(s=0);var u=i[0],l=i[1],c=e.length<2?(u=(u+l)/2,0):(l-u)/(e.length-1+s);return a=r(u+c*s/2,c),o=0,t={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(i,s){arguments.length<2&&(s=0);var u=i[0],l=i[1],c=e.length<2?(u=l=Math.round((u+l)/2),0):(l-u)/(e.length-1+s)|0;return a=r(u+Math.round(c*s/2+(l-u-(e.length-1+s)*c)/2),c),o=0,t={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(i,s,u){arguments.length<2&&(s=0),arguments.length<3&&(u=s);var l=i[1]<i[0],c=i[l-0],f=i[1-l],h=(f-c)/(e.length-s+2*u);return a=r(c+h*u,h),l&&a.reverse(),o=h*(1-s),t={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,s,u){arguments.length<2&&(s=0),arguments.length<3&&(u=s);var l=i[1]<i[0],c=i[l-0],f=i[1-l],h=Math.floor((f-c)/(e.length-s+2*u));return a=r(c+Math.round((f-c-(e.length-s)*h)/2),h),l&&a.reverse(),o=Math.round(h*(1-s)),t={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return o},n.rangeExtent=function(){return Gi(t.a[0])},n.copy=function(){return fa(e,t)},n.domain(e)}function ha(e,t){function n(){var n=0,a=t.length;for(i=[];++n<a;)i[n-1]=ho.quantile(e,n/a);return r}function r(e){return isNaN(e=+e)?void 0:t[ho.bisect(i,e)]}var i;return r.domain=function(t){return arguments.length?(e=t.map(u).filter(l).sort(s),n()):e},r.range=function(e){return arguments.length?(t=e,n()):t},r.quantiles=function(){return i},r.invertExtent=function(n){return n=t.indexOf(n),0>n?[NaN,NaN]:[n>0?i[n-1]:e[0],n<i.length?i[n]:e[e.length-1]]},r.copy=function(){return ha(e,t)},n()}function pa(e,t,n){function r(t){return n[Math.max(0,Math.min(o,Math.floor(a*(t-e))))]}function i(){return a=n.length/(t-e),o=n.length-1,r}var a,o;return r.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],i()):[e,t]},r.range=function(e){return arguments.length?(n=e,i()):n},r.invertExtent=function(t){return t=n.indexOf(t),t=0>t?NaN:t/a+e,[t,t+1/a]},r.copy=function(){return pa(e,t,n)},i()}function da(e,t){function n(n){return n>=n?t[ho.bisect(e,n)]:void 0}return n.domain=function(t){return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(t=e,n):t},n.invertExtent=function(n){return n=t.indexOf(n),[e[n-1],e[n]]},n.copy=function(){return da(e,t)},n}function ma(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return ia(e,t)},t.tickFormat=function(t,n){return aa(e,t,n)},t.copy=function(){return ma(e)},t}function ga(){return 0}function va(e){return e.innerRadius}function ya(e){return e.outerRadius}function ba(e){return e.startAngle}function wa(e){return e.endAngle}function xa(e){return e&&e.padAngle}function Sa(e,t,n,r){return(e-n)*t-(t-r)*e>0?0:1}function Ca(e,t,n,r,i){var a=e[0]-t[0],o=e[1]-t[1],s=(i?r:-r)/Math.sqrt(a*a+o*o),u=s*o,l=-s*a,c=e[0]+u,f=e[1]+l,h=t[0]+u,p=t[1]+l,d=(c+h)/2,m=(f+p)/2,g=h-c,v=p-f,y=g*g+v*v,b=n-r,w=c*p-h*f,x=(0>v?-1:1)*Math.sqrt(Math.max(0,b*b*y-w*w)),S=(w*v-g*x)/y,C=(-w*g-v*x)/y,_=(w*v+g*x)/y,k=(-w*g+v*x)/y,T=S-d,M=C-m,A=_-d,E=k-m;return T*T+M*M>A*A+E*E&&(S=_,C=k),[[S-u,C-l],[S*n/b,C*n/b]]}function _a(e){function t(t){function o(){l.push("M",a(e(c),s))}for(var u,l=[],c=[],f=-1,h=t.length,p=Ne(n),d=Ne(r);++f<h;)i.call(this,u=t[f],f)?c.push([+p.call(this,u,f),+d.call(this,u,f)]):c.length&&(o(),c=[]);return c.length&&o(),l.length?l.join(""):null}var n=Dn,r=In,i=Dt,a=ka,o=a.key,s=.7;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.defined=function(e){return arguments.length?(i=e,t):i},t.interpolate=function(e){return arguments.length?(o="function"==typeof e?a=e:(a=Lu.get(e)||ka).key,t):o},t.tension=function(e){return arguments.length?(s=e,t):s},t}function ka(e){return e.length>1?e.join("L"):e+"Z"}function Ta(e){return e.join("L")+"Z"}function Ma(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function Aa(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function Ea(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function Pa(e,t){return e.length<4?ka(e):e[1]+Ra(e.slice(1,-1),Da(e,t))}function Na(e,t){return e.length<3?Ta(e):e[0]+Ra((e.push(e[0]),e),Da([e[e.length-2]].concat(e,[e[1]]),t))}function Oa(e,t){return e.length<3?ka(e):e[0]+Ra(e,Da(e,t))}function Ra(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return ka(e);var n=e.length!=t.length,r="",i=e[0],a=e[1],o=t[0],s=o,u=1;if(n&&(r+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],i=e[1],u=2),t.length>1){s=t[1],a=e[u],u++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var l=2;l<t.length;l++,u++)a=e[u],s=t[l],r+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}if(n){var c=e[u];r+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+c[0]+","+c[1]}return r}function Da(e,t){for(var n,r=[],i=(1-t)/2,a=e[0],o=e[1],s=1,u=e.length;++s<u;)n=a,a=o,o=e[s],r.push([i*(o[0]-n[0]),i*(o[1]-n[1])]);return r}function Ia(e){if(e.length<3)return ka(e);var t=1,n=e.length,r=e[0],i=r[0],a=r[1],o=[i,i,i,(r=e[1])[0]],s=[a,a,a,r[1]],u=[i,",",a,"L",Ba(Uu,o),",",Ba(Uu,s)];for(e.push(e[n-1]);++t<=n;)r=e[t],o.shift(),o.push(r[0]),s.shift(),s.push(r[1]),Ua(u,o,s);return e.pop(),u.push("L",r),u.join("")}function Fa(e){if(e.length<4)return ka(e);for(var t,n=[],r=-1,i=e.length,a=[0],o=[0];++r<3;)t=e[r],a.push(t[0]),o.push(t[1]);for(n.push(Ba(Uu,a)+","+Ba(Uu,o)),--r;++r<i;)t=e[r],a.shift(),a.push(t[0]),o.shift(),o.push(t[1]),Ua(n,a,o);return n.join("")}function La(e){for(var t,n,r=-1,i=e.length,a=i+4,o=[],s=[];++r<4;)n=e[r%i],o.push(n[0]),s.push(n[1]);for(t=[Ba(Uu,o),",",Ba(Uu,s)],--r;++r<a;)n=e[r%i],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),Ua(t,o,s);return t.join("")}function ja(e,t){var n=e.length-1;if(n)for(var r,i,a=e[0][0],o=e[0][1],s=e[n][0]-a,u=e[n][1]-o,l=-1;++l<=n;)r=e[l],i=l/n,r[0]=t*r[0]+(1-t)*(a+i*s),r[1]=t*r[1]+(1-t)*(o+i*u);return Ia(e)}function Ba(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Ua(e,t,n){e.push("C",Ba(ju,t),",",Ba(ju,n),",",Ba(Bu,t),",",Ba(Bu,n),",",Ba(Uu,t),",",Ba(Uu,n))}function qa(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Va(e){for(var t=0,n=e.length-1,r=[],i=e[0],a=e[1],o=r[0]=qa(i,a);++t<n;)r[t]=(o+(o=qa(i=a,a=e[t+1])))/2;return r[t]=o,r}function za(e){for(var t,n,r,i,a=[],o=Va(e),s=-1,u=e.length-1;++s<u;)t=qa(e[s],e[s+1]),ko(t)<qo?o[s]=o[s+1]=0:(n=o[s]/t,r=o[s+1]/t,i=n*n+r*r,i>9&&(i=3*t/Math.sqrt(i),o[s]=i*n,o[s+1]=i*r));for(s=-1;++s<=u;)i=(e[Math.min(u,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([i||0,o[s]*i||0]);return a}function Wa(e){return e.length<3?ka(e):e[0]+Ra(e,za(e))}function Ka(e){for(var t,n,r,i=-1,a=e.length;++i<a;)t=e[i],n=t[0],r=t[1]-Ho,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function Ha(e){function t(t){function u(){m.push("M",s(e(v),f),c,l(e(g.reverse()),f),"Z")}for(var h,p,d,m=[],g=[],v=[],y=-1,b=t.length,w=Ne(n),x=Ne(i),S=n===r?function(){return p}:Ne(r),C=i===a?function(){return d}:Ne(a);++y<b;)o.call(this,h=t[y],y)?(g.push([p=+w.call(this,h,y),d=+x.call(this,h,y)]),v.push([+S.call(this,h,y),+C.call(this,h,y)])):g.length&&(u(),g=[],v=[]);return g.length&&u(),m.length?m.join(""):null}var n=Dn,r=Dn,i=0,a=In,o=Dt,s=ka,u=s.key,l=s,c="L",f=.7;return t.x=function(e){return arguments.length?(n=r=e,t):r},t.x0=function(e){return arguments.length?(n=e,t):n},t.x1=function(e){return arguments.length?(r=e,t):r},t.y=function(e){return arguments.length?(i=a=e,t):a},t.y0=function(e){return arguments.length?(i=e,t):i},t.y1=function(e){return arguments.length?(a=e,t):a},t.defined=function(e){return arguments.length?(o=e,t):o},t.interpolate=function(e){return arguments.length?(u="function"==typeof e?s=e:(s=Lu.get(e)||ka).key,l=s.reverse||s,c=s.closed?"M":"L",t):u},t.tension=function(e){return arguments.length?(f=e,t):f},t}function Qa(e){return e.radius}function Ga(e){return[e.x,e.y]}function Ya(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]-Ho;return[n*Math.cos(r),n*Math.sin(r)]}}function Xa(){return 64}function Za(){return"circle"}function Ja(e){var t=Math.sqrt(e/zo);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function $a(e){return function(){var t,n,r;(t=this[e])&&(r=t[n=t.active])&&(r.timer.c=null,r.timer.t=NaN,--t.count?delete t[n]:delete this[e],t.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function eo(e,t,n){return Po(e,Qu),e.namespace=t,e.id=n,e}function to(e,t,n,r){var i=e.id,a=e.namespace;return G(e,"function"==typeof n?function(e,o,s){e[a][i].tween.set(t,r(n.call(e,e.__data__,o,s)))}:(n=r(n),function(e){e[a][i].tween.set(t,n)}))}function no(e){return null==e&&(e=""),function(){this.textContent=e}}function ro(e){return null==e?"__transition__":"__transition_"+e+"__"}function io(e,t,n,r,i){function a(e){var t=m.delay;return l.t=t+u,e>=t?o(e-t):void(l.c=o)}function o(n){var i=p.active,a=p[i];a&&(a.timer.c=null,a.timer.t=NaN,--p.count,delete p[i],a.event&&a.event.interrupt.call(e,e.__data__,a.index));for(var o in p)if(r>+o){var d=p[o];d.timer.c=null,d.timer.t=NaN,--p.count,delete p[o]}l.c=s,Fe(function(){return l.c&&s(n||1)&&(l.c=null,l.t=NaN),1},0,u),p.active=r,m.event&&m.event.start.call(e,e.__data__,t),h=[],m.tween.forEach(function(n,r){(r=r.call(e,e.__data__,t))&&h.push(r)}),f=m.ease,c=m.duration}function s(i){for(var a=i/c,o=f(a),s=h.length;s>0;)h[--s].call(e,o);return a>=1?(m.event&&m.event.end.call(e,e.__data__,t),--p.count?delete p[r]:delete e[n],1):void 0}var u,l,c,f,h,p=e[n]||(e[n]={active:0,count:0}),m=p[r];m||(u=i.time,l=Fe(a,0,u),m=p[r]={tween:new d,time:u,timer:l,delay:i.delay,duration:i.duration,ease:i.ease,index:t},i=null,++p.count)}function ao(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate("+(isFinite(r)?r:n(e))+",0)"})}function oo(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate(0,"+(isFinite(r)?r:n(e))+")"})}function so(e){return e.toISOString()}function uo(e,t,n){function r(t){return e(t)}function i(e,n){var r=e[1]-e[0],i=r/n,a=ho.bisect(nl,i);return a==nl.length?[t.year,ra(e.map(function(e){return e/31536e6}),n)[2]]:a?t[i/nl[a-1]<nl[a]/i?a-1:a]:[al,ra(e,n)[2]]}return r.invert=function(t){return lo(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain(t),r):e.domain().map(lo)},r.nice=function(e,t){function n(n){return!isNaN(n)&&!e.range(n,lo(+n+1),t).length}var a=r.domain(),o=Gi(a),s=null==e?i(o,10):"number"==typeof e&&i(o,e);return s&&(e=s[0],t=s[1]),r.domain(Zi(a,t>1?{floor:function(t){for(;n(t=e.floor(t));)t=lo(t-1);return t},ceil:function(t){for(;n(t=e.ceil(t));)t=lo(+t+1);return t}}:e))},r.ticks=function(e,t){var n=Gi(r.domain()),a=null==e?i(n,10):"number"==typeof e?i(n,e):!e.range&&[{range:e},t];return a&&(e=a[0],t=a[1]),e.range(n[0],lo(+n[1]+1),1>t?1:t)},r.tickFormat=function(){return n},r.copy=function(){return uo(e.copy(),t,n)},ta(r,e)}function lo(e){return new Date(e)}function co(e){return JSON.parse(e.responseText)}function fo(e){var t=go.createRange();return t.selectNode(go.body),t.createContextualFragment(e.responseText)}var ho={version:"3.5.10"},po=[].slice,mo=function(e){return po.call(e)},go=this.document;if(go)try{mo(go.documentElement.childNodes)[0].nodeType}catch(vo){mo=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+new Date}),go)try{go.createElement("DIV").style.setProperty("opacity",0,"")}catch(yo){var bo=this.Element.prototype,wo=bo.setAttribute,xo=bo.setAttributeNS,So=this.CSSStyleDeclaration.prototype,Co=So.setProperty;bo.setAttribute=function(e,t){wo.call(this,e,t+"")},bo.setAttributeNS=function(e,t,n){xo.call(this,e,t,n+"")},So.setProperty=function(e,t,n){Co.call(this,e,t+"",n)}}ho.ascending=s,ho.descending=function(e,t){return e>t?-1:t>e?1:t>=e?0:NaN},ho.min=function(e,t){var n,r,i=-1,a=e.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=e[i])&&n>r&&(n=r)}else{for(;++i<a;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=t.call(e,e[i],i))&&n>r&&(n=r)}return n},ho.max=function(e,t){var n,r,i=-1,a=e.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=e[i])&&r>n&&(n=r)}else{for(;++i<a;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=t.call(e,e[i],i))&&r>n&&(n=r)}return n},ho.extent=function(e,t){var n,r,i,a=-1,o=e.length;if(1===arguments.length){for(;++a<o;)if(null!=(r=e[a])&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=e[a])&&(n>r&&(n=r),r>i&&(i=r))}else{for(;++a<o;)if(null!=(r=t.call(e,e[a],a))&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=t.call(e,e[a],a))&&(n>r&&(n=r),r>i&&(i=r))}return[n,i]},ho.sum=function(e,t){var n,r=0,i=e.length,a=-1;if(1===arguments.length)for(;++a<i;)l(n=+e[a])&&(r+=n);else for(;++a<i;)l(n=+t.call(e,e[a],a))&&(r+=n);return r},ho.mean=function(e,t){var n,r=0,i=e.length,a=-1,o=i;if(1===arguments.length)for(;++a<i;)l(n=u(e[a]))?r+=n:--o;else for(;++a<i;)l(n=u(t.call(e,e[a],a)))?r+=n:--o;return o?r/o:void 0},ho.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],a=n-r;return a?i+a*(e[r]-i):i},ho.median=function(e,t){var n,r=[],i=e.length,a=-1;if(1===arguments.length)for(;++a<i;)l(n=u(e[a]))&&r.push(n);else for(;++a<i;)l(n=u(t.call(e,e[a],a)))&&r.push(n);return r.length?ho.quantile(r.sort(s),.5):void 0},ho.variance=function(e,t){var n,r,i=e.length,a=0,o=0,s=-1,c=0;if(1===arguments.length)for(;++s<i;)l(n=u(e[s]))&&(r=n-a,a+=r/++c,o+=r*(n-a));else for(;++s<i;)l(n=u(t.call(e,e[s],s)))&&(r=n-a,a+=r/++c,o+=r*(n-a));return c>1?o/(c-1):void 0},ho.deviation=function(){var e=ho.variance.apply(this,arguments);return e?Math.sqrt(e):e};var _o=c(s);ho.bisectLeft=_o.left,ho.bisect=ho.bisectRight=_o.right,ho.bisector=function(e){return c(1===e.length?function(t,n){return s(e(t),n)}:e)},ho.shuffle=function(e,t,n){(a=arguments.length)<3&&(n=e.length,2>a&&(t=0));for(var r,i,a=n-t;a;)i=Math.random()*a--|0,r=e[a+t],e[a+t]=e[i+t],e[i+t]=r;return e},ho.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},ho.pairs=function(e){for(var t,n=0,r=e.length-1,i=e[0],a=new Array(0>r?0:r);r>n;)a[n]=[t=i,i=e[++n]];return a},ho.zip=function(){if(!(r=arguments.length))return[];for(var e=-1,t=ho.min(arguments,f),n=new Array(t);++e<t;)for(var r,i=-1,a=n[e]=new Array(r);++i<r;)a[i]=arguments[i][e];return n},ho.transpose=function(e){return ho.zip.apply(ho,e)},ho.keys=function(e){var t=[];for(var n in e)t.push(n);return t},ho.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},ho.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},ho.merge=function(e){for(var t,n,r,i=e.length,a=-1,o=0;++a<i;)o+=e[a].length;for(n=new Array(o);--i>=0;)for(r=e[i],t=r.length;--t>=0;)n[--o]=r[t];return n};var ko=Math.abs;ho.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n===1/0)throw new Error("infinite range");var r,i=[],a=h(ko(n)),o=-1;if(e*=a,t*=a,n*=a,0>n)for(;(r=e+n*++o)>t;)i.push(r/a);else for(;(r=e+n*++o)<t;)i.push(r/a);return i},ho.map=function(e,t){var n=new d;if(e instanceof d)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var r,i=-1,a=e.length;if(1===arguments.length)for(;++i<a;)n.set(i,e[i]);else for(;++i<a;)n.set(t.call(e,r=e[i],i),r)}else for(var o in e)n.set(o,e[o]);return n};var To="__proto__",Mo="\x00";p(d,{has:v,get:function(e){return this._[m(e)]},set:function(e,t){return this._[m(e)]=t},remove:y,keys:b,values:function ul(){var ul=[];for(var e in this._)ul.push(this._[e]);return ul},entries:function ll(){var ll=[];for(var e in this._)ll.push({key:g(e),value:this._[e]});return ll},size:w,empty:x,forEach:function(e){for(var t in this._)e.call(this,g(t),this._[t])}}),ho.nest=function(){function e(t,o,s){if(s>=a.length)return r?r.call(i,o):n?o.sort(n):o;for(var u,l,c,f,h=-1,p=o.length,m=a[s++],g=new d;++h<p;)(f=g.get(u=m(l=o[h])))?f.push(l):g.set(u,[l]);return t?(l=t(),c=function(n,r){l.set(n,e(t,r,s))}):(l={},c=function(n,r){l[n]=e(t,r,s)}),g.forEach(c),l}function t(e,n){if(n>=a.length)return e;var r=[],i=o[n++];return e.forEach(function(e,i){r.push({key:e,values:t(i,n)})}),i?r.sort(function(e,t){return i(e.key,t.key)}):r}var n,r,i={},a=[],o=[];return i.map=function(t,n){return e(n,t,0)},i.entries=function(n){return t(e(ho.map,n,0),0)},i.key=function(e){return a.push(e),i},i.sortKeys=function(e){return o[a.length-1]=e,i},i.sortValues=function(e){return n=e,i},i.rollup=function(e){return r=e,i},i},ho.set=function(e){var t=new S;if(e)for(var n=0,r=e.length;r>n;++n)t.add(e[n]);return t},p(S,{has:v,add:function(e){return this._[m(e+="")]=!0,e},remove:y,values:b,size:w,empty:x,forEach:function(e){for(var t in this._)e.call(this,g(t))}}),ho.behavior={},ho.rebind=function(e,t){for(var n,r=1,i=arguments.length;++r<i;)e[n=arguments[r]]=_(e,t,t[n]);return e};var Ao=["webkit","ms","moz","Moz","o","O"];ho.dispatch=function(){for(var e=new M,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=A(e);return e},M.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},ho.event=null,ho.requote=function(e){return e.replace(Eo,"\\$&")};var Eo=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Po={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},No=function(e,t){return t.querySelector(e)},Oo=function(e,t){return t.querySelectorAll(e)},Ro=function(e,t){var n=e.matches||e[k(e,"matchesSelector")];return(Ro=function(e,t){return n.call(e,t)})(e,t)};"function"==typeof Sizzle&&(No=function(e,t){return Sizzle(e,t)[0]||null},Oo=Sizzle,Ro=Sizzle.matchesSelector),ho.selection=function(){return ho.select(go.documentElement)};var Do=ho.selection.prototype=[];Do.select=function(e){var t,n,r,i,a=[];e=R(e);for(var o=-1,s=this.length;++o<s;){a.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var u=-1,l=r.length;++u<l;)(i=r[u])?(t.push(n=e.call(i,i.__data__,u,o)),n&&"__data__"in i&&(n.__data__=i.__data__)):t.push(null)}return O(a)},Do.selectAll=function(e){var t,n,r=[];e=D(e);for(var i=-1,a=this.length;++i<a;)for(var o=this[i],s=-1,u=o.length;++s<u;)(n=o[s])&&(r.push(t=mo(e.call(n,n.__data__,s,i))),t.parentNode=n);return O(r)};var Io={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ho.ns={prefix:Io,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&"xmlns"!==(n=e.slice(0,t))&&(e=e.slice(t+1)),Io.hasOwnProperty(n)?{space:Io[n],local:e}:e}},Do.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return e=ho.ns.qualify(e),e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(I(t,e[t]));return this}return this.each(I(e,t))},Do.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=j(e)).length,i=-1;if(t=n.classList){for(;++i<r;)if(!t.contains(e[i]))return!1}else for(t=n.getAttribute("class");++i<r;)if(!L(e[i]).test(t))return!1;return!0}for(t in e)this.each(B(t,e[t]));return this}return this.each(B(e,t))},Do.style=function(e,t,n){var r=arguments.length;if(3>r){if("string"!=typeof e){2>r&&(t="");for(n in e)this.each(q(n,e[n],t));return this}if(2>r){var i=this.node();return o(i).getComputedStyle(i,null).getPropertyValue(e)}n=""}return this.each(q(e,t,n))},Do.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(V(t,e[t]));return this}return this.each(V(e,t))},Do.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},Do.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},Do.append=function(e){return e=z(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},Do.insert=function(e,t){return e=z(e),t=R(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},Do.remove=function(){return this.each(W)},Do.data=function(e,t){function n(e,n){var r,i,a,o=e.length,c=n.length,f=Math.min(o,c),h=new Array(c),p=new Array(c),m=new Array(o);if(t){var g,v=new d,y=new Array(o);for(r=-1;++r<o;)(i=e[r])&&(v.has(g=t.call(i,i.__data__,r))?m[r]=i:v.set(g,i),y[r]=g);for(r=-1;++r<c;)(i=v.get(g=t.call(n,a=n[r],r)))?i!==!0&&(h[r]=i,i.__data__=a):p[r]=K(a),v.set(g,!0);for(r=-1;++r<o;)r in y&&v.get(y[r])!==!0&&(m[r]=e[r])}else{for(r=-1;++r<f;)i=e[r],a=n[r],i?(i.__data__=a,h[r]=i):p[r]=K(a);for(;c>r;++r)p[r]=K(n[r]);for(;o>r;++r)m[r]=e[r]}p.update=h,p.parentNode=h.parentNode=m.parentNode=e.parentNode,s.push(p),u.push(h),l.push(m)}var r,i,a=-1,o=this.length;if(!arguments.length){for(e=new Array(o=(r=this[0]).length);++a<o;)(i=r[a])&&(e[a]=i.__data__);return e}var s=Y([]),u=O([]),l=O([]);if("function"==typeof e)for(;++a<o;)n(r=this[a],e.call(r,r.parentNode.__data__,a));else for(;++a<o;)n(r=this[a],e);return u.enter=function(){return s},u.exit=function(){return l},u},Do.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},Do.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=H(e));for(var a=0,o=this.length;o>a;a++){i.push(t=[]),t.parentNode=(n=this[a]).parentNode;for(var s=0,u=n.length;u>s;s++)(r=n[s])&&e.call(r,r.__data__,s,a)&&t.push(r)}return O(i)},Do.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],i=r.length-1,a=r[i];--i>=0;)(n=r[i])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},Do.sort=function(e){e=Q.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},Do.each=function(e){return G(this,function(t,n,r){e.call(t,t.__data__,n,r)})},Do.call=function(e){var t=mo(arguments);return e.apply(t[0]=this,t),this},Do.empty=function(){return!this.node()},Do.node=function(){for(var e=0,t=this.length;t>e;e++)for(var n=this[e],r=0,i=n.length;i>r;r++){var a=n[r];if(a)return a}return null},Do.size=function(){var e=0;return G(this,function(){++e}),e};var Fo=[];ho.selection.enter=Y,ho.selection.enter.prototype=Fo,Fo.append=Do.append,Fo.empty=Do.empty,Fo.node=Do.node,Fo.call=Do.call,Fo.size=Do.size,Fo.select=function(e){for(var t,n,r,i,a,o=[],s=-1,u=this.length;++s<u;){r=(i=this[s]).update,o.push(t=[]),t.parentNode=i.parentNode;for(var l=-1,c=i.length;++l<c;)(a=i[l])?(t.push(r[l]=n=e.call(i.parentNode,a.__data__,l,s)),n.__data__=a.__data__):t.push(null)}return O(o)},Fo.insert=function(e,t){return arguments.length<2&&(t=X(this)),Do.insert.call(this,e,t)},ho.select=function(e){var t;return"string"==typeof e?(t=[No(e,go)],t.parentNode=go.documentElement):(t=[e],t.parentNode=a(e)),O([t])},ho.selectAll=function(e){var t;return"string"==typeof e?(t=mo(Oo(e,go)),t.parentNode=go.documentElement):(t=mo(e),t.parentNode=null),O([t])},Do.on=function(e,t,n){var r=arguments.length;if(3>r){if("string"!=typeof e){2>r&&(t=!1);for(n in e)this.each(Z(n,e[n],t));return this}if(2>r)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(Z(e,t,n))};var Lo=ho.map({mouseenter:"mouseover",mouseleave:"mouseout"});go&&Lo.forEach(function(e){"on"+e in go&&Lo.remove(e)});var jo,Bo=0;ho.mouse=function(e){return te(e,P())};var Uo=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;ho.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=P().changedTouches),t)for(var r,i=0,a=t.length;a>i;++i)if((r=t[i]).identifier===n)return te(e,r)},ho.behavior.drag=function(){function e(){this.on("mousedown.drag",i).on("touchstart.drag",a)}function t(e,t,i,a,o){return function(){function s(){var e,n,r=t(h,m);r&&(e=r[0]-b[0],n=r[1]-b[1],d|=e|n,b=r,p({type:"drag",x:r[0]+l[0],y:r[1]+l[1],dx:e,dy:n}))}function u(){t(h,m)&&(v.on(a+g,null).on(o+g,null),y(d),p({type:"dragend"}))}var l,c=this,f=ho.event.target,h=c.parentNode,p=n.of(c,arguments),d=0,m=e(),g=".drag"+(null==m?"":"-"+m),v=ho.select(i(f)).on(a+g,s).on(o+g,u),y=ee(f),b=t(h,m);r?(l=r.apply(c,arguments),l=[l.x-b[0],l.y-b[1]]):l=[0,0],p({type:"dragstart"})}}var n=N(e,"drag","dragstart","dragend"),r=null,i=t(T,ho.mouse,o,"mousemove","mouseup"),a=t(ne,ho.touch,C,"touchmove","touchend");return e.origin=function(t){return arguments.length?(r=t,e):r},ho.rebind(e,n,"on")},ho.touches=function(e,t){return arguments.length<2&&(t=P().touches),t?mo(t).map(function(t){var n=te(e,t);return n.identifier=t.identifier,n}):[]};var qo=1e-6,Vo=qo*qo,zo=Math.PI,Wo=2*zo,Ko=Wo-qo,Ho=zo/2,Qo=zo/180,Go=180/zo,Yo=Math.SQRT2,Xo=2,Zo=4;ho.interpolateZoom=function(e,t){var n,r,i=e[0],a=e[1],o=e[2],s=t[0],u=t[1],l=t[2],c=s-i,f=u-a,h=c*c+f*f;if(Vo>h)r=Math.log(l/o)/Yo,n=function(e){return[i+e*c,a+e*f,o*Math.exp(Yo*e*r)]};else{var p=Math.sqrt(h),d=(l*l-o*o+Zo*h)/(2*o*Xo*p),m=(l*l-o*o-Zo*h)/(2*l*Xo*p),g=Math.log(Math.sqrt(d*d+1)-d),v=Math.log(Math.sqrt(m*m+1)-m);r=(v-g)/Yo,n=function(e){var t=e*r,n=ue(g),s=o/(Xo*p)*(n*le(Yo*t+g)-se(g));return[i+s*c,a+s*f,o*n/ue(Yo*t+g)]}}return n.duration=1e3*r,n},ho.behavior.zoom=function(){function e(e){e.on(P,f).on($o+".zoom",p).on("dblclick.zoom",d).on(D,h)}function t(e){return[(e[0]-_.x)/_.k,(e[1]-_.y)/_.k]}function n(e){return[e[0]*_.k+_.x,e[1]*_.k+_.y]}function r(e){_.k=Math.max(T[0],Math.min(T[1],e))}function i(e,t){t=n(t),_.x+=e[0]-t[0],_.y+=e[1]-t[1]}function a(t,n,a,o){t.__chart__={x:_.x,y:_.y,k:_.k},r(Math.pow(2,o)),i(g=n,a),t=ho.select(t),M>0&&(t=t.transition().duration(M)),t.call(e.event)}function s(){x&&x.domain(w.range().map(function(e){return(e-_.x)/_.k}).map(w.invert)),C&&C.domain(S.range().map(function(e){return(e-_.y)/_.k}).map(S.invert))}function u(e){A++||e({type:"zoomstart"})}function l(e){s(),e({type:"zoom",scale:_.k,translate:[_.x,_.y]})}function c(e){--A||(e({type:"zoomend"}),g=null)}function f(){function e(){s=1,i(ho.mouse(r),h),l(a)}function n(){f.on(O,null).on(R,null),p(s),c(a)}var r=this,a=I.of(r,arguments),s=0,f=ho.select(o(r)).on(O,e).on(R,n),h=t(ho.mouse(r)),p=ee(r);Hu.call(r),u(a)}function h(){function e(){var e=ho.touches(d);return p=_.k,e.forEach(function(e){e.identifier in g&&(g[e.identifier]=t(e))}),e}function n(){var t=ho.event.target;ho.select(t).on(w,o).on(x,s),S.push(t);for(var n=ho.event.changedTouches,r=0,i=n.length;i>r;++r)g[n[r].identifier]=null;var u=e(),l=Date.now();if(1===u.length){if(500>l-b){var c=u[0];a(d,c,g[c.identifier],Math.floor(Math.log(_.k)/Math.LN2)+1),E()}b=l}else if(u.length>1){var c=u[0],f=u[1],h=c[0]-f[0],p=c[1]-f[1];v=h*h+p*p}}function o(){var e,t,n,a,o=ho.touches(d);Hu.call(d);for(var s=0,u=o.length;u>s;++s,a=null)if(n=o[s],a=g[n.identifier]){if(t)break;e=n,t=a}if(a){var c=(c=n[0]-e[0])*c+(c=n[1]-e[1])*c,f=v&&Math.sqrt(c/v);e=[(e[0]+n[0])/2,(e[1]+n[1])/2],t=[(t[0]+a[0])/2,(t[1]+a[1])/2],r(f*p)}b=null,i(e,t),l(m)}function s(){if(ho.event.touches.length){for(var t=ho.event.changedTouches,n=0,r=t.length;r>n;++n)delete g[t[n].identifier];for(var i in g)return void e()}ho.selectAll(S).on(y,null),C.on(P,f).on(D,h),k(),c(m)}var p,d=this,m=I.of(d,arguments),g={},v=0,y=".zoom-"+ho.event.changedTouches[0].identifier,w="touchmove"+y,x="touchend"+y,S=[],C=ho.select(d),k=ee(d);n(),u(m),C.on(P,null).on(D,n)}function p(){var e=I.of(this,arguments);y?clearTimeout(y):(Hu.call(this),m=t(g=v||ho.mouse(this)),u(e)),y=setTimeout(function(){y=null,c(e)},50),E(),r(Math.pow(2,.002*Jo())*_.k),i(g,m),l(e)}function d(){var e=ho.mouse(this),n=Math.log(_.k)/Math.LN2;a(this,e,t(e),ho.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}var m,g,v,y,b,w,x,S,C,_={x:0,y:0,k:1},k=[960,500],T=es,M=250,A=0,P="mousedown.zoom",O="mousemove.zoom",R="mouseup.zoom",D="touchstart.zoom",I=N(e,"zoomstart","zoom","zoomend");return $o||($o="onwheel"in go?(Jo=function(){return-ho.event.deltaY*(ho.event.deltaMode?120:1)},"wheel"):"onmousewheel"in go?(Jo=function(){return ho.event.wheelDelta},"mousewheel"):(Jo=function(){return-ho.event.detail},"MozMousePixelScroll")),e.event=function(e){e.each(function(){var e=I.of(this,arguments),t=_;Wu?ho.select(this).transition().each("start.zoom",function(){_=this.__chart__||{x:0,y:0,k:1},u(e)}).tween("zoom:zoom",function(){var n=k[0],r=k[1],i=g?g[0]:n/2,a=g?g[1]:r/2,o=ho.interpolateZoom([(i-_.x)/_.k,(a-_.y)/_.k,n/_.k],[(i-t.x)/t.k,(a-t.y)/t.k,n/t.k]);return function(t){var r=o(t),s=n/r[2];this.__chart__=_={x:i-r[0]*s,y:a-r[1]*s,k:s},l(e)}}).each("interrupt.zoom",function(){c(e)}).each("end.zoom",function(){c(e)}):(this.__chart__=_,u(e),l(e),c(e))})},e.translate=function(t){return arguments.length?(_={x:+t[0],y:+t[1],k:_.k},s(),e):[_.x,_.y]},e.scale=function(t){return arguments.length?(_={x:_.x,y:_.y,k:null},r(+t),s(),e):_.k},e.scaleExtent=function(t){return arguments.length?(T=null==t?es:[+t[0],+t[1]],e):T},e.center=function(t){return arguments.length?(v=t&&[+t[0],+t[1]],e):v},e.size=function(t){return arguments.length?(k=t&&[+t[0],+t[1]],e):k},e.duration=function(t){return arguments.length?(M=+t,e):M},e.x=function(t){return arguments.length?(x=t,w=t.copy(),_={x:0,y:0,k:1},e):x},e.y=function(t){return arguments.length?(C=t,S=t.copy(),_={x:0,y:0,k:1},e):C},ho.rebind(e,I,"on")};var Jo,$o,es=[0,1/0];ho.color=fe,fe.prototype.toString=function(){return this.rgb()+""},ho.hsl=he;var ts=he.prototype=new fe;ts.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new he(this.h,this.s,this.l/e)},ts.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new he(this.h,this.s,e*this.l)},ts.rgb=function(){return pe(this.h,this.s,this.l)},ho.hcl=de;var ns=de.prototype=new fe;ns.brighter=function(e){return new de(this.h,this.c,Math.min(100,this.l+rs*(arguments.length?e:1)))},ns.darker=function(e){return new de(this.h,this.c,Math.max(0,this.l-rs*(arguments.length?e:1)))},ns.rgb=function(){return me(this.h,this.c,this.l).rgb()},ho.lab=ge;var rs=18,is=.95047,as=1,os=1.08883,ss=ge.prototype=new fe;ss.brighter=function(e){return new ge(Math.min(100,this.l+rs*(arguments.length?e:1)),this.a,this.b)},ss.darker=function(e){return new ge(Math.max(0,this.l-rs*(arguments.length?e:1)),this.a,this.b)},ss.rgb=function(){return ve(this.l,this.a,this.b)},ho.rgb=Se;var us=Se.prototype=new fe;us.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return t||n||r?(t&&i>t&&(t=i),n&&i>n&&(n=i),r&&i>r&&(r=i),new Se(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new Se(i,i,i)},us.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new Se(e*this.r,e*this.g,e*this.b)},us.hsl=function(){return Me(this.r,this.g,this.b)},us.toString=function(){return"#"+ke(this.r)+ke(this.g)+ke(this.b)};var ls=ho.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,
darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});ls.forEach(function(e,t){ls.set(e,Ce(t))}),ho.functor=Ne,ho.xhr=Oe(C),ho.dsv=function(e,t){function n(e,n,a){arguments.length<3&&(a=n,n=null);var o=Re(e,t,null==n?r:i(n),a);return o.row=function(e){return arguments.length?o.response(null==(n=e)?r:i(e)):n},o}function r(e){return n.parse(e.responseText)}function i(e){return function(t){return n.parse(t.responseText,e)}}function a(t){return t.map(o).join(e)}function o(e){return s.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var s=new RegExp('["'+e+"\n]"),u=e.charCodeAt(0);return n.parse=function(e,t){var r;return n.parseRows(e,function(e,n){if(r)return r(e,n-1);var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");r=t?function(e,n){return t(i(e),n)}:i})},n.parseRows=function(e,t){function n(){if(c>=l)return o;if(i)return i=!1,a;var t=c;if(34===e.charCodeAt(t)){for(var n=t;n++<l;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}c=n+2;var r=e.charCodeAt(n+1);return 13===r?(i=!0,10===e.charCodeAt(n+2)&&++c):10===r&&(i=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;l>c;){var r=e.charCodeAt(c++),s=1;if(10===r)i=!0;else if(13===r)i=!0,10===e.charCodeAt(c)&&(++c,++s);else if(r!==u)continue;return e.slice(t,c-s)}return e.slice(t)}for(var r,i,a={},o={},s=[],l=e.length,c=0,f=0;(r=n())!==o;){for(var h=[];r!==a&&r!==o;)h.push(r),r=n();t&&null==(h=t(h,f++))||s.push(h)}return s},n.format=function(t){if(Array.isArray(t[0]))return n.formatRows(t);var r=new S,i=[];return t.forEach(function(e){for(var t in e)r.has(t)||i.push(r.add(t))}),[i.map(o).join(e)].concat(t.map(function(t){return i.map(function(e){return o(t[e])}).join(e)})).join("\n")},n.formatRows=function(e){return e.map(a).join("\n")},n},ho.csv=ho.dsv(",","text/csv"),ho.tsv=ho.dsv("	","text/tab-separated-values");var cs,fs,hs,ps,ds=this[k(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};ho.timer=function(){Fe.apply(this,arguments)},ho.timer.flush=function(){je(),Be()},ho.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var ms=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(qe);ho.formatPrefix=function(e,t){var n=0;return(e=+e)&&(0>e&&(e*=-1),t&&(e=ho.round(e,Ue(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),ms[8+n/3]};var gs=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,vs=ho.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=ho.round(e,Ue(e,t))).toFixed(Math.max(0,Math.min(20,Ue(e*(1+1e-15),t))))}}),ys=ho.time={},bs=Date;We.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ws.setUTCDate.apply(this._,arguments)},setDay:function(){ws.setUTCDay.apply(this._,arguments)},setFullYear:function(){ws.setUTCFullYear.apply(this._,arguments)},setHours:function(){ws.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ws.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ws.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ws.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ws.setUTCSeconds.apply(this._,arguments)},setTime:function(){ws.setTime.apply(this._,arguments)}};var ws=Date.prototype;ys.year=Ke(function(e){return e=ys.day(e),e.setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),ys.years=ys.year.range,ys.years.utc=ys.year.utc.range,ys.day=Ke(function(e){var t=new bs(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),ys.days=ys.day.range,ys.days.utc=ys.day.utc.range,ys.dayOfYear=function(e){var t=ys.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=ys[e]=Ke(function(e){return(e=ys.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var n=ys.year(e).getDay();return Math.floor((ys.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});ys[e+"s"]=n.range,ys[e+"s"].utc=n.utc.range,ys[e+"OfYear"]=function(e){var n=ys.year(e).getDay();return Math.floor((ys.dayOfYear(e)+(n+t)%7)/7)}}),ys.week=ys.sunday,ys.weeks=ys.sunday.range,ys.weeks.utc=ys.sunday.utc.range,ys.weekOfYear=ys.sundayOfYear;var xs={"-":"",_:" ",0:"0"},Ss=/^\s*\d+/,Cs=/^%/;ho.locale=function(e){return{numberFormat:Ve(e),timeFormat:Qe(e)}};var _s=ho.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});ho.format=_s.numberFormat,ho.geo={},dt.prototype={s:0,t:0,add:function(e){mt(e,this.t,ks),mt(ks.s,this.s,this),this.s?this.t+=ks.t:this.s=ks.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ks=new dt;ho.geo.stream=function(e,t){e&&Ts.hasOwnProperty(e.type)?Ts[e.type](e,t):gt(e,t)};var Ts={Feature:function(e,t){gt(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)gt(n[r].geometry,t)}},Ms={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){vt(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)vt(n[r],t,0)},Polygon:function(e,t){yt(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)yt(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)gt(n[r],t)}};ho.geo.area=function(e){return As=0,ho.geo.stream(e,Ps),As};var As,Es=new dt,Ps={sphere:function(){As+=4*zo},point:T,lineStart:T,lineEnd:T,polygonStart:function(){Es.reset(),Ps.lineStart=bt},polygonEnd:function(){var e=2*Es;As+=0>e?4*zo+e:e,Ps.lineStart=Ps.lineEnd=Ps.point=T}};ho.geo.bounds=function(){function e(e,t){b.push(w=[c=e,h=e]),f>t&&(f=t),t>p&&(p=t)}function t(t,n){var r=wt([t*Qo,n*Qo]);if(v){var i=St(v,r),a=[i[1],-i[0],0],o=St(a,i);kt(o),o=Tt(o);var u=t-d,l=u>0?1:-1,m=o[0]*Go*l,g=ko(u)>180;if(g^(m>l*d&&l*t>m)){var y=o[1]*Go;y>p&&(p=y)}else if(m=(m+360)%360-180,g^(m>l*d&&l*t>m)){var y=-o[1]*Go;f>y&&(f=y)}else f>n&&(f=n),n>p&&(p=n);g?d>t?s(c,t)>s(c,h)&&(h=t):s(t,h)>s(c,h)&&(c=t):h>=c?(c>t&&(c=t),t>h&&(h=t)):t>d?s(c,t)>s(c,h)&&(h=t):s(t,h)>s(c,h)&&(c=t)}else e(t,n);v=r,d=t}function n(){x.point=t}function r(){w[0]=c,w[1]=h,x.point=e,v=null}function i(e,n){if(v){var r=e-d;y+=ko(r)>180?r+(r>0?360:-360):r}else m=e,g=n;Ps.point(e,n),t(e,n)}function a(){Ps.lineStart()}function o(){i(m,g),Ps.lineEnd(),ko(y)>qo&&(c=-(h=180)),w[0]=c,w[1]=h,v=null}function s(e,t){return(t-=e)<0?t+360:t}function u(e,t){return e[0]-t[0]}function l(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var c,f,h,p,d,m,g,v,y,b,w,x={point:e,lineStart:n,lineEnd:r,polygonStart:function(){x.point=i,x.lineStart=a,x.lineEnd=o,y=0,Ps.polygonStart()},polygonEnd:function(){Ps.polygonEnd(),x.point=e,x.lineStart=n,x.lineEnd=r,0>Es?(c=-(h=180),f=-(p=90)):y>qo?p=90:-qo>y&&(f=-90),w[0]=c,w[1]=h}};return function(e){p=h=-(c=f=1/0),b=[],ho.geo.stream(e,x);var t=b.length;if(t){b.sort(u);for(var n,r=1,i=b[0],a=[i];t>r;++r)n=b[r],l(n[0],i)||l(n[1],i)?(s(i[0],n[1])>s(i[0],i[1])&&(i[1]=n[1]),s(n[0],i[1])>s(i[0],i[1])&&(i[0]=n[0])):a.push(i=n);for(var o,n,d=-(1/0),t=a.length-1,r=0,i=a[t];t>=r;i=n,++r)n=a[r],(o=s(i[1],n[0]))>d&&(d=o,c=n[0],h=i[1])}return b=w=null,c===1/0||f===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,f],[h,p]]}}(),ho.geo.centroid=function(e){Ns=Os=Rs=Ds=Is=Fs=Ls=js=Bs=Us=qs=0,ho.geo.stream(e,Vs);var t=Bs,n=Us,r=qs,i=t*t+n*n+r*r;return Vo>i&&(t=Fs,n=Ls,r=js,qo>Os&&(t=Rs,n=Ds,r=Is),i=t*t+n*n+r*r,Vo>i)?[NaN,NaN]:[Math.atan2(n,t)*Go,oe(r/Math.sqrt(i))*Go]};var Ns,Os,Rs,Ds,Is,Fs,Ls,js,Bs,Us,qs,Vs={sphere:T,point:At,lineStart:Pt,lineEnd:Nt,polygonStart:function(){Vs.lineStart=Ot},polygonEnd:function(){Vs.lineStart=Pt}},zs=jt(Dt,Vt,Wt,[-zo,-zo/2]),Ws=1e9;ho.geo.clipExtent=function(){var e,t,n,r,i,a,o={stream:function(e){return i&&(i.valid=!1),i=a(e),i.valid=!0,i},extent:function(s){return arguments.length?(a=Gt(e=+s[0][0],t=+s[0][1],n=+s[1][0],r=+s[1][1]),i&&(i.valid=!1,i=null),o):[[e,t],[n,r]]}};return o.extent([[0,0],[960,500]])},(ho.geo.conicEqualArea=function(){return Yt(Xt)}).raw=Xt,ho.geo.albers=function(){return ho.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ho.geo.albersUsa=function(){function e(e){var a=e[0],o=e[1];return t=null,n(a,o),t||(r(a,o),t)||i(a,o),t}var t,n,r,i,a=ho.geo.albers(),o=ho.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=ho.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(e,n){t=[e,n]}};return e.invert=function(e){var t=a.scale(),n=a.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&.234>i&&r>=-.425&&-.214>r?o:i>=.166&&.234>i&&r>=-.214&&-.115>r?s:a).invert(e)},e.stream=function(e){var t=a.stream(e),n=o.stream(e),r=s.stream(e);return{point:function(e,i){t.point(e,i),n.point(e,i),r.point(e,i)},sphere:function(){t.sphere(),n.sphere(),r.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},e.precision=function(t){return arguments.length?(a.precision(t),o.precision(t),s.precision(t),e):a.precision()},e.scale=function(t){return arguments.length?(a.scale(t),o.scale(.35*t),s.scale(t),e.translate(a.translate())):a.scale()},e.translate=function(t){if(!arguments.length)return a.translate();var l=a.scale(),c=+t[0],f=+t[1];return n=a.translate(t).clipExtent([[c-.455*l,f-.238*l],[c+.455*l,f+.238*l]]).stream(u).point,r=o.translate([c-.307*l,f+.201*l]).clipExtent([[c-.425*l+qo,f+.12*l+qo],[c-.214*l-qo,f+.234*l-qo]]).stream(u).point,i=s.translate([c-.205*l,f+.212*l]).clipExtent([[c-.214*l+qo,f+.166*l+qo],[c-.115*l-qo,f+.234*l-qo]]).stream(u).point,e},e.scale(1070)};var Ks,Hs,Qs,Gs,Ys,Xs,Zs={point:T,lineStart:T,lineEnd:T,polygonStart:function(){Hs=0,Zs.lineStart=Zt},polygonEnd:function(){Zs.lineStart=Zs.lineEnd=Zs.point=T,Ks+=ko(Hs/2)}},Js={point:Jt,lineStart:T,lineEnd:T,polygonStart:T,polygonEnd:T},$s={point:tn,lineStart:nn,lineEnd:rn,polygonStart:function(){$s.lineStart=an},polygonEnd:function(){$s.point=tn,$s.lineStart=nn,$s.lineEnd=rn}};ho.geo.path=function(){function e(e){return e&&("function"==typeof s&&a.pointRadius(+s.apply(this,arguments)),o&&o.valid||(o=i(a)),ho.geo.stream(e,o)),a.result()}function t(){return o=null,e}var n,r,i,a,o,s=4.5;return e.area=function(e){return Ks=0,ho.geo.stream(e,i(Zs)),Ks},e.centroid=function(e){return Rs=Ds=Is=Fs=Ls=js=Bs=Us=qs=0,ho.geo.stream(e,i($s)),qs?[Bs/qs,Us/qs]:js?[Fs/js,Ls/js]:Is?[Rs/Is,Ds/Is]:[NaN,NaN]},e.bounds=function(e){return Ys=Xs=-(Qs=Gs=1/0),ho.geo.stream(e,i(Js)),[[Qs,Gs],[Ys,Xs]]},e.projection=function(e){return arguments.length?(i=(n=e)?e.stream||un(e):C,t()):n},e.context=function(e){return arguments.length?(a=null==(r=e)?new $t:new on(e),"function"!=typeof s&&a.pointRadius(s),t()):r},e.pointRadius=function(t){return arguments.length?(s="function"==typeof t?t:(a.pointRadius(+t),+t),e):s},e.projection(ho.geo.albersUsa()).context(null)},ho.geo.transform=function(e){return{stream:function(t){var n=new ln(t);for(var r in e)n[r]=e[r];return n}}},ln.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ho.geo.projection=fn,ho.geo.projectionMutator=hn,(ho.geo.equirectangular=function(){return fn(dn)}).raw=dn.invert=dn,ho.geo.rotation=function(e){function t(t){return t=e(t[0]*Qo,t[1]*Qo),t[0]*=Go,t[1]*=Go,t}return e=gn(e[0]%360*Qo,e[1]*Qo,e.length>2?e[2]*Qo:0),t.invert=function(t){return t=e.invert(t[0]*Qo,t[1]*Qo),t[0]*=Go,t[1]*=Go,t},t},mn.invert=dn,ho.geo.circle=function(){function e(){var e="function"==typeof r?r.apply(this,arguments):r,t=gn(-e[0]*Qo,-e[1]*Qo,0).invert,i=[];return n(null,null,1,{point:function(e,n){i.push(e=t(e,n)),e[0]*=Go,e[1]*=Go}}),{type:"Polygon",coordinates:[i]}}var t,n,r=[0,0],i=6;return e.origin=function(t){return arguments.length?(r=t,e):r},e.angle=function(r){return arguments.length?(n=wn((t=+r)*Qo,i*Qo),e):t},e.precision=function(r){return arguments.length?(n=wn(t*Qo,(i=+r)*Qo),e):i},e.angle(90)},ho.geo.distance=function(e,t){var n,r=(t[0]-e[0])*Qo,i=e[1]*Qo,a=t[1]*Qo,o=Math.sin(r),s=Math.cos(r),u=Math.sin(i),l=Math.cos(i),c=Math.sin(a),f=Math.cos(a);return Math.atan2(Math.sqrt((n=f*o)*n+(n=l*c-u*f*s)*n),u*c+l*f*s)},ho.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return ho.range(Math.ceil(a/g)*g,i,g).map(h).concat(ho.range(Math.ceil(l/v)*v,u,v).map(p)).concat(ho.range(Math.ceil(r/d)*d,n,d).filter(function(e){return ko(e%g)>qo}).map(c)).concat(ho.range(Math.ceil(s/m)*m,o,m).filter(function(e){return ko(e%v)>qo}).map(f))}var n,r,i,a,o,s,u,l,c,f,h,p,d=10,m=d,g=90,v=360,y=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[h(a).concat(p(u).slice(1),h(i).reverse().slice(1),p(l).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(a=+t[0][0],i=+t[1][0],l=+t[0][1],u=+t[1][1],a>i&&(t=a,a=i,i=t),l>u&&(t=l,l=u,u=t),e.precision(y)):[[a,l],[i,u]]},e.minorExtent=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],o=+t[1][1],r>n&&(t=r,r=n,n=t),s>o&&(t=s,s=o,o=t),e.precision(y)):[[r,s],[n,o]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(g=+t[0],v=+t[1],e):[g,v]},e.minorStep=function(t){return arguments.length?(d=+t[0],m=+t[1],e):[d,m]},e.precision=function(t){return arguments.length?(y=+t,c=Sn(s,o,90),f=Cn(r,n,y),h=Sn(l,u,90),p=Cn(a,i,y),e):y},e.majorExtent([[-180,-90+qo],[180,90-qo]]).minorExtent([[-180,-80-qo],[180,80+qo]])},ho.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),n||i.apply(this,arguments)]}}var t,n,r=_n,i=kn;return e.distance=function(){return ho.geo.distance(t||r.apply(this,arguments),n||i.apply(this,arguments))},e.source=function(n){return arguments.length?(r=n,t="function"==typeof n?null:n,e):r},e.target=function(t){return arguments.length?(i=t,n="function"==typeof t?null:t,e):i},e.precision=function(){return arguments.length?e:0},e},ho.geo.interpolate=function(e,t){return Tn(e[0]*Qo,e[1]*Qo,t[0]*Qo,t[1]*Qo)},ho.geo.length=function(e){return eu=0,ho.geo.stream(e,tu),eu};var eu,tu={sphere:T,point:T,lineStart:Mn,lineEnd:T,polygonStart:T,polygonEnd:T},nu=An(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(ho.geo.azimuthalEqualArea=function(){return fn(nu)}).raw=nu;var ru=An(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},C);(ho.geo.azimuthalEquidistant=function(){return fn(ru)}).raw=ru,(ho.geo.conicConformal=function(){return Yt(En)}).raw=En,(ho.geo.conicEquidistant=function(){return Yt(Pn)}).raw=Pn;var iu=An(function(e){return 1/e},Math.atan);(ho.geo.gnomonic=function(){return fn(iu)}).raw=iu,Nn.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Ho]},(ho.geo.mercator=function(){return On(Nn)}).raw=Nn;var au=An(function(){return 1},Math.asin);(ho.geo.orthographic=function(){return fn(au)}).raw=au;var ou=An(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(ho.geo.stereographic=function(){return fn(ou)}).raw=ou,Rn.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Ho]},(ho.geo.transverseMercator=function(){var e=On(Rn),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90])}).raw=Rn,ho.geom={},ho.geom.hull=function(e){function t(e){if(e.length<3)return[];var t,i=Ne(n),a=Ne(r),o=e.length,s=[],u=[];for(t=0;o>t;t++)s.push([+i.call(this,e[t],t),+a.call(this,e[t],t),t]);for(s.sort(Ln),t=0;o>t;t++)u.push([s[t][0],-s[t][1]]);var l=Fn(s),c=Fn(u),f=c[0]===l[0],h=c[c.length-1]===l[l.length-1],p=[];for(t=l.length-1;t>=0;--t)p.push(e[s[l[t]][2]]);for(t=+f;t<c.length-h;++t)p.push(e[s[c[t]][2]]);return p}var n=Dn,r=In;return arguments.length?t(e):(t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t)},ho.geom.polygon=function(e){return Po(e,su),e};var su=ho.geom.polygon.prototype=[];su.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],i=0;++t<n;)e=r,r=this[t],i+=e[1]*r[0]-e[0]*r[1];return.5*i},su.centroid=function(e){var t,n,r=-1,i=this.length,a=0,o=0,s=this[i-1];for(arguments.length||(e=-1/(6*this.area()));++r<i;)t=s,s=this[r],n=t[0]*s[1]-s[0]*t[1],a+=(t[0]+s[0])*n,o+=(t[1]+s[1])*n;return[a*e,o*e]},su.clip=function(e){for(var t,n,r,i,a,o,s=Un(e),u=-1,l=this.length-Un(this),c=this[l-1];++u<l;){for(t=e.slice(),e.length=0,i=this[u],a=t[(r=t.length-s)-1],n=-1;++n<r;)o=t[n],jn(o,c,i)?(jn(a,c,i)||e.push(Bn(a,o,c,i)),e.push(o)):jn(a,c,i)&&e.push(Bn(a,o,c,i)),a=o;s&&e.push(e[0]),c=i}return e};var uu,lu,cu,fu,hu,pu=[],du=[];Gn.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)e=t[n].edge,e.b&&e.a||t.splice(n,1);return t.sort(Xn),t.length},or.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},sr.prototype={insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=fr(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(lr(this,n),e=n,n=e.U),n.C=!1,r.C=!0,cr(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(cr(this,n),e=n,n=e.U),n.C=!1,r.C=!0,lr(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,a=e.L,o=e.R;if(n=a?o?fr(o):a:o,i?i.L===e?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=e.C,n.L=a,a.U=n,n!==o?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=o,o.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r){if(e&&e.C)return void(e.C=!1);do{if(e===this._)break;if(e===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,lr(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,cr(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,lr(this,i),e=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,cr(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,lr(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,cr(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}},ho.geom.voronoi=function(e){function t(e){var t=new Array(e.length),r=s[0][0],i=s[0][1],a=s[1][0],o=s[1][1];return hr(n(e),s).cells.forEach(function(n,s){var u=n.edges,l=n.site,c=t[s]=u.length?u.map(function(e){var t=e.start();return[t.x,t.y]}):l.x>=r&&l.x<=a&&l.y>=i&&l.y<=o?[[r,o],[a,o],[a,i],[r,i]]:[];c.point=e[s]}),t}function n(e){return e.map(function(e,t){return{x:Math.round(a(e,t)/qo)*qo,y:Math.round(o(e,t)/qo)*qo,i:t}})}var r=Dn,i=In,a=r,o=i,s=mu;return e?t(e):(t.links=function(e){return hr(n(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},t.triangles=function(e){var t=[];return hr(n(e)).cells.forEach(function(n,r){for(var i,a,o=n.site,s=n.edges.sort(Xn),u=-1,l=s.length,c=s[l-1].edge,f=c.l===o?c.r:c.l;++u<l;)i=c,a=f,c=s[u].edge,f=c.l===o?c.r:c.l,r<a.i&&r<f.i&&dr(o,a,f)<0&&t.push([e[r],e[a.i],e[f.i]])}),t},t.x=function(e){return arguments.length?(a=Ne(r=e),t):r},t.y=function(e){return arguments.length?(o=Ne(i=e),t):i},t.clipExtent=function(e){return arguments.length?(s=null==e?mu:e,t):s===mu?null:s},t.size=function(e){return arguments.length?t.clipExtent(e&&[[0,0],e]):s===mu?null:s&&s[1]},t)};var mu=[[-1e6,-1e6],[1e6,1e6]];ho.geom.delaunay=function(e){return ho.geom.voronoi().triangles(e)},ho.geom.quadtree=function(e,t,n,r,i){function a(e){function a(e,t,n,r,i,a,o,s){if(!isNaN(n)&&!isNaN(r))if(e.leaf){var u=e.x,c=e.y;if(null!=u)if(ko(u-n)+ko(c-r)<.01)l(e,t,n,r,i,a,o,s);else{var f=e.point;e.x=e.y=e.point=null,l(e,f,u,c,i,a,o,s),l(e,t,n,r,i,a,o,s)}else e.x=n,e.y=r,e.point=t}else l(e,t,n,r,i,a,o,s)}function l(e,t,n,r,i,o,s,u){var l=.5*(i+s),c=.5*(o+u),f=n>=l,h=r>=c,p=h<<1|f;e.leaf=!1,e=e.nodes[p]||(e.nodes[p]=vr()),f?i=l:s=l,h?o=c:u=c,a(e,t,n,r,i,o,s,u)}var c,f,h,p,d,m,g,v,y,b=Ne(s),w=Ne(u);if(null!=t)m=t,g=n,v=r,y=i;else if(v=y=-(m=g=1/0),f=[],h=[],d=e.length,o)for(p=0;d>p;++p)c=e[p],c.x<m&&(m=c.x),c.y<g&&(g=c.y),c.x>v&&(v=c.x),c.y>y&&(y=c.y),f.push(c.x),h.push(c.y);else for(p=0;d>p;++p){var x=+b(c=e[p],p),S=+w(c,p);m>x&&(m=x),g>S&&(g=S),x>v&&(v=x),S>y&&(y=S),f.push(x),h.push(S)}var C=v-m,_=y-g;C>_?y=g+C:v=m+_;var k=vr();if(k.add=function(e){a(k,e,+b(e,++p),+w(e,p),m,g,v,y)},k.visit=function(e){yr(e,k,m,g,v,y)},k.find=function(e){return br(k,e[0],e[1],m,g,v,y)},p=-1,null==t){for(;++p<d;)a(k,e[p],f[p],h[p],m,g,v,y);--p}else e.forEach(k.add);return f=h=e=c=null,k}var o,s=Dn,u=In;return(o=arguments.length)?(s=mr,u=gr,3===o&&(i=n,r=t,n=t=0),a(e)):(a.x=function(e){return arguments.length?(s=e,a):s},a.y=function(e){return arguments.length?(u=e,a):u},a.extent=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),a):null==t?null:[[t,n],[r,i]]},a.size=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=n=0,r=+e[0],i=+e[1]),a):null==t?null:[r-t,i-n]},a)},ho.interpolateRgb=wr,ho.interpolateObject=xr,ho.interpolateNumber=Sr,ho.interpolateString=Cr;var gu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vu=new RegExp(gu.source,"g");ho.interpolate=_r,ho.interpolators=[function(e,t){var n=typeof t;return("string"===n?ls.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?wr:Cr:t instanceof fe?wr:Array.isArray(t)?kr:"object"===n&&isNaN(t)?xr:Sr)(e,t)}],ho.interpolateArray=kr;var yu=function(){return C},bu=ho.map({linear:yu,poly:Or,quad:function(){return Er},cubic:function(){return Pr},sin:function(){return Rr},exp:function(){return Dr},circle:function(){return Ir},elastic:Fr,back:Lr,bounce:function(){return jr}}),wu=ho.map({"in":C,out:Mr,"in-out":Ar,"out-in":function(e){return Ar(Mr(e))}});ho.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.slice(0,t):e,r=t>=0?e.slice(t+1):"in";return n=bu.get(n)||yu,r=wu.get(r)||C,Tr(r(n.apply(null,po.call(arguments,1))))},ho.interpolateHcl=Br,ho.interpolateHsl=Ur,ho.interpolateLab=qr,ho.interpolateRound=Vr,ho.transform=function(e){var t=go.createElementNS(ho.ns.prefix.svg,"g");return(ho.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new zr(n?n.matrix:xu)})(e)},zr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var xu={a:1,b:0,c:0,d:1,e:0,f:0};ho.interpolateTransform=Jr,ho.layout={},ho.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(ti(e[n]));return t}},ho.layout.chord=function(){function e(){var e,l,f,h,p,d={},m=[],g=ho.range(a),v=[];for(n=[],r=[],e=0,h=-1;++h<a;){for(l=0,p=-1;++p<a;)l+=i[h][p];m.push(l),v.push(ho.range(a)),e+=l}for(o&&g.sort(function(e,t){return o(m[e],m[t])}),s&&v.forEach(function(e,t){e.sort(function(e,n){return s(i[t][e],i[t][n])})}),e=(Wo-c*a)/e,l=0,h=-1;++h<a;){for(f=l,p=-1;++p<a;){var y=g[h],b=v[y][p],w=i[y][b],x=l,S=l+=w*e;d[y+"-"+b]={index:y,subindex:b,startAngle:x,endAngle:S,value:w}}r[y]={index:y,startAngle:f,endAngle:l,value:(l-f)/e},l+=c}for(h=-1;++h<a;)for(p=h-1;++p<a;){var C=d[h+"-"+p],_=d[p+"-"+h];(C.value||_.value)&&n.push(C.value<_.value?{source:_,target:C}:{source:C,target:_})}u&&t()}function t(){n.sort(function(e,t){return u((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var n,r,i,a,o,s,u,l={},c=0;return l.matrix=function(e){return arguments.length?(a=(i=e)&&i.length,n=r=null,l):i},l.padding=function(e){return arguments.length?(c=e,n=r=null,l):c},l.sortGroups=function(e){return arguments.length?(o=e,n=r=null,l):o},l.sortSubgroups=function(e){return arguments.length?(s=e,n=null,l):s},l.sortChords=function(e){return arguments.length?(u=e,n&&t(),l):u},l.chords=function(){return n||e(),n},l.groups=function(){return r||e(),r},l},ho.layout.force=function(){function e(e){return function(t,n,r,i){if(t.point!==e){var a=t.cx-e.x,o=t.cy-e.y,s=i-n,u=a*a+o*o;if(u>s*s/v){if(m>u){var l=t.charge/u;e.px-=a*l,e.py-=o*l}return!0}if(t.point&&u&&m>u){var l=t.pointCharge/u;e.px-=a*l,e.py-=o*l}}return!t.charge}}function t(e){e.px=ho.event.x,e.py=ho.event.y,u.resume()}var n,r,i,a,o,s,u={},l=ho.dispatch("start","tick","end"),c=[1,1],f=.9,h=Su,p=Cu,d=-30,m=_u,g=.1,v=.64,y=[],b=[];return u.tick=function(){if((i*=.99)<.005)return n=null,l.end({type:"end",alpha:i=0}),!0;var t,r,u,h,p,m,v,w,x,S=y.length,C=b.length;for(r=0;C>r;++r)u=b[r],h=u.source,p=u.target,w=p.x-h.x,x=p.y-h.y,(m=w*w+x*x)&&(m=i*o[r]*((m=Math.sqrt(m))-a[r])/m,w*=m,x*=m,p.x-=w*(v=h.weight+p.weight?h.weight/(h.weight+p.weight):.5),p.y-=x*v,h.x+=w*(v=1-v),h.y+=x*v);if((v=i*g)&&(w=c[0]/2,x=c[1]/2,r=-1,v))for(;++r<S;)u=y[r],u.x+=(w-u.x)*v,u.y+=(x-u.y)*v;if(d)for(ui(t=ho.geom.quadtree(y),i,s),r=-1;++r<S;)(u=y[r]).fixed||t.visit(e(u));for(r=-1;++r<S;)u=y[r],u.fixed?(u.x=u.px,u.y=u.py):(u.x-=(u.px-(u.px=u.x))*f,u.y-=(u.py-(u.py=u.y))*f);l.tick({type:"tick",alpha:i})},u.nodes=function(e){return arguments.length?(y=e,u):y},u.links=function(e){return arguments.length?(b=e,u):b},u.size=function(e){return arguments.length?(c=e,u):c},u.linkDistance=function(e){return arguments.length?(h="function"==typeof e?e:+e,u):h},u.distance=u.linkDistance,u.linkStrength=function(e){return arguments.length?(p="function"==typeof e?e:+e,u):p},u.friction=function(e){return arguments.length?(f=+e,u):f},u.charge=function(e){return arguments.length?(d="function"==typeof e?e:+e,u):d},u.chargeDistance=function(e){return arguments.length?(m=e*e,u):Math.sqrt(m)},u.gravity=function(e){return arguments.length?(g=+e,u):g},u.theta=function(e){return arguments.length?(v=e*e,u):Math.sqrt(v)},u.alpha=function(e){return arguments.length?(e=+e,i?e>0?i=e:(n.c=null,n.t=NaN,n=null,l.end({type:"end",alpha:i=0})):e>0&&(l.start({type:"start",alpha:i=e}),n=Fe(u.tick)),u):i},u.start=function(){function e(e,r){if(!n){for(n=new Array(i),u=0;i>u;++u)n[u]=[];for(u=0;l>u;++u){var a=b[u];n[a.source.index].push(a.target),n[a.target.index].push(a.source)}}for(var o,s=n[t],u=-1,c=s.length;++u<c;)if(!isNaN(o=s[u][e]))return o;return Math.random()*r}var t,n,r,i=y.length,l=b.length,f=c[0],m=c[1];for(t=0;i>t;++t)(r=y[t]).index=t,r.weight=0;for(t=0;l>t;++t)r=b[t],"number"==typeof r.source&&(r.source=y[r.source]),"number"==typeof r.target&&(r.target=y[r.target]),++r.source.weight,++r.target.weight;for(t=0;i>t;++t)r=y[t],isNaN(r.x)&&(r.x=e("x",f)),isNaN(r.y)&&(r.y=e("y",m)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(a=[],"function"==typeof h)for(t=0;l>t;++t)a[t]=+h.call(this,b[t],t);else for(t=0;l>t;++t)a[t]=h;if(o=[],"function"==typeof p)for(t=0;l>t;++t)o[t]=+p.call(this,b[t],t);else for(t=0;l>t;++t)o[t]=p;if(s=[],"function"==typeof d)for(t=0;i>t;++t)s[t]=+d.call(this,y[t],t);else for(t=0;i>t;++t)s[t]=d;return u.resume()},u.resume=function(){return u.alpha(.1)},u.stop=function(){return u.alpha(0)},u.drag=function(){return r||(r=ho.behavior.drag().origin(C).on("dragstart.force",ii).on("drag.force",t).on("dragend.force",ai)),arguments.length?void this.on("mouseover.force",oi).on("mouseout.force",si).call(r):r},ho.rebind(u,l,"on")};var Su=20,Cu=1,_u=1/0;ho.layout.hierarchy=function(){function e(i){var a,o=[i],s=[];for(i.depth=0;null!=(a=o.pop());)if(s.push(a),(l=n.call(e,a,a.depth))&&(u=l.length)){for(var u,l,c;--u>=0;)o.push(c=l[u]),c.parent=a,c.depth=a.depth+1;r&&(a.value=0),a.children=l}else r&&(a.value=+r.call(e,a,a.depth)||0),delete a.children;return fi(i,function(e){var n,i;t&&(n=e.children)&&n.sort(t),r&&(i=e.parent)&&(i.value+=e.value)}),s}var t=di,n=hi,r=pi;return e.sort=function(n){return arguments.length?(t=n,e):t},e.children=function(t){return arguments.length?(n=t,e):n},e.value=function(t){return arguments.length?(r=t,e):r},e.revalue=function(t){return r&&(ci(t,function(e){e.children&&(e.value=0)}),fi(t,function(t){var n;t.children||(t.value=+r.call(e,t,t.depth)||0),(n=t.parent)&&(n.value+=t.value)})),t},e},ho.layout.partition=function(){function e(t,n,r,i){var a=t.children;if(t.x=n,t.y=t.depth*i,t.dx=r,t.dy=i,a&&(o=a.length)){var o,s,u,l=-1;for(r=t.value?r/t.value:0;++l<o;)e(s=a[l],n,u=s.value*r,i),n+=u;
}}function t(e){var n=e.children,r=0;if(n&&(i=n.length))for(var i,a=-1;++a<i;)r=Math.max(r,t(n[a]));return 1+r}function n(n,a){var o=r.call(this,n,a);return e(o[0],0,i[0],i[1]/t(o[0])),o}var r=ho.layout.hierarchy(),i=[1,1];return n.size=function(e){return arguments.length?(i=e,n):i},li(n,r)},ho.layout.pie=function(){function e(o){var s,u=o.length,l=o.map(function(n,r){return+t.call(e,n,r)}),c=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof i?i.apply(this,arguments):i)-c,h=Math.min(Math.abs(f)/u,+("function"==typeof a?a.apply(this,arguments):a)),p=h*(0>f?-1:1),d=ho.sum(l),m=d?(f-u*p)/d:0,g=ho.range(u),v=[];return null!=n&&g.sort(n===ku?function(e,t){return l[t]-l[e]}:function(e,t){return n(o[e],o[t])}),g.forEach(function(e){v[e]={data:o[e],value:s=l[e],startAngle:c,endAngle:c+=s*m+p,padAngle:h}}),v}var t=Number,n=ku,r=0,i=Wo,a=0;return e.value=function(n){return arguments.length?(t=n,e):t},e.sort=function(t){return arguments.length?(n=t,e):n},e.startAngle=function(t){return arguments.length?(r=t,e):r},e.endAngle=function(t){return arguments.length?(i=t,e):i},e.padAngle=function(t){return arguments.length?(a=t,e):a},e};var ku={};ho.layout.stack=function(){function e(s,u){if(!(h=s.length))return s;var l=s.map(function(n,r){return t.call(e,n,r)}),c=l.map(function(t){return t.map(function(t,n){return[a.call(e,t,n),o.call(e,t,n)]})}),f=n.call(e,c,u);l=ho.permute(l,f),c=ho.permute(c,f);var h,p,d,m,g=r.call(e,c,u),v=l[0].length;for(d=0;v>d;++d)for(i.call(e,l[0][d],m=g[d],c[0][d][1]),p=1;h>p;++p)i.call(e,l[p][d],m+=c[p-1][d][1],c[p][d][1]);return s}var t=C,n=bi,r=wi,i=yi,a=gi,o=vi;return e.values=function(n){return arguments.length?(t=n,e):t},e.order=function(t){return arguments.length?(n="function"==typeof t?t:Tu.get(t)||bi,e):n},e.offset=function(t){return arguments.length?(r="function"==typeof t?t:Mu.get(t)||wi,e):r},e.x=function(t){return arguments.length?(a=t,e):a},e.y=function(t){return arguments.length?(o=t,e):o},e.out=function(t){return arguments.length?(i=t,e):i},e};var Tu=ho.map({"inside-out":function(e){var t,n,r=e.length,i=e.map(xi),a=e.map(Si),o=ho.range(r).sort(function(e,t){return i[e]-i[t]}),s=0,u=0,l=[],c=[];for(t=0;r>t;++t)n=o[t],u>s?(s+=a[n],l.push(n)):(u+=a[n],c.push(n));return c.reverse().concat(l)},reverse:function(e){return ho.range(e.length).reverse()},"default":bi}),Mu=ho.map({silhouette:function(e){var t,n,r,i=e.length,a=e[0].length,o=[],s=0,u=[];for(n=0;a>n;++n){for(t=0,r=0;i>t;t++)r+=e[t][n][1];r>s&&(s=r),o.push(r)}for(n=0;a>n;++n)u[n]=(s-o[n])/2;return u},wiggle:function(e){var t,n,r,i,a,o,s,u,l,c=e.length,f=e[0],h=f.length,p=[];for(p[0]=u=l=0,n=1;h>n;++n){for(t=0,i=0;c>t;++t)i+=e[t][n][1];for(t=0,a=0,s=f[n][0]-f[n-1][0];c>t;++t){for(r=0,o=(e[t][n][1]-e[t][n-1][1])/(2*s);t>r;++r)o+=(e[r][n][1]-e[r][n-1][1])/s;a+=o*e[t][n][1]}p[n]=u-=i?a/i*s:0,l>u&&(l=u)}for(n=0;h>n;++n)p[n]-=l;return p},expand:function(e){var t,n,r,i=e.length,a=e[0].length,o=1/i,s=[];for(n=0;a>n;++n){for(t=0,r=0;i>t;t++)r+=e[t][n][1];if(r)for(t=0;i>t;t++)e[t][n][1]/=r;else for(t=0;i>t;t++)e[t][n][1]=o}for(n=0;a>n;++n)s[n]=0;return s},zero:wi});ho.layout.histogram=function(){function e(e,a){for(var o,s,u=[],l=e.map(n,this),c=r.call(this,l,a),f=i.call(this,c,l,a),a=-1,h=l.length,p=f.length-1,d=t?1:1/h;++a<p;)o=u[a]=[],o.dx=f[a+1]-(o.x=f[a]),o.y=0;if(p>0)for(a=-1;++a<h;)s=l[a],s>=c[0]&&s<=c[1]&&(o=u[ho.bisect(f,s,1,p)-1],o.y+=d,o.push(e[a]));return u}var t=!0,n=Number,r=Ti,i=_i;return e.value=function(t){return arguments.length?(n=t,e):n},e.range=function(t){return arguments.length?(r=Ne(t),e):r},e.bins=function(t){return arguments.length?(i="number"==typeof t?function(e){return ki(e,t)}:Ne(t),e):i},e.frequency=function(n){return arguments.length?(t=!!n,e):t},e},ho.layout.pack=function(){function e(e,a){var o=n.call(this,e,a),s=o[0],u=i[0],l=i[1],c=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(s.x=s.y=0,fi(s,function(e){e.r=+c(e.value)}),fi(s,Ni),r){var f=r*(t?1:Math.max(2*s.r/u,2*s.r/l))/2;fi(s,function(e){e.r+=f}),fi(s,Ni),fi(s,function(e){e.r-=f})}return Di(s,u/2,l/2,t?1:1/Math.max(2*s.r/u,2*s.r/l)),o}var t,n=ho.layout.hierarchy().sort(Mi),r=0,i=[1,1];return e.size=function(t){return arguments.length?(i=t,e):i},e.radius=function(n){return arguments.length?(t=null==n||"function"==typeof n?n:+n,e):t},e.padding=function(t){return arguments.length?(r=+t,e):r},li(e,n)},ho.layout.tree=function(){function e(e,i){var c=o.call(this,e,i),f=c[0],h=t(f);if(fi(h,n),h.parent.m=-h.z,ci(h,r),l)ci(f,a);else{var p=f,d=f,m=f;ci(f,function(e){e.x<p.x&&(p=e),e.x>d.x&&(d=e),e.depth>m.depth&&(m=e)});var g=s(p,d)/2-p.x,v=u[0]/(d.x+s(d,p)/2+g),y=u[1]/(m.depth||1);ci(f,function(e){e.x=(e.x+g)*v,e.y=e.depth*y})}return c}function t(e){for(var t,n={A:null,children:[e]},r=[n];null!=(t=r.pop());)for(var i,a=t.children,o=0,s=a.length;s>o;++o)r.push((a[o]=i={_:a[o],parent:t,children:(i=a[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i);return n.children[0]}function n(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;if(t.length){Ui(e);var a=(t[0].z+t[t.length-1].z)/2;r?(e.z=r.z+s(e._,r._),e.m=e.z-a):e.z=a}else r&&(e.z=r.z+s(e._,r._));e.parent.A=i(e,r,e.parent.A||n[0])}function r(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function i(e,t,n){if(t){for(var r,i=e,a=e,o=t,u=i.parent.children[0],l=i.m,c=a.m,f=o.m,h=u.m;o=ji(o),i=Li(i),o&&i;)u=Li(u),a=ji(a),a.a=e,r=o.z+f-i.z-l+s(o._,i._),r>0&&(Bi(qi(o,e,n),e,r),l+=r,c+=r),f+=o.m,l+=i.m,h+=u.m,c+=a.m;o&&!ji(a)&&(a.t=o,a.m+=f-c),i&&!Li(u)&&(u.t=i,u.m+=l-h,n=e)}return n}function a(e){e.x*=u[0],e.y=e.depth*u[1]}var o=ho.layout.hierarchy().sort(null).value(null),s=Fi,u=[1,1],l=null;return e.separation=function(t){return arguments.length?(s=t,e):s},e.size=function(t){return arguments.length?(l=null==(u=t)?a:null,e):l?null:u},e.nodeSize=function(t){return arguments.length?(l=null==(u=t)?null:a,e):l?u:null},li(e,o)},ho.layout.cluster=function(){function e(e,a){var o,s=t.call(this,e,a),u=s[0],l=0;fi(u,function(e){var t=e.children;t&&t.length?(e.x=zi(t),e.y=Vi(t)):(e.x=o?l+=n(e,o):0,e.y=0,o=e)});var c=Wi(u),f=Ki(u),h=c.x-n(c,f)/2,p=f.x+n(f,c)/2;return fi(u,i?function(e){e.x=(e.x-u.x)*r[0],e.y=(u.y-e.y)*r[1]}:function(e){e.x=(e.x-h)/(p-h)*r[0],e.y=(1-(u.y?e.y/u.y:1))*r[1]}),s}var t=ho.layout.hierarchy().sort(null).value(null),n=Fi,r=[1,1],i=!1;return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(i=null==(r=t),e):i?null:r},e.nodeSize=function(t){return arguments.length?(i=null!=(r=t),e):i?r:null},li(e,t)},ho.layout.treemap=function(){function e(e,t){for(var n,r,i=-1,a=e.length;++i<a;)r=(n=e[i]).value*(0>t?0:t),n.area=isNaN(r)||0>=r?0:r}function t(n){var a=n.children;if(a&&a.length){var o,s,u,l=f(n),c=[],h=a.slice(),d=1/0,m="slice"===p?l.dx:"dice"===p?l.dy:"slice-dice"===p?1&n.depth?l.dy:l.dx:Math.min(l.dx,l.dy);for(e(h,l.dx*l.dy/n.value),c.area=0;(u=h.length)>0;)c.push(o=h[u-1]),c.area+=o.area,"squarify"!==p||(s=r(c,m))<=d?(h.pop(),d=s):(c.area-=c.pop().area,i(c,m,l,!1),m=Math.min(l.dx,l.dy),c.length=c.area=0,d=1/0);c.length&&(i(c,m,l,!0),c.length=c.area=0),a.forEach(t)}}function n(t){var r=t.children;if(r&&r.length){var a,o=f(t),s=r.slice(),u=[];for(e(s,o.dx*o.dy/t.value),u.area=0;a=s.pop();)u.push(a),u.area+=a.area,null!=a.z&&(i(u,a.z?o.dx:o.dy,o,!s.length),u.length=u.area=0);r.forEach(n)}}function r(e,t){for(var n,r=e.area,i=0,a=1/0,o=-1,s=e.length;++o<s;)(n=e[o].area)&&(a>n&&(a=n),n>i&&(i=n));return r*=r,t*=t,r?Math.max(t*i*d/r,r/(t*a*d)):1/0}function i(e,t,n,r){var i,a=-1,o=e.length,s=n.x,l=n.y,c=t?u(e.area/t):0;if(t==n.dx){for((r||c>n.dy)&&(c=n.dy);++a<o;)i=e[a],i.x=s,i.y=l,i.dy=c,s+=i.dx=Math.min(n.x+n.dx-s,c?u(i.area/c):0);i.z=!0,i.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);++a<o;)i=e[a],i.x=s,i.y=l,i.dx=c,l+=i.dy=Math.min(n.y+n.dy-l,c?u(i.area/c):0);i.z=!1,i.dy+=n.y+n.dy-l,n.x+=c,n.dx-=c}}function a(r){var i=o||s(r),a=i[0];return a.x=a.y=0,a.value?(a.dx=l[0],a.dy=l[1]):a.dx=a.dy=0,o&&s.revalue(a),e([a],a.dx*a.dy/a.value),(o?n:t)(a),h&&(o=i),i}var o,s=ho.layout.hierarchy(),u=Math.round,l=[1,1],c=null,f=Hi,h=!1,p="squarify",d=.5*(1+Math.sqrt(5));return a.size=function(e){return arguments.length?(l=e,a):l},a.padding=function(e){function t(t){var n=e.call(a,t,t.depth);return null==n?Hi(t):Qi(t,"number"==typeof n?[n,n,n,n]:n)}function n(t){return Qi(t,e)}if(!arguments.length)return c;var r;return f=null==(c=e)?Hi:"function"==(r=typeof e)?t:"number"===r?(e=[e,e,e,e],n):n,a},a.round=function(e){return arguments.length?(u=e?Math.round:Number,a):u!=Number},a.sticky=function(e){return arguments.length?(h=e,o=null,a):h},a.ratio=function(e){return arguments.length?(d=e,a):d},a.mode=function(e){return arguments.length?(p=e+"",a):p},li(a,s)},ho.random={normal:function(e,t){var n=arguments.length;return 2>n&&(t=1),1>n&&(e=0),function(){var n,r,i;do n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r;while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=ho.random.normal.apply(ho,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=ho.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;e>n;n++)t+=Math.random();return t}}},ho.scale={};var Au={floor:C,ceil:C};ho.scale.linear=function(){return ea([0,1],[0,1],_r,!1)};var Eu={s:1,g:1,p:1,r:1,e:1};ho.scale.log=function(){return ua(ho.scale.linear().domain([0,1]),10,!0,[1,10])};var Pu=ho.format(".0e"),Nu={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};ho.scale.pow=function(){return la(ho.scale.linear(),1,[0,1])},ho.scale.sqrt=function(){return ho.scale.pow().exponent(.5)},ho.scale.ordinal=function(){return fa([],{t:"range",a:[[]]})},ho.scale.category10=function(){return ho.scale.ordinal().range(Ou)},ho.scale.category20=function(){return ho.scale.ordinal().range(Ru)},ho.scale.category20b=function(){return ho.scale.ordinal().range(Du)},ho.scale.category20c=function(){return ho.scale.ordinal().range(Iu)};var Ou=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(_e),Ru=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(_e),Du=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(_e),Iu=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(_e);ho.scale.quantile=function(){return ha([],[])},ho.scale.quantize=function(){return pa(0,1,[0,1])},ho.scale.threshold=function(){return da([.5],[0,1])},ho.scale.identity=function(){return ma([0,1])},ho.svg={},ho.svg.arc=function(){function e(){var e=Math.max(0,+n.apply(this,arguments)),l=Math.max(0,+r.apply(this,arguments)),c=o.apply(this,arguments)-Ho,f=s.apply(this,arguments)-Ho,h=Math.abs(f-c),p=c>f?0:1;if(e>l&&(d=l,l=e,e=d),h>=Ko)return t(l,p)+(e?t(e,1-p):"")+"Z";var d,m,g,v,y,b,w,x,S,C,_,k,T=0,M=0,A=[];if((v=(+u.apply(this,arguments)||0)/2)&&(g=a===Fu?Math.sqrt(e*e+l*l):+a.apply(this,arguments),p||(M*=-1),l&&(M=oe(g/l*Math.sin(v))),e&&(T=oe(g/e*Math.sin(v)))),l){y=l*Math.cos(c+M),b=l*Math.sin(c+M),w=l*Math.cos(f-M),x=l*Math.sin(f-M);var E=Math.abs(f-c-2*M)<=zo?0:1;if(M&&Sa(y,b,w,x)===p^E){var P=(c+f)/2;y=l*Math.cos(P),b=l*Math.sin(P),w=x=null}}else y=b=0;if(e){S=e*Math.cos(f-T),C=e*Math.sin(f-T),_=e*Math.cos(c+T),k=e*Math.sin(c+T);var N=Math.abs(c-f+2*T)<=zo?0:1;if(T&&Sa(S,C,_,k)===1-p^N){var O=(c+f)/2;S=e*Math.cos(O),C=e*Math.sin(O),_=k=null}}else S=C=0;if(h>qo&&(d=Math.min(Math.abs(l-e)/2,+i.apply(this,arguments)))>.001){m=l>e^p?0:1;var R=d,D=d;if(zo>h){var I=null==_?[S,C]:null==w?[y,b]:Bn([y,b],[_,k],[w,x],[S,C]),F=y-I[0],L=b-I[1],j=w-I[0],B=x-I[1],U=1/Math.sin(Math.acos((F*j+L*B)/(Math.sqrt(F*F+L*L)*Math.sqrt(j*j+B*B)))/2),q=Math.sqrt(I[0]*I[0]+I[1]*I[1]);D=Math.min(d,(e-q)/(U-1)),R=Math.min(d,(l-q)/(U+1))}if(null!=w){var V=Ca(null==_?[S,C]:[_,k],[y,b],l,R,p),z=Ca([w,x],[S,C],l,R,p);d===R?A.push("M",V[0],"A",R,",",R," 0 0,",m," ",V[1],"A",l,",",l," 0 ",1-p^Sa(V[1][0],V[1][1],z[1][0],z[1][1]),",",p," ",z[1],"A",R,",",R," 0 0,",m," ",z[0]):A.push("M",V[0],"A",R,",",R," 0 1,",m," ",z[0])}else A.push("M",y,",",b);if(null!=_){var W=Ca([y,b],[_,k],e,-D,p),K=Ca([S,C],null==w?[y,b]:[w,x],e,-D,p);d===D?A.push("L",K[0],"A",D,",",D," 0 0,",m," ",K[1],"A",e,",",e," 0 ",p^Sa(K[1][0],K[1][1],W[1][0],W[1][1]),",",1-p," ",W[1],"A",D,",",D," 0 0,",m," ",W[0]):A.push("L",K[0],"A",D,",",D," 0 0,",m," ",W[0])}else A.push("L",S,",",C)}else A.push("M",y,",",b),null!=w&&A.push("A",l,",",l," 0 ",E,",",p," ",w,",",x),A.push("L",S,",",C),null!=_&&A.push("A",e,",",e," 0 ",N,",",1-p," ",_,",",k);return A.push("Z"),A.join("")}function t(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}var n=va,r=ya,i=ga,a=Fu,o=ba,s=wa,u=xa;return e.innerRadius=function(t){return arguments.length?(n=Ne(t),e):n},e.outerRadius=function(t){return arguments.length?(r=Ne(t),e):r},e.cornerRadius=function(t){return arguments.length?(i=Ne(t),e):i},e.padRadius=function(t){return arguments.length?(a=t==Fu?Fu:Ne(t),e):a},e.startAngle=function(t){return arguments.length?(o=Ne(t),e):o},e.endAngle=function(t){return arguments.length?(s=Ne(t),e):s},e.padAngle=function(t){return arguments.length?(u=Ne(t),e):u},e.centroid=function(){var e=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,t=(+o.apply(this,arguments)+ +s.apply(this,arguments))/2-Ho;return[Math.cos(t)*e,Math.sin(t)*e]},e};var Fu="auto";ho.svg.line=function(){return _a(C)};var Lu=ho.map({linear:ka,"linear-closed":Ta,step:Ma,"step-before":Aa,"step-after":Ea,basis:Ia,"basis-open":Fa,"basis-closed":La,bundle:ja,cardinal:Oa,"cardinal-open":Pa,"cardinal-closed":Na,monotone:Wa});Lu.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var ju=[0,2/3,1/3,0],Bu=[0,1/3,2/3,0],Uu=[0,1/6,2/3,1/6];ho.svg.line.radial=function(){var e=_a(Ka);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},Aa.reverse=Ea,Ea.reverse=Aa,ho.svg.area=function(){return Ha(C)},ho.svg.area.radial=function(){var e=Ha(Ka);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},ho.svg.chord=function(){function e(e,s){var u=t(this,a,e,s),l=t(this,o,e,s);return"M"+u.p0+r(u.r,u.p1,u.a1-u.a0)+(n(u,l)?i(u.r,u.p1,u.r,u.p0):i(u.r,u.p1,l.r,l.p0)+r(l.r,l.p1,l.a1-l.a0)+i(l.r,l.p1,u.r,u.p0))+"Z"}function t(e,t,n,r){var i=t.call(e,n,r),a=s.call(e,i,r),o=u.call(e,i,r)-Ho,c=l.call(e,i,r)-Ho;return{r:a,a0:o,a1:c,p0:[a*Math.cos(o),a*Math.sin(o)],p1:[a*Math.cos(c),a*Math.sin(c)]}}function n(e,t){return e.a0==t.a0&&e.a1==t.a1}function r(e,t,n){return"A"+e+","+e+" 0 "+ +(n>zo)+",1 "+t}function i(e,t,n,r){return"Q 0,0 "+r}var a=_n,o=kn,s=Qa,u=ba,l=wa;return e.radius=function(t){return arguments.length?(s=Ne(t),e):s},e.source=function(t){return arguments.length?(a=Ne(t),e):a},e.target=function(t){return arguments.length?(o=Ne(t),e):o},e.startAngle=function(t){return arguments.length?(u=Ne(t),e):u},e.endAngle=function(t){return arguments.length?(l=Ne(t),e):l},e},ho.svg.diagonal=function(){function e(e,i){var a=t.call(this,e,i),o=n.call(this,e,i),s=(a.y+o.y)/2,u=[a,{x:a.x,y:s},{x:o.x,y:s},o];return u=u.map(r),"M"+u[0]+"C"+u[1]+" "+u[2]+" "+u[3]}var t=_n,n=kn,r=Ga;return e.source=function(n){return arguments.length?(t=Ne(n),e):t},e.target=function(t){return arguments.length?(n=Ne(t),e):n},e.projection=function(t){return arguments.length?(r=t,e):r},e},ho.svg.diagonal.radial=function(){var e=ho.svg.diagonal(),t=Ga,n=e.projection;return e.projection=function(e){return arguments.length?n(Ya(t=e)):t},e},ho.svg.symbol=function(){function e(e,r){return(qu.get(t.call(this,e,r))||Ja)(n.call(this,e,r))}var t=Za,n=Xa;return e.type=function(n){return arguments.length?(t=Ne(n),e):t},e.size=function(t){return arguments.length?(n=Ne(t),e):n},e};var qu=ho.map({circle:Ja,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*zu)),n=t*zu;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Vu),n=t*Vu/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Vu),n=t*Vu/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});ho.svg.symbolTypes=qu.keys();var Vu=Math.sqrt(3),zu=Math.tan(30*Qo);Do.transition=function(e){for(var t,n,r=Wu||++Gu,i=ro(e),a=[],o=Ku||{time:Date.now(),ease:Nr,delay:0,duration:250},s=-1,u=this.length;++s<u;){a.push(t=[]);for(var l=this[s],c=-1,f=l.length;++c<f;)(n=l[c])&&io(n,c,i,r,o),t.push(n)}return eo(a,i,r)},Do.interrupt=function(e){return this.each(null==e?Hu:$a(ro(e)))};var Wu,Ku,Hu=$a(ro()),Qu=[],Gu=0;Qu.call=Do.call,Qu.empty=Do.empty,Qu.node=Do.node,Qu.size=Do.size,ho.transition=function(e,t){return e&&e.transition?Wu?e.transition(t):e:ho.selection().transition(e)},ho.transition.prototype=Qu,Qu.select=function(e){var t,n,r,i=this.id,a=this.namespace,o=[];e=R(e);for(var s=-1,u=this.length;++s<u;){o.push(t=[]);for(var l=this[s],c=-1,f=l.length;++c<f;)(r=l[c])&&(n=e.call(r,r.__data__,c,s))?("__data__"in r&&(n.__data__=r.__data__),io(n,c,a,i,r[a][i]),t.push(n)):t.push(null)}return eo(o,a,i)},Qu.selectAll=function(e){var t,n,r,i,a,o=this.id,s=this.namespace,u=[];e=D(e);for(var l=-1,c=this.length;++l<c;)for(var f=this[l],h=-1,p=f.length;++h<p;)if(r=f[h]){a=r[s][o],n=e.call(r,r.__data__,h,l),u.push(t=[]);for(var d=-1,m=n.length;++d<m;)(i=n[d])&&io(i,d,s,o,a),t.push(i)}return eo(u,s,o)},Qu.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=H(e));for(var a=0,o=this.length;o>a;a++){i.push(t=[]);for(var n=this[a],s=0,u=n.length;u>s;s++)(r=n[s])&&e.call(r,r.__data__,s,a)&&t.push(r)}return eo(i,this.namespace,this.id)},Qu.tween=function(e,t){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(e):G(this,null==t?function(t){t[r][n].tween.remove(e)}:function(i){i[r][n].tween.set(e,t)})},Qu.attr=function(e,t){function n(){this.removeAttribute(s)}function r(){this.removeAttributeNS(s.space,s.local)}function i(e){return null==e?n:(e+="",function(){var t,n=this.getAttribute(s);return n!==e&&(t=o(n,e),function(e){this.setAttribute(s,t(e))})})}function a(e){return null==e?r:(e+="",function(){var t,n=this.getAttributeNS(s.space,s.local);return n!==e&&(t=o(n,e),function(e){this.setAttributeNS(s.space,s.local,t(e))})})}if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var o="transform"==e?Jr:_r,s=ho.ns.qualify(e);return to(this,"attr."+e,t,s.local?a:i)},Qu.attrTween=function(e,t){function n(e,n){var r=t.call(this,e,n,this.getAttribute(i));return r&&function(e){this.setAttribute(i,r(e))}}function r(e,n){var r=t.call(this,e,n,this.getAttributeNS(i.space,i.local));return r&&function(e){this.setAttributeNS(i.space,i.local,r(e))}}var i=ho.ns.qualify(e);return this.tween("attr."+e,i.local?r:n)},Qu.style=function(e,t,n){function r(){this.style.removeProperty(e)}function i(t){return null==t?r:(t+="",function(){var r,i=o(this).getComputedStyle(this,null).getPropertyValue(e);return i!==t&&(r=_r(i,t),function(t){this.style.setProperty(e,r(t),n)})})}var a=arguments.length;if(3>a){if("string"!=typeof e){2>a&&(t="");for(n in e)this.style(n,e[n],t);return this}n=""}return to(this,"style."+e,t,i)},Qu.styleTween=function(e,t,n){function r(r,i){var a=t.call(this,r,i,o(this).getComputedStyle(this,null).getPropertyValue(e));return a&&function(t){this.style.setProperty(e,a(t),n)}}return arguments.length<3&&(n=""),this.tween("style."+e,r)},Qu.text=function(e){return to(this,"text",e,no)},Qu.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},Qu.ease=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].ease:("function"!=typeof e&&(e=ho.ease.apply(ho,arguments)),G(this,function(r){r[n][t].ease=e}))},Qu.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:G(this,"function"==typeof e?function(r,i,a){r[n][t].delay=+e.call(r,r.__data__,i,a)}:(e=+e,function(r){r[n][t].delay=e}))},Qu.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:G(this,"function"==typeof e?function(r,i,a){r[n][t].duration=Math.max(1,e.call(r,r.__data__,i,a))}:(e=Math.max(1,e),function(r){r[n][t].duration=e}))},Qu.each=function(e,t){var n=this.id,r=this.namespace;if(arguments.length<2){var i=Ku,a=Wu;try{Wu=n,G(this,function(t,i,a){Ku=t[r][n],e.call(t,t.__data__,i,a)})}finally{Ku=i,Wu=a}}else G(this,function(i){var a=i[r][n];(a.event||(a.event=ho.dispatch("start","end","interrupt"))).on(e,t)});return this},Qu.transition=function(){for(var e,t,n,r,i=this.id,a=++Gu,o=this.namespace,s=[],u=0,l=this.length;l>u;u++){s.push(e=[]);for(var t=this[u],c=0,f=t.length;f>c;c++)(n=t[c])&&(r=n[o][i],io(n,c,o,a,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),e.push(n)}return eo(s,o,a)},ho.svg.axis=function(){function e(e){e.each(function(){var e,l=ho.select(this),c=this.__chart__||n,f=this.__chart__=n.copy(),h=null==u?f.ticks?f.ticks.apply(f,s):f.domain():u,p=null==t?f.tickFormat?f.tickFormat.apply(f,s):C:t,d=l.selectAll(".tick").data(h,f),m=d.enter().insert("g",".domain").attr("class","tick").style("opacity",qo),g=ho.transition(d.exit()).style("opacity",qo).remove(),v=ho.transition(d.order()).style("opacity",1),y=Math.max(i,0)+o,b=Yi(f),w=l.selectAll(".domain").data([0]),x=(w.enter().append("path").attr("class","domain"),ho.transition(w));m.append("line"),m.append("text");var S,_,k,T,M=m.select("line"),A=v.select("line"),E=d.select("text").text(p),P=m.select("text"),N=v.select("text"),O="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(e=ao,S="x",k="y",_="x2",T="y2",E.attr("dy",0>O?"0em":".71em").style("text-anchor","middle"),x.attr("d","M"+b[0]+","+O*a+"V0H"+b[1]+"V"+O*a)):(e=oo,S="y",k="x",_="y2",T="x2",E.attr("dy",".32em").style("text-anchor",0>O?"end":"start"),x.attr("d","M"+O*a+","+b[0]+"H0V"+b[1]+"H"+O*a)),M.attr(T,O*i),P.attr(k,O*y),A.attr(_,0).attr(T,O*i),N.attr(S,0).attr(k,O*y),f.rangeBand){var R=f,D=R.rangeBand()/2;c=f=function(e){return R(e)+D}}else c.rangeBand?c=f:g.call(e,f,c);m.call(e,c,f),v.call(e,f,f)})}var t,n=ho.scale.linear(),r=Yu,i=6,a=6,o=3,s=[10],u=null;return e.scale=function(t){return arguments.length?(n=t,e):n},e.orient=function(t){return arguments.length?(r=t in Xu?t+"":Yu,e):r},e.ticks=function(){return arguments.length?(s=mo(arguments),e):s},e.tickValues=function(t){return arguments.length?(u=t,e):u},e.tickFormat=function(n){return arguments.length?(t=n,e):t},e.tickSize=function(t){var n=arguments.length;return n?(i=+t,a=+arguments[n-1],e):i},e.innerTickSize=function(t){return arguments.length?(i=+t,e):i},e.outerTickSize=function(t){return arguments.length?(a=+t,e):a},e.tickPadding=function(t){return arguments.length?(o=+t,e):o},e.tickSubdivide=function(){return arguments.length&&e},e};var Yu="bottom",Xu={top:1,right:1,bottom:1,left:1};ho.svg.brush=function(){function e(a){a.each(function(){var a=ho.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),o=a.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),a.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=a.selectAll(".resize").data(m,C);s.exit().remove(),s.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Zu[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",e.empty()?"none":null);var u,f=ho.transition(a),h=ho.transition(o);l&&(u=Yi(l),h.attr("x",u[0]).attr("width",u[1]-u[0]),n(f)),c&&(u=Yi(c),h.attr("y",u[0]).attr("height",u[1]-u[0]),r(f)),t(f)})}function t(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+f[+/e$/.test(e)]+","+h[+/^s/.test(e)]+")"})}function n(e){e.select(".extent").attr("x",f[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function r(e){e.select(".extent").attr("y",h[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function i(){function i(){32==ho.event.keyCode&&(A||(b=null,N[0]-=f[1],N[1]-=h[1],A=2),E())}function m(){32==ho.event.keyCode&&2==A&&(N[0]+=f[1],N[1]+=h[1],A=0,E())}function g(){var e=ho.mouse(x),i=!1;w&&(e[0]+=w[0],e[1]+=w[1]),A||(ho.event.altKey?(b||(b=[(f[0]+f[1])/2,(h[0]+h[1])/2]),N[0]=f[+(e[0]<b[0])],N[1]=h[+(e[1]<b[1])]):b=null),T&&v(e,l,0)&&(n(_),i=!0),M&&v(e,c,1)&&(r(_),i=!0),i&&(t(_),C({type:"brush",mode:A?"move":"resize"}))}function v(e,t,n){var r,i,o=Yi(t),u=o[0],l=o[1],c=N[n],m=n?h:f,g=m[1]-m[0];return A&&(u-=c,l-=g+c),r=(n?d:p)?Math.max(u,Math.min(l,e[n])):e[n],A?i=(r+=c)+g:(b&&(c=Math.max(u,Math.min(l,2*b[n]-r))),r>c?(i=r,r=c):i=c),m[0]!=r||m[1]!=i?(n?s=null:a=null,m[0]=r,m[1]=i,!0):void 0}function y(){g(),_.style("pointer-events","all").selectAll(".resize").style("display",e.empty()?"none":null),ho.select("body").style("cursor",null),O.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),P(),C({type:"brushend"})}var b,w,x=this,S=ho.select(ho.event.target),C=u.of(x,arguments),_=ho.select(x),k=S.datum(),T=!/^(n|s)$/.test(k)&&l,M=!/^(e|w)$/.test(k)&&c,A=S.classed("extent"),P=ee(x),N=ho.mouse(x),O=ho.select(o(x)).on("keydown.brush",i).on("keyup.brush",m);if(ho.event.changedTouches?O.on("touchmove.brush",g).on("touchend.brush",y):O.on("mousemove.brush",g).on("mouseup.brush",y),_.interrupt().selectAll("*").interrupt(),A)N[0]=f[0]-N[0],N[1]=h[0]-N[1];else if(k){var R=+/w$/.test(k),D=+/^n/.test(k);w=[f[1-R]-N[0],h[1-D]-N[1]],N[0]=f[R],N[1]=h[D]}else ho.event.altKey&&(b=N.slice());_.style("pointer-events","none").selectAll(".resize").style("display",null),ho.select("body").style("cursor",S.style("cursor")),C({type:"brushstart"}),g()}var a,s,u=N(e,"brushstart","brush","brushend"),l=null,c=null,f=[0,0],h=[0,0],p=!0,d=!0,m=Ju[0];return e.event=function(e){e.each(function(){var e=u.of(this,arguments),t={x:f,y:h,i:a,j:s},n=this.__chart__||t;this.__chart__=t,Wu?ho.select(this).transition().each("start.brush",function(){a=n.i,s=n.j,f=n.x,h=n.y,e({type:"brushstart"})}).tween("brush:brush",function(){var n=kr(f,t.x),r=kr(h,t.y);return a=s=null,function(i){f=t.x=n(i),h=t.y=r(i),e({type:"brush",mode:"resize"})}}).each("end.brush",function(){a=t.i,s=t.j,e({type:"brush",mode:"resize"}),e({type:"brushend"})}):(e({type:"brushstart"}),e({type:"brush",mode:"resize"}),e({type:"brushend"}))})},e.x=function(t){return arguments.length?(l=t,m=Ju[!l<<1|!c],e):l},e.y=function(t){return arguments.length?(c=t,m=Ju[!l<<1|!c],e):c},e.clamp=function(t){return arguments.length?(l&&c?(p=!!t[0],d=!!t[1]):l?p=!!t:c&&(d=!!t),e):l&&c?[p,d]:l?p:c?d:null},e.extent=function(t){var n,r,i,o,u;return arguments.length?(l&&(n=t[0],r=t[1],c&&(n=n[0],r=r[0]),a=[n,r],l.invert&&(n=l(n),r=l(r)),n>r&&(u=n,n=r,r=u),(n!=f[0]||r!=f[1])&&(f=[n,r])),c&&(i=t[0],o=t[1],l&&(i=i[1],o=o[1]),s=[i,o],c.invert&&(i=c(i),o=c(o)),i>o&&(u=i,i=o,o=u),(i!=h[0]||o!=h[1])&&(h=[i,o])),e):(l&&(a?(n=a[0],r=a[1]):(n=f[0],r=f[1],l.invert&&(n=l.invert(n),r=l.invert(r)),n>r&&(u=n,n=r,r=u))),c&&(s?(i=s[0],o=s[1]):(i=h[0],o=h[1],c.invert&&(i=c.invert(i),o=c.invert(o)),i>o&&(u=i,i=o,o=u))),l&&c?[[n,i],[r,o]]:l?[n,r]:c&&[i,o])},e.clear=function(){return e.empty()||(f=[0,0],h=[0,0],a=s=null),e},e.empty=function(){return!!l&&f[0]==f[1]||!!c&&h[0]==h[1]},ho.rebind(e,u,"on")};var Zu={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ju=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],$u=ys.format=_s.timeFormat,el=$u.utc,tl=el("%Y-%m-%dT%H:%M:%S.%LZ");$u.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?so:tl,so.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},so.toString=tl.toString,ys.second=Ke(function(e){return new bs(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),ys.seconds=ys.second.range,ys.seconds.utc=ys.second.utc.range,ys.minute=Ke(function(e){return new bs(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),ys.minutes=ys.minute.range,ys.minutes.utc=ys.minute.utc.range,ys.hour=Ke(function(e){var t=e.getTimezoneOffset()/60;return new bs(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),ys.hours=ys.hour.range,ys.hours.utc=ys.hour.utc.range,ys.month=Ke(function(e){return e=ys.day(e),e.setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),ys.months=ys.month.range,ys.months.utc=ys.month.utc.range;var nl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],rl=[[ys.second,1],[ys.second,5],[ys.second,15],[ys.second,30],[ys.minute,1],[ys.minute,5],[ys.minute,15],[ys.minute,30],[ys.hour,1],[ys.hour,3],[ys.hour,6],[ys.hour,12],[ys.day,1],[ys.day,2],[ys.week,1],[ys.month,1],[ys.month,3],[ys.year,1]],il=$u.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",Dt]]),al={range:function(e,t,n){return ho.range(Math.ceil(e/n)*n,+t,n).map(lo)},floor:C,ceil:C};rl.year=ys.year,ys.scale=function(){return uo(ho.scale.linear(),rl,il)};var ol=rl.map(function(e){return[e[0].utc,e[1]]}),sl=el.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",Dt]]);ol.year=ys.year.utc,ys.scale.utc=function(){return uo(ho.scale.linear(),ol,sl)},ho.text=Oe(function(e){return e.responseText}),ho.json=function(e,t){return Re(e,"application/json",co,t)},ho.html=function(e,t){return Re(e,"text/html",fo,t)},ho.xml=Oe(function(e){return e.responseXML}),this.d3=ho,r=ho,i="function"==typeof r?r.call(t,n,t,e):r,!(void 0!==i&&(e.exports=i))}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=n(1),a=r(i),o=n(50),s=(n(11),n(10)),u="https://shining-heat-4904.firebaseio.com",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE0NDA1MjY5NDMsImQiOnsidWlkIjoib2xpdmVyLW1hY2Fyb24ifSwidiI6MH0.ICq8i8FMOMTL4VaEedsRsY-hZe2-a6YsebuHc3ptPo4",c=a["default"].createActions(["log"]),f=a["default"].createStore({listenables:[c],init:function(){var e=s.store.getInitialState();this._pid=e.participantID,this._animation=e.animationMode;var t=e.interfaceText,n=new o(u+"/"+this._pid+"/");n.auth(l,function(e,t){e?console.log("Authentication Failed!",e):(console.log("Authenticated successfully with payload:",t.auth),console.log("Auth expires at:",new Date(1e3*t.expires)))}),this._firebase_block=n.push(),this._firebase_block.set({animation:this._animation,startTime:Date.now(),"interface":t});var r=this._firebase_block.key();this._firebase_log=new o(u+"/"+this._pid+"/"+r+"/log/");
},onLog:function(e){this._firebase_log.push({t:Date.now(),value:e})}});e.exports={actions:c,store:f}},function(e,t,n){"use strict";var r=n(4),i=n(24).instanceJoinCreator,a=function(e){for(var t,n=0,r={};n<(e.children||[]).length;++n)t=e.children[n],e[t]&&(r[t]=e[t]);return r},o=function s(e){var t={};for(var n in e){var i=e[n],o=a(i),u=s(o);t[n]=i;for(var l in u){var c=u[l];t[n+r.capitalize(l)]=c}}return t};e.exports={hasListener:function(e){for(var t,n,r,i=0;i<(this.subscriptions||[]).length;++i)for(r=[].concat(this.subscriptions[i].listenable),t=0;t<r.length;t++)if(n=r[t],n===e||n.hasListener&&n.hasListener(e))return!0;return!1},listenToMany:function(e){var t=o(e);for(var n in t){var i=r.callbackName(n),a=this[i]?i:this[n]?n:void 0;a&&this.listenTo(t[n],a,this[i+"Default"]||this[a+"Default"]||a)}},validateListening:function(e){return e===this?"Listener is not able to listen to itself":r.isFunction(e.listen)?e.hasListener&&e.hasListener(this)?"Listener cannot listen to this listenable because of circular loop":void 0:e+" is missing a listen method"},listenTo:function(e,t,n){var i,a,o,s=this.subscriptions=this.subscriptions||[];return r.throwIf(this.validateListening(e)),this.fetchInitialState(e,n),i=e.listen(this[t]||t,this),a=function(){var e=s.indexOf(o);r.throwIf(-1===e,"Tried to remove listen already gone from subscriptions list!"),s.splice(e,1),i()},o={stop:a,listenable:e},s.push(o),o},stopListeningTo:function(e){for(var t,n=0,i=this.subscriptions||[];n<i.length;n++)if(t=i[n],t.listenable===e)return t.stop(),r.throwIf(-1!==i.indexOf(t),"Failed to remove listen from subscriptions list!"),!0;return!1},stopListeningToAll:function(){for(var e,t=this.subscriptions||[];e=t.length;)t[0].stop(),r.throwIf(t.length!==e-1,"Failed to remove listen from subscriptions list!")},fetchInitialState:function(e,t){t=t&&this[t]||t;var n=this;if(r.isFunction(t)&&r.isFunction(e.getInitialState)){var i=e.getInitialState();i&&r.isFunction(i.then)?i.then(function(){t.apply(n,arguments)}):t.call(this,i)}},joinTrailing:i("last"),joinLeading:i("first"),joinConcat:i("all"),joinStrict:i("strict")}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=n(1),a=r(i),o=n(3),s=n(6),u=60,l=100,c=a["default"].createActions(["setTime","play","pause","togglePlaying","setPlaying","stepBackward","stepForward","skipBackward","skipForward","toggleMute"]),f=a["default"].createStore({listenables:[c],init:function(){this._data={playing:!1,currentTime:0,playingIcon:"main",loop:{enabled:!1,start:0,end:0},mute:!0},this._lastTimerTime=Date.now(),this._updateTimer=null,this.listenTo(o.store,this._VTIconUpdate),this._VTIconUpdate(o.store.getInitialState())},_VTIconUpdate:function(e){for(var t in e)e[t].selected&&(this._vtduration=e[t].duration,this._data.playingIcon=t)},getInitialState:function(){return this._data},onToggleMute:function(){this._data.mute=!this._data.mute,s.actions.log("PLAYBACK_MUTE_"+this._data.mute),this.trigger(this._data)},onSetTime:function(e){0>e&&(e=0),e>this._vtduration&&(e=this._vtduration),this._data.currentTime=e,this.trigger(this._data)},onStepBackward:function(){this.onSetTime(this._data.currentTime-l)},onStepForward:function(){this.onSetTime(this._data.currentTime+l)},onSkipBackward:function(){this.onSetTime(0)},onSkipForward:function(){this.onSetTime(this._vtduration)},onPlay:function(){this.onSetPlaying(!0)},onPause:function(){this.onSetPlaying(!1)},onTogglePlaying:function(){this.onSetPlaying(!this._data.playing)},onSetPlaying:function(e){this._data.playing=e,this.trigger(this._data),s.actions.log("PLAYBACK_SETPLAY_"+e),this._data.playing?(this._data.currentTime>=this._vtduration&&(this._data.currentTime=0),this._startUpdateTimer()):this._stopUpdateTimer()},_startUpdateTimer:function(){this._lastTimerTime=Date.now(),this._updateTimer=setInterval(this._updateTimerFunction,1e3/u)},_updateTimerFunction:function(){var e=Date.now(),t=e-this._lastTimerTime;this._lastTimerTime=e,this._data.currentTime=this._data.currentTime+t,this._data.currentTime>this._vtduration&&(this._data.currentTime=this._vtduration,this._data.playing=!1,this._stopUpdateTimer(),s.actions.log("PLAYBACK_PLAYEND")),this.trigger(this._data)},_stopUpdateTimer:function(){null!=this._updateTimer&&clearInterval(this._updateTimer)}});e.exports={actions:c,store:f}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=n(1),a=r(i),o=n(8),s=n(12),u=n(3),l=n(19),c=n(6),f={NONE:0,PLAYHEAD:1,KEYFRAME:2,SELECT:3,TIMESELECT:4},h=a["default"].createActions(["startPlayheadDrag","startKeyframeDrag","startSelectDrag","startTimeSelectDrag","handleMouseMove","stopDrag"]),p=a["default"].createStore({listenables:[h],init:function(){this.listenTo(s.store,this._ScaleUpdate),this._dragging=f.NONE,this._lastMouseMove={},this._targetName=""},_ScaleUpdate:function(e){this._scales=e},onStartPlayheadDrag:function(e,t){this._targetName=e,this._dragging=f.PLAYHEAD,c.actions.log("STARTDRAG_PLAYHEAD_"+e),u.actions.selectVTIcon(e),o.actions.setTime(t)},onStartKeyframeDrag:function(e){this._targetName=e,c.actions.log("STARTDRAG_KEYFRAME_"+e),u.actions.startMovingSelectedKeyframes(e=this._targetName),this._dragging=f.KEYFRAME},onStartSelectDrag:function(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];this._targetName=e,this._dragging=f.SELECT;var n=this._lastX-this._scales[this._targetName].leftOffset;l.actions.startSelecting(e,this._scales[this._targetName].scaleTimeline.invert(n),this._calculateSelectionParameterMap(this._lastY),t)},onStartTimeSelectDrag:function(e){arguments.length<=1||void 0===arguments[1]?!1:arguments[1];this._targetName=e,this._dragging=f.TIMESELECT;var t=this._lastX-this._scales[this._targetName].leftOffset;l.actions.startSelectingTimeRange(e,this._scales[this._targetName].scaleTimeline.invert(t))},onHandleMouseMove:function(e,t){if(this._targetName in this._scales){var n=e-this._scales[this._targetName].leftOffset;if(this._dragging==f.PLAYHEAD)o.actions.setTime(this._scales[this._targetName].scaleTimeline.invert(n));else if(this._dragging==f.KEYFRAME){var r=this._lastX-this._scales[this._targetName].leftOffset,i=this._scales[this._targetName].scaleTimeline.invert(n)-this._scales[this._targetName].scaleTimeline.invert(r),a={};for(var s in this._scales[this._targetName].scaleParameter)a[s]=this._scales[this._targetName].scaleParameter[s].invert(t)-this._scales[this._targetName].scaleParameter[s].invert(this._lastY);u.actions.moveSelectedKeyframes(i,a,name=this._targetName)}else this._dragging==f.SELECT?l.actions.changeSelecting(this._scales[this._targetName].scaleTimeline.invert(n),this._calculateSelectionParameterMap(t)):this._dragging==f.TIMESELECT&&l.actions.changeSelectingTimeRange(this._scales[this._targetName].scaleTimeline.invert(n))}this._lastX=e,this._lastY=t},onStopDrag:function(){this._dragging==f.SELECT&&l.actions.stopSelecting(),this._dragging!=f.NONE&&c.actions.log("STOPDRAG_"+this._dragging),this._dragging=f.NONE,this._targetName=""},_calculateSelectionParameterMap:function(e){var t={};for(var n in this._scales[this._targetName].topOffsetParameter)t[n]=this._scales[this._targetName].scaleParameter[n].invert(e-this._scales[this._targetName].topOffsetParameter[n]);return t}});e.exports={actions:h,store:p}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=n(1),a=r(i),o=!1,s={NO_EXAMPLES:0,LOWVIS_LOWSELECT:1,HIGHVIS_LOWSELECT:2,LOWVIS_HIGHSELECT:3,HIGHVIS_HIGHSELECT:4},u=a["default"].createActions(["setDisplayMode"]),l=a["default"].createStore({listenables:[u],init:function(){var e="test",t="none",n="hi";o&&(e=prompt("Participant ID: ",""),(null==e||""==e)&&(e="test"),t=prompt("Animation: ",""),(null==t||""==t)&&(t="none"),n=prompt("Interface: ",""),(null==n||""==n)&&(n="none"));var r=0;0==n.indexOf("lo")?r=1:0==n.indexOf("vis")?r=2:0==n.indexOf("select")?r=3:0==n.indexOf("hi")&&(r=4),this._data={participantID:e,currentMode:r,interfaceText:n,animationMode:t,modes:s}},getInitialState:function(){return this._data},onSetDisplayMode:function(e){e in s&&(this._data.currentMode=e,this.trigger(this._data))}});e.exports={store:l,actions:u}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}for(var i=n(1),a=r(i),o=n(8),s=n(10),u=a["default"].createActions(["setAnimation"]),l=.75,c=1,f=110,h=1200,p=2,d={size:{}},m=0;p>m;m++)d.size[h/2+m*h]=l,d.size[h/2+m*h+f]=c,d.size[h/2+m*h+2*f]=l,d.size[h/2+m*h+3*f]=l,d.size[h/2+m*h+4*f]=c,d.size[h/2+m*h+5*f]=l;var g=.8,v=1,y=9,b=500,w=2500,x=(w-b)/y,S=20,C={size:{0:g,400:g,600:v,2400:v,2600:g},rotation:{}};C.rotation[b]=0;for(var _=1,m=1;y>m;m++)_*=-1,C.rotation[b+m*x]=_*S;C.rotation[w]=0;var k=150,T=650,M=350,A=1,E=1.25,P={size:{},t:{0:0,3e3:3e3}};P.size[0]=A,P.size[k]=A,P.size[k+T]=E,P.size[2*k+T]=E,P.size[2*k+T+M]=A,P.size[4*k+T+M]=A,P.size[4*k+2*T+M]=E,P.size[5*k+2*T+M]=E,P.size[5*k+2*T+2*M]=A;var N={right:{0:0,800:0,950:1,1100:0,1200:1,1350:0,1800:0,1900:1,2100:1,2200:0},left:{0:0,400:0,650:1,900:0,1500:0,1600:1,1650:1,1800:0,1850:0,1950:1,2050:0,2300:0,2500:1,2700:0}},O={flake1:{0:0,2e3:1},flake2:{650:0,2650:1},flake3:{1e3:0,3e3:1}},R={t:{0:0,3e3:3e3},rotation:{700:0,950:-30,1750:0,1900:0,2200:30,2700:0}},D={none:{},heartbeat:d,mobile:C,cat:P,car:R,lightning:N,snow:O},I=a["default"].createStore({listenables:[u],init:function(){var e=s.store.getInitialState().animationMode;this._data={animation:e,animationParameters:{},animationOptions:Object.keys(D)},this.listenTo(o.store,this._PlaybackUpdate),this._currentTime=0},_PlaybackUpdate:function(e){this._currentTime=e.currentTime,this._update()},getInitialState:function(){return this._data},_update:function(){this._data.animationParameters=this._SampleParameters(this._currentTime),this.trigger(this._data)},onSetAnimation:function(e){e in D&&(this._data.animation=e,this._update())},_SampleParameters:function(e){var t={};if(this._data.animation in D)for(var n in D[this._data.animation])t[n]=this._SampleInDictionary(D[this._data.animation][n],e);return t},_SampleInDictionary:function(e,t){var n=-1,r=-1;for(var i in e)t>=i&&(-1===n||t-n>t-i)&&(n=i),i>=t&&(-1===r||r-t>i-t)&&(r=i);var a=-1;return-1===n&&-1===r?console.log("ERROR! No keyframes in keyframe dictionary."):a=-1===n?e[r]:-1===r?e[n]:n==r?e[n]:e[n]+(t-n)/(r-n)*(e[r]-e[n]),a}});e.exports={actions:u,store:I}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=n(1),a=r(i),o=n(5),s=r(o),u=n(3),l=a["default"].createActions(["setTimelineRange","setTrackrange","setTrackrangeMultiple","setLeftOffset","setTopOffset","setTopOffsetMultiple"]),c=a["default"].createStore({listenables:[l],init:function(){var e=s["default"].scale.identity();this._names=["main","example"],this._parameterValues={},this._duration={},this._trackrange={},this._timelinerange={},this._data={};for(var t=0;t<this._names.length;t++)this._data[this._names[t]]={scaleTimeline:e,scaleParameter:{amplitude:e,frequency:e},leftOffset:0,topOffsetParameter:{amplitude:0,frequency:0}},this._parameterValues[this._names[t]]={},this._duration[this._names[t]]=0,this._trackrange[this._names[t]]={},this._timelinerange[this._names[t]]=[];this.listenTo(u.store,this._VTIconUpdate)},getInitialState:function(){return this._CalculateScales(u.store.getInitialState()),this._data},_update:function(){for(var e=0;e<this._names.length;e++){this._data[this._names[e]].scaleTimeline=s["default"].scale.linear().domain([0,this._duration[this._names[e]]]).range(this._timelinerange[this._names[e]]);for(var t in this._trackrange[this._names[e]])this._data[this._names[e]].scaleParameter[t]=s["default"].scale.linear().domain(this._parameterValues[this._names[e]][t]).range(this._trackrange[this._names[e]][t])}this.trigger(this._data)},_CalculateScales:function(e){for(var t in e){this._duration[t]=e[t].duration;for(var n in e[t].parameters)this._parameterValues[t][n]=e[t].parameters[n].valueScale}},_VTIconUpdate:function(e){this._CalculateScales(e),this._update()},onSetTimelineRange:function(e,t){this._timelinerange[e]=t,this._update()},onSetTrackrange:function(e,t,n){this._trackrange[e][t]=n,this._update()},onSetTrackrangeMultiple:function(e,t){for(var n in t)this._trackrange[e][n]=t[n];this._update()},onSetLeftOffset:function(e,t){this._data[e].leftOffset=t,this._update()},onSetTopOffset:function(e,t,n){this._data[e].topOffsetParameter[t]=n,this._update()},onSetTopOffsetMultiple:function(e,t){for(var n in t)this._data[e].topOffsetParameter[n]=t[n];this._update()}});e.exports={store:c,actions:l}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=n(2),a=r(i),o=function(e){return{propTypes:{scaleX:a["default"].PropTypes.object.isRequired},getInitialState:function(){return{offsetLeft:10,offsetTop:10}},componentDidMount:function(){window.addEventListener("resize",this.handleResize);var t=this.refs[e].getDOMNode().offsetLeft,n=this.refs[e].getDOMNode().offsetTop;this.setState({offsetLeft:t,offsetTop:n})},handleResize:function(t){var n=(this.refs[e].getDOMNode(),this.refs[e].getDOMNode().offsetLeft),r=this.refs[e].getDOMNode().offsetTop;this.setState({offsetLeft:n,offsetTop:r})}}};e.exports=o},function(e,t,n){(function(e,r){"use strict";function i(e,t){this._id=e,this._clearFn=t}var a=n(39).nextTick,o=Function.prototype.apply,s=Array.prototype.slice,u={},l=0;t.setTimeout=function(){return new i(o.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new i(o.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},t.setImmediate="function"==typeof e?e:function(e){var n=l++,r=arguments.length<2?!1:s.call(arguments,1);return u[n]=!0,a(function(){u[n]&&(r?e.apply(null,r):e.call(null),t.clearImmediate(n))}),n},t.clearImmediate="function"==typeof r?r:function(e){delete u[e]}}).call(t,n(14).setImmediate,n(14).clearImmediate)},function(e,t){"use strict";t.createdStores=[],t.createdActions=[],t.reset=function(){for(;t.createdStores.length;)t.createdStores.pop();for(;t.createdActions.length;)t.createdActions.pop()}},function(e,t,n){"use strict";var r=n(4);e.exports={preEmit:function(){},shouldEmit:function(){return!0},listen:function(e,t){t=t||this;var n=function(n){i||e.apply(t,n)},r=this,i=!1;return this.emitter.addListener(this.eventLabel,n),function(){i=!0,r.emitter.removeListener(r.eventLabel,n)}},promise:function(e){var t=this,n=this.children.indexOf("completed")>=0&&this.children.indexOf("failed")>=0;if(!n)throw new Error('Publisher must have "completed" and "failed" child publishers');e.then(function(e){return t.completed(e)},function(e){return t.failed(e)})},listenAndPromise:function(e,t){var n=this;t=t||this,this.willCallPromise=(this.willCallPromise||0)+1;var r=this.listen(function(){if(!e)throw new Error("Expected a function returning a promise but got "+e);var r=arguments,i=e.apply(t,r);return n.promise.call(n,i)},t);return function(){n.willCallPromise--,r.call(n)}},trigger:function(){var e=arguments,t=this.preEmit.apply(this,e);e=void 0===t?e:r.isArguments(t)?t:[].concat(t),this.shouldEmit.apply(this,e)&&this.emitter.emit(this.eventLabel,e)},triggerAsync:function(){var e=arguments,t=this;r.nextTick(function(){t.trigger.apply(t,e)})},triggerPromise:function(){var e=this,t=arguments,n=this.children.indexOf("completed")>=0&&this.children.indexOf("failed")>=0,i=r.createPromise(function(i,a){if(e.willCallPromise)return void r.nextTick(function(){var n=e.promise;e.promise=function(t){return t.then(i,a),e.promise=n,e.promise.apply(e,arguments)},e.trigger.apply(e,t)});if(n)var o=e.completed.listen(function(e){o(),s(),i(e)}),s=e.failed.listen(function(e){o(),s(),a(e)});e.triggerAsync.apply(e,t),n||i()});return i}}},function(e,t,n){"use strict";var r=n(4),i=n(7);e.exports=r.extend({componentWillUnmount:i.stopListeningToAll},i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=n(1),a=r(i),o=n(6),s=n(3),u=n(8),l="example",c=function(e,t,n){var r={};r.duration=t,r.selected=!1,r.selectedTimeRange={active:!1,time1:0,time2:0},r.parameters={amplitude:{valueScale:[0,1],data:[]},frequency:{valueScale:[50,500],data:[{t:1025.1572327044023,value:312.50000000000057},{t:1943.3962264150944,value:157.4999999999999}]}};for(var i=0;t>i;i+=n)r.parameters.amplitude.data.push({t:i,value:Math.sin(2*Math.PI*e*i/1e3-Math.PI/2*e)/2+.5});return r},f=function(e,t){var n={};n.duration=e,n.selected=!1,n.selectedTimeRange={active:!1,time1:0,time2:0},n.parameters={amplitude:{valueScale:[0,1],data:[]},frequency:{valueScale:[50,500],data:[]}};for(var r=0;e>r;r+=t)n.parameters.frequency.data.push({t:r,value:Math.random()*(n.parameters.frequency.valueScale[1]-n.parameters.frequency.valueScale[0])+n.parameters.frequency.valueScale[0]}),n.parameters.amplitude.data.push({t:r,value:Math.random()});return n},h={v4:{duration:3e3,selected:!0,selectedTimeRange:{active:!1,time1:0,time2:0},parameters:{amplitude:{valueScale:[0,1],data:[{id:36,t:0,value:2.220446049250313e-16,selected:!0},{id:29,t:347.10743801652893,value:.07222222222222222,selected:!0},{id:30,t:638.4297520661158,value:.18888888888888894,selected:!0},{id:31,t:873.9669421487602,value:.33333333333333337,selected:!0},{id:32,t:1028.9256198347107,value:.49444444444444435,selected:!0},{id:33,t:1140.495867768595,value:.6833333333333332,selected:!0},{id:34,t:1221.0743801652893,value:1,selected:!0},{id:35,t:1239.6694214876034,value:2.7755575615628914e-17,selected:!0},{id:45,t:1591.194968553459,value:2.220446049250313e-16,selected:!0},{id:46,t:1938.3024065699879,value:.07222222222222222,selected:!0},{id:47,t:2229.624720619575,value:.18888888888888894,selected:!0},{id:48,t:2465.161910702219,value:.33333333333333337,selected:!0},{id:49,t:2620.1205883881694,value:.49444444444444435,selected:!0},{id:50,t:2731.6908363220537,value:.6833333333333332,selected:!0},{id:51,t:2812.269348718748,value:1,selected:!0},{id:52,t:2830.8643900410625,value:2.7755575615628914e-17,selected:!0}]},frequency:{valueScale:[50,500],data:[{id:43,t:0,value:50,selected:!0},{id:39,t:591.1949685534591,value:104.99999999999977,selected:!0},{id:40,t:962.2641509433959,value:192.4999999999999,selected:!0},{id:41,t:1264.1509433962265,value:305,selected:!0},{id:42,t:1289.308176100629,value:50.00000000000023,selected:!0},{id:53,t:1591.194968553459,value:50,selected:!0},{id:54,t:2182.3899371069183,value:104.99999999999977,selected:!0},{id:55,t:2553.459119496855,value:192.4999999999999,selected:!0},{id:56,t:2855.3459119496856,value:305,selected:!0},{id:57,t:2880.503144654088,value:50.00000000000023,selected:!0}]}}},v3:{duration:3e3,selectedTimeRange:{active:!1,time1:0,time2:0},selected:!1,parameters:{amplitude:{valueScale:[0,1],data:[{t:81.76100628930817,value:1.8041124150158794e-16,selected:!1,id:49},{t:88.0503144654088,value:.20000000000000007,selected:!1,id:50},{t:182.38993710691824,value:.20000000000000007,selected:!1,id:52},{t:226.41509433962273,value:.8111111111111111,selected:!1,id:53},{t:339.62264150943395,value:.8111111111111111,selected:!1,id:66},{t:352.20125786163516,value:.20000000000000007,selected:!1,id:68},{t:452.83018867924517,value:.20000000000000007,selected:!1,id:69},{t:496.8553459119499,value:.8111111111111111,selected:!1,id:70},{t:672.9559748427675,value:.8111111111111111,selected:!1,id:71},{t:1433.9622641509425,value:2.7755575615628914e-16,selected:!1,id:60},{id:156,t:1578.6163522012578,value:1.8041124150158794e-16,selected:!0},{id:157,t:1584.9056603773583,value:.20000000000000007,selected:!0},{id:158,t:1679.245283018868,value:.20000000000000007,selected:!0},{id:159,t:1723.2704402515724,value:.8111111111111111,selected:!0},{id:160,t:1836.4779874213837,value:.8111111111111111,selected:!0},{id:161,t:1849.0566037735848,value:.20000000000000007,selected:!0},{id:162,t:1949.6855345911947,value:.20000000000000007,selected:!0},{id:163,t:1993.7106918238994,value:.8111111111111111,selected:!0},{id:164,t:2169.811320754717,value:.8111111111111111,selected:!0},{id:165,t:2930.817610062892,value:2.7755575615628914e-16,selected:!0}]},frequency:{valueScale:[50,500],data:[{t:0,value:57.5,selected:!1,id:3},{t:1500,value:57.5,selected:!1,id:200}]}}},sineExample:c(1,3e3,25),randomExample:f(3e3,100),v10_augmented:{duration:3e3,selectedTimeRange:{active:!1,time1:0,time2:0},selected:!1,parameters:{amplitude:{valueScale:[0,1],data:[{t:70.4350537969747,value:5.551115123125783e-17,selected:!1,id:1078},{t:71.49280108113695,value:1,selected:!1,id:1080},{t:421.3836477987428,value:1,selected:!1,id:1091},{t:490.5660377358495,value:.32222222222222224,selected:!1,id:1082},{t:496.76438484328725,value:.32222222222222224,selected:!1,id:1083},{t:528.3018867924541,value:1,selected:!1,id:1092},{t:878.1927335100597,value:1,selected:!1,id:1093},{t:962.2641509433981,value:.32222222222222224,selected:!1,id:1096},{t:968.4624980508358,value:.32222222222222224,selected:!1,id:1097},{t:1006.2893081761024,value:1,selected:!1,id:1100},{t:1349.8908467176072,value:1,selected:!1,id:1101},{t:1630.378398045637,value:5.551115123125783e-17,selected:!1,id:1089},{t:1779.8742138364782,value:.005555555555555425,selected:!1,id:1157},{t:1781.1138832579659,value:1,selected:!1,id:1158},{t:1836.477987421384,value:1,selected:!1,id:1172},{t:1936.0725609439162,value:.17777777777777787,selected:!1,id:1159},{t:1991.8576849108583,value:.17777777777777787,selected:!1,id:1160},{t:1998.0560320182963,value:1,selected:!1,id:1161},{t:2050.3144654088055,value:1,selected:!1,id:1173},{t:2153.014709704247,value:.17777777777777787,selected:!1,id:1162},{t:2208.799833671189,value:.17777777777777787,selected:!1,id:1163},{t:2214.9981807786266,value:.17777777777777787,selected:!1,id:1164},{t:2228.725505483653,value:1,selected:!1,id:1165},{t:2295.5974842767296,value:1,selected:!1,id:1174},{t:2902.0713134778307,value:5.551115123125783e-17,selected:!1,id:1166}]},frequency:{valueScale:[50,500],data:[{t:490.56603773585016,value:72.5,selected:!1,id:1103},{t:496.85534591195056,value:114.99999999999977,selected:!1,id:1102},{t:943.3962264150962,value:114.99999999999977,selected:!1,id:1106},{t:949.6855345911965,value:155.0000000000001,selected:!1,id:1104},{id:1176,t:1729.559748427673,value:155.0000000000001,selected:!1},{t:1742.1383647798746,value:184.99999999999943,selected:!1,id:1170},{t:2196.3121783876504,value:184.99999999999943,selected:!1,id:1167},{t:2196.312178387651,value:125.00000000000057,selected:!1,id:1168}]}}},v10_09_1_8:{duration:3e3,selectedTimeRange:{active:!1,time1:0,time2:0},selected:!1,parameters:{amplitude:{valueScale:[0,1],data:[{t:327.04402515723274,value:.005555555555555314,selected:!0,id:351},{t:333.33333333333337,value:1,selected:!0,id:307},{t:433.6477987421385,value:.9755282581475768,selected:!0,id:309},{t:483.64779874213843,value:.9045084971874737,selected:!0,id:311},{t:533.6477987421384,value:.7938926261462367,selected:!0,id:313},{t:583.6477987421384,value:.6545084971874737,selected:!0,id:315},{t:658.1761006289308,value:.4283295960759858,selected:!0,id:321},{t:708.1761006289308,value:.31771372503474865,selected:!0,id:323},{t:758.1761006289308,value:.24669396407464556,selected:!0,id:325},{t:833.1761006289308,value:.22837805192465344,selected:!0,id:328},{t:883.1761006289308,value:.2767189601280383,selected:!0,id:330},{t:933.1761006289308,value:.3686688316289485,selected:!0,id:332},{t:982.5471698113206,value:.5726616769645598,selected:!0,id:338},{t:1032.5471698113204,value:.7214396943142177,selected:!0,id:340},{t:1082.5471698113204,value:.8479978350377182,selected:!0,id:342},{t:1157.5471698113201,value:.9699727025920212,selected:!0,id:345},{t:1276.7295597484278,value:1,selected:!0,id:347},{t:1289.3081761006295,value:.005555555555555508,selected:!0,id:349},{t:1823.8993710691825,value:.005555555555555314,selected:!0,id:357},{t:1830.188679245283,value:1,selected:!0,id:358},{t:1930.5031446540881,value:.9755282581475768,selected:!0,id:359},{t:1980.5031446540881,value:.9045084971874737,selected:!0,id:360},{t:2030.5031446540881,value:.7938926261462367,selected:!0,id:361},{t:2080.5031446540884,value:.6545084971874737,selected:!0,id:362},{t:2155.0314465408806,value:.4283295960759858,selected:!0,id:363},{t:2205.0314465408806,value:.31771372503474865,selected:!0,id:364},{t:2255.0314465408806,value:.24669396407464556,selected:!0,id:365},{t:2330.0314465408806,value:.22837805192465344,selected:!0,id:366},{t:2380.0314465408806,value:.2767189601280383,selected:!0,id:367},{t:2430.0314465408806,value:.3686688316289485,selected:!0,id:368},{t:2479.4025157232704,value:.5726616769645598,selected:!0,id:369},{t:2529.40251572327,value:.7214396943142177,selected:!0,id:370},{t:2579.40251572327,value:.8479978350377182,selected:!0,id:371},{t:2654.40251572327,value:.9699727025920212,selected:!0,id:372},{t:2773.5849056603774,value:1,selected:!0,id:373},{t:2786.163522012579,value:.005555555555555508,selected:!0,id:374}]},frequency:{valueScale:[50,500],data:[{t:336.4779874213836,value:357.5000000000002,selected:!0,id:184},{t:798.7421383647799,value:77.49999999999966,selected:!0,id:352},{t:1270.440251572327,value:357.5000000000002,selected:!0,id:355},{t:1833.3333333333335,value:357.5000000000002,selected:!0,id:375},{t:2295.5974842767296,value:77.49999999999966,selected:!0,id:376},{t:2767.295597484277,value:357.5000000000002,selected:!0,id:377}]}}},textures:{duration:3e3,selectedTimeRange:{active:!1,time1:0,time2:0},selected:!1,parameters:{amplitude:{valueScale:[0,1],data:[{t:433.96226415094316,value:1.1102230246251565e-16,selected:!1,id:78},{t:440.2515723270441,value:.38888888888888895,selected:!1,id:79},{t:522.0125786163524,value:.38888888888888895,selected:!1,id:80},{t:534.5911949685534,value:.2666666666666666,selected:!1,id:73},{t:616.3522012578613,value:.2666666666666666,selected:!1,id:74},{t:622.6415094339623,value:.6555555555555554,selected:!1,id:75},{t:704.4025157232707,value:.6555555555555554,selected:!1,id:76},{t:710.6918238993711,value:.4388888888888889,selected:!1,id:71},{t:792.4528301886791,value:.4388888888888889,selected:!1,id:72},{t:798.74213836478,value:.8277777777777777,selected:!1,id:69},{t:880.5031446540884,value:.8277777777777777,selected:!1,id:70},{t:886.7924528301886,value:.6166666666666667,selected:!1,id:67},{t:968.5534591194966,value:.6166666666666667,selected:!1,id:68},{t:968.5534591194967,value:1,selected:!1,id:42},{t:1050.314465408805,value:1,selected:!1,id:45},{t:1062.8930817610064,value:.6166666666666667,selected:!1,id:47},{t:1144.6540880503144,value:.6166666666666667,selected:!1,id:50},{t:1157.2327044025158,value:1,selected:!1,id:51},{t:1238.9937106918242,value:1,selected:!1,id:52},{t:1245.2830188679245,value:.6166666666666667,selected:!1,id:54},{t:1327.0440251572325,value:.6166666666666667,selected:!1,id:55},{t:1327.0440251572327,value:1,selected:!1,id:56},{t:1408.805031446541,value:1,selected:!1,id:57},{t:1421.3836477987422,value:.6166666666666667,selected:!1,id:58},{t:1509.4339622641508,value:.6166666666666667,selected:!1,id:81},{t:1509.433962264151,value:1,selected:!1,id:82},{t:1591.1949685534591,value:1,selected:!1,id:83},{t:1603.7735849056608,value:.6166666666666667,selected:!1,id:84},{t:1685.5345911949685,value:.6166666666666667,selected:!1,id:85},{t:1698.11320754717,value:1,selected:!1,id:86},{t:1779.8742138364782,value:1,selected:!1,id:87},{t:1786.1635220125786,value:.6166666666666667,selected:!1,id:88},{t:1867.9245283018868,value:.6166666666666667,selected:!1,id:89},{t:1867.9245283018868,value:1,selected:!1,id:90},{t:1949.6855345911954,value:1,selected:!1,id:91},{t:1962.2641509433965,value:.6166666666666667,selected:!1,id:92},{t:2031.4465408805033,value:.6166666666666667,selected:!1,id:110},{t:2037.7358490566037,value:.8277777777777777,selected:!1,id:113},{t:2119.496855345912,value:.8277777777777777,selected:!1,id:114},{t:2125.786163522013,value:.4388888888888889,selected:!1,id:115},{t:2207.5471698113206,value:.4388888888888889,selected:!1,id:116},{id:119,t:2207.547169811321,value:.6555555555555554,selected:!1},{id:120,t:2289.308176100629,value:.6555555555555554,selected:!1},{id:121,t:2301.8867924528304,value:.2666666666666666,selected:!1},{id:122,t:2383.647798742138,value:.2666666666666666,selected:!1},{id:123,t:2389.937106918239,value:.38888888888888895,selected:!1},{id:124,t:2471.698113207547,value:.38888888888888895,selected:!1},{id:125,t:2477.9874213836474,value:1.1102230246251565e-16,selected:!1}]},frequency:{valueScale:[50,500],data:[{id:139,t:427.67295597484275,value:117.50000000000034,selected:!1},{id:129,t:886.7924528301886,value:277.5,selected:!1},{id:130,t:1094.3396226415093,value:235,selected:!1},{id:132,t:1276.7295597484276,value:277.5,selected:!1},{id:133,t:1484.2767295597484,value:235,selected:!1},{id:134,t:1672.955974842767,value:277.5,selected:!1},{id:135,t:1880.503144654088,value:235,selected:!1},{id:136,t:2081.761006289308,value:277.5,selected:!1},{id:138,t:2471.698113207547,value:117.50000000000034,selected:!1}]}}}},p=a["default"].createActions(["selectExample"]),d=a["default"].createStore({listenables:[p],init:function(){this._data={selected:"test1",examples:h}},getInitialState:function(){return this._data},onSelectExample:function(e){var t="";for(var n in this._data.examples)n===e&&(t=n);if(""!=t){this._data.selected=t;for(var n in this._data.examples)this._data.examples[n].selected=n===t;s.actions.setVTIcon(this._data.examples[t],name=l),u.actions.setTime(0),o.actions.log("EXAMPLE_SELECT_"+t)}this.trigger(this._data)}});e.exports={actions:p,store:d}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=n(1),a=r(i),o=n(3),s=a["default"].createActions(["startSelecting","changeSelecting","startSelectingTimeRange","changeSelectingTimeRange","stopSelecting"]),u=a["default"].createStore({listenables:[s],init:function(){this._data={active:!1,adding:!1,targetName:"",time1:0,time2:0,parameters:{frequency:{value1:0,value2:0},amplitude:{value1:0,value2:0}}}},getInitialState:function(){return this._data},onStartSelecting:function(e,t,n){var r=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];this._data.targetName=e,this._data.active=!0,this._data.time1=t,this._data.time2=t,this._data.adding=r;for(var i in n)this._data.parameters[i].value1=n[i],this._data.parameters[i].value2=n[i];this._updateSelectedKeyframes(),this.trigger(this._data)},onChangeSelecting:function(e,t){this._data.time2=e;for(var n in t)this._data.parameters[n].value2=t[n];this._updateSelectedKeyframes(),this.trigger(this._data)},onStartSelectingTimeRange:function(e,t){this._data.targetName=e,this._data.active=!0,this._data.time1=t,this._data.time2=t,this._updateSelectedTimeRange(),this.trigger(this._data)},onChangeSelectingTimeRange:function(e){this._data.time2=e,this._updateSelectedTimeRange(),this.trigger(this._data)},onStopSelecting:function(){this._data.targetName="",this._data.active=!1,this.trigger(this._data)},_updateSelectedKeyframes:function(){this._data.adding?o.actions.addSelectedKeyframesInRange(this._data.time1,this._data.time2,this._data.parameters):o.actions.selectKeyframesInRange(this._data.time1,this._data.time2,this._data.parameters)},_updateSelectedTimeRange:function(){o.actions.selectTimeRange(this._data.time1,this._data.time2)}});e.exports={actions:s,store:u}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=n(2),a=(r(i),n(5)),o=r(a),s={_iconChanged:function(e){var t=this._last_updated_vticon;if(void 0==t)return!0;var n=!1;e.duration!=t.duration&&(n=!0);for(var r in e.parameters)if(e.parameters[r].valueScale!=t.parameters[r].valueScale&&(n=!0),e.parameters[r].data.length!=t.parameters[r].data.length)n=!0;else for(var i=0;i<e.parameters[r].data.length;i++){
var a=e.parameters[r].data[i],o=t.parameters[r].data[i];(a.t!=o.t||a.value!=o.value||a.id!=o.id)&&(n=!0)}return n},interpolateParameter:function(e,t,n){for(var r=n.parameters[e].data,i=null,a=null,o=null,s=0;s<r.length;s++)r[s].t==t?o=r[s].value:r[s].t<t?(null==i||i.t<=r[s].t)&&(i=r[s]):(null==a||a.t>=r[s].t)&&(a=r[s]);if(null==o)if(null==a&&null==i){if(null==o)throw"No keyframes found in parameter "+e}else if(null==a)o=i.value;else if(null==i)o=a.value;else if(i.t==a.t)o=i.value;else{var u=a.t-i.t,l=(t-i.t)/u,c=a.value-i.value;o=l*c+i.value}return o},interpolateParameters:function(e,t){var n=this.interpolateParameter;return Object.keys(t.parameters).reduce(function(r,i){return r[i]=n(i,e,t),r},{})},_copyIcon:function(e){var t={};t.duration=e.duration,t.parameters={};for(var n in e.parameters){t.parameters[n]={},t.parameters[n].valueScale=e.parameters[n].valueScale,t.parameters[n].data=[];for(var r=0;r<e.parameters[n].data.length;r++){var i=e.parameters[n].data[r];t.parameters[n].data.push({t:i.t,value:i.value,id:i.id})}}return t},computeWaveformPath:function(e,t,n,r,i,a){if(this._iconChanged(e)){for(var s=o["default"].svg.line().x(function(e){return t(e[0])}).y(function(e){return n(e[1])}),u=[],l=0,c=e.duration/1e3/r,f=0,h=Math.max(e.parameters.frequency.valueScale[0],e.parameters.frequency.valueScale[1])/i,p=0;r>p;p++){var d=p/r*e.duration,m=this.interpolateParameter("amplitude",d,e),g=this.interpolateParameter("frequency",d,e);a&&(g=Math.min(i,g/h)),0==p||(f+=g*c);var v=m*Math.sin(2*Math.PI*f);u.push([d,v]),l=g}this._last_updated_vticon=this._copyIcon(e),this._waveformpath=s(u)}return this._waveformpath}};e.exports=s},function(e,t){"use strict";e.exports={}},function(e,t){"use strict";e.exports={}},function(e,t,n){"use strict";var r=n(4),i=n(15),a=n(44),o=n(41),s={preEmit:1,shouldEmit:1};e.exports=function(e){function t(){var t,n=0;if(this.subscriptions=[],this.emitter=new r.EventEmitter,this.eventLabel="change",o(this,e),this.init&&r.isFunction(this.init)&&this.init(),this.listenables)for(t=[].concat(this.listenables);n<t.length;n++)this.listenToMany(t[n])}var u=n(22),l=n(16),c=n(7);e=e||{};for(var f in u)if(!s[f]&&(l[f]||c[f]))throw new Error("Cannot override API method "+f+" in Reflux.StoreMethods. Use another method name or override it on Reflux.PublisherMethods / Reflux.ListenerMethods instead.");for(var h in e)if(!s[h]&&(l[h]||c[h]))throw new Error("Cannot override API method "+h+" in store creation. Use another method name or override it on Reflux.PublisherMethods / Reflux.ListenerMethods instead.");e=a(e),r.extend(t.prototype,c,l,u,e);var p=new t;return i.createdStores.push(p),p}},function(e,t,n){"use strict";function r(e,t,n){return function(){var r,i=n.subscriptions,a=i?i.indexOf(e):-1;for(u.throwIf(-1===a,"Tried to remove join already gone from subscriptions list!"),r=0;r<t.length;r++)t[r]();i.splice(a,1)}}function i(e){e.listenablesEmitted=new Array(e.numberOfListenables),e.args=new Array(e.numberOfListenables)}function a(e,t){return function(){var n=l.call(arguments);if(t.listenablesEmitted[e])switch(t.strategy){case"strict":throw new Error("Strict join failed because listener triggered twice.");case"last":t.args[e]=n;break;case"all":t.args[e].push(n)}else t.listenablesEmitted[e]=!0,t.args[e]="all"===t.strategy?[n]:n;o(t)}}function o(e){for(var t=0;t<e.numberOfListenables;t++)if(!e.listenablesEmitted[t])return;e.callback.apply(e.listener,e.args),i(e)}var s=n(23),u=n(4),l=Array.prototype.slice,c={strict:"joinStrict",first:"joinLeading",last:"joinTrailing",all:"joinConcat"};t.staticJoinCreator=function(e){return function(){var t=l.call(arguments);return s({init:function(){this[c[e]].apply(this,t.concat("triggerAsync"))}})}},t.instanceJoinCreator=function(e){return function(){u.throwIf(arguments.length<2,"Cannot create a join with less than 2 listenables!");var t,n,o=l.call(arguments),s=o.pop(),c=o.length,f={numberOfListenables:c,callback:this[s]||s,listener:this,strategy:e},h=[];for(t=0;c>t;t++)u.throwIf(this.validateListening(o[t]));for(t=0;c>t;t++)h.push(o[t].listen(a(t,f),this));return i(f),n={listenable:o},n.stop=r(n,h,this),this.subscriptions=(this.subscriptions||[]).concat(n),n}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=n(2),a=r(i),o=a["default"].createClass({displayName:"AnimationWindow",propTypes:{animation:a["default"].PropTypes.string,animationParameters:a["default"].PropTypes.object},getDefaultProps:function(){return{height:50,width:"100%"}},render:function(){var e={marginLeft:"auto",marginRight:"auto",display:"block"},t=a["default"].createElement("group",null),n="0 0 100 100";if("heartbeat"===this.props.animation)t=a["default"].createElement("path",{transform:"translate("+50*(1-this.props.animationParameters.size)+","+50*(1-this.props.animationParameters.size)+") scale("+this.props.animationParameters.size+")","fill-rule":"evenodd","clip-rule":"evenodd",fill:"red",d:"M25.119,2.564c12.434,0.023,18.68,5.892,24.88,17.612  c6.2-11.721,12.446-17.589,24.877-17.612c13.81-0.025,25.035,10.575,25.061,23.66c0.033,23.708-24.952,47.46-49.938,71.212  C25.016,73.685,0.03,49.932,0.064,26.224C0.085,13.14,11.309,2.539,25.119,2.564z"});else if("mobile"===this.props.animation){n="0 0 100 100";var r="";r+=" translate("+50*(1-this.props.animationParameters.size)+","+50*(1-this.props.animationParameters.size)+")",r+=" scale("+this.props.animationParameters.size+")",r+=" rotate("+this.props.animationParameters.rotation+", 50, 50)",t=a["default"].createElement("g",{transform:r},a["default"].createElement("path",{d:"M 29 12.5 L 71 12.5 C 73.20914 12.5 75 14.290861 75 16.5 L 75 83.5 C 75 85.70914 73.20914 87.5 71 87.5 L 29 87.5 C 26.790861 87.5 25 85.70914 25 83.5 L 25 16.5 C 25 14.290861 26.790861 12.5 29 12.5 Z",fill:"black"}),a["default"].createElement("rect",{x:"30.45",y:"19.4",width:"39.1",height:"56.45",fill:"white"}),a["default"].createElement("path",{d:"M 50 78.75 L 50 78.75 C 51.656854 78.75 53 80.093147 53 81.75 L 53 81.75 C 53 83.406855 51.656854 84.75 50 84.75 L 50 84.75 C 48.343146 84.75 47 83.406855 47 81.75 L 47 81.75 C 47 80.093147 48.343146 78.75 50 78.75 Z",fill:"white"}),a["default"].createElement("path",{d:"M 50 78.75 L 50 78.75 C 51.656854 78.75 53 80.093147 53 81.75 L 53 81.75 C 53 83.406855 51.656854 84.75 50 84.75 L 50 84.75 C 48.343146 84.75 47 83.406855 47 81.75 L 47 81.75 C 47 80.093147 48.343146 78.75 50 78.75 Z",stroke:"black","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1"}))}else if("cat"===this.props.animation){var r="",i=7.5,o=.75*Math.sin(this.props.animationParameters.t/1e3*2*Math.PI*i);r+=" translate(0,"+(50*(1-this.props.animationParameters.size)+o)+")",r+="scale(1,"+this.props.animationParameters.size+")",t=a["default"].createElement("g",null,a["default"].createElement("g",{transform:r,stroke:"none","stroke-opacity":"1","stroke-dasharray":"none",fill:"none","fill-opacity":"1"},a["default"].createElement("path",{d:"M 82.275525 45.8 C 81.700727 42.346694 79.135463 38.983972 74.57973 36.339208 C 64.15274 30.285907 47.247262 30.285907 36.82027 36.339208 C 32.264538 38.983973 29.699274 42.346695 29.124477 45.800002 Z",fill:"black"})),a["default"].createElement("g",{stroke:"none","stroke-opacity":"1","stroke-dasharray":"none",fill:"none","fill-opacity":"1"},a["default"].createElement("ellipse",{cx:"55.7",cy:"47.29962",rx:"26.700043",ry:"15.500405",fill:"black"}),a["default"].createElement("path",{d:"M 28.6 23.4 L 29.4 23.4 C 37.242443 23.4 43.6 29.757557 43.6 37.6 L 43.6 37.6 C 43.6 45.442444 37.242443 51.8 29.4 51.8 L 28.6 51.8 C 20.757557 51.8 14.4 45.442444 14.4 37.6 L 14.4 37.6 C 14.4 29.757557 20.757557 23.4 28.6 23.4 Z",fill:"black"}),a["default"].createElement("path",{d:"M 28.6 23.4 L 29.4 23.4 C 37.242443 23.4 43.6 29.757557 43.6 37.6 L 43.6 37.6 C 43.6 45.442444 37.242443 51.8 29.4 51.8 L 28.6 51.8 C 20.757557 51.8 14.4 45.442444 14.4 37.6 L 14.4 37.6 C 14.4 29.757557 20.757557 23.4 28.6 23.4 Z",stroke:"white","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1"}),a["default"].createElement("path",{d:"M 26.1 41.4 L 29 47.2 L 31.9 41.4 Z",fill:"white"}),a["default"].createElement("path",{d:"M 16.2 18.8 L 30.4 33 L 16.2 33 Z",fill:"black"}),a["default"].createElement("path",{d:"M 41.7 18.8 L 27.5 33 L 41.7 33 Z",fill:"black"}),a["default"].createElement("path",{d:"M 19 34.26288 C 19 34.26288 20.743552 33.687607 22.925 33.6875 C 25.106448 33.687393 26.7 34.2625 26.7 34.2625",stroke:"white","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1"}),a["default"].createElement("path",{d:"M 38.7 34.26288 C 38.7 34.26288 36.956448 33.687607 34.775 33.6875 C 32.593552 33.687393 31 34.2625 31 34.2625",stroke:"white","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1"}),a["default"].createElement("ellipse",{cx:"43.3",cy:"62.5",rx:"12.30002",ry:"3.9000063",fill:"black"}),a["default"].createElement("ellipse",{cx:"37.5",cy:"57.5",rx:"12.30002",ry:"3.9000063",fill:"black"}),a["default"].createElement("ellipse",{cx:"65.5",cy:"62.5",rx:"12.30002",ry:"3.9000063",fill:"black"}),a["default"].createElement("ellipse",{cx:"72.3",cy:"53.05",rx:"10.700017",ry:"12.0500194",fill:"black"}),a["default"].createElement("path",{d:"M 73.8 42.00038 C 73.8 42.00038 83.600003 41.875001 87.2 47.8 C 90.8 53.725 91 60.85826 88.6 64.60038 C 86.200003 68.3425 81.4 73.00038 80.2 73.00038 C 79 73.00038 76.6 70.00038 76.6 69.00038 C 76.6 68.00038 82.925003 65.7175 84.4 61.60038 C 85.875 57.48326 86.05 53.87462 83.2 49.79962 C 80.350003 45.724622 75 46.00038 75 46.00038 Z",fill:"black"})))}else if("lightning"===this.props.animation){var r="",s=a["default"].createElement("g",{stroke:"none","stroke-opacity":"1","stroke-dasharray":"none",fill:"none","fill-opacity":"1"},a["default"].createElement("path",{d:"M 16.543864 31.843132 C 1.9152331 28.987141 7.748764 4.9443894 31.084697 9.0467853 C 33.249756 1.049905 60.38631 2.3478892 60.208905 9.0467853 C 77.22435 .47881321 98.969074 17.563178 84.38389 26.13115 C 101.885387 30.285125 84.16304 52.66618 69.79961 48.927497 C 68.6501 55.15899 42.97261 57.33967 40.718848 48.927497 C 26.17892 57.911292 -4.1391482 44.09821 16.543864 31.843132 Z",fill:"#bbb"}),a["default"].createElement("path",{d:"M 16.543864 31.843132 C 1.9152331 28.987141 7.748764 4.9443894 31.084697 9.0467853 C 33.249756 1.049905 60.38631 2.3478892 60.208905 9.0467853 C 77.22435 .47881321 98.969074 17.563178 84.38389 26.13115 C 101.885387 30.285125 84.16304 52.66618 69.79961 48.927497 C 68.6501 55.15899 42.97261 57.33967 40.718848 48.927497 C 26.17892 57.911292 -4.1391482 44.09821 16.543864 31.843132 Z",stroke:"black","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1"})),u=a["default"].createElement("g",null);this.props.animationParameters.right>.5&&(u=a["default"].createElement("g",{stroke:"none","stroke-opacity":"1","stroke-dasharray":"none",fill:"none","fill-opacity":"1"},a["default"].createElement("path",{d:"M 50.955065 58.422875 L 65.833196 51.979825 L 49.959888 33.552565 L 80.94531 52.210634 L 66.932506 58.573356 L 89.15955 74.311923 L 72.106268 82.48705 L 86.897563 97.530495 L 57.524053 81.665464 L 73.728424 73.846104 L 50.955175 58.423067 Z",fill:"#ebcf37"})));var l=a["default"].createElement("g",null);this.props.animationParameters.left>.5&&(l=a["default"].createElement("g",{stroke:"none","stroke-opacity":"1","stroke-dasharray":"none",fill:"none","fill-opacity":"1"},a["default"].createElement("path",{d:"M 14.433014 68.608324 L 30.47177 70.98109 L 19.908657 92.88877 L 45.009215 66.84684 L 29.82709 64.327704 L 47.223328 43.372633 L 28.635241 39.889782 L 39.029005 21.530661 L 14.762545 44.457528 L 32.438565 47.81645 L 14.433072 68.60811 Z",fill:"#ebcf37"}),"     ")),t=a["default"].createElement("g",null,u,l,s)}else if("snow"===this.props.animation){var s=a["default"].createElement("g",{stroke:"none","stroke-opacity":"1","stroke-dasharray":"none",fill:"none","fill-opacity":"1"},a["default"].createElement("path",{d:"M 16.543864 31.843132 C 1.9152331 28.987141 7.748764 4.9443894 31.084697 9.0467853 C 33.249756 1.049905 60.38631 2.3478892 60.208905 9.0467853 C 77.22435 .47881321 98.969074 17.563178 84.38389 26.13115 C 101.885387 30.285125 84.16304 52.66618 69.79961 48.927497 C 68.6501 55.15899 42.97261 57.33967 40.718848 48.927497 C 26.17892 57.911292 -4.1391482 44.09821 16.543864 31.843132 Z",fill:"#ddd"}),a["default"].createElement("path",{d:"M 16.543864 31.843132 C 1.9152331 28.987141 7.748764 4.9443894 31.084697 9.0467853 C 33.249756 1.049905 60.38631 2.3478892 60.208905 9.0467853 C 77.22435 .47881321 98.969074 17.563178 84.38389 26.13115 C 101.885387 30.285125 84.16304 52.66618 69.79961 48.927497 C 68.6501 55.15899 42.97261 57.33967 40.718848 48.927497 C 26.17892 57.911292 -4.1391482 44.09821 16.543864 31.843132 Z",stroke:"black","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1"})),c="M36.786,50.287l3.955,5.841h7.365l3.398-5.841l-3.58-6.22h-7.379L36.786,50.287z M39.819,97.261V84.054		l-7.379,4.15l-3.759-2.152v-4.653l10.943-6.22v-8.68l-7.939,5.102v-9.196l-7.589,4.374v12.468l-4.151,2.572l-3.508-2.321v-8.356		L4.919,77.64L0,75.57V70.3l12.089-6.609L4.528,59.89v-4.822l4.291-2.349l10.845,6.386l7.533-4.346l-0.182-0.139l-7.701-4.417		l7.477-4.64l-7.505-4.346L8.442,47.589l-4.068-2.026v-4.808l7.339-4.123L0,30.272v-5.269l4.5-2.319l11.544,6.666v-8.497l3.48-2.348		l4.264,2.46L23.76,33.683l7.756,4.43l-0.027-8.986l8.134,4.375v-8.68L28.68,18.589v-4.612l3.759-2.18l7.379,4.151V2.768L44.04,0		l4.261,2.768v13.18l7.646-4.235l3.845,2.544v4.151L48.47,24.822v8.68l7.744-4.724v9.448l7.979-4.348V20.28l3.844-1.789l4.038,1.789		v8.694l11.879-6.416l4.153,2.53v4.919l-11.601,6.597l7.254,4.066v4.697L80,47.45l-11.138-6.583l-7.702,4.892l7.449,4.642		l-7.673,4.416l7.926,4.15L80,52.746l3.578,2.53v4.487L76.59,63.69L87.716,70.3v5.188l-4.71,2.152l-10.931-6.221v8.232l-3.927,2.194		l-3.843-2.194V67.155l-8.092-4.611v8.68l-7.744-4.725v8.68l10.944,6.22v4.92l-3.776,1.886l-7.337-4.15v13.207L44.04,100		L39.819,97.261z",f="lightgrey",h=30,p=function(e,t){var n="",r=100*t%h;r=h/2>r?r:h-r;var i=e+r,a=80*t+22;return n+="translate("+i+","+a+")",n+="scale(0.2)"},d=a["default"].createElement("path",{fill:f,transform:p(10,this.props.animationParameters.flake1),d:c}),m=a["default"].createElement("path",{fill:f,transform:p(63,this.props.animationParameters.flake2),d:c}),g=a["default"].createElement("path",{fill:f,transform:p(28,this.props.animationParameters.flake3),d:c});t=a["default"].createElement("g",null,d,m,g,s)}else if("car"===this.props.animation){var v="",i=6,o=1.5*Math.sin(this.props.animationParameters.t/1e3*2*Math.PI*i);v+=" translate(0, "+o+")",v+=" rotate("+this.props.animationParameters.rotation+", 50, 50)",t=a["default"].createElement("g",{transform:v,stroke:"none","stroke-opacity":"1","stroke-dasharray":"none",fill:"none","fill-opacity":"1"},a["default"].createElement("path",{d:"M 13.85 40.695977 L -23.8 54.8 C -23.8 54.8 -14.8 74.915985 -14.8 75.2 C -14.8 75.484017 17.65 44.695977 17.65 44.695977 Z",fill:"white"}),a["default"].createElement("path",{d:"M 13.85 40.695977 L -23.8 54.8 C -23.8 54.8 -14.8 74.915985 -14.8 75.2 C -14.8 75.484017 17.65 44.695977 17.65 44.695977 Z",stroke:"black","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".25"}),a["default"].createElement("path",{d:"M 85.103943 38.9 L 128.8 56 C 128.8 56 117 76.715985 117 77 C 117 77.284017 81.303943 42.9 81.303943 42.9 Z",fill:"white"}),a["default"].createElement("path",{d:"M 85.103943 38.9 L 128.8 56 C 128.8 56 117 76.715985 117 77 C 117 77.284017 81.303943 42.9 81.303943 42.9 Z",stroke:"black","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".25"}),a["default"].createElement("circle",{cx:"50",cy:"50",r:"34.675056",stroke:"black",strokeWidth:10}),a["default"].createElement("path",{d:"M 43.14129 60.09304 C 45.538647 59.99795 47.917803 59.909718 50.000005 59.843493 C 52.082203 59.909718 54.461356 59.99795 56.85871 60.09304 C 62.897667 62.84697 73.4 80.125 73.4 80.125 L 82.6 67.525 C 82.6 67.525 60.6 52.725 56 48.525 C 55.45843 48.030524 55.02775 47.195069 54.68935 46.105777 C 54.443674 45.188133 54.24281 43.984674 54.073193 42.586468 C 54.02014 42.149115 53.97014 41.692708 53.92303 41.220001 C 53.793446 39.919737 53.685707 38.496146 53.596273 37.006558 C 53.398605 27.395642 54.8 15.525 54.8 15.525 L 53.197928 15.484948 C 53.199217 15.379811 53.2 15.325 53.2 15.325 L 50 15.405 L 46.8 15.325 C 46.8 15.325 46.800783 15.379811 46.802072 15.484948 L 45.2 15.525 C 45.2 15.525 46.601395 27.395641 46.387518 37.00622 C 46.35437 38.495776 46.282418 39.93104 46.160432 41.2594 C 46.02986 41.692708 45.979862 42.149116 45.926806 42.58647 C 45.815746 44.088145 45.59601 45.187213 45.31065 46.105777 C 44.97225 47.19507 44.54157 48.030524 44 48.525 C 39.4 52.725 17.4 67.525 17.4 67.525 L 26.6 80.125 C 26.6 80.125 37.102333 62.846968 43.141287 60.093043 Z",fill:"black"}),a["default"].createElement("path",{d:"M 90.933116 42.212263 C 90.933116 42.212263 85.622983 41.86607 84.716373 39.66607 C 83.809763 37.46607 85.234435 36.06607 83.68025 33.86607 C 82.126064 31.66607 79.600514 28.91607 82.126064 26.66607 C 84.651614 24.416069 84.45734 27.66607 86.01153 29.86607 C 87.565714 32.06607 89.37893 32.06607 90.674085 35.06607 C 91.96924 38.06607 90.933116 42.212263 90.933116 42.212263 Z",fill:"white"}),a["default"].createElement("path",{d:"M 90.933116 42.212263 C 90.933116 42.212263 85.622983 41.86607 84.716373 39.66607 C 83.809763 37.46607 85.234435 36.06607 83.68025 33.86607 C 82.126064 31.66607 79.600514 28.91607 82.126064 26.66607 C 84.651614 24.416069 84.45734 27.66607 86.01153 29.86607 C 87.565714 32.06607 89.37893 32.06607 90.674085 35.06607 C 91.96924 38.06607 90.933116 42.212263 90.933116 42.212263 Z",stroke:"black","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".25"}),a["default"].createElement("path",{d:"M 74.078707 32.60693 C 75.754447 32.00693 77.29054 29.80693 78.12841 32.00693 C 78.96628 34.20693 75.33551 36.80693 75.33551 36.80693 C 75.33551 36.80693 73.93906 37.60693 73.10119 36.40693 C 72.26332 35.20693 72.402967 33.20693 74.078707 32.60693 Z",fill:"white"}),a["default"].createElement("path",{d:"M 74.078707 32.60693 C 75.754447 32.00693 77.29054 29.80693 78.12841 32.00693 C 78.96628 34.20693 75.33551 36.80693 75.33551 36.80693 C 75.33551 36.80693 73.93906 37.60693 73.10119 36.40693 C 72.26332 35.20693 72.402967 33.20693 74.078707 32.60693 Z",stroke:"black","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".25"}),a["default"].createElement("path",{d:"M 75.428707 36.00693 C 77.104447 35.40693 78.64054 33.20693 79.47841 35.40693 C 80.31628 37.60693 76.68551 40.20693 76.68551 40.20693 C 76.68551 40.20693 75.28906 41.00693 74.45119 39.80693 C 73.61332 38.60693 73.752967 36.60693 75.428707 36.00693 Z",fill:"white"}),a["default"].createElement("path",{d:"M 75.428707 36.00693 C 77.104447 35.40693 78.64054 33.20693 79.47841 35.40693 C 80.31628 37.60693 76.68551 40.20693 76.68551 40.20693 C 76.68551 40.20693 75.28906 41.00693 74.45119 39.80693 C 73.61332 38.60693 73.752967 36.60693 75.428707 36.00693 Z",stroke:"black","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".25"}),a["default"].createElement("path",{d:"M 76.878707 38.875083 C 78.554447 38.275083 80.09054 36.075083 80.92841 38.275083 C 81.76628 40.475083 78.13551 43.075083 78.13551 43.075083 C 78.13551 43.075083 76.73906 43.875083 75.90119 42.675083 C 75.06332 41.475083 75.202967 39.475083 76.878707 38.875083 Z",fill:"white"}),a["default"].createElement("path",{d:"M 76.878707 38.875083 C 78.554447 38.275083 80.09054 36.075083 80.92841 38.275083 C 81.76628 40.475083 78.13551 43.075083 78.13551 43.075083 C 78.13551 43.075083 76.73906 43.875083 75.90119 42.675083 C 75.06332 41.475083 75.202967 39.475083 76.878707 38.875083 Z",stroke:"black","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".25"}),a["default"].createElement("path",{d:"M 77.824765 41.75693 C 79.500505 41.15693 81.0366 38.95693 81.87447 41.15693 C 82.71234 43.35693 79.08157 45.95693 79.08157 45.95693 C 79.08157 45.95693 77.68512 46.75693 76.84725 45.55693 C 76.00938 44.35693 76.149025 42.35693 77.824765 41.75693 Z",fill:"white"}),a["default"].createElement("path",{d:"M 77.824765 41.75693 C 79.500505 41.15693 81.0366 38.95693 81.87447 41.15693 C 82.71234 43.35693 79.08157 45.95693 79.08157 45.95693 C 79.08157 45.95693 77.68512 46.75693 76.84725 45.55693 C 76.00938 44.35693 76.149025 42.35693 77.824765 41.75693 Z",stroke:"black","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".25"}),a["default"].createElement("path",{d:"M 89.844866 40.0295 L 87.85937 40.9135 L 90.632564 47.142192 L 92.61806 46.258193 Z",fill:"white"}),a["default"].createElement("path",{d:"M 8.0208274 44.00824 C 8.0208274 44.00824 13.33096 43.662047 14.23757 41.462046 C 15.14418 39.262045 13.719508 37.862046 15.273694 35.662046 C 16.82788 33.462046 19.35343 30.712046 16.82788 28.462046 C 14.3023295 26.212045 14.496601 29.462046 12.9424154 31.662046 C 11.38823 33.862046 9.575013 33.862046 8.2798584 36.862046 C 6.9847036 39.862046 8.0208274 44.00824 8.0208274 44.00824 Z",fill:"white"}),a["default"].createElement("path",{d:"M 8.0208274 44.00824 C 8.0208274 44.00824 13.33096 43.662047 14.23757 41.462046 C 15.14418 39.262045 13.719508 37.862046 15.273694 35.662046 C 16.82788 33.462046 19.35343 30.712046 16.82788 28.462046 C 14.3023295 26.212045 14.496601 29.462046 12.9424154 31.662046 C 11.38823 33.862046 9.575013 33.862046 8.2798584 36.862046 C 6.9847036 39.862046 8.0208274 44.00824 8.0208274 44.00824 Z",stroke:"black","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".25"}),a["default"].createElement("path",{d:"M 24.875237 34.402906 C 23.199497 33.802906 21.663401 31.602906 20.825531 33.802906 C 19.987661 36.002906 23.618432 38.602906 23.618432 38.602906 C 23.618432 38.602906 25.014882 39.402906 25.852752 38.202906 C 26.690622 37.002906 26.550977 35.002906 24.875237 34.402906 Z",fill:"white"}),a["default"].createElement("path",{d:"M 24.875237 34.402906 C 23.199497 33.802906 21.663401 31.602906 20.825531 33.802906 C 19.987661 36.002906 23.618432 38.602906 23.618432 38.602906 C 23.618432 38.602906 25.014882 39.402906 25.852752 38.202906 C 26.690622 37.002906 26.550977 35.002906 24.875237 34.402906 Z",stroke:"black","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".25"}),a["default"].createElement("path",{d:"M 23.525237 37.802906 C 21.849496 37.202906 20.313401 35.002906 19.475531 37.202906 C 18.637661 39.402906 22.268432 42.002906 22.268432 42.002906 C 22.268432 42.002906 23.664882 42.802906 24.502752 41.602906 C 25.340622 40.402906 25.200977 38.402906 23.525237 37.802906 Z",fill:"white"}),a["default"].createElement("path",{d:"M 23.525237 37.802906 C 21.849496 37.202906 20.313401 35.002906 19.475531 37.202906 C 18.637661 39.402906 22.268432 42.002906 22.268432 42.002906 C 22.268432 42.002906 23.664882 42.802906 24.502752 41.602906 C 25.340622 40.402906 25.200977 38.402906 23.525237 37.802906 Z",stroke:"black","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".25"}),a["default"].createElement("path",{d:"M 22.075237 40.67106 C 20.399496 40.07106 18.863401 37.87106 18.025531 40.07106 C 17.187661 42.27106 20.818432 44.87106 20.818432 44.87106 C 20.818432 44.87106 22.214882 45.67106 23.052752 44.47106 C 23.890622 43.27106 23.750977 41.27106 22.075237 40.67106 Z",fill:"white"}),a["default"].createElement("path",{d:"M 22.075237 40.67106 C 20.399496 40.07106 18.863401 37.87106 18.025531 40.07106 C 17.187661 42.27106 20.818432 44.87106 20.818432 44.87106 C 20.818432 44.87106 22.214882 45.67106 23.052752 44.47106 C 23.890622 43.27106 23.750977 41.27106 22.075237 40.67106 Z",stroke:"black","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".25"}),a["default"].createElement("path",{d:"M 21.129179 43.552906 C 19.453439 42.952906 17.917343 40.752906 17.079473 42.952906 C 16.241603 45.152906 19.872374 47.752906 19.872374 47.752906 C 19.872374 47.752906 21.268824 48.552906 22.106694 47.352906 C 22.944564 46.152906 22.804919 44.152906 21.129179 43.552906 Z",fill:"white"}),a["default"].createElement("path",{d:"M 21.129179 43.552906 C 19.453439 42.952906 17.917343 40.752906 17.079473 42.952906 C 16.241603 45.152906 19.872374 47.752906 19.872374 47.752906 C 19.872374 47.752906 21.268824 48.552906 22.106694 47.352906 C 22.944564 46.152906 22.804919 44.152906 21.129179 43.552906 Z",stroke:"black","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".25"}),a["default"].createElement("path",{d:"M 11.390629 41.379976 L 9.4051344 40.495977 L 6.6319416 46.72467 L 8.617436 47.60867 Z",fill:"white"}))}return a["default"].createElement("div",{style:e},a["default"].createElement("svg",{style:e,width:"100",height:"100",viewBox:n},t))}});e.exports=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=n(2),a=r(i),o=n(5),s=(r(o),n(8)),u=n(3),l=a["default"].createClass({displayName:"ControlBar",propTypes:{name:a["default"].PropTypes.string.isRequired,playing:a["default"].PropTypes.bool.isRequired,mute:a["default"].PropTypes.bool.isRequired},getDefaultProps:function(){return{width:"100%",background:"lightgrey",fontSize:"28pt"}},_onMuteClick:function(e){s.actions.toggleMute()},_onPlayClick:function(e){u.actions.selectVTIcon(this.props.name),s.actions.togglePlaying()},_onSkipBackwardClick:function(e){u.actions.selectVTIcon(this.props.name),s.actions.skipBackward()},_onSkipForwardClick:function(e){u.actions.selectVTIcon(this.props.name),s.actions.skipForward()},render:function(){var e={height:this.props.height,width:this.props.width,background:this.props.background,fontSize:this.props.fontSize,className:"unselectable"},t={marginLeft:"auto",marginRight:"auto",textAlign:"center"},n={marginLeft:"0.5em",marginRight:"0.5em",className:"unselectable"},r="fa fa-play";return this.props.playing&&(r="fa fa-pause"),a["default"].createElement("div",{className:"controlbar",style:e},a["default"].createElement("div",{className:"time-control",style:t},a["default"].createElement("a",{"class":"btn",href:"#"},a["default"].createElement("i",{onClick:this._onSkipBackwardClick,className:"fa fa-step-backward",style:n})),a["default"].createElement("a",{"class":"btn",href:"#"},a["default"].createElement("i",{onClick:this._onPlayClick,className:r,style:n})),a["default"].createElement("a",{"class":"btn",href:"#"},a["default"].createElement("i",{onClick:this._onSkipForwardClick,className:"fa fa-step-forward",style:n})),a["default"].createElement("a",{"class":"btn",href:"#"},a["default"].createElement("span",{onClick:this._onMuteClick,className:"unselectable mute"},a["default"].createElement("input",{type:"checkbox",checked:this.props.mute}),"Mute"))))}});e.exports=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=n(2),a=r(i),o=n(1),s=r(o),u=n(11),l=n(10),c=n(35),f=n(6),h=a["default"].createClass({displayName:"EditorHeader",mixins:[s["default"].connect(u.store,"animation"),s["default"].connect(l.store,"study")],propTypes:{},getDefaultProps:function(){return{displayAnimation:!1,displayInterfaceMode:!1,displaySaveButton:!1,displayStartButton:!1}},_onAnimationChange:function(e){u.actions.setAnimation(e.target.value)},_onDisplayModeChange:function(e){l.actions.setDisplayMode(e.target.value)},_onStartClick:function(e){f.actions.log("START_TASK")},_onSaveClick:function(e){c.actions.save()},render:function(){var e={},t=this.state.animation.animationOptions,n=this.state.study.modes,r=this._onAnimationChange,i=this._onDisplayModeChange,o=this.state.animation.animation,s=this.state.study.currentMode,u=a["default"].createElement("span",null);this.props.displayAnimation&&(u=a["default"].createElement("select",{className:"animationoptions unselectable",onChange:r},t.map(function(e){return a["default"].createElement("option",{value:e,selected:e==o},e)})));var l=a["default"].createElement("span",null);this.props.displayInterfaceMode&&(l=a["default"].createElement("select",{className:"displayoptions unselectable",onChange:i},Object.keys(n).map(function(e){return a["default"].createElement("option",{value:e,selected:e==s},e)})));var c=a["default"].createElement("span",null);this.props.displayStartButton&&(c=a["default"].createElement("button",{onClick:this._onStartClick},"Start"));var f=a["default"].createElement("span",null);return this.props.displaySaveButton&&(f=a["default"].createElement("button",{onClick:this._onSaveClick},"Finish")),a["default"].createElement("div",{className:"header",style:e},c,a["default"].createElement("span",{className:"title unselectable"}," Macaron "),u,l,f)}});e.exports=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=n(2),a=r(i),o=n(1),s=r(o),u=n(5),l=r(u),c=n(18),f=n(20),h=a["default"].createClass({displayName:"ExampleSquare",mixins:[f,s["default"].listenTo(c.store,"onExampleChange")],propTypes:{exampleName:a["default"].PropTypes.string.isRequired,exampleicon:a["default"].PropTypes.object.isRequired},getDefaultProps:function(){return{width:100,height:50,visColor:"#FFDDAD",resolution:2e3,maxFrequencyRendered:40,limitFrequencies:!0}},onExampleChange:function(e){var t=e.examples[this.props.exampleName],n=l["default"].scale.linear().domain([-1,1]).range([0,this.props.height]),r=l["default"].scale.linear().domain([0,t.duration]).range([0,this.props.width]);this._visPath=this.computeWaveformPath(t,r,n,this.props.resolution,this.props.maxFrequencyRendered,this.props.limitFrequencies)},componentWillMount:function(){this._visPath="",this.onExampleChange(c.store.getInitialState())},_handleClick:function(e){c.actions.selectExample(this.props.exampleName)},render:function(){var e="example-square";this.props.exampleicon.selected&&(e+=" selected");var t={width:this.props.width,height:this.props.height};return a["default"].createElement("div",{className:e,onClick:this._handleClick,style:t},a["default"].createElement("svg",{width:"100%",height:"100%"},a["default"].createElement("path",{stroke:this.props.visColor,strokeWidth:"0.5",fill:"none",d:this._visPath})))}});e.exports=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=n(2),a=r(i),o=n(1),s=r(o),u=n(18),l=n(28),c=a["default"].createClass({displayName:"Gallery",mixins:[s["default"].connect(u.store,"examples")],render:function(){var e=this.state.examples.examples;return a["default"].createElement("div",{className:"example-gallery"},Object.keys(e).map(function(t){return a["default"].createElement(l,{exampleName:t,exampleicon:e[t]})}))}});e.exports=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=n(2),a=r(i),o=n(1),s=r(o),u=n(5),l=r(u),c=n(13),f=n(20),h=n(3),p=n(9),d=a["default"].createClass({displayName:"IconVis",mixins:[c("divWrapper"),f,s["default"].listenTo(h.store,"onVTIconChange")],propTypes:{vticon:a["default"].PropTypes.object.isRequired,currentTime:a["default"].PropTypes.number.isRequired,keyframeCircleRadius:a["default"].PropTypes.number.isRequired,playheadFill:a["default"].PropTypes.string.isRequired,interpolateParameters:a["default"].PropTypes.func.isRequired,name:a["default"].PropTypes.string.isRequired,selection:a["default"].PropTypes.object.isRequired},getDefaultProps:function(){return{height:50,width:"100%",visColor:"#FFDDAD",background:"#FAFAFA",resolution:3e3,maxFrequencyRendered:125,limitFrequencies:!0,selectionColor:"#676767",selectionOpacity:.2,selectable:!1}},onVTIconChange:function(e){var t=l["default"].scale.linear().domain([-1,1]).range([0,this.props.height]),n=this.props.scaleX;this._visPath=this.computeWaveformPath(this.props.vticon,n,t,this.props.resolution,this.props.maxFrequencyRendered,this.props.limitFrequencies)},onMouseDown:function(e){h.actions.selectVTIcon(this.props.name),this.props.selectable&&p.actions.startTimeSelectDrag(this.props.name)},render:function(){var e={height:this.props.height,width:this.props.width,background:this.props.background
},t=(l["default"].scale.linear().domain([-1,1]).range([0,this.props.height]),this.props.scaleX),n=l["default"].svg.line().x(function(e){return e[0]}).y(function(e){return e[1]}),r=n([[t(this.props.currentTime),0],[t(this.props.currentTime),this.props.height]]),i=a["default"].createElement("path",null);this.props.vticon.selected&&(i=a["default"].createElement("path",{stroke:this.props.playheadFill,strokeWidth:"2",fill:"none",d:r}));var o=this.props.selectable,s=a["default"].createElement("rect",null);if(o&&this.props.vticon.selectedTimeRange.active){var u=this.props.vticon.selectedTimeRange.time1,c=this.props.vticon.selectedTimeRange.time2;u>c&&(u=this.props.vticon.selectedTimeRange.time2,c=this.props.vticon.selectedTimeRange.time1);var f=t(u),h=0,p=t(c)-f,d=this.props.height;s=a["default"].createElement("rect",{x:f,y:h,width:p,height:d,fill:this.props.selectionColor,opacity:this.props.selectionOpacity})}return a["default"].createElement("div",{ref:"divWrapper",style:e,onMouseDown:this.onMouseDown},a["default"].createElement("svg",{height:"100%",width:"100%"},a["default"].createElement("path",{stroke:this.props.visColor,strokeWidth:"0.5",fill:"none",d:this._visPath}),i,s))}});e.exports=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=n(2),a=r(i),o=n(5),s=r(o),u=n(1),l=r(u),c=n(3),f=n(13),h=n(12),p=n(9),d=a["default"].createClass({displayName:"KeyframeEditor",mixins:[f("divWrapper"),l["default"].connect(h.store,"scales")],propTypes:{name:a["default"].PropTypes.string.isRequired,parameter:a["default"].PropTypes.string.isRequired,vticon:a["default"].PropTypes.object.isRequired,selection:a["default"].PropTypes.object.isRequired,keyframeCircleRadius:a["default"].PropTypes.number.isRequired,playheadFill:a["default"].PropTypes.string.isRequired,currentTime:a["default"].PropTypes.number.isRequired},getDefaultProps:function(){return{height:190,width:"100%",circleColor:"#FF8400",selectedCircleColor:"#B05B00",selectionColor:"#676767",selectionOpacity:.2,doubleClickTime:500,axisTickLength:5,axisNameWidth:18,axisTickLeft:30,selectable:!0,visualization:!0,visualizeTicks:!0,modifiable:!0,topBuffer:20}},componentDidMount:function(){var e=[this.props.height-this.props.keyframeCircleRadius,this.props.keyframeCircleRadius+this.props.topBuffer];this._lastMouseDownTime=0,h.actions.setTrackrange(this.props.name,this.props.parameter,e),h.actions.setTopOffset(this.props.name,this.props.parameter,this.refs.divWrapper.getDOMNode().offsetTop)},render:function(){var e=this.props.keyframeCircleRadius,t=this.props.circleColor,n=this.props.selectedCircleColor,r=this.props.vticon.parameters[this.props.parameter].data,i=this.props.vticon.parameters[this.props.parameter].valueScale,o=this.state.scales[this.props.name].scaleParameter[this.props.parameter],u=this.props.scaleX,l=this.props.height,c=s["default"].svg.line().x(function(e){return u(e.t)}).y(function(e){return o(e.value)}),f={height:this.props.height,width:this.props.width,background:this.props.background},h=r[0].value,p=r[r.length-1].value,d=c([{t:0,value:i[0]}].concat([{t:0,value:h}]).concat(r).concat([{t:this.props.vticon.duration,value:p}]).concat([{t:this.props.vticon.duration,value:i[0]}])),m=s["default"].svg.line().x(function(e){return e[0]}).y(function(e){return e[1]}),g=m([[u(this.props.currentTime),0],[u(this.props.currentTime),l]]),v=this._onMouseDownKeyframe,y=this.props.axisTickLength,b=this.props.axisTickLeft,w=this.props.selectable,x=a["default"].createElement("rect",null);if(w&&this.props.vticon.selected&&this.props.selection.active){var S=this.props.selection.time1,C=this.props.selection.time2;S>C&&(S=this.props.selection.time2,C=this.props.selection.time1);var _=this.props.selection.parameters[this.props.parameter].value1,k=this.props.selection.parameters[this.props.parameter].value2;k>_&&(_=this.props.selection.parameters[this.props.parameter].value2,k=this.props.selection.parameters[this.props.parameter].value1);var T=u(S),M=o(_),A=u(C)-T,l=o(k)-M;x=a["default"].createElement("rect",{x:T,y:M,width:A,height:l,fill:this.props.selectionColor,opacity:this.props.selectionOpacity})}var E=a["default"].createElement("rect",null);this.props.vticon.selected&&(E=a["default"].createElement("path",{stroke:this.props.playheadFill,strokeWidth:"2",fill:"none",d:g}));var P=this.props.visualization,N=a["default"].createElement("path",null);P&&(N=a["default"].createElement("path",{d:d,fill:"#FFDDAD",stroke:"#FFDDAD",onMouseDown:this._onMouseDown}));var O=a["default"].createElement("text",null),R=a["default"].createElement("rect",null);return this.props.visualizeTicks&&(R=a["default"].createElement("text",{x:"0",y:"0",transform:"translate("+this.props.axisNameWidth+","+this.props.height/2+") rotate(-90)"},this.props.parameter.charAt(0).toUpperCase()+this.props.parameter.slice(1)),R=o.ticks(5).map(function(e,t){var n={stroke:"black",strokeWidth:.5};n.y1=o(e),n.y2=o(e),n.x1=b,n.x2=b+y;var r=a["default"].DOM.line(n),i={fontSize:10,className:"unselectable"};i.y=o(e)+3,i.x=b+y+4;var s=a["default"].DOM.text(i,e);return a["default"].createElement("g",{key:t},r,s)}),O=a["default"].createElement("text",{x:"0",y:"0",transform:"translate("+this.props.axisNameWidth+","+this.props.height/2+") rotate(-90)"},this.props.parameter.charAt(0).toUpperCase()+this.props.parameter.slice(1))),a["default"].createElement("div",{ref:"divWrapper",style:f},a["default"].createElement("svg",{width:"100%",height:"100%",onMouseDown:this._onMouseDown},N,O,R,E,r.map(function(r){var i=a["default"].createElement("rect",null);return P&&w&&(i=a["default"].createElement("circle",{cx:u(r.t),cy:o(r.value),r:e,onMouseDown:v,"data-id":r.id,"data-selected":r.selected,fill:r.selected?n:t})),i}),x))},_onMouseDown:function(e){var t=Date.now();if(c.actions.selectVTIcon(this.props.name),this.props.modifiable&&t-this._lastMouseDownTime<=this.props.doubleClickTime){var n=(this.props.keyframeCircleRadius,this.props.vticon.parameters[this.props.parameter].valueScale,this.state.scales[this.props.name].scaleParameter[this.props.parameter]),r=e.clientX-this.state.offsetLeft,i=e.clientY-this.state.offsetTop;c.actions.newKeyframe(this.props.parameter,this.props.scaleX.invert(r),n.invert(i),e.shiftKey,name=this.props.name),p.actions.startKeyframeDrag(this.props.name,e.shiftKey)}else this.props.selectable?p.actions.startSelectDrag(this.props.name,e.shiftKey):c.actions.unselectKeyframes();return this._lastMouseDownTime=t,!1},_onMouseDownKeyframe:function(e){c.actions.selectVTIcon(this.props.name);var t=parseInt(e.target.getAttribute("data-id")),n="true"===e.target.getAttribute("data-selected");return this.props.selectable&&(n||(e.shiftKey?c.actions.addToggleSelectedKeyframe(t,name=this.props.name):c.actions.selectKeyframe(t,name=this.props.name)),this.props.modifiable&&p.actions.startKeyframeDrag(this.props.name)),!1}});e.exports=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=n(2),a=r(i),o=n(5),s=(r(o),n(9)),u=n(13),l=a["default"].createClass({displayName:"PlayHead",mixins:[u("divWrapper")],propTypes:{name:a["default"].PropTypes.string.isRequired,duration:a["default"].PropTypes.number.isRequired,currentTime:a["default"].PropTypes.number.isRequired,playheadFill:a["default"].PropTypes.string.isRequired,displayPlayhead:a["default"].PropTypes.bool.isRequired},getDefaultProps:function(){return{height:20,width:"100%",playheadWidth:20,background:"#EEEEEE",axisTickLength:7}},_handleMouseDown:function(e){var t=e.clientX-this.state.offsetLeft;s.actions.startPlayheadDrag(this.props.name,this.props.scaleX.invert(t))},render:function(){var e={height:this.props.height,width:this.props.width,background:this.props.background},t=this.props.scaleX,n=this.props.axisTickLength,r=this.props.scaleX(this.props.currentTime),i=this.props.playheadWidth,o=this.props.height,s=r-i/2+",0 "+(r+i/2)+",0 "+r+","+o,u=a["default"].createElement("polygon",null);return this.props.displayPlayhead&&(u=a["default"].createElement("polygon",{points:s,fill:this.props.playheadFill})),a["default"].createElement("div",{onMouseDown:this._handleMouseDown,ref:"divWrapper",style:e},a["default"].createElement("svg",{width:"100%",height:"100%"},t.ticks().map(function(e,r){var i={stroke:"black",strokeWidth:.5};i.x1=t(e),i.x2=t(e),i.y1=0,i.y2=0+n;var o=a["default"].DOM.line(i),s={fontSize:10,textAlign:"center",className:"unselectable"};s.x=t(e)-2.5*e.toString().length,s.y=n+10;var u=a["default"].DOM.text(s,e);return a["default"].createElement("g",{key:r},o,u)}),u))}});e.exports=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=n(2),a=r(i);n(38);var o=function(e,t){var n=e,r=0,i=1;return 300>t?(r=(t-50)/250,i=4*r+1):(r=(t-300)/200,i=3*(1-r)+2),n=e/i},s=a["default"].createClass({displayName:"SoundGen",propTypes:{frequency:a["default"].PropTypes.number.isRequired,amplitude:a["default"].PropTypes.number.isRequired,mute:a["default"].PropTypes.bool},getInitialState:function(){return{audiolet:null,sine:null,mult:null}},getDefaultProps:function(){return{perceptuallyScaleOutput:!0}},componentWillMount:function(){var e=new Audiolet,t=new Sine(e,this.props.frequency),n=new Multiply(e,this.props.amplitude);t.connect(n),n.connect(e.output),this.setState({audiolet:e,sine:t,mult:n})},componentWillUnmount:function(){},render:function(){if(this.state.sine.frequency.setValue(this.props.frequency),this.props.mute)this.state.mult.value.setValue(0);else{var e=this.props.amplitude;this.props.perceptuallyScaleOutput&&(e=o(e,this.props.frequency)),this.state.mult.value.setValue(e)}return a["default"].createElement("div",{id:"soundgen"})}});e.exports=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=n(1),a=r(i),o=n(3),s=n(8),u=n(6),l=a["default"].createActions(["copy","copyTimeRange","cut","paste"]),c=a["default"].createStore({listenables:[l],init:function(){this._clipboard={},this._lowest_time=0,this._vticons={},this.listenTo(o.store,this._VTIconUpdate),this._currentTime=0,this.listenTo(s.store,this._playbackUpdate)},_VTIconUpdate:function(e){this._vticons=e},_playbackUpdate:function(e){this._currentTime=e.currentTime},onCopy:function(){this._clipboard={};for(var e in this._vticons)if(this._vticons[e].selected){this._lowest_time=this._vticons[e].duration,this._highest_time=0;for(var t in this._vticons[e].parameters){for(var n=[],r=0;r<this._vticons[e].parameters[t].data.length;r++){var i=this._vticons[e].parameters[t].data[r];i.selected&&(this._lowest_time=Math.min(this._lowest_time,i.t),this._highest_time=Math.max(this._highest_time,i.t),n.push({t:i.t,value:i.value,selected:!0}))}n.length>0&&(u.actions.log("COPY_"+e+"_"+n.length+"_"+this._lowest_time+"_"+this._highest_time),this._clipboard[t]=n)}this.trigger(this._clipboard)}},onCopyTimeRange:function(){var e=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];this._clipboard={};for(var t in this._vticons)if(this._vticons[t].selected&&this._vticons[t].selectedTimeRange.active){this._lowest_time=Math.min(this._vticons[t].selectedTimeRange.time1,this._vticons[t].selectedTimeRange.time2),this._highest_time=Math.max(this._vticons[t].selectedTimeRange.time1,this._vticons[t].selectedTimeRange.time2);for(var n in this._vticons[t].parameters){for(var r=[],i=0;i<this._vticons[t].parameters[n].data.length;i++){var a=this._vticons[t].parameters[n].data[i];a.t>=this._lowest_time&&a.t<=this._highest_time&&r.push({t:a.t,value:a.value,selected:!0})}e&&(r.push({t:this._lowest_time,value:this.interpolateParameter(n,this._lowest_time,this._vticons[t]),selected:!0}),r.push({t:this._highest_time,value:this.interpolateParameter(n,this._highest_time,this._vticons[t]),selected:!0})),r.length>0&&(u.actions.log("COPYTIME_"+t+"_"+r.length+"_"+this._lowest_time+"_"+this._highest_time),this._clipboard[n]=r)}this.trigger(this._clipboard)}},onCut:function(){console.log("Error: Cut is not implemented!")},onPaste:function(){var e=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],t={},n=0;for(var r in this._clipboard){t[r]=[];for(var i=0;i<this._clipboard[r].length;i++){var a=this._clipboard[r][i];t[r].push({t:a.t-this._lowest_time+this._currentTime,value:a.value,selected:!0}),n+=1}}u.actions.log("PASTE_"+n),o.actions.newMultipleKeyframes(t,e=e)},interpolateParameter:function(e,t,n){for(var r=n.parameters[e].data,i=null,a=null,o=null,s=0;s<r.length;s++)r[s].t==t?o=r[s].value:r[s].t<t?(null==i||i.t<=r[s].t)&&(i=r[s]):(null==a||a.t>=r[s].t)&&(a=r[s]);if(null==o)if(null==a&&null==i){if(null==o)throw"No keyframes found in parameter "+e}else if(null==a)o=i.value;else if(null==i)o=a.value;else if(i.t==a.t)o=i.value;else{var u=a.t-i.t,l=(t-i.t)/u,c=a.value-i.value;o=l*c+i.value}return o}});e.exports={actions:l,store:c}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=n(1),a=r(i),o=n(3),s=n(6),u=a["default"].createActions(["save"]),l=a["default"].createStore({listenables:[u],onSave:function(){var e=JSON.stringify(o.store.getInitialState().main,null,2);s.actions.log("SAVE_"+e)}});e.exports={actions:u,store:l}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=n(2),a=r(i),o=n(1),s=r(o),u=n(5),l=(r(u),n(27)),c=n(26),f=n(33),h=n(32),p=n(30),d=n(25),m=n(31),g=n(29),v=n(8),y=n(3),b=n(9),w=n(12),x=n(19),S=n(34),C=n(11),_=n(10),k=a["default"].createClass({displayName:"VTEditor",mixins:[s["default"].connect(v.store,"playback"),s["default"].connect(y.store,"vticons"),s["default"].connect(w.store,"scales"),s["default"].connect(x.store,"selection"),s["default"].connect(C.store,"animation"),s["default"].connect(_.store,"study")],getInitialState:function(){return{actualWidth:10,actualHeight:10}},interpolateParameter:function(e,t,n){for(var r=this.state.vticons[n].parameters[e],i=r.data,a=null,o=null,s=null,u=0;u<i.length;u++)i[u].t==t?s=i[u].value:i[u].t<t?(null==a||a.t<=i[u].t)&&(a=i[u]):(null==o||o.t>=i[u].t)&&(o=i[u]);if(null==s)if(null==o&&null==a){if(null==s)throw"No keyframes found in parameter "+e}else if(null==o)s=a.value;else if(null==a)s=o.value;else if(a.t==o.t)s=a.value;else{var l=o.t-a.t,c=(t-a.t)/l,f=o.value-a.value;s=c*f+a.value}return s},interpolateParameters:function(e,t){var n=this.interpolateParameter;return Object.keys(this.state.vticons[t].parameters).reduce(function(r,i){return r[i]=n(i,e,t),r},{})},getDefaultProps:function(){return{keyframeCircleRadius:5,playheadFill:"red",timelineLeftOffset:60,timelineRightOffset:20,examplesModifiable:!1,playbackAtEndOfVTIcon:!1}},_handleMouseMove:function(e){b.actions.handleMouseMove(e.clientX,e.clientY)},_handleMouseUp:function(e){b.actions.stopDrag()},_handleKeyboard:function(e){var t=e.keyCode||e.which;switch(t){case 32:v.actions.togglePlaying();break;case 8:case 46:(this.props.examplesModifiable||!this.state.vticons.example.selected)&&y.actions.deleteSelectedKeyframes();break;case 37:v.actions.stepBackward();break;case 39:v.actions.stepForward();break;case 65:(e.ctrlKey||e.metaKey)&&(this.state.vticons.example.selected&&this.state.study.currentMode==this.state.study.modes.LOWVIS_HIGHSELECT?y.actions.selectAllTimeRange():y.actions.selectAllKeyframes());break;case 67:(e.ctrlKey||e.metaKey)&&(this.state.vticons.example.selected&&this.state.study.currentMode==this.state.study.modes.LOWVIS_HIGHSELECT?S.actions.copyTimeRange():S.actions.copy());break;case 86:(e.ctrlKey||e.metaKey)&&(this.props.examplesModifiable||!this.state.vticons.example.selected)&&S.actions.paste();break;case 88:(e.ctrlKey||e.metaKey)&&(this.props.examplesModifiable||!this.state.vticons.example.selected)&&(S.actions.copy(),y.actions.deleteSelectedKeyframes());case 82:(e.ctrlKey||e.metaKey)&&(y.actions.redo(),e.preventDefault());break;case 85:case 90:(e.ctrlKey||e.metaKey)&&(e.shiftKey?y.actions.redo():y.actions.undo());case 27:y.actions.unselectKeyframes()}return!1},render:function(){var e=this,t=this.interpolateParameter("frequency",this.state.playback.currentTime,this.state.playback.playingIcon),n=this.interpolateParameter("amplitude",this.state.playback.currentTime,this.state.playback.playingIcon),r=0;this.props.playbackAtEndOfVTIcon&&(r=n);var i=this.state.scales.main.scaleTimeline,o=this.state.scales.example.scaleTimeline,s=this.state.vticons.main,u=this.state.vticons.example,v={width:"44%",marginLeft:"auto",marginRight:"auto",display:"block",borderStyle:"solid",borderWidth:0},y={width:"44%",marginLeft:"auto",marginRight:"auto",display:"block",borderStyle:"solid",borderWidth:0},b=a["default"].createElement("div",null),w=a["default"].createElement("div",null);if(s.selected?(v.borderColor="black",y.borderColor="white",this.state.playback.currentTime<this.state.vticons.main.duration&&(r=n)):(v.borderColor="white",y.borderColor="black",this.state.playback.currentTime<this.state.vticons.example.duration&&(r=n)),this.state.study.currentMode!=this.state.study.modes.NO_EXAMPLES){y["float"]="left",v["float"]="left";var x=this.state.study.currentMode==this.state.study.modes.LOWVIS_HIGHSELECT,S=this.state.study.currentMode==this.state.study.modes.HIGHVIS_HIGHSELECT,C=this.state.study.currentMode==this.state.study.modes.HIGHVIS_HIGHSELECT||this.state.study.currentMode==this.state.study.modes.HIGHVIS_LOWSELECT,_=S,k=this.props.examplesModifiable;b=a["default"].createElement("div",{name:"example",id:"exampleeditor",ref:"exampleEditorRef",style:y},a["default"].createElement(c,{name:"example",playing:this.state.playback.playing,mute:this.state.playback.mute}),a["default"].createElement(h,{name:"example",displayPlayhead:this.state.vticons.example.selected,scaleX:o,currentTime:this.state.playback.currentTime,duration:u.duration,keyframeCircleRadius:this.props.keyframeCircleRadius,playheadFill:this.props.playheadFill}),a["default"].createElement(p,{name:"example",scaleX:o,vticon:u,currentTime:this.state.playback.currentTime,keyframeCircleRadius:this.props.keyframeCircleRadius,playheadFill:this.props.playheadFill,interpolateParameters:this.interpolateParameters,interpolateParameter:this.interpolateParameter,selection:this.state.selection,selectable:x}),Object.keys(u.parameters).map(function(t){return a["default"].createElement(m,{name:"example",scaleX:o,currentTime:e.state.playback.currentTime,parameter:t,vticon:u,keyframeCircleRadius:e.props.keyframeCircleRadius,playheadFill:e.props.playheadFill,selection:e.state.selection,selectable:S,visualization:C,visualizeTicks:_,modifiable:k})})),w=a["default"].createElement(g,null)}return a["default"].createElement("div",{id:"app",ref:"appRef"},a["default"].createElement(l,null),a["default"].createElement(f,{frequency:t,amplitude:r,mute:this.state.playback.mute}),a["default"].createElement(d,{name:"main",animation:this.state.animation.animation,animationParameters:this.state.animation.animationParameters}),a["default"].createElement("div",{name:"main",id:"maineditor",ref:"mainEditorRef",style:v},a["default"].createElement(c,{name:"main",playing:this.state.playback.playing,mute:this.state.playback.mute}),a["default"].createElement(h,{name:"main",displayPlayhead:this.state.vticons.main.selected,scaleX:i,currentTime:this.state.playback.currentTime,duration:s.duration,keyframeCircleRadius:this.props.keyframeCircleRadius,playheadFill:this.props.playheadFill}),a["default"].createElement(p,{name:"main",scaleX:i,vticon:s,currentTime:this.state.playback.currentTime,keyframeCircleRadius:this.props.keyframeCircleRadius,playheadFill:this.props.playheadFill,interpolateParameters:this.interpolateParameters,interpolateParameter:this.interpolateParameter,selection:this.state.selection}),Object.keys(s.parameters).map(function(t){return a["default"].createElement(m,{name:"main",scaleX:i,currentTime:e.state.playback.currentTime,parameter:t,vticon:s,keyframeCircleRadius:e.props.keyframeCircleRadius,playheadFill:e.props.playheadFill,selection:e.state.selection})})),b,w)},componentDidMount:function(){window.addEventListener("resize",this.handleResize),window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp),window.addEventListener("keydown",this._handleKeyboard),this._updateScales()},handleResize:function(e){this._updateScales()},_updateScales:function(){for(var e in this.state.scales){w.actions.setTimelineRange(e,this._calculateTimelineRange(e));var t=this.refs[e+"EditorRef"].getDOMNode().offsetLeft;w.actions.setLeftOffset(e,t)}},_calculateTimelineRange:function(e){var t=this.refs[e+"EditorRef"].getDOMNode().clientWidth;return[this.props.timelineLeftOffset+this.props.keyframeCircleRadius,t-this.props.keyframeCircleRadius-this.props.timelineRightOffset]}});e.exports=k},function(e,t){"use strict";e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var a=this[i][0];"number"==typeof a&&(r[a]=!0)}for(i=0;i<t.length;i++){var o=t[i];"number"==typeof o[0]&&r[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),e.push(o))}},e}},function(e,t,n){"use strict";(function(){n(51)(n(52))}).call(window)},function(e,t){"use strict";function n(){l=!1,o.length?u=o.concat(u):c=-1,u.length&&r()}function r(){if(!l){var e=setTimeout(n);l=!0;for(var t=u.length;t;){for(o=u,u=[];++c<t;)o&&o[c].run();c=-1,t=u.length}o=null,l=!1,clearTimeout(e)}}function i(e,t){this.fun=e,this.array=t}function a(){}var o,s=e.exports={},u=[],l=!1,c=-1;s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new i(e,t)),1!==u.length||l||setTimeout(r,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=a,s.addListener=a,s.once=a,s.off=a,s.removeListener=a,s.removeAllListeners=a,s.emit=a,s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(e,t,n){"use strict";function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(){}var a="function"!=typeof Object.create?"~":!1;i.prototype._events=void 0,i.prototype.listeners=function(e,t){var n=a?a+e:e,r=this._events&&this._events[n];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=new Array(o);o>i;i++)s[i]=r[i].fn;return s},i.prototype.emit=function(e,t,n,r,i,o){var s=a?a+e:e;if(!this._events||!this._events[s])return!1;var u,l,c=this._events[s],f=arguments.length;if("function"==typeof c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),f){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,r),!0;case 5:return c.fn.call(c.context,t,n,r,i),!0;case 6:return c.fn.call(c.context,t,n,r,i,o),!0}for(l=1,u=new Array(f-1);f>l;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var h,p=c.length;for(l=0;p>l;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),f){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,n);break;default:if(!u)for(h=1,u=new Array(f-1);f>h;h++)u[h-1]=arguments[h];c[l].fn.apply(c[l].context,u)}}return!0},i.prototype.on=function(e,t,n){var i=new r(t,n||this),o=a?a+e:e;return this._events||(this._events=a?{}:Object.create(null)),this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],i]:this._events[o].push(i):this._events[o]=i,this},i.prototype.once=function(e,t,n){var i=new r(t,n||this,!0),o=a?a+e:e;return this._events||(this._events=a?{}:Object.create(null)),this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],i]:this._events[o].push(i):this._events[o]=i,this},i.prototype.removeListener=function(e,t,n,r){var i=a?a+e:e;if(!this._events||!this._events[i])return this;var o=this._events[i],s=[];if(t)if(o.fn)(o.fn!==t||r&&!o.once||n&&o.context!==n)&&s.push(o);else for(var u=0,l=o.length;l>u;u++)(o[u].fn!==t||r&&!o[u].once||n&&o[u].context!==n)&&s.push(o[u]);return s.length?this._events[i]=1===s.length?s[0]:s:delete this._events[i],this},i.prototype.removeAllListeners=function(e){return this._events?(e?delete this._events[a?a+e:e]:this._events=a?{}:Object.create(null),this):this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.prefixed=a,e.exports=i},function(e,t){"use strict";e.exports=function(e,t){for(var n in t)if(Object.getOwnPropertyDescriptor&&Object.defineProperty){var r=Object.getOwnPropertyDescriptor(t,n);if(!r.value||"function"!=typeof r.value||!t.hasOwnProperty(n))continue;e[n]=t[n].bind(e)}else{var i=t[n];if("function"!=typeof i||!t.hasOwnProperty(n))continue;e[n]=i.bind(e)}return e}},function(e,t,n){"use strict";var r=n(4),i=n(21),a=n(16),o=n(15),s={preEmit:1,shouldEmit:1},u=function l(e){e=e||{},r.isObject(e)||(e={actionName:e});for(var t in i)if(!s[t]&&a[t])throw new Error("Cannot override API method "+t+" in Reflux.ActionMethods. Use another method name or override it on Reflux.PublisherMethods instead.");for(var n in e)if(!s[n]&&a[n])throw new Error("Cannot override API method "+n+" in action creation. Use another method name or override it on Reflux.PublisherMethods instead.");e.children=e.children||[],e.asyncResult&&(e.children=e.children.concat(["completed","failed"]));for(var u=0,c={};u<e.children.length;u++){var f=e.children[u];c[f]=l(f)}var h=r.extend({eventLabel:"action",emitter:new r.EventEmitter,_isAction:!0},a,i,e),p=function d(){var e=d.sync?"trigger":r.environment.hasPromise?"triggerPromise":"triggerAsync";return d[e].apply(d,arguments)};return r.extend(p,c,h),o.createdActions.push(p),p};e.exports=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={version:{"reflux-core":"0.2.1"}};r.ActionMethods=n(21),r.ListenerMethods=n(7),r.PublisherMethods=n(16),r.StoreMethods=n(22),r.createAction=n(42),r.createStore=n(23);var i=n(24).staticJoinCreator;r.joinTrailing=r.all=i("last"),r.joinLeading=i("first"),r.joinStrict=i("strict"),r.joinConcat=i("all");var a=r.utils=n(4);r.EventEmitter=a.EventEmitter,r.Promise=a.Promise,r.createActions=function(){var e=function(e,t){Object.keys(e).forEach(function(n){var i=e[n];t[n]=r.createAction(i)})};return function(t){var n={};return t instanceof Array?t.forEach(function(t){a.isObject(t)?e(t,n):n[t]=r.createAction(t)}):e(t,n),n}}(),r.setEventEmitter=function(e){r.EventEmitter=a.EventEmitter=e},r.setPromise=function(e){r.Promise=a.Promise=e},r.setPromiseFactory=function(e){a.createPromise=e},r.nextTick=function(e){a.nextTick=e},r.use=function(e){e(r)},r.__keep=n(15),Function.prototype.bind||console.error("Function.prototype.bind not available. ES5 shim required. https://github.com/spoike/refluxjs#es5"),t["default"]=r,e.exports=t["default"]},function(e,t,n){"use strict";var r=n(4);e.exports=function(e){var t={init:[],preEmit:[],shouldEmit:[]},n=function i(e){var n={};return e.mixins&&e.mixins.forEach(function(e){r.extend(n,i(e))}),r.extend(n,e),Object.keys(t).forEach(function(n){e.hasOwnProperty(n)&&t[n].push(e[n])}),n}(e);return t.init.length>1&&(n.init=function(){var e=arguments;t.init.forEach(function(t){t.apply(this,e)},this)}),t.preEmit.length>1&&(n.preEmit=function(){return t.preEmit.reduce(function(e,t){var n=t.apply(this,e);return void 0===n?e:[n]}.bind(this),arguments)}),t.shouldEmit.length>1&&(n.shouldEmit=function(){var e=arguments;return!t.shouldEmit.some(function(t){return!t.apply(this,e)},this)}),Object.keys(t).forEach(function(e){1===t[e].length&&(n[e]=t[e][0])}),n}},function(e,t,n){"use strict";var r=n(7),i=n(17),a=n(4);e.exports=function(e,t){return{getInitialState:function(){return a.isFunction(e.getInitialState)?void 0===t?e.getInitialState():a.object([t],[e.getInitialState()]):{}},componentDidMount:function(){a.extend(this,r);var n=this,i=void 0===t?this.setState:function(e){("undefined"==typeof n.isMounted||n.isMounted()===!0)&&n.setState(a.object([t],[e]))};this.listenTo(e,i)},componentWillUnmount:i.componentWillUnmount}}},function(e,t,n){"use strict";var r=n(7),i=n(17),a=n(4);e.exports=function(e,t,n){return n=a.isFunction(t)?t:n,{getInitialState:function(){if(a.isFunction(e.getInitialState)){if(a.isFunction(t))return n.call(this,e.getInitialState());var r=n.call(this,e.getInitialState());return"undefined"!=typeof r?a.object([t],[r]):{}}return{}},componentDidMount:function(){a.extend(this,r);var i=this,o=function(e){if(a.isFunction(t))i.setState(n.call(i,e));else{var r=n.call(i,e);i.setState(a.object([t],[r]))}};this.listenTo(e,o)},componentWillUnmount:i.componentWillUnmount}}},function(e,t,n){"use strict";var r=n(7);e.exports=function(e,t,n){return{componentDidMount:function(){for(var i in r)if(this[i]!==r[i]){if(this[i])throw"Can't have other property '"+i+"' when using Reflux.listenTo!";this[i]=r[i]}this.listenTo(e,t,n)},componentWillUnmount:r.stopListeningToAll}}},function(e,t,n){"use strict";var r=n(7);e.exports=function(e){return{componentDidMount:function(){for(var t in r)if(this[t]!==r[t]){if(this[t])throw"Can't have other property '"+t+"' when using Reflux.listenToMany!";this[t]=r[t]}this.listenToMany(e)},componentWillUnmount:r.stopListeningToAll}}},function(e,t,n){t=e.exports=n(37)(),t.push([e.id,"body{margin:0;font-family:Helvetica Nueue,sans-serif}*{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.controlbutton{padding:5px}.mute{font-size:18pt}.playhead{height:20px;background:blue}.iconvis{height:20px;background:purple}a:link,a:visited{text-decoration:none;color:#000}a:active,a:hover{text-decoration:underline;color:#000}.header{width:100%;text-align:center;font-size:3pc;box-shadow:0 2px 10px #bababa;background:#ffc170;background:-webkit-gradient(linear,left top,left bottom,color-stop(0%,#ffc170),color-stop(100%,#ffcc8e));background:-webkit-linear-gradient(top,#ffc170 0%,#ffcc8e 100%);background:linear-gradient(to bottom,#ffc170 0%,#ffcc8e 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffc170',endColorstr='#ffcc8e',GradientType=0)}.example-square{float:left;border:solid;border-width:1px;margin:10px}.example-square.selected{border-width:3px}.example-galley{width:10%;height:100%;float:left}.animationoptions{margin-right:auto;margin-left:auto}.unselectable,text{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}",""])},function(module,exports){/*! @license Firebase v2.3.2
	    License: https://www.firebase.com/terms/terms-of-service.html */
!function(){function n(e){return void 0!==e}function ba(){}function ca(e){e.ub=function(){return e.uf?e.uf:e.uf=new e}}function da(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof e.call)return"object";return t}function ea(e){return"array"==da(e)}function fa(e){var t=da(e);return"array"==t||"object"==t&&"number"==typeof e.length}function p(e){return"string"==typeof e}function ga(e){return"number"==typeof e}function ha(e){return"function"==da(e)}function ia(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function ja(e,t,n){return e.call.apply(e.bind,arguments)}function ka(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function q(e,t,n){return q=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ja:ka,q.apply(null,arguments)}function ma(e,t){function n(){}n.prototype=t.prototype,e.bh=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Yg=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function r(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function na(e,t){var n,r={};for(n in e)r[n]=t.call(void 0,e[n],n,e);return r}function oa(e,t){for(var n in e)if(!t.call(void 0,e[n],n,e))return!1;return!0}function pa(e){var t,n=0;for(t in e)n++;return n}function qa(e){for(var t in e)return t}function ra(e){var t,n=[],r=0;for(t in e)n[r++]=e[t];return n}function sa(e){var t,n=[],r=0;for(t in e)n[r++]=t;return n}function ta(e,t){for(var n in e)if(e[n]==t)return!0;return!1}function ua(e,t,n){for(var r in e)if(t.call(n,e[r],r,e))return r}function va(e,t){var n=ua(e,t,void 0);return n&&e[n]}function wa(e){for(var t in e)return!1;return!0}function xa(e){var t,n={};for(t in e)n[t]=e[t];return n}function za(e,t){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)e[n]=r[n];for(var a=0;a<ya.length;a++)n=ya[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Aa(a){if(a=String(a),/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a)}function Ba(){this.Sd=void 0}function Ca(e,t,n){switch(typeof t){case"string":Da(t,n);break;case"number":n.push(isFinite(t)&&!isNaN(t)?t:"null");break;case"boolean":n.push(t);break;case"undefined":n.push("null");break;case"object":if(null==t){n.push("null");break}if(ea(t)){var r=t.length;n.push("[");for(var i="",a=0;r>a;a++)n.push(i),i=t[a],Ca(e,e.Sd?e.Sd.call(t,String(a),i):i,n),i=",";n.push("]");break}n.push("{"),r="";for(a in t)Object.prototype.hasOwnProperty.call(t,a)&&(i=t[a],"function"!=typeof i&&(n.push(r),Da(a,n),n.push(":"),Ca(e,e.Sd?e.Sd.call(t,a,i):i,n),r=","));n.push("}");break;case"function":break;default:throw Error("Unknown type: "+typeof t)}}function Da(e,t){t.push('"',e.replace(Fa,function(e){if(e in Ea)return Ea[e];var t=e.charCodeAt(0),n="\\u";return 16>t?n+="000":256>t?n+="00":4096>t&&(n+="0"),Ea[e]=n+t.toString(16)}),'"')}function Ga(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^la()).toString(36)}function Ka(){this.Va=-1}function La(){this.Va=-1,this.Va=64,this.N=[],this.me=[],this.Wf=[],this.Ld=[],this.Ld[0]=128;for(var e=1;e<this.Va;++e)this.Ld[e]=0;this.de=this.ac=0,this.reset()}function Ma(e,t,n){n||(n=0);var r=e.Wf;if(p(t))for(var i=0;16>i;i++)r[i]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(i=0;16>i;i++)r[i]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(i=16;80>i;i++){var a=r[i-3]^r[i-8]^r[i-14]^r[i-16];r[i]=4294967295&(a<<1|a>>>31)}t=e.N[0],n=e.N[1];for(var o,s=e.N[2],u=e.N[3],l=e.N[4],i=0;80>i;i++)40>i?20>i?(a=u^n&(s^u),o=1518500249):(a=n^s^u,o=1859775393):60>i?(a=n&s|u&(n|s),o=2400959708):(a=n^s^u,o=3395469782),a=(t<<5|t>>>27)+a+l+o+r[i]&4294967295,l=u,u=s,s=4294967295&(n<<30|n>>>2),n=t,t=a;e.N[0]=e.N[0]+t&4294967295,e.N[1]=e.N[1]+n&4294967295,e.N[2]=e.N[2]+s&4294967295,e.N[3]=e.N[3]+u&4294967295,e.N[4]=e.N[4]+l&4294967295}function Ta(e,t){var n=Ua(e,t,void 0);return 0>n?null:p(e)?e.charAt(n):e[n]}function Ua(e,t,n){for(var r=e.length,i=p(e)?e.split(""):e,a=0;r>a;a++)if(a in i&&t.call(n,i[a],a,e))return a;return-1}function Va(e,t){var n=Na(e,t);n>=0&&u.splice.call(e,n,1)}function Wa(e,t,n){return 2>=arguments.length?u.slice.call(e,t):u.slice.call(e,t,n)}function Xa(e,t){e.sort(t||Ya)}function Ya(e,t){return e>t?1:t>e?-1:0}function fb(e,t){if(!fa(e))throw Error("encodeByteArray takes an array as a parameter");gb();for(var n=t?db:cb,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=a>>2,a=(3&a)<<4|s>>4,s=(15&s)<<2|l>>6,l=63&l;u||(l=64,o||(s=64)),r.push(n[c],n[a],n[s],n[l])}return r.join("")}function gb(){if(!cb){cb={},db={},eb={};for(var e=0;65>e;e++)cb[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e),db[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(e),eb[db[e]]=e,e>=62&&(eb["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e)]=e)}}function v(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function w(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function ib(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function jb(e){var t={};return ib(e,function(e,n){t[e]=n}),t}function kb(e){var t=[];return ib(e,function(e,n){ea(n)?Oa(n,function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}),t.length?"&"+t.join("&"):""}function lb(e){var t={};return e=e.replace(/^\?/,"").split("&"),Oa(e,function(e){e&&(e=e.split("="),t[e[0]]=e[1])}),t}function x(e,t,n,r){var i;if(t>r?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function y(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return e=e+" failed: "+(r+" argument ")}function A(e,t,r,i){if((!i||n(r))&&!ha(r))throw Error(y(e,t,i)+"must be a valid function.")}function mb(e,t,r){if(n(r)&&(!ia(r)||null===r))throw Error(y(e,t,!0)+"must be a valid context object.")}function nb(e){return"undefined"!=typeof JSON&&n(JSON.parse)?JSON.parse(e):Aa(e)}function B(e){if("undefined"!=typeof JSON&&n(JSON.stringify))e=JSON.stringify(e);else{var t=[];Ca(new Ba,e,t),e=t.join("")}return e}function ob(){this.Wd=C}function pb(){}function rb(e,t,n){this.Tf=e,this.Ka=t,this.Kd=n}function vb(){this.tb=[]}function wb(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.Zb();null===n||a.ca(n.Zb())||(e.tb.push(n),n=null),null===n&&(n=new xb(a)),n.add(i)}n&&e.tb.push(n)}function yb(e,t,n){wb(e,n),zb(e,function(e){return e.ca(t)})}function Ab(e,t,n){wb(e,n),zb(e,function(e){return e.contains(t)||t.contains(e)})}function zb(e,t){for(var n=!0,r=0;r<e.tb.length;r++){var i=e.tb[r];if(i)if(i=i.Zb(),t(i)){for(var i=e.tb[r],a=0;a<i.vd.length;a++){var o=i.vd[a];if(null!==o){i.vd[a]=null;var s=o.Vb();Bb&&Cb("event: "+o.toString()),Db(s)}}e.tb[r]=null}else n=!1}n&&(e.tb=[])}function xb(e){this.ra=e,this.vd=[]}function D(e,t,n,r){this.type=e,this.Ja=t,this.Wa=n,this.Ke=r,this.Qd=void 0}function Eb(e){return new D(Fb,e)}function Gb(e,t,n,r){this.ue=t,this.Zd=n,this.Qd=r,this.ud=e}function Hb(e,t,n){this.ue=e,this.error=t,this.path=n}function tb(e,t,n){this.A=e,this.ea=t,this.Ub=n}function Ib(e){return e.ea}function Jb(e){return e.Ub}function Kb(e,t){return t.e()?e.ea&&!e.Ub:sb(e,E(t))}function sb(e,t){return e.ea&&!e.Ub||e.A.Da(t)}function Lb(e){this.gg=e,this.Dd=null}function Mb(e,t){this.Of={},this.fd=new Lb(e),this.ba=t;var n=1e4+2e4*Math.random();setTimeout(q(this.If,this),Math.floor(n))}function Nb(){this.Ec={}}function Ob(e,t,r){n(r)||(r=1),v(e.Ec,t)||(e.Ec[t]=0),e.Ec[t]+=r}function Rb(e){return e=e.toString(),Pb[e]||(Pb[e]=new Nb),Pb[e]}function Sb(e,t){var n=e.toString();return Qb[n]||(Qb[n]=t()),Qb[n]}function F(e,t){this.name=e,this.S=t}function Tb(e,t){return new F(e,t)}function Ub(e,t){return Vb(e.name,t.name)}function Wb(e,t){return Vb(e,t)}function Xb(e,t,n){this.type=Yb,this.source=e,this.path=t,this.Ga=n}function Zb(e,t){this.type=$b,this.source=e,this.path=t}function ac(e,t){this.La=e,this.wa=t?t:bc}function cc(e,t){for(var n,r=e.wa,i=null;!r.e();){if(n=e.La(t,r.key),0===n){if(r.left.e())return i?i.key:null;for(r=r.left;!r.right.e();)r=r.right;return r.key}0>n?r=r.left:n>0&&(i=r,r=r.right)}throw Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}function dc(e,t,n,r,i){for(this.Ud=i||null,this.Fe=r,this.Pa=[],i=1;!e.e();)if(i=t?n(e.key,t):1,r&&(i*=-1),0>i)e=this.Fe?e.left:e.right;else{if(0===i){this.Pa.push(e);break}this.Pa.push(e),e=this.Fe?e.right:e.left}}function J(e){if(0===e.Pa.length)return null;var t,n=e.Pa.pop();if(t=e.Ud?e.Ud(n.key,n.value):{key:n.key,value:n.value},e.Fe)for(n=n.left;!n.e();)e.Pa.push(n),n=n.right;else for(n=n.right;!n.e();)e.Pa.push(n),n=n.left;return t}function ec(e){if(0===e.Pa.length)return null;var t;return t=e.Pa,t=t[t.length-1],e.Ud?e.Ud(t.key,t.value):{key:t.key,value:t.value}}function fc(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:!0,this.left=null!=r?r:bc,this.right=null!=i?i:bc}function gc(e){return e.left.e()?e:gc(e.left)}function ic(e){return e.left.e()?bc:(e.left.fa()||e.left.left.fa()||(e=jc(e)),e=e.Y(null,null,null,ic(e.left),null),hc(e))}function hc(e){return e.right.fa()&&!e.left.fa()&&(e=mc(e)),e.left.fa()&&e.left.left.fa()&&(e=kc(e)),e.left.fa()&&e.right.fa()&&(e=lc(e)),e}function jc(e){return e=lc(e),e.right.left.fa()&&(e=e.Y(null,null,null,null,kc(e.right)),e=mc(e),e=lc(e)),e}function mc(e){return e.right.Y(null,null,e.color,e.Y(null,null,!0,null,e.right.left),null)}function kc(e){return e.left.Y(null,null,e.color,null,e.Y(null,null,!0,e.left.right,null))}function lc(e){return e.Y(null,null,!e.color,e.left.Y(null,null,!e.left.color,null,null),e.right.Y(null,null,!e.right.color,null,null))}function nc(){}function oc(e,t){return e&&"object"==typeof e?(K(".sv"in e,"Unexpected leaf node or priority contents"),t[e[".sv"]]):e}function pc(e,t){var n=new qc;return rc(e,new L(""),function(e,r){n.nc(e,sc(r,t))}),n}function sc(e,t){var n,r=e.C().I(),r=oc(r,t);if(e.K()){var i=oc(e.Ca(),t);return i!==e.Ca()||r!==e.C().I()?new tc(i,M(r)):e}return n=e,r!==e.C().I()&&(n=n.ga(new tc(r))),e.P(N,function(e,r){var i=sc(r,t);i!==r&&(n=n.U(e,i))}),n}function uc(){this.wc={}}function vc(e){this.Fc=e,this.Pd="firebase:"}function wc(e){try{if("undefined"!=typeof window&&"undefined"!=typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new vc(t)}}catch(n){}return new uc}function zc(e,t,n,r,i){this.host=e.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.kb=t,this.hc=n,this.Wg=r,this.Od=i||"",this.Ya=xc.get("host:"+e)||this.host}function Ac(e,t){t!==e.Ya&&(e.Ya=t,"s-"===e.Ya.substr(0,2)&&xc.set("host:"+e.host,e.Ya))}function Bc(e,t,n){if(K("string"==typeof t,"typeof type must == string"),K("object"==typeof n,"typeof params must == object"),t===Cc)t=(e.kb?"wss://":"ws://")+e.Ya+"/.ws?";else{if(t!==Dc)throw Error("Unknown connection type: "+t);t=(e.kb?"https://":"http://")+e.Ya+"/.lp?"}e.host!==e.Ya&&(n.ns=e.hc);var i=[];return r(n,function(e,t){i.push(t+"="+e)}),t+i.join("&")}function K(e,t){if(!e)throw Fc(t)}function Fc(e){return Error("Firebase ("+hb+") INTERNAL ASSERT FAILED: "+e)}function Gc(e){try{var t;if("undefined"!=typeof atob)t=atob(e);else{gb();for(var n=eb,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;var s=i<e.length?n[e.charAt(i)]:64;++i;var u=i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw Error();r.push(a<<2|o>>4),64!=s&&(r.push(o<<4&240|s>>2),64!=u&&r.push(s<<6&192|u))}if(8192>r.length)t=String.fromCharCode.apply(null,r);else{for(e="",n=0;n<r.length;n+=8192)e+=String.fromCharCode.apply(null,Wa(r,n,n+8192));t=e}}return t}catch(l){Cb("base64Decode failed: ",l)}return null}function Hc(e){var t=Ic(e);e=new La,e.update(t);var t=[],n=8*e.de;56>e.ac?e.update(e.Ld,56-e.ac):e.update(e.Ld,e.Va-(e.ac-56));for(var r=e.Va-1;r>=56;r--)e.me[r]=255&n,n/=256;for(Ma(e,e.me),r=n=0;5>r;r++)for(var i=24;i>=0;i-=8)t[n]=e.N[r]>>i&255,++n;return fb(t)}function Jc(e){for(var t="",n=0;n<arguments.length;n++)t=fa(arguments[n])?t+Jc.apply(null,arguments[n]):"object"==typeof arguments[n]?t+B(arguments[n]):t+arguments[n],t+=" ";return t}function Cb(e){if(!0===Kc&&(Kc=!1,null===Bb&&!0===yc.get("logging_enabled")&&Lc(!0)),Bb){var t=Jc.apply(null,arguments);Bb(t)}}function Mc(e){return function(){Cb(e,arguments)}}function Nc(e){if("undefined"!=typeof console){var t="FIREBASE INTERNAL ERROR: "+Jc.apply(null,arguments);"undefined"!=typeof console.error?console.error(t):console.log(t)}}function Oc(e){var t=Jc.apply(null,arguments);throw Error("FIREBASE FATAL ERROR: "+t)}function O(e){if("undefined"!=typeof console){var t="FIREBASE WARNING: "+Jc.apply(null,arguments);"undefined"!=typeof console.warn?console.warn(t):console.log(t)}}function Pc(e){var t="",n="",r="",i="",a=!0,o="https",s=443;if(p(e)){var u=e.indexOf("//");for(u>=0&&(o=e.substring(0,u-1),e=e.substring(u+2)),u=e.indexOf("/"),-1===u&&(u=e.length),t=e.substring(0,u),i="",e=e.substring(u).split("/"),u=0;u<e.length;u++)if(0<e[u].length){var l=e[u];try{l=decodeURIComponent(l.replace(/\+/g," "))}catch(c){}i+="/"+l}e=t.split("."),3===e.length?(n=e[1],r=e[0].toLowerCase()):2===e.length&&(n=e[0]),u=t.indexOf(":"),u>=0&&(a="https"===o||"wss"===o,s=t.substring(u+1),isFinite(s)&&(s=String(s)),s=p(s)?/^\s*-?0x/i.test(s)?parseInt(s,16):parseInt(s,10):NaN)}return{host:t,port:s,domain:n,Tg:r,kb:a,scheme:o,$c:i}}function Qc(e){return ga(e)&&(e!=e||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY)}function Rc(e){if("complete"===document.readyState)e();else{var t=!1,n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}function Vb(e,t){if(e===t)return 0;if("[MIN_NAME]"===e||"[MAX_NAME]"===t)return-1;if("[MIN_NAME]"===t||"[MAX_NAME]"===e)return 1;var n=Sc(e),r=Sc(t);return null!==n?null!==r?0==n-r?e.length-t.length:n-r:-1:null!==r?1:t>e?-1:1}function Tc(e,t){if(t&&e in t)return t[e];throw Error("Missing required key ("+e+") in object: "+B(t))}function Uc(e){if("object"!=typeof e||null===e)return B(e);var t,n=[];for(t in e)n.push(t);n.sort(),t="{";for(var r=0;r<n.length;r++)0!==r&&(t+=","),t+=B(n[r]),t+=":",t+=Uc(e[n[r]]);return t+"}"}function Vc(e,t){if(e.length<=t)return[e];for(var n=[],r=0;r<e.length;r+=t)r+t>e?n.push(e.substring(r,e.length)):n.push(e.substring(r,r+t));return n}function Wc(e,t){if(ea(e))for(var n=0;n<e.length;++n)t(n,e[n]);else r(e,t)}function Xc(e){K(!Qc(e),"Invalid JSON number");var t,n,r,i;for(0===e?(r=n=0,t=-(1/0)===1/e?1:0):(t=0>e,e=Math.abs(e),e>=Math.pow(2,-1022)?(r=Math.min(Math.floor(Math.log(e)/Math.LN2),1023),n=r+1023,r=Math.round(e*Math.pow(2,52-r)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074)))),i=[],e=52;e;--e)i.push(r%2?1:0),r=Math.floor(r/2);for(e=11;e;--e)i.push(n%2?1:0),n=Math.floor(n/2);for(i.push(t?1:0),i.reverse(),t=i.join(""),n="",e=0;64>e;e+=8)r=parseInt(t.substr(e,8),2).toString(16),1===r.length&&(r="0"+r),n+=r;return n.toLowerCase()}function Sc(e){return Yc.test(e)&&(e=Number(e),e>=-2147483648&&2147483647>=e)?e:null}function Db(e){try{e()}catch(t){setTimeout(function(){throw O("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}}function P(e,t){if(ha(e)){var n=Array.prototype.slice.call(arguments,1).slice();Db(function(){e.apply(null,n)})}}function Ic(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i>=55296&&56319>=i&&(i-=55296,r++,K(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(i<<10)+(e.charCodeAt(r)-56320)),128>i?t[n++]=i:(2048>i?t[n++]=i>>6|192:(65536>i?t[n++]=i>>12|224:(t[n++]=i>>18|240,t[n++]=i>>12&63|128),t[n++]=i>>6&63|128),t[n++]=63&i|128)}return t}function Zc(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);128>r?t++:2048>r?t+=2:r>=55296&&56319>=r?(t+=4,n++):t+=3}return t}function $c(e){var t={},n={},r={},i="";try{var a=e.split("."),t=nb(Gc(a[0])||""),n=nb(Gc(a[1])||""),i=a[2],r=n.d||{};delete n.d}catch(o){}return{Zg:t,Bc:n,data:r,Qg:i}}function ad(e){return e=$c(e).Bc,"object"==typeof e&&e.hasOwnProperty("iat")?w(e,"iat"):null}function bd(e){e=$c(e);var t=e.Bc;return!!e.Qg&&!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}function cd(e){this.W=e,this.g=e.n.g}function dd(e,t,n,r){var i=[],a=[];return Oa(t,function(t){"child_changed"===t.type&&e.g.Ad(t.Ke,t.Ja)&&a.push(new D("child_moved",t.Ja,t.Wa))}),ed(e,i,"child_removed",t,r,n),ed(e,i,"child_added",t,r,n),ed(e,i,"child_moved",a,r,n),ed(e,i,"child_changed",t,r,n),ed(e,i,Fb,t,r,n),i}function ed(e,t,n,r,i,a){r=Pa(r,function(e){return e.type===n}),Xa(r,q(e.hg,e)),Oa(r,function(n){var r=fd(e,n,a);Oa(i,function(i){i.Kf(n.type)&&t.push(i.createEvent(r,e.W))})})}function fd(e,t,n){return"value"!==t.type&&"child_removed"!==t.type&&(t.Qd=n.rf(t.Wa,t.Ja,e.g)),t}function gd(){this.bb={}}function hd(e,t){var n=t.type,r=t.Wa;K("child_added"==n||"child_changed"==n||"child_removed"==n,"Only child changes supported for tracking"),K(".priority"!==r,"Only non-priority child changes can be tracked.");var i=w(e.bb,r);if(i){var a=i.type;if("child_added"==n&&"child_removed"==a)e.bb[r]=new D("child_changed",t.Ja,r,i.Ja);else if("child_removed"==n&&"child_added"==a)delete e.bb[r];else if("child_removed"==n&&"child_changed"==a)e.bb[r]=new D("child_removed",i.Ke,r);else if("child_changed"==n&&"child_added"==a)e.bb[r]=new D("child_added",t.Ja,r);else{if("child_changed"!=n||"child_changed"!=a)throw Fc("Illegal combination of changes: "+t+" occurred after "+i);e.bb[r]=new D("child_changed",t.Ja,r,i.Ke)}}else e.bb[r]=t}function id(e,t,n){this.Rb=e,this.pb=t,this.rb=n||null}function jd(e,t,n){this.ha=e,this.pb=t,this.rb=n}function kd(e){this.g=e}function ld(e){this.Be=new kd(e.g),this.g=e.g;var t;e.ma?(t=md(e),t=e.g.Pc(nd(e),t)):t=e.g.Tc(),this.ed=t,e.pa?(t=od(e),e=e.g.Pc(pd(e),t)):e=e.g.Qc(),this.Gc=e}function qd(e){this.sa=new ld(e),this.g=e.g,K(e.ja,"Only valid if limit has been set"),this.ka=e.ka,this.Jb=!rd(e)}function sd(e,t,n,r,i,a){var o;if(e.Jb){var s=td(e.g);o=function(e,t){return s(t,e)}}else o=td(e.g);K(t.Db()==e.ka,"");var u=new F(n,r),l=e.Jb?ud(t,e.g):vd(t,e.g),c=e.sa.matches(u);if(t.Da(n)){for(var f=t.R(n),l=i.ye(e.g,l,e.Jb);null!=l&&(l.name==n||t.Da(l.name));)l=i.ye(e.g,l,e.Jb);return i=null==l?1:o(l,u),c&&!r.e()&&i>=0?(null!=a&&hd(a,new D("child_changed",r,n,f)),t.U(n,r)):(null!=a&&hd(a,new D("child_removed",f,n)),t=t.U(n,C),null!=l&&e.sa.matches(l)?(null!=a&&hd(a,new D("child_added",l.S,l.name)),t.U(l.name,l.S)):t)}return r.e()?t:c&&0<=o(l,u)?(null!=a&&(hd(a,new D("child_removed",l.S,l.name)),hd(a,new D("child_added",r,n))),t.U(n,r).U(l.name,C)):t}function wd(e,t){this.je=e,this.fg=t}function xd(e){this.V=e}function Hd(e,t,n,r,i,a){var o=t.O;if(null!=r.tc(n))return t;var s;if(n.e())K(Ib(t.w()),"If change path is empty, we must have complete server data"),Jb(t.w())?(i=ub(t),r=r.yc(i instanceof R?i:C)):r=r.za(ub(t)),a=e.V.xa(t.O.j(),r,a);else{var u=E(n);if(".priority"==u)K(1==Kd(n),"Can't have a priority with additional path components"),a=o.j(),s=t.w().j(),r=r.ld(n,a,s),a=null!=r?e.V.ga(a,r):o.j();else{var l=H(n);sb(o,u)?(s=t.w().j(),r=r.ld(n,o.j(),s),r=null!=r?o.j().R(u).G(l,r):o.j().R(u)):r=r.xc(u,t.w()),a=null!=r?e.V.G(o.j(),u,r,l,i,a):o.j()}}return Fd(t,a,o.ea||n.e(),e.V.Na())}function Ad(e,t,n,r,i,a,o,s){var u=t.w();if(o=o?e.V:e.V.Wb(),n.e())r=o.xa(u.j(),r,null);else if(o.Na()&&!u.Ub)r=u.j().G(n,r),r=o.xa(u.j(),r,null);else{var l=E(n);if(!Kb(u,n)&&1<Kd(n))return t;var c=H(n);r=u.j().R(l).G(c,r),r=".priority"==l?o.ga(u.j(),r):o.G(u.j(),l,r,c,qb,null)}return u=u.ea||n.e(),t=new Id(t.O,new tb(r,u,o.Na())),Hd(e,t,n,i,new rb(i,t,a),s)}function yd(e,t,n,r,i,a,o){var s=t.O;if(i=new rb(i,t,a),n.e())o=e.V.xa(t.O.j(),r,o),e=Fd(t,o,!0,e.V.Na());else if(a=E(n),".priority"===a)o=e.V.ga(t.O.j(),r),e=Fd(t,o,s.ea,s.Ub);else{n=H(n);var u=s.j().R(a);if(!n.e()){var l=i.qf(a);r=null!=l?".priority"===Ld(n)&&l.Q(n.parent()).e()?l:l.G(n,r):C}u.ca(r)?e=t:(o=e.V.G(s.j(),a,r,n,i,o),e=Fd(t,o,s.ea,e.V.Na()))}return e}function Cd(e,t,n,r,i,a,o){var s=t;return Md(r,function(r,u){var l=n.u(r);sb(t.O,E(l))&&(s=yd(e,s,l,u,i,a,o))}),Md(r,function(r,u){var l=n.u(r);sb(t.O,E(l))||(s=yd(e,s,l,u,i,a,o))}),s}function Nd(e,t){return Md(t,function(t,n){e=e.G(t,n)}),e}function Dd(e,t,n,r,i,a,o,s){if(t.w().j().e()&&!Ib(t.w()))return t;var u=t;n=n.e()?r:Od(Pd,n,r);var l=t.w().j();return n.children.ia(function(n,r){if(l.Da(n)){var c=t.w().j().R(n),c=Nd(c,r);u=Ad(e,u,new L(n),c,i,a,o,s)}}),n.children.ia(function(n,r){var c=!sb(t.w(),n)&&null==r.value;l.Da(n)||c||(c=t.w().j().R(n),c=Nd(c,r),u=Ad(e,u,new L(n),c,i,a,o,s))}),u}function Gd(e,t,n,r,i,a,o){if(null!=i.tc(n))return t;var s=Jb(t.w()),u=t.w();if(null!=r.value){if(n.e()&&u.ea||Kb(u,n))return Ad(e,t,n,u.j().Q(n),i,a,s,o);if(n.e()){var l=Pd;return u.j().P(Qd,function(e,t){l=l.set(new L(e),t)}),Dd(e,t,n,l,i,a,s,o)}return t}return l=Pd,Md(r,function(e){var t=n.u(e);Kb(u,t)&&(l=l.set(e,u.j().Q(t)))}),Dd(e,t,n,l,i,a,s,o)}function Rd(){}function td(e){return q(e.compare,e)}function Ud(e){K(!e.e()&&".priority"!==E(e),"Can't create PathIndex with empty path or .priority key"),this.cc=e}function Wd(){}function Xd(){}function Yd(){}function ae(){this.Tb=this.pa=this.Lb=this.ma=this.ja=!1,this.ka=0,this.Nb="",this.ec=null,this.xb="",this.bc=null,this.vb="",this.g=N}function rd(e){return""===e.Nb?e.ma:"l"===e.Nb}function nd(e){return K(e.ma,"Only valid if start has been set"),e.ec}function md(e){return K(e.ma,"Only valid if start has been set"),e.Lb?e.xb:"[MIN_NAME]"}function pd(e){return K(e.pa,"Only valid if end has been set"),e.bc}function od(e){return K(e.pa,"Only valid if end has been set"),e.Tb?e.vb:"[MAX_NAME]"}function ce(e){var t=new ae;return t.ja=e.ja,t.ka=e.ka,t.ma=e.ma,t.ec=e.ec,t.Lb=e.Lb,t.xb=e.xb,t.pa=e.pa,t.bc=e.bc,t.Tb=e.Tb,t.vb=e.vb,t.g=e.g,t}function de(e,t){var n=ce(e);return n.g=t,n}function ee(e){var t={};if(e.ma&&(t.sp=e.ec,e.Lb&&(t.sn=e.xb)),e.pa&&(t.ep=e.bc,e.Tb&&(t.en=e.vb)),e.ja){t.l=e.ka;var n=e.Nb;""===n&&(n=rd(e)?"l":"r"),t.vf=n}return e.g!==N&&(t.i=e.g.toString()),t}function S(e){return!(e.ma||e.pa||e.ja)}function fe(e){return S(e)&&e.g==N}function ge(e){var t={};if(fe(e))return t;var n;return e.g===N?n="$priority":e.g===$d?n="$value":e.g===Qd?n="$key":(K(e.g instanceof Ud,"Unrecognized index type!"),n=e.g.toString()),t.orderBy=B(n),e.ma&&(t.startAt=B(e.ec),e.Lb&&(t.startAt+=","+B(e.xb))),e.pa&&(t.endAt=B(e.bc),e.Tb&&(t.endAt+=","+B(e.vb))),e.ja&&(rd(e)?t.limitToFirst=e.ka:t.limitToLast=e.ka),t}function he(e,t){this.Bd=e,this.dc=t}function ie(e,t,n){var r=na(e.Bd,function(r,i){var a=w(e.dc,i);if(K(a,"Missing index implementation for "+i),r===Sd){if(a.Ic(t.S)){for(var o=[],s=n.Xb(Tb),u=J(s);u;)u.name!=t.name&&o.push(u),u=J(s);return o.push(t),je(o,td(a))}return Sd}return a=n.get(t.name),o=r,a&&(o=o.remove(new F(t.name,a))),o.Oa(t,t.S)});return new he(r,e.dc)}function ke(e,t,n){var r=na(e.Bd,function(e){if(e===Sd)return e;var r=n.get(t.name);return r?e.remove(new F(t.name,r)):e});return new he(r,e.dc)}function tc(e,t){this.B=e,K(n(this.B)&&null!==this.B,"LeafNode shouldn't be created with null/undefined value."),this.aa=t||C,me(this.aa),this.Cb=null}function R(e,t,n){this.m=e,(this.aa=t)&&me(this.aa),e.e()&&K(!this.aa||this.aa.e(),"An empty node cannot have a priority"),this.wb=n,this.Cb=null}function ud(e,t){var n;return n=(n=qe(e,t))?(n=n.Sc())&&n.name:e.m.Sc(),n?new F(n,e.m.get(n)):null}function vd(e,t){var n;return n=(n=qe(e,t))?(n=n.fc())&&n.name:e.m.fc(),n?new F(n,e.m.get(n)):null}function qe(e,t){return t===Qd?null:e.wb.get(t.toString())}function M(e,t){if(null===e)return C;var n=null;if("object"==typeof e&&".priority"in e?n=e[".priority"]:"undefined"!=typeof t&&(n=t),K(null===n||"string"==typeof n||"number"==typeof n||"object"==typeof n&&".sv"in n,"Invalid priority type found: "+typeof n),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new tc(e,M(n));if(e instanceof Array){var i=C,a=e;return r(a,function(e,t){if(v(a,t)&&"."!==t.substring(0,1)){var n=M(e);(n.K()||!n.e())&&(i=i.U(t,n))}}),i.ga(M(n))}var o=[],s=!1,u=e;if(ib(u,function(e){if("string"!=typeof e||"."!==e.substring(0,1)){var t=M(u[e]);t.e()||(s=s||!t.C().e(),o.push(new F(e,t)))}}),0==o.length)return C;var l=je(o,Ub,function(e){return e.name},Wb);if(s){var c=je(o,td(N));return new R(l,M(n),new he({".priority":c},{".priority":N}))}return new R(l,M(n),le)}function se(e){this.count=parseInt(Math.log(e+1)/re,10),this.jf=this.count-1,this.eg=e+1&parseInt(Array(this.count+1).join("1"),2)}function te(e){var t=!(e.eg&1<<e.jf);return e.jf--,t}function je(e,t,n,r){function i(t,r){var a=r-t;if(0==a)return null;if(1==a){var o=e[t],s=n?n(o):o;return new fc(s,o.S,!1,null,null)}var o=parseInt(a/2,10)+t,a=i(t,o),u=i(o+1,r),o=e[o],s=n?n(o):o;return new fc(s,o.S,!1,a,u)}e.sort(t);var a=function(t){function r(t,r){var u=s-t,l=s;s-=t;var l=i(u+1,l),u=e[u],c=n?n(u):u,l=new fc(c,u.S,r,null,l);a?a.left=l:o=l,a=l}for(var a=null,o=null,s=e.length,u=0;u<t.count;++u){var l=te(t),c=Math.pow(2,t.count-(u+1));l?r(c,!1):(r(c,!1),r(c,!0))}return o}(new se(e.length));return null!==a?new ac(r||t,a):new ac(r||t)}function oe(e){return"number"==typeof e?"number:"+Xc(e):"string:"+e}function me(e){if(e.K()){var t=e.I();K("string"==typeof t||"number"==typeof t||"object"==typeof t&&v(t,".sv"),"Priority must be a string or number.")}else K(e===Vd||e.e(),"priority of unexpected type.");K(e===Vd||e.C().e(),"Priority nodes can't have a priority of their own.")}function ue(){R.call(this,new ac(Wb),C,le)}function Id(e,t){this.O=e,this.Yd=t}function Fd(e,t,n,r){return new Id(new tb(t,n,r),e.Yd)}function Jd(e){return e.O.ea?e.O.j():null}function ub(e){return e.Yd.ea?e.Yd.j():null}function ve(e,t){this.W=e;var n=e.n,r=new kd(n.g),n=S(n)?new kd(n.g):n.ja?new qd(n):new ld(n);this.Hf=new xd(n);var i=t.w(),a=t.O,o=r.xa(C,i.j(),null),s=n.xa(C,a.j(),null);this.Ka=new Id(new tb(s,a.ea,n.Na()),new tb(o,i.ea,r.Na())),this.Xa=[],this.lg=new cd(e)}function we(e){return e.W}function ye(e,t){var n=e.Ka.O,r=[];return n.j().K()||n.j().P(N,function(e,t){r.push(new D("child_added",t,e))}),n.ea&&r.push(Eb(n.j())),xe(e,r,n.j(),t)}function xe(e,t,n,r){return dd(e.lg,t,n,r?[r]:e.Xa)}function ze(e,t,n){this.type=Bd,this.source=e,this.path=t,this.children=n}function Ae(e,t){this.f=Mc("p:rest:"),this.F=e,this.Gb=t,this.Aa=null,this.$={}}function Be(e,t){return n(t)?"tag$"+t:(K(fe(e.n),"should have a tag if it's not a default query."),e.path.toString())}function Ce(e,t,n,r){n=n||{},n.format="export",e.Aa&&(n.auth=e.Aa);var i=(e.F.kb?"https://":"http://")+e.F.host+t+"?"+kb(n);e.f("Sending REST request for "+i);var a=new XMLHttpRequest;a.onreadystatechange=function(){if(r&&4===a.readyState){e.f("REST Response for "+i+" received. status:",a.status,"response:",a.responseText);var t=null;if(200<=a.status&&300>a.status){try{t=nb(a.responseText)}catch(n){O("Failed to parse JSON response for "+i+": "+a.responseText)}r(null,t)}else 401!==a.status&&404!==a.status&&O("Got unsuccessful REST response for "+i+" Status: "+a.status),r(a.status);r=null}},a.open("GET",i,!0),a.send()}function De(e){K(ea(e)&&0<e.length,"Requires a non-empty array"),this.Xf=e,this.Oc={}}function Ee(e,t){K(Ta(e.Xf,function(e){return e===t}),"Unknown event: "+t)}function Ge(){if(De.call(this,["online"]),this.kc=!0,"undefined"!=typeof window&&"undefined"!=typeof window.addEventListener){var e=this;window.addEventListener("online",function(){e.kc||(e.kc=!0,e.fe("online",!0))},!1),window.addEventListener("offline",function(){e.kc&&(e.kc=!1,e.fe("online",!1))},!1)}}function He(){De.call(this,["visible"]);var e,t;if("undefined"!=typeof document&&"undefined"!=typeof document.addEventListener&&("undefined"!=typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!=typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!=typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!=typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.Ob=!0,t){var n=this;document.addEventListener(t,function(){var t=!document[e];t!==n.Ob&&(n.Ob=t,n.fe("visible",t))},!1)}}function L(e,t){if(1==arguments.length){this.o=e.split("/");for(var n=0,r=0;r<this.o.length;r++)0<this.o[r].length&&(this.o[n]=this.o[r],n++);this.o.length=n,this.Z=0}else this.o=e,this.Z=t}function T(e,t){var n=E(e);if(null===n)return t;if(n===E(t))return T(H(e),H(t));throw Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Ie(e,t){for(var n=e.slice(),r=t.slice(),i=0;i<n.length&&i<r.length;i++){var a=Vb(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function E(e){return e.Z>=e.o.length?null:e.o[e.Z]}function Kd(e){return e.o.length-e.Z}function H(e){var t=e.Z;return t<e.o.length&&t++,new L(e.o,t)}function Ld(e){return e.Z<e.o.length?e.o[e.o.length-1]:null}function Je(e,t){this.Qa=e.slice(),this.Ha=Math.max(1,this.Qa.length),this.lf=t;for(var n=0;n<this.Qa.length;n++)this.Ha+=Zc(this.Qa[n]);Ke(this)}function Ke(e){if(768<e.Ha)throw Error(e.lf+"has a key path longer than 768 bytes ("+e.Ha+").");if(32<e.Qa.length)throw Error(e.lf+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Le(e))}function Le(e){return 0==e.Qa.length?"":"in property '"+e.Qa.join(".")+"'"}function Me(e,t){this.value=e,this.children=t||Ne}function Oe(e){var t=Pd;return r(e,function(e,n){t=t.set(new L(n),e)}),t}function Pe(e,t,n){if(null!=e.value&&n(e.value))return{path:G,value:e.value};if(t.e())return null;var r=E(t);return e=e.children.get(r),null!==e?(t=Pe(e,H(t),n),null!=t?{path:new L(r).u(t.path),value:t.value}:null):null}function Qe(e,t){return Pe(e,t,function(){return!0})}function Od(e,t,n){if(t.e())return n;var r=E(t);return t=Od(e.children.get(r)||Pd,H(t),n),r=t.e()?e.children.remove(r):e.children.Oa(r,t),new Me(e.value,r)}function Re(e,t){return Se(e,G,t)}function Se(e,t,n){var r={};return e.children.ia(function(e,i){r[e]=Se(i,t.u(e),n)}),n(t,e.value,r)}function Te(e,t,n){return Ue(e,t,G,n)}function Ue(e,t,n,r){var i=e.value?r(n,e.value):!1;return i?i:t.e()?null:(i=E(t),(e=e.children.get(i))?Ue(e,H(t),n.u(i),r):null)}function Ve(e,t,n){We(e,t,G,n)}function We(e,t,n,r){if(t.e())return e;e.value&&r(n,e.value);var i=E(t);return(e=e.children.get(i))?We(e,H(t),n.u(i),r):Pd}function Md(e,t){Xe(e,G,t)}function Xe(e,t,n){e.children.ia(function(e,r){Xe(r,t.u(e),n)}),e.value&&n(t,e.value)}function Ye(e,t){e.children.ia(function(e,n){
n.value&&t(e,n.value)})}function Ze(e,t,n){this.type=Ed,this.source=$e,this.path=e,this.Qb=t,this.Vd=n}function af(e,t,n,r){this.we=e,this.pf=t,this.Hb=n,this.af=r,K(!r||t,"Tagged queries must be from server.")}function cf(e){this.X=e}function ef(e,t,n){if(t.e())return new cf(new Me(n));var r=Qe(e.X,t);if(null!=r){var i=r.path,r=r.value;return t=T(i,t),r=r.G(t,n),new cf(e.X.set(i,r))}return e=Od(e.X,t,new Me(n)),new cf(e)}function ff(e,t,n){var r=e;return ib(n,function(e,n){r=ef(r,t.u(e),n)}),r}function gf(e,t){var n=Qe(e.X,t);return null!=n?e.X.get(n.path).Q(T(n.path,t)):null}function hf(e){var t=[],n=e.X.value;return null!=n?n.K()||n.P(N,function(e,n){t.push(new F(e,n))}):e.X.children.ia(function(e,n){null!=n.value&&t.push(new F(e,n.value))}),t}function jf(e,t){if(t.e())return e;var n=gf(e,t);return new cf(null!=n?new Me(n):e.X.subtree(t))}function kf(e,t,n){if(null!=t.value)return n.G(e,t.value);var r=null;return t.children.ia(function(t,i){".priority"===t?(K(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=kf(e.u(t),i,n)}),n.Q(e).e()||null===r||(n=n.G(e.u(".priority"),r)),n}function lf(){this.T=df,this.na=[],this.Mc=-1}function mf(e,t){for(var n=0;n<e.na.length;n++){var r=e.na[n];if(r.kd===t)return r}return null}function nf(e,t){return e.Ga?e.path.contains(t):!!ua(e.children,function(n,r){return e.path.u(r).contains(t)})}function pf(e){return e.visible}function of(e,t,n){for(var r=df,i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path;if(a.Ga)n.contains(o)?(o=T(n,o),r=ef(r,o,a.Ga)):o.contains(n)&&(o=T(o,n),r=ef(r,G,a.Ga.Q(o)));else{if(!a.children)throw Fc("WriteRecord should have .snap or .children");n.contains(o)?(o=T(n,o),r=ff(r,o,a.children)):o.contains(n)&&(o=T(o,n),o.e()?r=ff(r,G,a.children):(a=w(a.children,E(o)))&&(a=a.Q(H(o)),r=ef(r,G,a)))}}}return r}function qf(e,t){this.Mb=e,this.X=t}function rf(){this.ya={}}function tf(e){return Pa(ra(e.ya),function(e){return!S(e.W.n)})}function uf(e,t){if(S(t.n))return sf(e);var n=t.va();return w(e.ya,n)}function sf(e){return va(e.ya,function(e){return S(e.W.n)})||null}function vf(e){this.ta=Pd,this.ib=new lf,this.$e={},this.mc={},this.Nc=e}function wf(e,t,r,i,a){var o=e.ib,s=a;return K(i>o.Mc,"Stacking an older write on top of newer ones"),n(s)||(s=!0),o.na.push({path:t,Ga:r,kd:i,visible:s}),s&&(o.T=ef(o.T,t,r)),o.Mc=i,a?xf(e,new Xb($e,t,r)):[]}function yf(e,t,n,r){var i=e.ib;return K(r>i.Mc,"Stacking an older merge on top of newer ones"),i.na.push({path:t,children:n,kd:r,visible:!0}),i.T=ff(i.T,t,n),i.Mc=r,n=Oe(n),xf(e,new ze($e,t,n))}function zf(e,t,n){n=n||!1;var r=mf(e.ib,t);if(e.ib.Rd(t)){var i=Pd;return null!=r.Ga?i=i.set(G,!0):ib(r.children,function(e,t){i=i.set(new L(e),t)}),xf(e,new Ze(r.path,i,n))}return[]}function Af(e,t,n){return n=Oe(n),xf(e,new ze(bf,t,n))}function Bf(e,t,n,r){if(r=Cf(e,r),null!=r){var i=Df(r);return r=i.path,i=i.Hb,t=T(r,t),n=new Xb(new af(!1,!0,i,!0),t,n),Ef(e,r,n)}return[]}function Ff(e,t,n,r){if(r=Cf(e,r)){var i=Df(r);return r=i.path,i=i.Hb,t=T(r,t),n=Oe(n),n=new ze(new af(!1,!0,i,!0),t,n),Ef(e,r,n)}return[]}function Jf(e){return Re(e,function(e,t,n){if(t&&null!=sf(t))return[sf(t)];var i=[];return t&&(i=tf(t)),r(n,function(e){i=i.concat(e)}),i})}function Nf(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!S(r.n)){var r=Gf(r),i=e.mc[r];delete e.mc[r],delete e.$e["_"+i]}}}function Lf(e){return S(e.n)&&!fe(e.n)?e.Ib():e}function If(e,t,n){var i=t.path,a=Mf(e,t);if(n=Kf(e,n),t=e.Nc.Xe(Lf(t),a,n.xd,n.H),i=e.ta.subtree(i),a)K(null==sf(i.value),"If we're adding a query, it shouldn't be shadowed");else for(a=Re(i,function(e,t,n){if(!e.e()&&t&&null!=sf(t))return[we(sf(t))];var i=[];return t&&(i=i.concat(Qa(tf(t),function(e){return e.W}))),r(n,function(e){i=i.concat(e)}),i}),i=0;i<a.length;++i)n=a[i],e.Nc.ae(Lf(n),Mf(e,n));return t}function Kf(e,t){var n=t.W,r=Mf(e,n);return{xd:function(){return(t.w()||C).hash()},H:function(t){if("ok"===t){if(r){var i=n.path;if(t=Cf(e,r)){var a=Df(t);t=a.path,a=a.Hb,i=T(t,i),i=new Zb(new af(!1,!0,a,!0),i),t=Ef(e,t,i)}else t=[]}else t=xf(e,new Zb(bf,n.path));return t}return i="Unknown Error","too_big"===t?i="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==t?i="Client doesn't have permission to access the desired data.":"unavailable"==t&&(i="The service is unavailable"),i=Error(t+": "+i),i.code=t.toUpperCase(),e.jb(n,null,i)}}}function Gf(e){return e.path.toString()+"$"+e.va()}function Df(e){var t=e.indexOf("$");return K(-1!==t&&t<e.length-1,"Bad queryKey."),{Hb:e.substr(t+1),path:new L(e.substr(0,t))}}function Cf(e,t){var n=e.$e,r="_"+t;return r in n?n[r]:void 0}function Mf(e,t){var n=Gf(t);return w(e.mc,n)}function Ef(e,t,n){var r=e.ta.get(t);return K(r,"Missing sync point for query tag that we're tracking"),r.ab(n,new qf(t,e.ib),null)}function xf(e,t){return Of(e,t,e.ta,null,new qf(G,e.ib))}function Of(e,t,n,r,i){if(t.path.e())return Pf(e,t,n,r,i);var a=n.get(G);null==r&&null!=a&&(r=a.fb(G));var o=[],s=E(t.path),u=t.Xc(s);if((n=n.children.get(s))&&u)var l=r?r.R(s):null,s=i.u(s),o=o.concat(Of(e,u,n,l,s));return a&&(o=o.concat(a.ab(t,i,r))),o}function Pf(e,t,n,r,i){var a=n.get(G);null==r&&null!=a&&(r=a.fb(G));var o=[];return n.children.ia(function(n,a){var s=r?r.R(n):null,u=i.u(n),l=t.Xc(n);l&&(o=o.concat(Pf(e,l,a,s,u)))}),a&&(o=o.concat(a.ab(t,i,r))),o}function Qf(){this.children={},this.nd=0,this.value=null}function Rf(e,t,n){this.Gd=e?e:"",this.Zc=t?t:null,this.A=n?n:new Qf}function Sf(e,t){for(var n,r=t instanceof L?t:new L(t),i=e;null!==(n=E(r));)i=new Rf(n,i,w(i.A.children,n)||new Qf),r=H(r);return i}function Tf(e,t){K("undefined"!=typeof t,"Cannot set value to undefined"),e.A.value=t,Uf(e)}function Vf(e,t,n,r){n&&!r&&t(e),e.P(function(e){Vf(e,t,!0,r)}),n&&r&&t(e)}function Wf(e,t){for(var n=e.parent();null!==n&&!t(n);)n=n.parent()}function Uf(e){if(null!==e.Zc){var t=e.Zc,n=e.Gd,r=e.e(),i=v(t.A.children,n);r&&i?(delete t.A.children[n],t.A.nd--,Uf(t)):r||i||(t.A.children[n]=e.A,t.A.nd++,Uf(t))}}function $f(e){return p(e)&&0!==e.length&&!Xf.test(e)}function ag(e){return null===e||p(e)||ga(e)&&!Qc(e)||ia(e)&&v(e,".sv")}function bg(e,t,r,i){i&&!n(t)||cg(y(e,1,i),t,r)}function cg(e,t,r){if(r instanceof L&&(r=new Je(r,e)),!n(t))throw Error(e+"contains undefined "+Le(r));if(ha(t))throw Error(e+"contains a function "+Le(r)+" with contents: "+t.toString());if(Qc(t))throw Error(e+"contains "+t.toString()+" "+Le(r));if(p(t)&&t.length>10485760/3&&10485760<Zc(t))throw Error(e+"contains a string greater than 10485760 utf8 bytes "+Le(r)+" ('"+t.substring(0,50)+"...')");if(ia(t)){var i=!1,a=!1;if(ib(t,function(t,n){if(".value"===t)i=!0;else if(".priority"!==t&&".sv"!==t&&(a=!0,!$f(t)))throw Error(e+" contains an invalid key ("+t+") "+Le(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(t),cg(e,n,r),r.pop()}),i&&a)throw Error(e+' contains ".value" child '+Le(r)+" in addition to actual children.")}}function dg(e,t){var n,r;for(n=0;n<t.length;n++){r=t[n];for(var i=r.slice(),a=0;a<i.length;a++)if((".priority"!==i[a]||a!==i.length-1)&&!$f(i[a]))throw Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}for(t.sort(Ie),i=null,n=0;n<t.length;n++){if(r=t[n],null!==i&&i.contains(r))throw Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}function eg(e,t,n){var r=y(e,1,!1);if(!ia(t)||ea(t))throw Error(r+" must be an object containing the children to replace.");var i=[];ib(t,function(e,t){var a=new L(e);if(cg(r,t,n.u(a)),".priority"===Ld(a)&&!ag(t))throw Error(r+"contains an invalid value for '"+a.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(a)}),dg(r,i)}function fg(e,t,n){if(Qc(n))throw Error(y(e,t,!1)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ag(n))throw Error(y(e,t,!1)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}function gg(e,t,r){if(!r||n(t))switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw Error(y(e,1,r)+'must be a valid event type: "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function hg(e,t){if(n(t)&&!$f(t))throw Error(y(e,2,!0)+'was an invalid key: "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function ig(e,t){if(!p(t)||0===t.length||Yf.test(t))throw Error(y(e,1,!1)+'was an invalid path: "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function jg(e,t){if(".info"===E(t))throw Error(e+" failed: Can't modify data under /.info/")}function kg(e,t){if(!p(t))throw Error(y(e,1,!1)+"must be a valid credential (a string).")}function lg(e,t,n){if(!p(n))throw Error(y(e,t,!1)+"must be a valid string.")}function mg(e,t){if(lg(e,1,t),!Zf.test(t))throw Error(y(e,1,!1)+"'"+t+"' is not a valid authentication provider.")}function ng(e,t,r,i){if((!i||n(r))&&(!ia(r)||null===r))throw Error(y(e,t,i)+"must be a valid object.")}function og(e,t,n){if(!ia(t)||!v(t,n))throw Error(y(e,1,!1)+'must contain the key "'+n+'"');if(!p(w(t,n)))throw Error(y(e,1,!1)+'must contain the key "'+n+'" with type "string"')}function pg(){this.set={}}function qg(e,t){r(e.set,function(e,n){t(n,e)})}function qc(){this.m=this.B=null}function rg(e,t){if(t.e())return e.B=null,e.m=null,!0;if(null!==e.B){if(e.B.K())return!1;var n=e.B;return e.B=null,n.P(N,function(t,n){e.nc(new L(t),n)}),rg(e,t)}return null!==e.m?(n=E(t),t=H(t),e.m.contains(n)&&rg(e.m.get(n),t)&&e.m.remove(n),e.m.e()?(e.m=null,!0):!1):!0}function rc(e,t,n){null!==e.B?n(t,e.B):e.P(function(e,r){var i=new L(t.toString()+"/"+e);rc(r,i,n)})}function tg(e,t,n){this.od=e||{},this.ee=t||{},this.$a=n||{},this.od.remember||(this.od.remember="default")}function vg(e){var t={},n={};return ib(e||{},function(e,r){0<=Na(ug,e)?t[e]=r:n[e]=r}),new tg(t,{},n)}function wg(e,t){this.Qe=["session",e.Od,e.hc].join(":"),this.be=t}function xg(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function yg(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xg())}function zg(){return"undefined"!=typeof location&&/^file:\//.test(location.href)}function Ag(e){var t=xg();if(""===t)return!1;if("Microsoft Internet Explorer"===navigator.appName){if((t=t.match(/MSIE ([0-9]{1,}[\.0-9]{0,})/))&&1<t.length)return parseFloat(t[1])>=e}else if(-1<t.indexOf("Trident")&&(t=t.match(/rv:([0-9]{2,2}[\.0-9]{0,})/))&&1<t.length)return parseFloat(t[1])>=e;return!1}function Bg(){var e,t=window.opener.frames;for(e=t.length-1;e>=0;e--)try{if(t[e].location.protocol===window.location.protocol&&t[e].location.host===window.location.host&&"__winchan_relay_frame"===t[e].name)return t[e]}catch(n){}return null}function Cg(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener&&e.addEventListener(t,n,!1)}function Dg(e,t,n){e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener&&e.removeEventListener(t,n,!1)}function Eg(e){/^https?:\/\//.test(e)||(e=window.location.href);var t=/^(https?:\/\/[\-_a-zA-Z\.0-9:]+)/.exec(e);return t?t[1]:e}function Fg(e){var t="";try{e=e.replace("#","");var n=lb(e);n&&v(n,"__firebase_request_key")&&(t=w(n,"__firebase_request_key"))}catch(r){}return t}function Gg(){var e=Pc(sg);return e.scheme+"://"+e.host+"/v2"}function Hg(e){return Gg()+"/"+e+"/auth/channel"}function Ig(e){var t=this;if(this.Ac=e,this.ce="*",Ag(8)?this.Rc=this.zd=Bg():(this.Rc=window.opener,this.zd=window),!t.Rc)throw"Unable to find relay frame";Cg(this.zd,"message",q(this.jc,this)),Cg(this.zd,"message",q(this.Bf,this));try{Jg(this,{a:"ready"})}catch(n){Cg(this.Rc,"load",function(){Jg(t,{a:"ready"})})}Cg(window,"unload",q(this.Bg,this))}function Jg(e,t){t=B(t),Ag(8)?e.Rc.doPost(t,e.ce):e.Rc.postMessage(t,e.ce)}function Kg(e){this.pc=Ga()+Ga()+Ga(),this.Ef=e}function Mg(e){var t=Error(w(Lg,e),e);return t.code=e,t}function Ng(e){var t;(t=!e.window_features)||(t=xg(),t=-1!==t.indexOf("Fennec/")||-1!==t.indexOf("Firefox/")&&-1!==t.indexOf("Android")),t&&(e.window_features=void 0),e.window_name||(e.window_name="_blank"),this.options=e}function Og(e){e.method||(e.method="GET"),e.headers||(e.headers={}),e.headers.content_type||(e.headers.content_type="application/json"),e.headers.content_type=e.headers.content_type.toLowerCase(),this.options=e}function Pg(e){this.pc=Ga()+Ga()+Ga(),this.Ef=e}function Qg(e){e.callback_parameter||(e.callback_parameter="callback"),this.options=e,window.__firebase_auth_jsonp=window.__firebase_auth_jsonp||{}}function Rg(e,t,n){setTimeout(function(){try{var r=document.createElement("script");r.type="text/javascript",r.id=e,r.async=!0,r.src=t,r.onerror=function(){var t=document.getElementById(e);null!==t&&t.parentNode.removeChild(t),n&&n(Mg("NETWORK_ERROR"))};var i=document.getElementsByTagName("head");(i&&0!=i.length?i[0]:document.documentElement).appendChild(r)}catch(a){n&&n(Mg("NETWORK_ERROR"))}},0)}function Sg(e,t,n,r){De.call(this,["auth_status"]),this.F=e,this.df=t,this.Vg=n,this.Le=r,this.sc=new wg(e,[xc,yc]),this.mb=null,this.Se=!1,Tg(this)}function Tg(e){yc.get("redirect_request_id")&&Ug(e);var t=e.sc.get();t&&t.token?(Vg(e,t),e.df(t.token,function(n,r){Wg(e,n,r,!1,t.token,t)},function(t,n){Xg(e,"resumeSession()",t,n)})):Vg(e,null)}function Yg(e,t,n,r,i,a){"firebaseio-demo.com"===e.F.domain&&O("Firebase authentication is not supported on demo Firebases (*.firebaseio-demo.com). To secure your Firebase, create a production Firebase at https://www.firebase.com."),e.df(t,function(a,o){Wg(e,a,o,!0,t,n,r||{},i)},function(t,n){Xg(e,"auth()",t,n,a)})}function Zg(e,t){e.sc.clear(),Vg(e,null),e.Vg(function(e,n){if("ok"===e)P(t,null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n),i=Error(i),i.code=r,P(t,i)}})}function Wg(e,t,n,r,i,a,o,s){"ok"===t?(r&&(t=n.auth,a.auth=t,a.expires=n.expires,a.token=bd(i)?i:"",n=null,t&&v(t,"uid")?n=w(t,"uid"):v(a,"uid")&&(n=w(a,"uid")),a.uid=n,n="custom",t&&v(t,"provider")?n=w(t,"provider"):v(a,"provider")&&(n=w(a,"provider")),a.provider=n,e.sc.clear(),bd(i)&&(o=o||{},n=xc,"sessionOnly"===o.remember&&(n=yc),"none"!==o.remember&&e.sc.set(a,n)),Vg(e,a)),P(s,null,a)):(e.sc.clear(),Vg(e,null),a=e=(t||"error").toUpperCase(),n&&(a+=": "+n),a=Error(a),a.code=e,P(s,a))}function Xg(e,t,n,r,i){O(t+" was canceled: "+r),e.sc.clear(),Vg(e,null),e=Error(r),e.code=n.toUpperCase(),P(i,e)}function $g(e,t,n,r,i){ah(e),n=new tg(r||{},{},n||{}),bh(e,[Og,Qg],"/auth/"+t,n,i)}function ch(e,t,n,r){ah(e);var i=[Ng,Pg];n=vg(n),"anonymous"===t||"password"===t?setTimeout(function(){P(r,Mg("TRANSPORT_UNAVAILABLE"))},0):(n.ee.window_features="menubar=yes,modal=yes,alwaysRaised=yeslocation=yes,resizable=yes,scrollbars=yes,status=yes,height=625,width=625,top="+("object"==typeof screen?.5*(screen.height-625):0)+",left="+("object"==typeof screen?.5*(screen.width-625):0),n.ee.relay_url=Hg(e.F.hc),n.ee.requestWithCredential=q(e.qc,e),bh(e,i,"/auth/"+t,n,r))}function Ug(e){var t=yc.get("redirect_request_id");if(t){var n=yc.get("redirect_client_options");yc.remove("redirect_request_id"),yc.remove("redirect_client_options");var r=[Og,Qg],t={requestId:t,requestKey:Fg(document.location.hash)},n=new tg(n,{},t);e.Se=!0;try{document.location.hash=document.location.hash.replace(/&__firebase_request_key=([a-zA-z0-9]*)/,"")}catch(i){}bh(e,r,"/auth/session",n,function(){this.Se=!1}.bind(e))}}function bh(e,t,n,r,i){dh(e,t,n,r,function(t,n){!t&&n&&n.token&&n.uid?Yg(e,n.token,n,r.od,function(e,t){e?P(i,e):P(i,null,t)}):P(i,t||Mg("UNKNOWN_ERROR"))})}function dh(e,t,n,r,i){t=Pa(t,function(e){return"function"==typeof e.isAvailable&&e.isAvailable()}),0===t.length?setTimeout(function(){P(i,Mg("TRANSPORT_UNAVAILABLE"))},0):(t=new(t.shift())(r.ee),r=jb(r.$a),r.v="js-"+hb,r.transport=t.Cc(),r.suppress_status_codes=!0,e=Gg()+"/"+e.F.hc+n,t.open(e,r,function(e,t){if(e)P(i,e);else if(t&&t.error){var n=Error(t.error.message);n.code=t.error.code,n.details=t.error.details,P(i,n)}else P(i,null,t)}))}function Vg(e,t){var n=null!==e.mb||null!==t;e.mb=t,n&&e.fe("auth_status",t),e.Le(null!==t)}function ah(e){var t=e.F;if("firebaseio.com"!==t.domain&&"firebaseio-demo.com"!==t.domain&&"auth.firebase.com"===sg)throw Error("This custom Firebase server ('"+e.F.domain+"') does not support delegated login.")}function eh(e){this.jc=e,this.Nd=[],this.Sb=0,this.qe=-1,this.Fb=null}function fh(e,t,n){e.qe=t,e.Fb=n,e.qe<e.Sb&&(e.Fb(),e.Fb=null)}function gh(e,t,n){for(e.Nd[t]=n;e.Nd[e.Sb];){var r=e.Nd[e.Sb];delete e.Nd[e.Sb];for(var i=0;i<r.length;++i)if(r[i]){var a=e;Db(function(){a.jc(r[i])})}if(e.Sb===e.qe){e.Fb&&(clearTimeout(e.Fb),e.Fb(),e.Fb=null);break}e.Sb++}}function hh(e,t,n,r){this.re=e,this.f=Mc(e),this.nb=this.ob=0,this.Ua=Rb(t),this.Qf=n,this.Hc=!1,this.Bb=r,this.jd=function(e){return Bc(t,Dc,e)}}function lh(e,t){var n=B(t).length;e.nb+=n,Ob(e.Ua,"bytes_received",n)}function kh(e,t,n,r){if(this.jd=r,this.hb=n,this.Pe=new pg,this.ad=[],this.te=Math.floor(1e8*Math.random()),this.Xd=!0,this.he=Ec(),window["pLPCommand"+this.he]=e,window["pRTLPCB"+this.he]=t,e=document.createElement("iframe"),e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Cb("No IE domain setting required")}catch(i){e.src="javascript:void((function(){document.open();document.domain='"+document.domain+"';document.close();})())"}e.contentDocument?e.eb=e.contentDocument:e.contentWindow?e.eb=e.contentWindow.document:e.document&&(e.eb=e.document),this.Ea=e,e="",this.Ea.src&&"javascript:"===this.Ea.src.substr(0,11)&&(e='<script>document.domain="'+document.domain+'";</script>'),e="<html><body>"+e+"</body></html>";try{this.Ea.eb.open(),this.Ea.eb.write(e),this.Ea.eb.close()}catch(a){Cb("frame writing exception"),a.stack&&Cb(a.stack),Cb(a)}}function nh(e){if(e.le&&e.Xd&&e.Pe.count()<(0<e.ad.length?2:1)){e.te++;var t={};t.id=e.ug,t.pw=e.vg,t.ser=e.te;for(var t=e.jd(t),n="",r=0;0<e.ad.length&&1870>=e.ad[0].kf.length+30+n.length;){var i=e.ad.shift(),n=n+"&seg"+r+"="+i.Mg+"&ts"+r+"="+i.Ug+"&d"+r+"="+i.kf;r++}return oh(e,t+n,e.te),!0}return!1}function oh(e,t,n){function r(){e.Pe.remove(n),nh(e)}e.Pe.add(n,1);var i=setTimeout(r,Math.floor(25e3));mh(e,t,function(){clearTimeout(i),r()})}function mh(e,t,n){setTimeout(function(){try{if(e.Xd){var r=e.Ea.eb.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=function(){Cb("Long-poll script failed to load: "+t),e.Xd=!1,e.close()},e.Ea.eb.body.appendChild(r)}}catch(i){}},Math.floor(1))}function qh(e,t,n,r){this.re=e,this.f=Mc(this.re),this.frames=this.Kc=null,this.nb=this.ob=this.bf=0,this.Ua=Rb(t),e={v:"5"},"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(e.r="f"),n&&(e.s=n),r&&(e.ls=r),this.ef=Bc(t,Cc,e)}function th(e,t){if(e.frames.push(t),e.frames.length==e.bf){var n=e.frames.join("");e.frames=null,n=nb(n),e.zg(n)}}function sh(e){clearInterval(e.Kc),e.Kc=setInterval(function(){e.ua&&e.ua.send("0"),sh(e)},Math.floor(45e3))}function uh(e){vh(this,e)}function vh(e,t){var n=qh&&qh.isAvailable(),r=n&&!(xc.wf||!0===xc.get("previous_websocket_failure"));if(t.Wg&&(n||O("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)e.gd=[qh];else{var i=e.gd=[];Wc(wh,function(e,t){t&&t.isAvailable()&&i.push(t)})}}function xh(e){if(0<e.gd.length)return e.gd[0];throw Error("No transports available")}function yh(e,t,n,r,i,a,o){this.id=e,this.f=Mc("c:"+this.id+":"),this.jc=n,this.Wc=r,this.la=i,this.Ne=a,this.F=t,this.Md=[],this.ff=0,this.Pf=new uh(t),this.Ta=0,this.Bb=o,this.f("Connection created"),zh(this)}function zh(e){var t=xh(e.Pf);e.J=new t("c:"+e.id+":"+e.ff++,e.F,void 0,e.Bb),e.Re=t.responsesRequiredToBeHealthy||0;var n=Ah(e,e.J),r=Bh(e,e.J);e.hd=e.J,e.cd=e.J,e.D=null,e.Ab=!1,setTimeout(function(){e.J&&e.J.open(n,r)},Math.floor(0)),t=t.healthyTimeout||0,t>0&&(e.yd=setTimeout(function(){e.yd=null,e.Ab||(e.J&&102400<e.J.nb?(e.f("Connection exceeded healthy timeout but has received "+e.J.nb+" bytes.  Marking connection healthy."),e.Ab=!0,e.J.Ed()):e.J&&10240<e.J.ob?e.f("Connection exceeded healthy timeout but has sent "+e.J.ob+" bytes.  Leaving connection alive."):(e.f("Closing unhealthy connection after timeout."),e.close()))},Math.floor(t)))}function Bh(e,t){return function(n){t===e.J?(e.J=null,n||0!==e.Ta?1===e.Ta&&e.f("Realtime connection lost."):(e.f("Realtime connection failed."),"s-"===e.F.Ya.substr(0,2)&&(xc.remove("host:"+e.F.host),e.F.Ya=e.F.host)),e.close()):t===e.D?(e.f("Secondary connection lost."),n=e.D,e.D=null,e.hd!==n&&e.cd!==n||e.close()):e.f("closing an old connection")}}function Ah(e,t){return function(n){if(2!=e.Ta)if(t===e.cd){var r=Tc("t",n);if(n=Tc("d",n),"c"==r){if(r=Tc("t",n),"d"in n)if(n=n.d,"h"===r){var r=n.ts,i=n.v,a=n.h;e.Nf=n.s,Ac(e.F,a),0==e.Ta&&(e.J.start(),Ch(e,e.J,r),"5"!==i&&O("Protocol version mismatch detected"),n=e.Pf,(n=1<n.gd.length?n.gd[1]:null)&&Dh(e,n))}else if("n"===r){for(e.f("recvd end transmission on primary"),e.cd=e.D,n=0;n<e.Md.length;++n)e.Id(e.Md[n]);e.Md=[],Eh(e)}else"s"===r?(e.f("Connection shutdown command received. Shutting down..."),e.Ne&&(e.Ne(n),e.Ne=null),e.la=null,e.close()):"r"===r?(e.f("Reset packet received.  New host: "+n),Ac(e.F,n),1===e.Ta?e.close():(Fh(e),zh(e))):"e"===r?Nc("Server Error: "+n):"o"===r?(e.f("got pong on primary."),Gh(e),Hh(e)):Nc("Unknown control packet command: "+r)}else"d"==r&&e.Id(n)}else if(t===e.D)if(r=Tc("t",n),n=Tc("d",n),"c"==r)"t"in n&&(n=n.t,"a"===n?Ih(e):"r"===n?(e.f("Got a reset on secondary, closing it"),e.D.close(),e.hd!==e.D&&e.cd!==e.D||e.close()):"o"===n&&(e.f("got pong on secondary."),e.Mf--,Ih(e)));else{if("d"!=r)throw Error("Unknown protocol layer: "+r);e.Md.push(n)}else e.f("message on old connection")}}function Eh(e){e.hd===e.D&&e.cd===e.D&&(e.f("cleaning up and promoting a connection: "+e.D.re),e.J=e.D,e.D=null)}function Ih(e){0>=e.Mf?(e.f("Secondary connection is healthy."),e.Ab=!0,e.D.Ed(),e.D.start(),e.f("sending client ack on secondary"),e.D.send({t:"c",d:{t:"a",d:{}}}),e.f("Ending transmission on primary"),e.J.send({t:"c",d:{t:"n",d:{}}}),e.hd=e.D,Eh(e)):(e.f("sending ping on secondary."),e.D.send({t:"c",d:{t:"p",d:{}}}))}function Gh(e){e.Ab||(e.Re--,0>=e.Re&&(e.f("Primary connection is healthy."),e.Ab=!0,e.J.Ed()))}function Dh(e,t){e.D=new t("c:"+e.id+":"+e.ff++,e.F,e.Nf),e.Mf=t.responsesRequiredToBeHealthy||0,e.D.open(Ah(e,e.D),Bh(e,e.D)),setTimeout(function(){e.D&&(e.f("Timed out trying to upgrade."),e.D.close())},Math.floor(6e4))}function Ch(e,t,n){e.f("Realtime connection established."),e.J=t,e.Ta=1,e.Wc&&(e.Wc(n,e.Nf),e.Wc=null),0===e.Re?(e.f("Primary connection is healthy."),e.Ab=!0):setTimeout(function(){Hh(e)},Math.floor(5e3))}function Hh(e){e.Ab||1!==e.Ta||(e.f("sending ping on primary."),Jh(e,{t:"c",d:{t:"p",d:{}}}))}function Jh(e,t){if(1!==e.Ta)throw"Connection is not connected";e.hd.send(t)}function Fh(e){e.f("Shutting down all connections"),e.J&&(e.J.close(),e.J=null),e.D&&(e.D.close(),e.D=null),e.yd&&(clearTimeout(e.yd),e.yd=null)}function Kh(e,t,n,r){this.id=Lh++,this.f=Mc("p:"+this.id+":"),this.xf=this.Ee=!1,this.$={},this.qa=[],this.Yc=0,this.Vc=[],this.oa=!1,this.Za=1e3,this.Fd=3e5,this.Gb=t,this.Uc=n,this.Oe=r,this.F=e,this.sb=this.Aa=this.Ia=this.Bb=this.We=null,this.Ob=!1,this.Td={},this.Lg=0,this.nf=!0,this.Lc=this.Ge=null,Mh(this,0),He.ub().Eb("visible",this.Cg,this),-1===e.host.indexOf("fblocal")&&Ge.ub().Eb("online",this.Ag,this)}function Oh(e,t){var n=t.Ig,r=n.path.toString(),i=n.va();e.f("Listen on "+r+" for "+i);var a={p:r};t.tag&&(a.q=ee(n.n),a.t=t.tag),a.h=t.xd(),e.Fa("q",a,function(a){var o=a.d,s=a.s;if(o&&"object"==typeof o&&v(o,"w")){var u=w(o,"w");ea(u)&&0<=Na(u,"no_index")&&O("Using an unspecified index. Consider adding "+('".indexOn": "'+n.n.g.toString()+'"')+" at "+n.path.toString()+" to your security rules for better performance")}(e.$[r]&&e.$[r][i])===t&&(e.f("listen response",a),"ok"!==s&&Ph(e,r,i),t.H&&t.H(s,o))})}function Qh(e){var t=e.Aa;e.oa&&t&&e.Fa("auth",{cred:t.ig},function(n){var r=n.s;n=n.d||"error","ok"!==r&&e.Aa===t&&delete e.Aa,t.of?"ok"!==r&&t.md&&t.md(r,n):(t.of=!0,t.zc&&t.zc(r,n))})}function Rh(e,t,n,r,i){n={p:n,d:r},e.f("onDisconnect "+t,n),e.Fa(t,n,function(e){i&&setTimeout(function(){i(e.s,e.d)},Math.floor(0))})}function Sh(e,t,r,i,a,o){i={p:r,d:i},n(o)&&(i.h=o),e.qa.push({action:t,Jf:i,H:a}),e.Yc++,t=e.qa.length-1,e.oa?Th(e,t):e.f("Buffering put: "+r)}function Th(e,t){var n=e.qa[t].action,r=e.qa[t].Jf,i=e.qa[t].H;e.qa[t].Jg=e.oa,e.Fa(n,r,function(r){e.f(n+" response",r),delete e.qa[t],e.Yc--,0===e.Yc&&(e.qa=[]),i&&i(r.s,r.d)})}function Mh(e,t){K(!e.Ia,"Scheduling a connect when we're already connected/ing?"),e.sb&&clearTimeout(e.sb),e.sb=setTimeout(function(){e.sb=null,Wh(e)},Math.floor(t))}function Wh(e){if(Xh(e)){e.f("Making a connection attempt"),e.Ge=(new Date).getTime(),e.Lc=null;var t=q(e.Id,e),n=q(e.Wc,e),r=q(e.Df,e),i=e.id+":"+Nh++;e.Ia=new yh(i,e.F,t,n,r,function(t){O(t+" ("+e.F.toString()+")"),e.xf=!0},e.Bb)}}function Uh(e,t,n){n=n?Qa(n,function(e){return Uc(e)}).join("$"):"default",(e=Ph(e,t,n))&&e.H&&e.H("permission_denied")}function Ph(e,t,r){t=new L(t).toString();var i;return n(e.$[t])?(i=e.$[t][r],delete e.$[t][r],0===pa(e.$[t])&&delete e.$[t]):i=void 0,i}function Vh(e){Qh(e),r(e.$,function(t){r(t,function(t){Oh(e,t)})});for(var t=0;t<e.qa.length;t++)e.qa[t]&&Th(e,t);for(;e.Vc.length;)t=e.Vc.shift(),Rh(e,t.action,t.$c,t.data,t.H)}function Xh(e){var t;return t=Ge.ub().kc,!e.xf&&!e.Ee&&t}function Q(e,t,n){this.A=e,this.W=t,this.g=n}function Yh(e,t){this.F=e,this.Ua=Rb(e),this.fd=null,this.da=new vb,this.Hd=1,this.Ra=null,t||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)?(this.ba=new Ae(this.F,q(this.Gb,this)),setTimeout(q(this.Uc,this,!0),0)):this.ba=this.Ra=new Kh(this.F,q(this.Gb,this),q(this.Uc,this),q(this.Oe,this)),this.Sg=Sb(e,q(function(){return new Mb(this.Ua,this.ba)},this)),this.uc=new Rf,this.Ce=new ob;var n=this;this.Cd=new vf({Xe:function(e,t,r,i){return t=[],r=n.Ce.j(e.path),r.e()||(t=xf(n.Cd,new Xb(bf,e.path,r)),setTimeout(function(){i("ok")},0)),t},ae:ba}),Zh(this,"connected",!1),this.la=new qc,this.M=new Sg(e,q(this.ba.M,this.ba),q(this.ba.ge,this.ba),q(this.Le,this)),this.sd=0,this.De=null,this.L=new vf({Xe:function(e,t,r,i){return n.ba.yf(e,r,t,function(t,r){var a=i(t,r);Ab(n.da,e.path,a)}),[]},ae:function(e,t){n.ba.Rf(e,t)}})}function $h(e){return e=e.Ce.j(new L(".info/serverTimeOffset")).I()||0,(new Date).getTime()+e}function ai(e){return e=e={timestamp:$h(e)},e.timestamp=e.timestamp||(new Date).getTime(),e}function Zh(e,t,n){t=new L("/.info/"+t),n=M(n);var r=e.Ce;r.Wd=r.Wd.G(t,n),n=xf(e.Cd,new Xb(bf,t,n)),Ab(e.da,t,n)}function ci(e){e.f("onDisconnectEvents");var t=ai(e),n=[];rc(pc(e.la,t),G,function(t,r){n=n.concat(xf(e.L,new Xb(bf,t,r)));var i=ei(e,t);bi(e,i)}),e.la=new qc,Ab(e.da,G,n)}function fi(e,t,n,r){var i=M(n);e.ba.Me(t.toString(),i.I(!0),function(n,a){"ok"===n&&e.la.nc(t,i),di(r,n,a)})}function gi(e,t,n,r,i){var a=M(n,r);e.ba.Me(t.toString(),a.I(!0),function(n,r){"ok"===n&&e.la.nc(t,a),di(i,n,r)})}function hi(e,t,n,r){var i,a=!0;for(i in n)a=!1;a?(Cb("onDisconnect().update() called with empty data.  Don't do anything."),di(r,"ok")):e.ba.Cf(t.toString(),n,function(i,a){if("ok"===i)for(var o in n){var s=M(n[o]);e.la.nc(t.u(o),s)}di(r,i,a)})}function ii(e,t,n){n=".info"===E(t.path)?e.Cd.Pb(t,n):e.L.Pb(t,n),yb(e.da,t.path,n)}function di(e,t,n){e&&Db(function(){if("ok"==t)e(null);else{var r=(t||"error").toUpperCase(),i=r;n&&(i+=": "+n),i=Error(i),i.code=r,e(i)}})}function ji(e,t,r,i,a){function o(){}e.f("transaction on "+t);var s=new U(e,t);if(s.Eb("value",o),r={path:t,update:r,H:i,status:null,Ff:Ec(),cf:a,Lf:0,ie:function(){s.ic("value",o)},ke:null,Ba:null,pd:null,qd:null,rd:null},i=e.L.za(t,void 0)||C,r.pd=i,i=r.update(i.I()),n(i)){cg("transaction failed: Data returned ",i,r.path),r.status=1,a=Sf(e.uc,t);var u=a.Ca()||[];u.push(r),Tf(a,u),"object"==typeof i&&null!==i&&v(i,".priority")?(u=w(i,".priority"),K(ag(u),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):u=(e.L.za(t)||C).C().I(),a=ai(e),i=M(i,u),a=sc(i,a),r.qd=i,r.rd=a,r.Ba=e.Hd++,r=wf(e.L,t,a,r.Ba,r.cf),Ab(e.da,t,r),ki(e)}else r.ie(),r.qd=null,r.rd=null,r.H&&(e=new Q(r.pd,new U(e,r.path),N),r.H(null,!1,e))}function ki(e,t){var n=t||e.uc;if(t||li(e,n),null!==n.Ca()){var r=mi(e,n);K(0<r.length,"Sending zero length transaction queue"),Sa(r,function(e){return 1===e.status})&&ni(e,n.path(),r)}else n.wd()&&n.P(function(t){ki(e,t)})}function ni(e,t,n){for(var r=Qa(n,function(e){return e.Ba}),i=e.L.za(t,r)||C,r=i,i=i.hash(),a=0;a<n.length;a++){var o=n[a];K(1===o.status,"tryToSendTransactionQueue_: items in queue should all be run."),o.status=2,o.Lf++;var s=T(t,o.path),r=r.G(s,o.qd)}r=r.I(!0),e.ba.put(t.toString(),r,function(r){e.f("transaction put response",{path:t.toString(),status:r});var i=[];if("ok"===r){for(r=[],a=0;a<n.length;a++){if(n[a].status=3,i=i.concat(zf(e.L,n[a].Ba)),n[a].H){var o=n[a].rd,s=new U(e,n[a].path);r.push(q(n[a].H,null,null,!0,new Q(o,s,N)))}n[a].ie()}for(li(e,Sf(e.uc,t)),ki(e),Ab(e.da,t,i),a=0;a<r.length;a++)Db(r[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)n[a].status=4===n[a].status?5:1;else for(O("transaction at "+t.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=5,n[a].ke=r;bi(e,t)}},i)}function bi(e,t){var n=oi(e,t),r=n.path(),n=mi(e,n);return pi(e,n,r),r}function pi(e,t,r){if(0!==t.length){for(var i=[],a=[],o=Qa(t,function(e){return e.Ba}),s=0;s<t.length;s++){var u,l=t[s],c=T(r,l.path),f=!1;if(K(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),5===l.status)f=!0,u=l.ke,a=a.concat(zf(e.L,l.Ba,!0));else if(1===l.status)if(25<=l.Lf)f=!0,u="maxretry",a=a.concat(zf(e.L,l.Ba,!0));else{var h=e.L.za(l.path,o)||C;l.pd=h;var p=t[s].update(h.I());n(p)?(cg("transaction failed: Data returned ",p,l.path),c=M(p),"object"==typeof p&&null!=p&&v(p,".priority")||(c=c.ga(h.C())),h=l.Ba,p=ai(e),p=sc(c,p),l.qd=c,l.rd=p,l.Ba=e.Hd++,Va(o,h),a=a.concat(wf(e.L,l.path,p,l.Ba,l.cf)),a=a.concat(zf(e.L,h,!0))):(f=!0,u="nodata",a=a.concat(zf(e.L,l.Ba,!0)))}Ab(e.da,r,a),a=[],f&&(t[s].status=3,setTimeout(t[s].ie,Math.floor(0)),t[s].H&&("nodata"===u?(l=new U(e,t[s].path),i.push(q(t[s].H,null,null,!1,new Q(t[s].pd,l,N)))):i.push(q(t[s].H,null,Error(u),!1,null))))}for(li(e,e.uc),s=0;s<i.length;s++)Db(i[s]);ki(e)}}function oi(e,t){for(var n,r=e.uc;null!==(n=E(t))&&null===r.Ca();)r=Sf(r,n),t=H(t);return r}function mi(e,t){var n=[];return qi(e,t,n),n.sort(function(e,t){return e.Ff-t.Ff}),n}function qi(e,t,n){var r=t.Ca();if(null!==r)for(var i=0;i<r.length;i++)n.push(r[i]);t.P(function(t){qi(e,t,n)})}function li(e,t){var n=t.Ca();if(n){for(var r=0,i=0;i<n.length;i++)3!==n[i].status&&(n[r]=n[i],r++);n.length=r,Tf(t,0<n.length?n:null)}t.P(function(t){li(e,t)})}function ei(e,t){var n=oi(e,t).path(),r=Sf(e.uc,t);return Wf(r,function(t){ri(e,t)}),ri(e,r),Vf(r,function(t){ri(e,t)}),n}function ri(e,t){var n=t.Ca();if(null!==n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)4!==n[o].status&&(2===n[o].status?(K(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=4,n[o].ke="set"):(K(1===n[o].status,"Unexpected transaction status in abort"),n[o].ie(),i=i.concat(zf(e.L,n[o].Ba,!0)),n[o].H&&r.push(q(n[o].H,null,Error("set"),!1,null))));for(-1===a?Tf(t,null):n.length=a+1,
Ab(e.da,t.path(),i),o=0;o<r.length;o++)Db(r[o])}}function W(){this.oc={},this.Sf=!1}function X(e,t){this.bd=e,this.ra=t}function Y(e,t,n,r){this.k=e,this.path=t,this.n=n,this.lc=r}function si(e){var t=null,n=null;if(e.ma&&(t=nd(e)),e.pa&&(n=pd(e)),e.g===Qd){if(e.ma){if("[MIN_NAME]"!=md(e))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if("string"!=typeof t)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.")}if(e.pa){if("[MAX_NAME]"!=od(e))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if("string"!=typeof n)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.")}}else if(e.g===N){if(null!=t&&!ag(t)||null!=n&&!ag(n))throw Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(K(e.g instanceof Ud||e.g===$d,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")}function ti(e){if(e.ma&&e.pa&&e.ja&&(!e.ja||""===e.Nb))throw Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")}function ui(e,t){if(!0===e.lc)throw Error(t+": You can't combine multiple orderBy calls.")}function vi(e,t,n){var r={cancel:null,Ma:null};if(t&&n)r.cancel=t,A(e,3,r.cancel,!0),r.Ma=n,mb(e,4,r.Ma);else if(t)if("object"==typeof t&&null!==t)r.Ma=t;else{if("function"!=typeof t)throw Error(y(e,3,!0)+" must either be a cancel callback or a context object.");r.cancel=t}return r}function U(e,t){var n,r,i;if(e instanceof Yh)n=e,r=t;else{x("new Firebase",1,2,arguments.length),r=Pc(arguments[0]),n=r.Tg,"firebase"===r.domain&&Oc(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!=n||Oc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.kb||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&O("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),n=new zc(r.host,r.kb,n,"ws"===r.scheme||"wss"===r.scheme),r=new L(r.$c),i=r.toString();var a;if(!(a=!p(n.host)||0===n.host.length||!$f(n.hc))&&(a=0!==i.length)&&(i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),a=!(p(i)&&0!==i.length&&!Yf.test(i))),a)throw Error(y("new Firebase",1,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".');if(t)if(t instanceof W)i=t;else{if(!p(t))throw Error("Expected a valid Firebase.Context for second argument to new Firebase()");i=W.ub(),n.Od=t}else i=W.ub();a=n.toString();var o=w(i.oc,a);o||(o=new Yh(n,i.Sf),i.oc[a]=o),n=o}Y.call(this,n,r,be,!1)}function Lc(e,t){K(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?("undefined"!=typeof console&&("function"==typeof console.log?Bb=q(console.log,console):"object"==typeof console.log&&(Bb=function(e){console.log(e)})),t&&yc.set("logging_enabled",!0)):e?Bb=e:(Bb=null,yc.remove("logging_enabled"))}var g,aa=this,la=Date.now||function(){return+new Date},ya="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),Ea={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\x0B":"\\u000b"},Fa=/\uffff/.test("")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g,Ha;e:{var Ia=aa.navigator;if(Ia){var Ja=Ia.userAgent;if(Ja){Ha=Ja;break e}}Ha=""}ma(La,Ka),La.prototype.reset=function(){this.N[0]=1732584193,this.N[1]=4023233417,this.N[2]=2562383102,this.N[3]=271733878,this.N[4]=3285377520,this.de=this.ac=0},La.prototype.update=function(e,t){if(null!=e){n(t)||(t=e.length);for(var r=t-this.Va,i=0,a=this.me,o=this.ac;t>i;){if(0==o)for(;r>=i;)Ma(this,e,i),i+=this.Va;if(p(e)){for(;t>i;)if(a[o]=e.charCodeAt(i),++o,++i,o==this.Va){Ma(this,a),o=0;break}}else for(;t>i;)if(a[o]=e[i],++o,++i,o==this.Va){Ma(this,a),o=0;break}}this.ac=o,this.de+=t}};var u=Array.prototype,Na=u.indexOf?function(e,t,n){return u.indexOf.call(e,t,n)}:function(e,t,n){if(n=null==n?0:0>n?Math.max(0,e.length+n):n,p(e))return p(t)&&1==t.length?e.indexOf(t,n):-1;for(;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Oa=u.forEach?function(e,t,n){u.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=p(e)?e.split(""):e,a=0;r>a;a++)a in i&&t.call(n,i[a],a,e)},Pa=u.filter?function(e,t,n){return u.filter.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=[],a=0,o=p(e)?e.split(""):e,s=0;r>s;s++)if(s in o){var u=o[s];t.call(n,u,s,e)&&(i[a++]=u)}return i},Qa=u.map?function(e,t,n){return u.map.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=Array(r),a=p(e)?e.split(""):e,o=0;r>o;o++)o in a&&(i[o]=t.call(n,a[o],o,e));return i},Ra=u.reduce?function(e,t,n,r){for(var i=[],a=1,o=arguments.length;o>a;a++)i.push(arguments[a]);return r&&(i[0]=q(t,r)),u.reduce.apply(e,i)}:function(e,t,n,r){var i=n;return Oa(e,function(n,a){i=t.call(r,i,n,a,e)}),i},Sa=u.every?function(e,t,n){return u.every.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=p(e)?e.split(""):e,a=0;r>a;a++)if(a in i&&!t.call(n,i[a],a,e))return!1;return!0},Za=-1!=Ha.indexOf("Opera")||-1!=Ha.indexOf("OPR"),$a=-1!=Ha.indexOf("Trident")||-1!=Ha.indexOf("MSIE"),ab=-1!=Ha.indexOf("Gecko")&&-1==Ha.toLowerCase().indexOf("webkit")&&!(-1!=Ha.indexOf("Trident")||-1!=Ha.indexOf("MSIE")),bb=-1!=Ha.toLowerCase().indexOf("webkit");!function(){var e,t="";return Za&&aa.opera?(t=aa.opera.version,ha(t)?t():t):(ab?e=/rv\:([^\);]+)(\)|;)/:$a?e=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:bb&&(e=/WebKit\/(\S+)/),e&&(t=(t=e.exec(Ha))?t[1]:""),$a&&(e=(e=aa.document)?e.documentMode:void 0,e>parseFloat(t))?String(e):t)}();var cb=null,db=null,eb=null,hb=hb||"2.3.2";ob.prototype.j=function(e){return this.Wd.Q(e)},ob.prototype.toString=function(){return this.Wd.toString()},pb.prototype.qf=function(){return null},pb.prototype.ye=function(){return null};var qb=new pb;rb.prototype.qf=function(e){var t=this.Ka.O;return sb(t,e)?t.j().R(e):(t=null!=this.Kd?new tb(this.Kd,!0,!1):this.Ka.w(),this.Tf.xc(e,t))},rb.prototype.ye=function(e,t,n){var r=null!=this.Kd?this.Kd:ub(this.Ka);return e=this.Tf.ne(r,t,1,n,e),0===e.length?null:e[0]},xb.prototype.add=function(e){this.vd.push(e)},xb.prototype.Zb=function(){return this.ra};var Fb="value";Gb.prototype.Zb=function(){var e=this.Zd.Ib();return"value"===this.ud?e.path:e.parent().path},Gb.prototype.ze=function(){return this.ud},Gb.prototype.Vb=function(){return this.ue.Vb(this)},Gb.prototype.toString=function(){return this.Zb().toString()+":"+this.ud+":"+B(this.Zd.mf())},Hb.prototype.Zb=function(){return this.path},Hb.prototype.ze=function(){return"cancel"},Hb.prototype.Vb=function(){return this.ue.Vb(this)},Hb.prototype.toString=function(){return this.path.toString()+":cancel"},tb.prototype.j=function(){return this.A},Lb.prototype.get=function(){var e=this.gg.get(),t=xa(e);if(this.Dd)for(var n in this.Dd)t[n]-=this.Dd[n];return this.Dd=e,t},Mb.prototype.If=function(){var e,t=this.fd.get(),n={},r=!1;for(e in t)0<t[e]&&v(this.Of,e)&&(n[e]=t[e],r=!0);r&&this.ba.Ue(n),setTimeout(q(this.If,this),Math.floor(6e5*Math.random()))},Nb.prototype.get=function(){return xa(this.Ec)};var Pb={},Qb={};Xb.prototype.Xc=function(e){return this.path.e()?new Xb(this.source,G,this.Ga.R(e)):new Xb(this.source,H(this.path),this.Ga)},Xb.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" overwrite: "+this.Ga.toString()+")"},Zb.prototype.Xc=function(){return this.path.e()?new Zb(this.source,G):new Zb(this.source,H(this.path))},Zb.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" listen_complete)"},g=ac.prototype,g.Oa=function(e,t){return new ac(this.La,this.wa.Oa(e,t,this.La).Y(null,null,!1,null,null))},g.remove=function(e){return new ac(this.La,this.wa.remove(e,this.La).Y(null,null,!1,null,null))},g.get=function(e){for(var t,n=this.wa;!n.e();){if(t=this.La(e,n.key),0===t)return n.value;0>t?n=n.left:t>0&&(n=n.right)}return null},g.e=function(){return this.wa.e()},g.count=function(){return this.wa.count()},g.Sc=function(){return this.wa.Sc()},g.fc=function(){return this.wa.fc()},g.ia=function(e){return this.wa.ia(e)},g.Xb=function(e){return new dc(this.wa,null,this.La,!1,e)},g.Yb=function(e,t){return new dc(this.wa,e,this.La,!1,t)},g.$b=function(e,t){return new dc(this.wa,e,this.La,!0,t)},g.sf=function(e){return new dc(this.wa,null,this.La,!0,e)},g=fc.prototype,g.Y=function(e,t,n,r,i){return new fc(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},g.count=function(){return this.left.count()+1+this.right.count()},g.e=function(){return!1},g.ia=function(e){return this.left.ia(e)||e(this.key,this.value)||this.right.ia(e)},g.Sc=function(){return gc(this).key},g.fc=function(){return this.right.e()?this.key:this.right.fc()},g.Oa=function(e,t,n){var r,i;return i=this,r=n(e,i.key),i=0>r?i.Y(null,null,null,i.left.Oa(e,t,n),null):0===r?i.Y(null,t,null,null,null):i.Y(null,null,null,null,i.right.Oa(e,t,n)),hc(i)},g.remove=function(e,t){var n,r;if(n=this,0>t(e,n.key))n.left.e()||n.left.fa()||n.left.left.fa()||(n=jc(n)),n=n.Y(null,null,null,n.left.remove(e,t),null);else{if(n.left.fa()&&(n=kc(n)),n.right.e()||n.right.fa()||n.right.left.fa()||(n=lc(n),n.left.left.fa()&&(n=kc(n),n=lc(n))),0===t(e,n.key)){if(n.right.e())return bc;r=gc(n.right),n=n.Y(r.key,r.value,null,null,ic(n.right))}n=n.Y(null,null,null,null,n.right.remove(e,t))}return hc(n)},g.fa=function(){return this.color},g=nc.prototype,g.Y=function(){return this},g.Oa=function(e,t){return new fc(e,t,null)},g.remove=function(){return this},g.count=function(){return 0},g.e=function(){return!0},g.ia=function(){return!1},g.Sc=function(){return null},g.fc=function(){return null},g.fa=function(){return!1};var bc=new nc;uc.prototype.set=function(e,t){null==t?delete this.wc[e]:this.wc[e]=t},uc.prototype.get=function(e){return v(this.wc,e)?this.wc[e]:null},uc.prototype.remove=function(e){delete this.wc[e]},uc.prototype.wf=!0,g=vc.prototype,g.set=function(e,t){null==t?this.Fc.removeItem(this.Pd+e):this.Fc.setItem(this.Pd+e,B(t))},g.get=function(e){return e=this.Fc.getItem(this.Pd+e),null==e?null:nb(e)},g.remove=function(e){this.Fc.removeItem(this.Pd+e)},g.wf=!1,g.toString=function(){return this.Fc.toString()};var xc=wc("localStorage"),yc=wc("sessionStorage");zc.prototype.toString=function(){var e=(this.kb?"https://":"http://")+this.host;return this.Od&&(e+="<"+this.Od+">"),e};var Ec=function(){var e=1;return function(){return e++}}(),Bb=null,Kc=!0,Yc=/^-?\d{1,10}$/;cd.prototype.hg=function(e,t){if(null==e.Wa||null==t.Wa)throw Fc("Should only compare child_ events.");return this.g.compare(new F(e.Wa,e.Ja),new F(t.Wa,t.Ja))},g=id.prototype,g.Kf=function(e){return"value"===e},g.createEvent=function(e,t){var n=t.n.g;return new Gb("value",this,new Q(e.Ja,t.Ib(),n))},g.Vb=function(e){var t=this.rb;if("cancel"===e.ze()){K(this.pb,"Raising a cancel event on a listener with no cancel callback");var n=this.pb;return function(){n.call(t,e.error)}}var r=this.Rb;return function(){r.call(t,e.Zd)}},g.gf=function(e,t){return this.pb?new Hb(this,e,t):null},g.matches=function(e){return e instanceof id?e.Rb&&this.Rb?e.Rb===this.Rb&&e.rb===this.rb:!0:!1},g.tf=function(){return null!==this.Rb},g=jd.prototype,g.Kf=function(e){return e="children_added"===e?"child_added":e,("children_removed"===e?"child_removed":e)in this.ha},g.gf=function(e,t){return this.pb?new Hb(this,e,t):null},g.createEvent=function(e,t){K(null!=e.Wa,"Child events should have a childName.");var n=t.Ib().u(e.Wa);return new Gb(e.type,this,new Q(e.Ja,n,t.n.g),e.Qd)},g.Vb=function(e){var t=this.rb;if("cancel"===e.ze()){K(this.pb,"Raising a cancel event on a listener with no cancel callback");var n=this.pb;return function(){n.call(t,e.error)}}var r=this.ha[e.ud];return function(){r.call(t,e.Zd,e.Qd)}},g.matches=function(e){if(e instanceof jd){if(!this.ha||!e.ha)return!0;if(this.rb===e.rb){var t=pa(e.ha);if(t===pa(this.ha)){if(1===t){var t=qa(e.ha),n=qa(this.ha);return!(n!==t||e.ha[t]&&this.ha[n]&&e.ha[t]!==this.ha[n])}return oa(this.ha,function(t,n){return e.ha[n]===t})}}}return!1},g.tf=function(){return null!==this.ha},g=kd.prototype,g.G=function(e,t,n,r,i,a){return K(e.Jc(this.g),"A node must be indexed if only a child is updated"),i=e.R(t),i.Q(r).ca(n.Q(r))&&i.e()==n.e()?e:(null!=a&&(n.e()?e.Da(t)?hd(a,new D("child_removed",i,t)):K(e.K(),"A child remove without an old child only makes sense on a leaf node"):i.e()?hd(a,new D("child_added",n,t)):hd(a,new D("child_changed",n,t,i))),e.K()&&n.e()?e:e.U(t,n).lb(this.g))},g.xa=function(e,t,n){return null!=n&&(e.K()||e.P(N,function(e,r){t.Da(e)||hd(n,new D("child_removed",r,e))}),t.K()||t.P(N,function(t,r){if(e.Da(t)){var i=e.R(t);i.ca(r)||hd(n,new D("child_changed",r,t,i))}else hd(n,new D("child_added",r,t))})),t.lb(this.g)},g.ga=function(e,t){return e.e()?C:e.ga(t)},g.Na=function(){return!1},g.Wb=function(){return this},g=ld.prototype,g.matches=function(e){return 0>=this.g.compare(this.ed,e)&&0>=this.g.compare(e,this.Gc)},g.G=function(e,t,n,r,i,a){return this.matches(new F(t,n))||(n=C),this.Be.G(e,t,n,r,i,a)},g.xa=function(e,t,n){t.K()&&(t=C);var r=t.lb(this.g),r=r.ga(C),i=this;return t.P(N,function(e,t){i.matches(new F(e,t))||(r=r.U(e,C))}),this.Be.xa(e,r,n)},g.ga=function(e){return e},g.Na=function(){return!0},g.Wb=function(){return this.Be},g=qd.prototype,g.G=function(e,t,n,r,i,a){return this.sa.matches(new F(t,n))||(n=C),e.R(t).ca(n)?e:e.Db()<this.ka?this.sa.Wb().G(e,t,n,r,i,a):sd(this,e,t,n,i,a)},g.xa=function(e,t,n){var r;if(t.K()||t.e())r=C.lb(this.g);else if(2*this.ka<t.Db()&&t.Jc(this.g)){r=C.lb(this.g),t=this.Jb?t.$b(this.sa.Gc,this.g):t.Yb(this.sa.ed,this.g);for(var i=0;0<t.Pa.length&&i<this.ka;){var a,o=J(t);if(!(a=this.Jb?0>=this.g.compare(this.sa.ed,o):0>=this.g.compare(o,this.sa.Gc)))break;r=r.U(o.name,o.S),i++}}else{r=t.lb(this.g),r=r.ga(C);var s,u,l;if(this.Jb){t=r.sf(this.g),s=this.sa.Gc,u=this.sa.ed;var c=td(this.g);l=function(e,t){return c(t,e)}}else t=r.Xb(this.g),s=this.sa.ed,u=this.sa.Gc,l=td(this.g);for(var i=0,f=!1;0<t.Pa.length;)o=J(t),!f&&0>=l(s,o)&&(f=!0),(a=f&&i<this.ka&&0>=l(o,u))?i++:r=r.U(o.name,C)}return this.sa.Wb().xa(e,r,n)},g.ga=function(e){return e},g.Na=function(){return!0},g.Wb=function(){return this.sa.Wb()},xd.prototype.ab=function(e,t,n,r){var i,a=new gd;if(t.type===Yb)t.source.we?n=yd(this,e,t.path,t.Ga,n,r,a):(K(t.source.pf,"Unknown source."),i=t.source.af||Jb(e.w())&&!t.path.e(),n=Ad(this,e,t.path,t.Ga,n,r,i,a));else if(t.type===Bd)t.source.we?n=Cd(this,e,t.path,t.children,n,r,a):(K(t.source.pf,"Unknown source."),i=t.source.af||Jb(e.w()),n=Dd(this,e,t.path,t.children,n,r,i,a));else if(t.type===Ed)if(t.Vd)if(t=t.path,null!=n.tc(t))n=e;else{if(i=new rb(n,e,r),r=e.O.j(),t.e()||".priority"===E(t))Ib(e.w())?t=n.za(ub(e)):(t=e.w().j(),K(t instanceof R,"serverChildren would be complete if leaf node"),t=n.yc(t)),t=this.V.xa(r,t,a);else{var o=E(t),s=n.xc(o,e.w());null==s&&sb(e.w(),o)&&(s=r.R(o)),t=null!=s?this.V.G(r,o,s,H(t),i,a):e.O.j().Da(o)?this.V.G(r,o,C,H(t),i,a):r,t.e()&&Ib(e.w())&&(r=n.za(ub(e)),r.K()&&(t=this.V.xa(t,r,a)))}r=Ib(e.w())||null!=n.tc(G),n=Fd(e,t,r,this.V.Na())}else n=Gd(this,e,t.path,t.Qb,n,r,a);else{if(t.type!==$b)throw Fc("Unknown operation type: "+t.type);r=t.path,t=e.w(),i=t.j(),o=t.ea||r.e(),n=Hd(this,new Id(e.O,new tb(i,o,t.Ub)),r,n,qb,a)}return a=ra(a.bb),r=n,t=r.O,t.ea&&(i=t.j().K()||t.j().e(),o=Jd(e),(0<a.length||!e.O.ea||i&&!t.j().ca(o)||!t.j().C().ca(o.C()))&&a.push(Eb(Jd(r)))),new wd(n,a)};var Sd={};Rd.prototype.Ad=function(e,t){return 0!==this.compare(new F("[MIN_NAME]",e),new F("[MIN_NAME]",t))},Rd.prototype.Tc=function(){return Td},ma(Ud,Rd),g=Ud.prototype,g.Ic=function(e){return!e.Q(this.cc).e()},g.compare=function(e,t){var n=e.S.Q(this.cc),r=t.S.Q(this.cc),n=n.Dc(r);return 0===n?Vb(e.name,t.name):n},g.Pc=function(e,t){var n=M(e),n=C.G(this.cc,n);return new F(t,n)},g.Qc=function(){var e=C.G(this.cc,Vd);return new F("[MAX_NAME]",e)},g.toString=function(){return this.cc.slice().join("/")},ma(Wd,Rd),g=Wd.prototype,g.compare=function(e,t){var n=e.S.C(),r=t.S.C(),n=n.Dc(r);return 0===n?Vb(e.name,t.name):n},g.Ic=function(e){return!e.C().e()},g.Ad=function(e,t){return!e.C().ca(t.C())},g.Tc=function(){return Td},g.Qc=function(){return new F("[MAX_NAME]",new tc("[PRIORITY-POST]",Vd))},g.Pc=function(e,t){var n=M(e);return new F(t,new tc("[PRIORITY-POST]",n))},g.toString=function(){return".priority"};var N=new Wd;ma(Xd,Rd),g=Xd.prototype,g.compare=function(e,t){return Vb(e.name,t.name)},g.Ic=function(){throw Fc("KeyIndex.isDefinedOn not expected to be called.")},g.Ad=function(){return!1},g.Tc=function(){return Td},g.Qc=function(){return new F("[MAX_NAME]",C)},g.Pc=function(e){return K(p(e),"KeyIndex indexValue must always be a string."),new F(e,C)},g.toString=function(){return".key"};var Qd=new Xd;ma(Yd,Rd),g=Yd.prototype,g.compare=function(e,t){var n=e.S.Dc(t.S);return 0===n?Vb(e.name,t.name):n},g.Ic=function(){return!0},g.Ad=function(e,t){return!e.ca(t)},g.Tc=function(){return Td},g.Qc=function(){return Zd},g.Pc=function(e,t){var n=M(e);return new F(t,n)},g.toString=function(){return".value"};var $d=new Yd,be=new ae;g=ae.prototype,g.He=function(e){var t=ce(this);return t.ja=!0,t.ka=e,t.Nb="",t},g.Ie=function(e){var t=ce(this);return t.ja=!0,t.ka=e,t.Nb="l",t},g.Je=function(e){var t=ce(this);return t.ja=!0,t.ka=e,t.Nb="r",t},g.$d=function(e,t){var r=ce(this);return r.ma=!0,n(e)||(e=null),r.ec=e,null!=t?(r.Lb=!0,r.xb=t):(r.Lb=!1,r.xb=""),r},g.td=function(e,t){var r=ce(this);return r.pa=!0,n(e)||(e=null),r.bc=e,n(t)?(r.Tb=!0,r.vb=t):(r.ah=!1,r.vb=""),r},g.toString=function(){return B(ee(this))},he.prototype.get=function(e){var t=w(this.Bd,e);if(!t)throw Error("No index defined for "+e);return t===Sd?null:t};var le=new he({".priority":Sd},{".priority":N}),ne=["object","boolean","number","string"];g=tc.prototype,g.K=function(){return!0},g.C=function(){return this.aa},g.ga=function(e){return new tc(this.B,e)},g.R=function(e){return".priority"===e?this.aa:C},g.Q=function(e){return e.e()?this:".priority"===E(e)?this.aa:C},g.Da=function(){return!1},g.rf=function(){return null},g.U=function(e,t){return".priority"===e?this.ga(t):t.e()&&".priority"!==e?this:C.U(e,t).ga(this.aa)},g.G=function(e,t){var n=E(e);return null===n?t:t.e()&&".priority"!==n?this:(K(".priority"!==n||1===Kd(e),".priority must be the last token in a path"),this.U(n,C.G(H(e),t)))},g.e=function(){return!1},g.Db=function(){return 0},g.P=function(){return!1},g.I=function(e){return e&&!this.C().e()?{".value":this.Ca(),".priority":this.C().I()}:this.Ca()},g.hash=function(){if(null===this.Cb){var e="";this.aa.e()||(e+="priority:"+oe(this.aa.I())+":");var t=typeof this.B,e=e+(t+":"),e="number"===t?e+Xc(this.B):e+this.B;this.Cb=Hc(e)}return this.Cb},g.Ca=function(){return this.B},g.Dc=function(e){if(e===C)return 1;if(e instanceof R)return-1;K(e.K(),"Unknown node type");var t=typeof e.B,n=typeof this.B,r=Na(ne,t),i=Na(ne,n);return K(r>=0,"Unknown leaf type: "+t),K(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.B<e.B?-1:this.B===e.B?0:1:i-r},g.lb=function(){return this},g.Jc=function(){return!0},g.ca=function(e){return e===this?!0:e.K()?this.B===e.B&&this.aa.ca(e.aa):!1},g.toString=function(){return B(this.I(!0))},g=R.prototype,g.K=function(){return!1},g.C=function(){return this.aa||C},g.ga=function(e){return this.m.e()?this:new R(this.m,e,this.wb)},g.R=function(e){return".priority"===e?this.C():(e=this.m.get(e),null===e?C:e)},g.Q=function(e){var t=E(e);return null===t?this:this.R(t).Q(H(e))},g.Da=function(e){return null!==this.m.get(e)},g.U=function(e,t){if(K(t,"We should always be passing snapshot nodes"),".priority"===e)return this.ga(t);var n,r,i=new F(e,t);return t.e()?(n=this.m.remove(e),i=ke(this.wb,i,this.m)):(n=this.m.Oa(e,t),i=ie(this.wb,i,this.m)),r=n.e()?C:this.aa,new R(n,r,i)},g.G=function(e,t){var n=E(e);if(null===n)return t;K(".priority"!==E(e)||1===Kd(e),".priority must be the last token in a path");var r=this.R(n).G(H(e),t);return this.U(n,r)},g.e=function(){return this.m.e()},g.Db=function(){return this.m.count()};var pe=/^(0|[1-9]\d*)$/;g=R.prototype,g.I=function(e){if(this.e())return null;var t={},n=0,r=0,i=!0;if(this.P(N,function(a,o){t[a]=o.I(e),n++,i&&pe.test(a)?r=Math.max(r,Number(a)):i=!1}),!e&&i&&2*n>r){var a,o=[];for(a in t)o[a]=t[a];return o}return e&&!this.C().e()&&(t[".priority"]=this.C().I()),t},g.hash=function(){if(null===this.Cb){var e="";this.C().e()||(e+="priority:"+oe(this.C().I())+":"),this.P(N,function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)}),this.Cb=""===e?"":Hc(e)}return this.Cb},g.rf=function(e,t,n){return(n=qe(this,n))?(e=cc(n,new F(e,t)))?e.name:null:cc(this.m,e)},g.P=function(e,t){var n=qe(this,e);return n?n.ia(function(e){return t(e.name,e.S)}):this.m.ia(t)},g.Xb=function(e){return this.Yb(e.Tc(),e)},g.Yb=function(e,t){var n=qe(this,t);if(n)return n.Yb(e,function(e){return e});for(var n=this.m.Yb(e.name,Tb),r=ec(n);null!=r&&0>t.compare(r,e);)J(n),r=ec(n);return n},g.sf=function(e){return this.$b(e.Qc(),e)},g.$b=function(e,t){var n=qe(this,t);if(n)return n.$b(e,function(e){return e});for(var n=this.m.$b(e.name,Tb),r=ec(n);null!=r&&0<t.compare(r,e);)J(n),r=ec(n);return n},g.Dc=function(e){return this.e()?e.e()?0:-1:e.K()||e.e()?1:e===Vd?-1:0},g.lb=function(e){if(e===Qd||ta(this.wb.dc,e.toString()))return this;var t=this.wb,n=this.m;K(e!==Qd,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r=[],i=!1,n=n.Xb(Tb),a=J(n);a;)i=i||e.Ic(a.S),r.push(a),a=J(n);return r=i?je(r,td(e)):Sd,i=e.toString(),n=xa(t.dc),n[i]=e,e=xa(t.Bd),e[i]=r,new R(this.m,this.aa,new he(e,n))},g.Jc=function(e){return e===Qd||ta(this.wb.dc,e.toString())},g.ca=function(e){if(e===this)return!0;if(e.K())return!1;if(this.C().ca(e.C())&&this.m.count()===e.m.count()){var t=this.Xb(N);e=e.Xb(N);for(var n=J(t),r=J(e);n&&r;){if(n.name!==r.name||!n.S.ca(r.S))return!1;n=J(t),r=J(e)}return null===n&&null===r}return!1},g.toString=function(){return B(this.I(!0))};var re=Math.log(2),C=new R(new ac(Wb),null,le);ma(ue,R),g=ue.prototype,g.Dc=function(e){return e===this?0:1},g.ca=function(e){return e===this},g.C=function(){return this},g.R=function(){return C},g.e=function(){return!1};var Vd=new ue,Td=new F("[MIN_NAME]",C),Zd=new F("[MAX_NAME]",Vd);Id.prototype.w=function(){return this.Yd},g=ve.prototype,g.w=function(){return this.Ka.w().j()},g.fb=function(e){var t=ub(this.Ka);return t&&(S(this.W.n)||!e.e()&&!t.R(E(e)).e())?t.Q(e):null},g.e=function(){return 0===this.Xa.length},g.Pb=function(e){this.Xa.push(e)},g.jb=function(e,t){var n=[];if(t){K(null==e,"A cancel should cancel all event registrations.");var r=this.W.path;Oa(this.Xa,function(e){(e=e.gf(t,r))&&n.push(e)})}if(e){for(var i=[],a=0;a<this.Xa.length;++a){var o=this.Xa[a];if(o.matches(e)){if(e.tf()){i=i.concat(this.Xa.slice(a+1));break}}else i.push(o)}this.Xa=i}else this.Xa=[];return n},g.ab=function(e,t,n){e.type===Bd&&null!==e.source.Hb&&(K(ub(this.Ka),"We should always have a full cache before handling merges"),K(Jd(this.Ka),"Missing event cache, even though we have a server cache"));var r=this.Ka;return e=this.Hf.ab(r,e,t,n),t=this.Hf,n=e.je,K(n.O.j().Jc(t.V.g),"Event snap not indexed"),K(n.w().j().Jc(t.V.g),"Server snap not indexed"),K(Ib(e.je.w())||!Ib(r.w()),"Once a server snap is complete, it should never go back"),this.Ka=e.je,xe(this,e.fg,e.je.O.j(),null)},ze.prototype.Xc=function(e){return this.path.e()?(e=this.children.subtree(new L(e)),e.e()?null:e.value?new Xb(this.source,G,e.value):new ze(this.source,G,e)):(K(E(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ze(this.source,H(this.path),this.children))},ze.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},g=Ae.prototype,g.yf=function(e,t,n,r){var i=e.path.toString();this.f("Listen called for "+i+" "+e.va());var a=Be(e,n),o={};this.$[a]=o,e=ge(e.n);var s=this;Ce(this,i+".json",e,function(e,t){var u=t;404===e&&(e=u=null),null===e&&s.Gb(i,u,!1,n),w(s.$,a)===o&&r(e?401==e?"permission_denied":"rest_error:"+e:"ok",null)})},g.Rf=function(e,t){var n=Be(e,t);delete this.$[n]},g.M=function(e,t){this.Aa=e;var n=$c(e),r=n.data,n=n.Bc&&n.Bc.exp;t&&t("ok",{auth:r,expires:n})},g.ge=function(e){this.Aa=null,e("ok",null)},g.Me=function(){},g.Cf=function(){},g.Jd=function(){},g.put=function(){},g.zf=function(){},g.Ue=function(){},De.prototype.fe=function(e,t){var n;n=this.Oc[e]||[];var r=n.length;if(r>0){for(var i=Array(r),a=0;r>a;a++)i[a]=n[a];n=i}else n=[];for(r=0;r<n.length;r++)n[r].zc.apply(n[r].Ma,Array.prototype.slice.call(arguments,1))},De.prototype.Eb=function(e,t,n){Ee(this,e),this.Oc[e]=this.Oc[e]||[],this.Oc[e].push({zc:t,Ma:n}),(e=this.Ae(e))&&t.apply(n,e)},De.prototype.ic=function(e,t,n){Ee(this,e),e=this.Oc[e]||[];for(var r=0;r<e.length;r++)if(e[r].zc===t&&(!n||n===e[r].Ma)){e.splice(r,1);break}};var Fe=function(){var e=0,t=[];return function(n){var r=n===e;e=n;for(var i=Array(8),a=7;a>=0;a--)i[a]="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(n%64),n=Math.floor(n/64);if(K(0===n,"Cannot push at time == 0"),n=i.join(""),r){for(a=11;a>=0&&63===t[a];a--)t[a]=0;t[a]++}else for(a=0;12>a;a++)t[a]=Math.floor(64*Math.random());for(a=0;12>a;a++)n+="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(t[a]);return K(20===n.length,"nextPushId: Length should be 20."),n}}();ma(Ge,De),Ge.prototype.Ae=function(e){return K("online"===e,"Unknown event type: "+e),[this.kc]},ca(Ge),ma(He,De),He.prototype.Ae=function(e){return K("visible"===e,"Unknown event type: "+e),[this.Ob]},ca(He),g=L.prototype,g.toString=function(){for(var e="",t=this.Z;t<this.o.length;t++)""!==this.o[t]&&(e+="/"+this.o[t]);return e||"/"},g.slice=function(e){return this.o.slice(this.Z+(e||0))},g.parent=function(){if(this.Z>=this.o.length)return null;for(var e=[],t=this.Z;t<this.o.length-1;t++)e.push(this.o[t]);return new L(e,0)},g.u=function(e){for(var t=[],n=this.Z;n<this.o.length;n++)t.push(this.o[n]);if(e instanceof L)for(n=e.Z;n<e.o.length;n++)t.push(e.o[n]);else for(e=e.split("/"),n=0;n<e.length;n++)0<e[n].length&&t.push(e[n]);return new L(t,0)},g.e=function(){return this.Z>=this.o.length},g.ca=function(e){if(Kd(this)!==Kd(e))return!1;for(var t=this.Z,n=e.Z;t<=this.o.length;t++,n++)if(this.o[t]!==e.o[n])return!1;return!0},g.contains=function(e){var t=this.Z,n=e.Z;if(Kd(this)>Kd(e))return!1;for(;t<this.o.length;){if(this.o[t]!==e.o[n])return!1;++t,++n}return!0};var G=new L("");Je.prototype.push=function(e){0<this.Qa.length&&(this.Ha+=1),this.Qa.push(e),this.Ha+=Zc(e),Ke(this)},Je.prototype.pop=function(){var e=this.Qa.pop();this.Ha-=Zc(e),0<this.Qa.length&&--this.Ha};var Ne=new ac(function(e,t){return e===t?0:t>e?-1:1});g=Me.prototype,g.e=function(){return null===this.value&&this.children.e()},g.subtree=function(e){if(e.e())return this;var t=this.children.get(E(e));return null!==t?t.subtree(H(e)):Pd},g.set=function(e,t){if(e.e())return new Me(t,this.children);var n=E(e),r=(this.children.get(n)||Pd).set(H(e),t),n=this.children.Oa(n,r);return new Me(this.value,n)},g.remove=function(e){if(e.e())return this.children.e()?Pd:new Me(null,this.children);var t=E(e),n=this.children.get(t);return n?(e=n.remove(H(e)),t=e.e()?this.children.remove(t):this.children.Oa(t,e),null===this.value&&t.e()?Pd:new Me(this.value,t)):this},g.get=function(e){if(e.e())return this.value;var t=this.children.get(E(e));return t?t.get(H(e)):null};var Pd=new Me(null);Me.prototype.toString=function(){var e={};return Md(this,function(t,n){e[t.toString()]=n.toString()}),B(e)},Ze.prototype.Xc=function(e){return this.path.e()?null!=this.Qb.value?(K(this.Qb.children.e(),"affectedTree should not have overlapping affected paths."),this):(e=this.Qb.subtree(new L(e)),new Ze(G,e,this.Vd)):(K(E(this.path)===e,"operationForChild called for unrelated child."),new Ze(H(this.path),this.Qb,this.Vd))},Ze.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" ack write revert="+this.Vd+" affectedTree="+this.Qb+")"};var Yb=0,Bd=1,Ed=2,$b=3,$e=new af(!0,!1,null,!1),bf=new af(!1,!0,null,!1);af.prototype.toString=function(){return this.we?"user":this.af?"server(queryID="+this.Hb+")":"server"};var df=new cf(new Me(null));cf.prototype.Rd=function(e){return e.e()?df:(e=Od(this.X,e,Pd),new cf(e))},cf.prototype.e=function(){return this.X.e()},cf.prototype.apply=function(e){return kf(G,this.X,e)},g=lf.prototype,g.Rd=function(e){var t=Ua(this.na,function(t){return t.kd===e});K(t>=0,"removeWrite called with nonexistent writeId.");var n=this.na[t];this.na.splice(t,1);for(var i=n.visible,a=!1,o=this.na.length-1;i&&o>=0;){var s=this.na[o];s.visible&&(o>=t&&nf(s,n.path)?i=!1:n.path.contains(s.path)&&(a=!0)),o--}if(i){if(a)this.T=of(this.na,pf,G),this.Mc=0<this.na.length?this.na[this.na.length-1].kd:-1;else if(n.Ga)this.T=this.T.Rd(n.path);else{var u=this;r(n.children,function(e,t){u.T=u.T.Rd(n.path.u(t))})}return!0}return!1},g.za=function(e,t,n,r){if(n||r){var i=jf(this.T,e);return!r&&i.e()?t:r||null!=t||null!=gf(i,G)?(i=of(this.na,function(t){return(t.visible||r)&&(!n||!(0<=Na(n,t.kd)))&&(t.path.contains(e)||e.contains(t.path))},e),t=t||C,i.apply(t)):null}return i=gf(this.T,e),null!=i?i:(i=jf(this.T,e),i.e()?t:null!=t||null!=gf(i,G)?(t=t||C,i.apply(t)):null)},g.yc=function(e,t){var n=C,r=gf(this.T,e);if(r)r.K()||r.P(N,function(e,t){n=n.U(e,t)});else if(t){var i=jf(this.T,e);t.P(N,function(e,t){var r=jf(i,new L(e)).apply(t);n=n.U(e,r)}),Oa(hf(i),function(e){n=n.U(e.name,e.S)})}else i=jf(this.T,e),Oa(hf(i),function(e){n=n.U(e.name,e.S)});return n},g.ld=function(e,t,n,r){return K(n||r,"Either existingEventSnap or existingServerSnap must exist"),e=e.u(t),null!=gf(this.T,e)?null:(e=jf(this.T,e),e.e()?r.Q(t):e.apply(r.Q(t)))},g.xc=function(e,t,n){e=e.u(t);var r=gf(this.T,e);return null!=r?r:sb(n,t)?jf(this.T,e).apply(n.j().R(t)):null},g.tc=function(e){return gf(this.T,e)},g.ne=function(e,t,n,r,i,a){var o;if(e=jf(this.T,e),o=gf(e,G),null==o){if(null==t)return[];o=e.apply(t)}if(o=o.lb(a),o.e()||o.K())return[];for(t=[],e=td(a),i=i?o.$b(n,a):o.Yb(n,a),a=J(i);a&&t.length<r;)0!==e(a,n)&&t.push(a),a=J(i);return t},g=qf.prototype,g.za=function(e,t,n){return this.X.za(this.Mb,e,t,n)},g.yc=function(e){return this.X.yc(this.Mb,e)},g.ld=function(e,t,n){return this.X.ld(this.Mb,e,t,n)},g.tc=function(e){return this.X.tc(this.Mb.u(e))},g.ne=function(e,t,n,r,i){return this.X.ne(this.Mb,e,t,n,r,i)},g.xc=function(e,t){return this.X.xc(this.Mb,e,t)},g.u=function(e){return new qf(this.Mb.u(e),this.X)},g=rf.prototype,g.e=function(){return wa(this.ya)},g.ab=function(e,t,n){var i=e.source.Hb;if(null!==i)return i=w(this.ya,i),K(null!=i,"SyncTree gave us an op for an invalid query."),i.ab(e,t,n);var a=[];return r(this.ya,function(r){a=a.concat(r.ab(e,t,n))}),a},g.Pb=function(e,t,n,r,i){var a=e.va(),o=w(this.ya,a);if(!o){var o=n.za(i?r:null),s=!1;o?s=!0:(o=r instanceof R?n.yc(r):C,s=!1),o=new ve(e,new Id(new tb(o,s,!1),new tb(r,i,!1))),this.ya[a]=o}return o.Pb(t),ye(o,t)},g.jb=function(e,t,n){var i=e.va(),a=[],o=[],s=null!=sf(this);if("default"===i){var u=this;r(this.ya,function(e,r){o=o.concat(e.jb(t,n)),e.e()&&(delete u.ya[r],S(e.W.n)||a.push(e.W))})}else{var l=w(this.ya,i);l&&(o=o.concat(l.jb(t,n)),l.e()&&(delete this.ya[i],S(l.W.n)||a.push(l.W)))}return s&&null==sf(this)&&a.push(new U(e.k,e.path)),{Kg:a,mg:o}},g.fb=function(e){var t=null;return r(this.ya,function(n){t=t||n.fb(e)}),t},vf.prototype.Pb=function(e,t){var n=e.path,r=null,i=!1;Ve(this.ta,n,function(e,t){var a=T(e,n);r=r||t.fb(a),i=i||null!=sf(t)});var a=this.ta.get(n);a?(i=i||null!=sf(a),r=r||a.fb(G)):(a=new rf,this.ta=this.ta.set(n,a));var o;null!=r?o=!0:(o=!1,
r=C,Ye(this.ta.subtree(n),function(e,t){var n=t.fb(G);n&&(r=r.U(e,n))}));var s=null!=uf(a,e);if(!s&&!S(e.n)){var u=Gf(e);K(!(u in this.mc),"View does not exist, but we have a tag");var l=Hf++;this.mc[u]=l,this.$e["_"+l]=u}return o=a.Pb(e,t,new qf(n,this.ib),r,o),s||i||(a=uf(a,e),o=o.concat(If(this,e,a))),o},vf.prototype.jb=function(e,t,n){var r=e.path,i=this.ta.get(r),a=[];if(i&&("default"===e.va()||null!=uf(i,e))){a=i.jb(e,t,n),i.e()&&(this.ta=this.ta.remove(r)),i=a.Kg,a=a.mg,t=-1!==Ua(i,function(e){return S(e.n)});var o=Te(this.ta,r,function(e,t){return null!=sf(t)});if(t&&!o&&(r=this.ta.subtree(r),!r.e()))for(var r=Jf(r),s=0;s<r.length;++s){var u=r[s],l=u.W,u=Kf(this,u);this.Nc.Xe(Lf(l),Mf(this,l),u.xd,u.H)}if(!o&&0<i.length&&!n)if(t)this.Nc.ae(Lf(e),null);else{var c=this;Oa(i,function(e){e.va();var t=c.mc[Gf(e)];c.Nc.ae(Lf(e),t)})}Nf(this,i)}return a},vf.prototype.za=function(e,t){var n=this.ib,r=Te(this.ta,e,function(t,n){var r=T(t,e);return(r=n.fb(r))?r:void 0});return n.za(e,r,t,!0)};var Hf=1;g=Rf.prototype,g.Ca=function(){return this.A.value},g.clear=function(){this.A.value=null,this.A.children={},this.A.nd=0,Uf(this)},g.wd=function(){return 0<this.A.nd},g.e=function(){return null===this.Ca()&&!this.wd()},g.P=function(e){var t=this;r(this.A.children,function(n,r){e(new Rf(r,t,n))})},g.path=function(){return new L(null===this.Zc?this.Gd:this.Zc.path()+"/"+this.Gd)},g.name=function(){return this.Gd},g.parent=function(){return this.Zc};var Xf=/[\[\].#$\/\u0000-\u001F\u007F]/,Yf=/[\[\].#$\u0000-\u001F\u007F]/,Zf=/^[a-zA-Z][a-zA-Z._\-+]+$/;g=pg.prototype,g.add=function(e,t){this.set[e]=null!==t?t:!0},g.contains=function(e){return v(this.set,e)},g.get=function(e){return this.contains(e)?this.set[e]:void 0},g.remove=function(e){delete this.set[e]},g.clear=function(){this.set={}},g.e=function(){return wa(this.set)},g.count=function(){return pa(this.set)},g.keys=function(){var e=[];return r(this.set,function(t,n){e.push(n)}),e},qc.prototype.find=function(e){if(null!=this.B)return this.B.Q(e);if(e.e()||null==this.m)return null;var t=E(e);return e=H(e),this.m.contains(t)?this.m.get(t).find(e):null},qc.prototype.nc=function(e,t){if(e.e())this.B=t,this.m=null;else if(null!==this.B)this.B=this.B.G(e,t);else{null==this.m&&(this.m=new pg);var n=E(e);this.m.contains(n)||this.m.add(n,new qc),n=this.m.get(n),e=H(e),n.nc(e,t)}},qc.prototype.P=function(e){null!==this.m&&qg(this.m,function(t,n){e(t,n)})};var sg="auth.firebase.com",ug=["remember","redirectTo"];wg.prototype.set=function(e,t){if(!t){if(!this.be.length)throw Error("fb.login.SessionManager : No storage options available!");t=this.be[0]}t.set(this.Qe,e)},wg.prototype.get=function(){var e=Qa(this.be,q(this.qg,this)),e=Pa(e,function(e){return null!==e});return Xa(e,function(e,t){return ad(t.token)-ad(e.token)}),0<e.length?e.shift():null},wg.prototype.qg=function(e){try{var t=e.get(this.Qe);if(t&&t.token)return t}catch(n){}return null},wg.prototype.clear=function(){var e=this;Oa(this.be,function(t){t.remove(e.Qe)})},Ig.prototype.jc=function(e){var t,n=this;try{t=nb(e.data)}catch(r){}t&&"request"===t.a&&(Dg(window,"message",this.jc),this.ce=e.origin,this.Ac&&setTimeout(function(){n.Ac(n.ce,t.d,function(e,t){n.dg=!t,n.Ac=void 0,Jg(n,{a:"response",d:e,forceKeepWindowOpen:t})})},0))},Ig.prototype.Bg=function(){try{Dg(this.zd,"message",this.Bf)}catch(e){}this.Ac&&(Jg(this,{a:"error",d:"unknown closed window"}),this.Ac=void 0);try{window.close()}catch(t){}},Ig.prototype.Bf=function(e){if(this.dg&&"die"===e.data)try{window.close()}catch(t){}},Kg.prototype.open=function(e,t){yc.set("redirect_request_id",this.pc),yc.set("redirect_request_id",this.pc),t.requestId=this.pc,t.redirectTo=t.redirectTo||window.location.href,e+=(/\?/.test(e)?"":"?")+kb(t),window.location=e},Kg.isAvailable=function(){return!zg()&&!yg()},Kg.prototype.Cc=function(){return"redirect"};var Lg={NETWORK_ERROR:"Unable to contact the Firebase server.",SERVER_ERROR:"An unknown server error occurred.",TRANSPORT_UNAVAILABLE:"There are no login transports available for the requested method.",REQUEST_INTERRUPTED:"The browser redirected the page before the login request could complete.",USER_CANCELLED:"The user cancelled authentication."};Ng.prototype.open=function(e,t,n){function r(e){if(a&&(document.body.removeChild(a),a=void 0),c&&(c=clearInterval(c)),Dg(window,"message",i),Dg(window,"unload",r),l&&!e)try{l.close()}catch(t){o.postMessage("die",u)}l=o=void 0}function i(e){if(e.origin===u)try{var t=nb(e.data);"ready"===t.a?o.postMessage(f,u):"error"===t.a?(r(!1),n&&(n(t.d),n=null)):"response"===t.a&&(r(t.forceKeepWindowOpen),n&&(n(null,t.d),n=null))}catch(i){}}var a,o,s=Ag(8);if(!this.options.relay_url)return n(Error("invalid arguments: origin of url and relay_url must match"));var u=Eg(e);if(u!==Eg(this.options.relay_url))n&&setTimeout(function(){n(Error("invalid arguments: origin of url and relay_url must match"))},0);else{s&&(a=document.createElement("iframe"),a.setAttribute("src",this.options.relay_url),a.style.display="none",a.setAttribute("name","__winchan_relay_frame"),document.body.appendChild(a),o=a.contentWindow),e+=(/\?/.test(e)?"":"?")+kb(t);var l=window.open(e,this.options.window_name,this.options.window_features);o||(o=l);var c=setInterval(function(){l&&l.closed&&(r(!1),n&&(n(Mg("USER_CANCELLED")),n=null))},500),f=B({a:"request",d:t});Cg(window,"unload",r),Cg(window,"message",i)}},Ng.isAvailable=function(){var e;return(e="postMessage"in window&&!zg())&&((e=yg()||"undefined"!=typeof navigator&&(!!xg().match(/Windows Phone/)||!!window.Windows&&/^ms-appx:/.test(location.href)))||(e=xg(),e="undefined"!=typeof navigator&&"undefined"!=typeof window&&!!(e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i)||e.match(/CriOS/)||e.match(/Twitter for iPhone/)||e.match(/FBAN\/FBIOS/)||window.navigator.standalone)),e=!e),e&&!xg().match(/PhantomJS/)},Ng.prototype.Cc=function(){return"popup"},Og.prototype.open=function(e,t,n){function r(){n&&(n(Mg("REQUEST_INTERRUPTED")),n=null)}var i,a=new XMLHttpRequest,o=this.options.method.toUpperCase();if(Cg(window,"beforeunload",r),a.onreadystatechange=function(){if(n&&4===a.readyState){var e;if(200<=a.status&&300>a.status){try{e=nb(a.responseText)}catch(t){}n(null,e)}else n(500<=a.status&&600>a.status?Mg("SERVER_ERROR"):Mg("NETWORK_ERROR"));n=null,Dg(window,"beforeunload",r)}},"GET"===o)e+=(/\?/.test(e)?"":"?")+kb(t),i=null;else{var s=this.options.headers.content_type;"application/json"===s&&(i=B(t)),"application/x-www-form-urlencoded"===s&&(i=kb(t))}a.open(o,e,!0),e={"X-Requested-With":"XMLHttpRequest",Accept:"application/json;text/plain"},za(e,this.options.headers);for(var u in e)a.setRequestHeader(u,e[u]);a.send(i)},Og.isAvailable=function(){var e;return(e=!!window.XMLHttpRequest)&&(e=xg(),e=!(e.match(/MSIE/)||e.match(/Trident/))||Ag(10)),e},Og.prototype.Cc=function(){return"json"},Pg.prototype.open=function(e,t,n){function r(){n&&(n(Mg("USER_CANCELLED")),n=null)}var i,a=this,o=Pc(sg);t.requestId=this.pc,t.redirectTo=o.scheme+"://"+o.host+"/blank/page.html",e+=/\?/.test(e)?"":"?",e+=kb(t),(i=window.open(e,"_blank","location=no"))&&ha(i.addEventListener)?(i.addEventListener("loadstart",function(e){var t;if(t=e&&e.url)e:{try{var s=document.createElement("a");s.href=e.url,t=s.host===o.host&&"/blank/page.html"===s.pathname;break e}catch(u){}t=!1}t&&(e=Fg(e.url),i.removeEventListener("exit",r),i.close(),e=new tg(null,null,{requestId:a.pc,requestKey:e}),a.Ef.requestWithCredential("/auth/session",e,n),n=null)}),i.addEventListener("exit",r)):n(Mg("TRANSPORT_UNAVAILABLE"))},Pg.isAvailable=function(){return yg()},Pg.prototype.Cc=function(){return"redirect"},Qg.prototype.open=function(e,t,n){function r(){n&&(n(Mg("REQUEST_INTERRUPTED")),n=null)}function i(){setTimeout(function(){window.__firebase_auth_jsonp[a]=void 0,wa(window.__firebase_auth_jsonp)&&(window.__firebase_auth_jsonp=void 0);try{var e=document.getElementById(a);e&&e.parentNode.removeChild(e)}catch(t){}},1),Dg(window,"beforeunload",r)}var a="fn"+(new Date).getTime()+Math.floor(99999*Math.random());t[this.options.callback_parameter]="__firebase_auth_jsonp."+a,e+=(/\?/.test(e)?"":"?")+kb(t),Cg(window,"beforeunload",r),window.__firebase_auth_jsonp[a]=function(e){n&&(n(null,e),n=null),i()},Rg(a,e,n)},Qg.isAvailable=function(){return"undefined"!=typeof document&&null!=document.createElement},Qg.prototype.Cc=function(){return"json"},ma(Sg,De),g=Sg.prototype,g.xe=function(){return this.mb||null},g.se=function(e,t){ah(this);var n=vg(e);n.$a._method="POST",this.qc("/users",n,function(e,n){e?P(t,e):P(t,e,n)})},g.Te=function(e,t){var n=this;ah(this);var r="/users/"+encodeURIComponent(e.email),i=vg(e);i.$a._method="DELETE",this.qc(r,i,function(e,r){!e&&r&&r.uid&&n.mb&&n.mb.uid&&n.mb.uid===r.uid&&Zg(n),P(t,e)})},g.pe=function(e,t){ah(this);var n="/users/"+encodeURIComponent(e.email)+"/password",r=vg(e);r.$a._method="PUT",r.$a.password=e.newPassword,this.qc(n,r,function(e){P(t,e)})},g.oe=function(e,t){ah(this);var n="/users/"+encodeURIComponent(e.oldEmail)+"/email",r=vg(e);r.$a._method="PUT",r.$a.email=e.newEmail,r.$a.password=e.password,this.qc(n,r,function(e){P(t,e)})},g.Ve=function(e,t){ah(this);var n="/users/"+encodeURIComponent(e.email)+"/password",r=vg(e);r.$a._method="POST",this.qc(n,r,function(e){P(t,e)})},g.qc=function(e,t,n){dh(this,[Og,Qg],e,t,n)},g.Ae=function(e){return K("auth_status"===e,'initial event must be of type "auth_status"'),this.Se?null:[this.mb]};var Cc="websocket",Dc="long_polling",ih,jh;hh.prototype.open=function(e,t){this.hf=0,this.la=t,this.Af=new eh(e),this.zb=!1;var n=this;this.qb=setTimeout(function(){n.f("Timed out trying to connect."),n.gb(),n.qb=null},Math.floor(3e4)),Rc(function(){if(!n.zb){n.Sa=new kh(function(e,t,r,i,a){if(lh(n,arguments),n.Sa)if(n.qb&&(clearTimeout(n.qb),n.qb=null),n.Hc=!0,"start"==e)n.id=t,n.Gf=r;else{if("close"!==e)throw Error("Unrecognized command received: "+e);t?(n.Sa.Xd=!1,fh(n.Af,t,function(){n.gb()})):n.gb()}},function(e,t){lh(n,arguments),gh(n.Af,e,t)},function(){n.gb()},n.jd);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.Sa.he&&(e.cb=n.Sa.he),e.v="5",n.Qf&&(e.s=n.Qf),n.Bb&&(e.ls=n.Bb),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(e.r="f"),e=n.jd(e),n.f("Connecting via long-poll to "+e),mh(n.Sa,e,function(){})}})},hh.prototype.start=function(){var e=this.Sa,t=this.Gf;for(e.ug=this.id,e.vg=t,e.le=!0;nh(e););e=this.id,t=this.Gf,this.gc=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.gc.src=this.jd(n),this.gc.style.display="none",document.body.appendChild(this.gc)},hh.isAvailable=function(){return ih||!jh&&"undefined"!=typeof document&&null!=document.createElement&&!("object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"==typeof Windows&&"object"==typeof Windows.Xg)&&!0},g=hh.prototype,g.Ed=function(){},g.dd=function(){this.zb=!0,this.Sa&&(this.Sa.close(),this.Sa=null),this.gc&&(document.body.removeChild(this.gc),this.gc=null),this.qb&&(clearTimeout(this.qb),this.qb=null)},g.gb=function(){this.zb||(this.f("Longpoll is closing itself"),this.dd(),this.la&&(this.la(this.Hc),this.la=null))},g.close=function(){this.zb||(this.f("Longpoll is being closed."),this.dd())},g.send=function(e){e=B(e),this.ob+=e.length,Ob(this.Ua,"bytes_sent",e.length),e=Ic(e),e=fb(e,!0),e=Vc(e,1840);for(var t=0;t<e.length;t++){var n=this.Sa;n.ad.push({Mg:this.hf,Ug:e.length,kf:e[t]}),n.le&&nh(n),this.hf++}},kh.prototype.close=function(){if(this.le=!1,this.Ea){this.Ea.eb.body.innerHTML="";var e=this;setTimeout(function(){null!==e.Ea&&(document.body.removeChild(e.Ea),e.Ea=null)},Math.floor(0))}var t=this.hb;t&&(this.hb=null,t())};var ph=null;"undefined"!=typeof MozWebSocket?ph=MozWebSocket:"undefined"!=typeof WebSocket&&(ph=WebSocket);var rh;qh.prototype.open=function(e,t){this.hb=t,this.zg=e,this.f("Websocket connecting to "+this.ef),this.Hc=!1,xc.set("previous_websocket_failure",!0);try{this.ua=new ph(this.ef)}catch(n){this.f("Error instantiating WebSocket.");var r=n.message||n.data;return r&&this.f(r),void this.gb()}var i=this;this.ua.onopen=function(){i.f("Websocket connected."),i.Hc=!0},this.ua.onclose=function(){i.f("Websocket connection was disconnected."),i.ua=null,i.gb()},this.ua.onmessage=function(e){if(null!==i.ua)if(e=e.data,i.nb+=e.length,Ob(i.Ua,"bytes_received",e.length),sh(i),null!==i.frames)th(i,e);else{e:{if(K(null===i.frames,"We already have a frame buffer"),6>=e.length){var t=Number(e);if(!isNaN(t)){i.bf=t,i.frames=[],e=null;break e}}i.bf=1,i.frames=[]}null!==e&&th(i,e)}},this.ua.onerror=function(e){i.f("WebSocket error.  Closing connection."),(e=e.message||e.data)&&i.f(e),i.gb()}},qh.prototype.start=function(){},qh.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);t&&1<t.length&&4.4>parseFloat(t[1])&&(e=!0)}return!e&&null!==ph&&!rh},qh.responsesRequiredToBeHealthy=2,qh.healthyTimeout=3e4,g=qh.prototype,g.Ed=function(){xc.remove("previous_websocket_failure")},g.send=function(e){sh(this),e=B(e),this.ob+=e.length,Ob(this.Ua,"bytes_sent",e.length),e=Vc(e,16384),1<e.length&&this.ua.send(String(e.length));for(var t=0;t<e.length;t++)this.ua.send(e[t])},g.dd=function(){this.zb=!0,this.Kc&&(clearInterval(this.Kc),this.Kc=null),this.ua&&(this.ua.close(),this.ua=null)},g.gb=function(){this.zb||(this.f("WebSocket is closing itself"),this.dd(),this.hb&&(this.hb(this.Hc),this.hb=null))},g.close=function(){this.zb||(this.f("WebSocket is being closed"),this.dd())};var wh=[hh,qh];yh.prototype.Fa=function(e){Jh(this,{t:"d",d:e})},yh.prototype.Id=function(e){Gh(this),this.jc(e)},yh.prototype.close=function(){2!==this.Ta&&(this.f("Closing realtime connection."),this.Ta=2,Fh(this),this.la&&(this.la(),this.la=null))};var Lh=0,Nh=0;g=Kh.prototype,g.Fa=function(e,t,n){var r=++this.Lg;e={r:r,a:e,b:t},this.f(B(e)),K(this.oa,"sendRequest call when we're not connected not allowed."),this.Ia.Fa(e),n&&(this.Td[r]=n)},g.yf=function(e,t,n,r){var i=e.va(),a=e.path.toString();this.f("Listen called for "+a+" "+i),this.$[a]=this.$[a]||{},K(fe(e.n)||!S(e.n),"listen() called for non-default but complete query"),K(!this.$[a][i],"listen() called twice for same path/queryId."),e={H:r,xd:t,Ig:e,tag:n},this.$[a][i]=e,this.oa&&Oh(this,e)},g.M=function(e,t,n){this.Aa={ig:e,of:!1,zc:t,md:n},this.f("Authenticating using credential: "+e),Qh(this),(t=40==e.length)||(e=$c(e).Bc,t="object"==typeof e&&!0===w(e,"admin")),t&&(this.f("Admin auth credential detected.  Reducing max reconnect time."),this.Fd=3e4)},g.ge=function(e){delete this.Aa,this.oa&&this.Fa("unauth",{},function(t){e(t.s,t.d)})},g.Rf=function(e,t){var n=e.path.toString(),r=e.va();if(this.f("Unlisten called for "+n+" "+r),K(fe(e.n)||!S(e.n),"unlisten() called for non-default but complete query"),Ph(this,n,r)&&this.oa){var i=ee(e.n);this.f("Unlisten on "+n+" for "+r),n={p:n},t&&(n.q=i,n.t=t),this.Fa("n",n)}},g.Me=function(e,t,n){this.oa?Rh(this,"o",e,t,n):this.Vc.push({$c:e,action:"o",data:t,H:n})},g.Cf=function(e,t,n){this.oa?Rh(this,"om",e,t,n):this.Vc.push({$c:e,action:"om",data:t,H:n})},g.Jd=function(e,t){this.oa?Rh(this,"oc",e,null,t):this.Vc.push({$c:e,action:"oc",data:null,H:t})},g.put=function(e,t,n,r){Sh(this,"p",e,t,n,r)},g.zf=function(e,t,n,r){Sh(this,"m",e,t,n,r)},g.Ue=function(e){this.oa&&(e={c:e},this.f("reportStats",e),this.Fa("s",e,function(e){"ok"!==e.s&&this.f("reportStats","Error sending stats: "+e.d)}))},g.Id=function(e){if("r"in e){this.f("from server: "+B(e));var t=e.r,n=this.Td[t];n&&(delete this.Td[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&(t=e.a,n=e.b,this.f("handleServerMessage",t,n),"d"===t?this.Gb(n.p,n.d,!1,n.t):"m"===t?this.Gb(n.p,n.d,!0,n.t):"c"===t?Uh(this,n.p,n.q):"ac"===t?(e=n.s,t=n.d,n=this.Aa,delete this.Aa,n&&n.md&&n.md(e,t)):"sd"===t?this.We?this.We(n):"msg"in n&&"undefined"!=typeof console&&console.log("FIREBASE: "+n.msg.replace("\n","\nFIREBASE: ")):Nc("Unrecognized action received from server: "+B(t)+"\nAre you using the latest client?"))}},g.Wc=function(e,t){if(this.f("connection ready"),this.oa=!0,this.Lc=(new Date).getTime(),this.Oe({serverTimeOffset:e-(new Date).getTime()}),this.Bb=t,this.nf){var n={};n["sdk.js."+hb.replace(/\./g,"-")]=1,yg()&&(n["framework.cordova"]=1),this.Ue(n)}Vh(this),this.nf=!1,this.Uc(!0)},g.Cg=function(e){e&&!this.Ob&&this.Za===this.Fd&&(this.f("Window became visible.  Reducing delay."),this.Za=1e3,this.Ia||Mh(this,0)),this.Ob=e},g.Ag=function(e){e?(this.f("Browser went online."),this.Za=1e3,this.Ia||Mh(this,0)):(this.f("Browser went offline.  Killing connection."),this.Ia&&this.Ia.close())},g.Df=function(){this.f("data client disconnected"),this.oa=!1,this.Ia=null;for(var e=0;e<this.qa.length;e++){var t=this.qa[e];t&&"h"in t.Jf&&t.Jg&&(t.H&&t.H("disconnect"),delete this.qa[e],this.Yc--)}0===this.Yc&&(this.qa=[]),this.Td={},Xh(this)&&(this.Ob?this.Lc&&(3e4<(new Date).getTime()-this.Lc&&(this.Za=1e3),this.Lc=null):(this.f("Window isn't visible.  Delaying reconnect."),this.Za=this.Fd,this.Ge=(new Date).getTime()),e=Math.max(0,this.Za-((new Date).getTime()-this.Ge)),e*=Math.random(),this.f("Trying to reconnect in "+e+"ms"),Mh(this,e),this.Za=Math.min(this.Fd,1.3*this.Za)),this.Uc(!1)},g.yb=function(){this.Ee=!0,this.Ia?this.Ia.close():(this.sb&&(clearTimeout(this.sb),this.sb=null),this.oa&&this.Df())},g.rc=function(){this.Ee=!1,this.Za=1e3,this.Ia||Mh(this,0)};var V={og:function(){ih=rh=!0}};V.forceLongPolling=V.og,V.pg=function(){jh=!0},V.forceWebSockets=V.pg,V.Pg=function(e,t){e.k.Ra.We=t},V.setSecurityDebugCallback=V.Pg,V.Ye=function(e,t){e.k.Ye(t)},V.stats=V.Ye,V.Ze=function(e,t){e.k.Ze(t)},V.statsIncrementCounter=V.Ze,V.sd=function(e){return e.k.sd},V.dataUpdateCount=V.sd,V.sg=function(e,t){e.k.De=t},V.interceptServerData=V.sg,V.yg=function(e){new Ig(e)},V.onPopupOpen=V.yg,V.Ng=function(e){sg=e},V.setAuthenticationServer=V.Ng,Q.prototype.I=function(){return x("Firebase.DataSnapshot.val",0,0,arguments.length),this.A.I()},Q.prototype.val=Q.prototype.I,Q.prototype.mf=function(){return x("Firebase.DataSnapshot.exportVal",0,0,arguments.length),this.A.I(!0)},Q.prototype.exportVal=Q.prototype.mf,Q.prototype.ng=function(){return x("Firebase.DataSnapshot.exists",0,0,arguments.length),!this.A.e()},Q.prototype.exists=Q.prototype.ng,Q.prototype.u=function(e){x("Firebase.DataSnapshot.child",0,1,arguments.length),ga(e)&&(e=String(e)),ig("Firebase.DataSnapshot.child",e);var t=new L(e),n=this.W.u(t);return new Q(this.A.Q(t),n,N)},Q.prototype.child=Q.prototype.u,Q.prototype.Da=function(e){x("Firebase.DataSnapshot.hasChild",1,1,arguments.length),ig("Firebase.DataSnapshot.hasChild",e);var t=new L(e);return!this.A.Q(t).e()},Q.prototype.hasChild=Q.prototype.Da,Q.prototype.C=function(){return x("Firebase.DataSnapshot.getPriority",0,0,arguments.length),this.A.C().I()},Q.prototype.getPriority=Q.prototype.C,Q.prototype.forEach=function(e){if(x("Firebase.DataSnapshot.forEach",1,1,arguments.length),A("Firebase.DataSnapshot.forEach",1,e,!1),this.A.K())return!1;var t=this;return!!this.A.P(this.g,function(n,r){return e(new Q(r,t.W.u(n),N))})},Q.prototype.forEach=Q.prototype.forEach,Q.prototype.wd=function(){return x("Firebase.DataSnapshot.hasChildren",0,0,arguments.length),this.A.K()?!1:!this.A.e()},Q.prototype.hasChildren=Q.prototype.wd,Q.prototype.name=function(){return O("Firebase.DataSnapshot.name() being deprecated. Please use Firebase.DataSnapshot.key() instead."),x("Firebase.DataSnapshot.name",0,0,arguments.length),this.key()},Q.prototype.name=Q.prototype.name,Q.prototype.key=function(){return x("Firebase.DataSnapshot.key",0,0,arguments.length),this.W.key()},Q.prototype.key=Q.prototype.key,Q.prototype.Db=function(){return x("Firebase.DataSnapshot.numChildren",0,0,arguments.length),this.A.Db()},Q.prototype.numChildren=Q.prototype.Db,Q.prototype.Ib=function(){return x("Firebase.DataSnapshot.ref",0,0,arguments.length),this.W},Q.prototype.ref=Q.prototype.Ib,g=Yh.prototype,g.toString=function(){return(this.F.kb?"https://":"http://")+this.F.host},g.name=function(){return this.F.hc},g.Gb=function(e,t,n,r){this.sd++;var i=new L(e);t=this.De?this.De(e,t):t,e=[],r?n?(t=na(t,function(e){return M(e)}),e=Ff(this.L,i,t,r)):(t=M(t),e=Bf(this.L,i,t,r)):n?(r=na(t,function(e){return M(e)}),e=Af(this.L,i,r)):(r=M(t),e=xf(this.L,new Xb(bf,i,r))),r=i,0<e.length&&(r=bi(this,i)),Ab(this.da,r,e)},g.Uc=function(e){Zh(this,"connected",e),!1===e&&ci(this)},g.Oe=function(e){var t=this;Wc(e,function(e,n){Zh(t,n,e)})},g.Le=function(e){Zh(this,"authenticated",e)},g.Kb=function(e,t,n,r){this.f("set",{path:e.toString(),value:t,$g:n});var i=ai(this);t=M(t,n);var i=sc(t,i),a=this.Hd++,i=wf(this.L,e,i,a,!0);wb(this.da,i);var o=this;this.ba.put(e.toString(),t.I(!0),function(t,n){var i="ok"===t;i||O("set at "+e+" failed: "+t),i=zf(o.L,a,!i),Ab(o.da,e,i),di(r,t,n)}),i=ei(this,e),bi(this,i),Ab(this.da,i,[])},g.update=function(e,t,n){this.f("update",{path:e.toString(),value:t});var i=!0,a=ai(this),o={};if(r(t,function(e,t){i=!1;var n=M(e);o[t]=sc(n,a)}),i)Cb("update() called with empty data.  Don't do anything."),di(n,"ok");else{var s=this.Hd++,u=yf(this.L,e,o,s);wb(this.da,u);var l=this;this.ba.zf(e.toString(),t,function(t,r){var i="ok"===t;i||O("update at "+e+" failed: "+t);var i=zf(l.L,s,!i),a=e;0<i.length&&(a=bi(l,e)),Ab(l.da,a,i),di(n,t,r)}),t=ei(this,e),bi(this,t),Ab(this.da,e,[])}},g.Jd=function(e,t){var n=this;this.ba.Jd(e.toString(),function(r,i){"ok"===r&&rg(n.la,e),di(t,r,i)})},g.yb=function(){this.Ra&&this.Ra.yb()},g.rc=function(){this.Ra&&this.Ra.rc()},g.Ye=function(e){if("undefined"!=typeof console){e?(this.fd||(this.fd=new Lb(this.Ua)),e=this.fd.get()):e=this.Ua.get();var t,n=Ra(sa(e),function(e,t){return Math.max(t.length,e)},0);for(t in e){for(var r=e[t],i=t.length;n+2>i;i++)t+=" ";console.log(t+r)}}},g.Ze=function(e){Ob(this.Ua,e),this.Sg.Of[e]=!0},g.f=function(e){var t="";this.Ra&&(t=this.Ra.id+":"),Cb(t,arguments)},W.prototype.yb=function(){for(var e in this.oc)this.oc[e].yb()},W.prototype.rc=function(){for(var e in this.oc)this.oc[e].rc()},W.prototype.ve=function(){this.Sf=!0},ca(W),W.prototype.interrupt=W.prototype.yb,W.prototype.resume=W.prototype.rc,X.prototype.cancel=function(e){x("Firebase.onDisconnect().cancel",0,1,arguments.length),A("Firebase.onDisconnect().cancel",1,e,!0),this.bd.Jd(this.ra,e||null)},X.prototype.cancel=X.prototype.cancel,X.prototype.remove=function(e){x("Firebase.onDisconnect().remove",0,1,arguments.length),jg("Firebase.onDisconnect().remove",this.ra),A("Firebase.onDisconnect().remove",1,e,!0),fi(this.bd,this.ra,null,e)},X.prototype.remove=X.prototype.remove,X.prototype.set=function(e,t){x("Firebase.onDisconnect().set",1,2,arguments.length),jg("Firebase.onDisconnect().set",this.ra),bg("Firebase.onDisconnect().set",e,this.ra,!1),A("Firebase.onDisconnect().set",2,t,!0),fi(this.bd,this.ra,e,t)},X.prototype.set=X.prototype.set,X.prototype.Kb=function(e,t,n){x("Firebase.onDisconnect().setWithPriority",2,3,arguments.length),jg("Firebase.onDisconnect().setWithPriority",this.ra),bg("Firebase.onDisconnect().setWithPriority",e,this.ra,!1),fg("Firebase.onDisconnect().setWithPriority",2,t),A("Firebase.onDisconnect().setWithPriority",3,n,!0),gi(this.bd,this.ra,e,t,n)},X.prototype.setWithPriority=X.prototype.Kb,X.prototype.update=function(e,t){if(x("Firebase.onDisconnect().update",1,2,arguments.length),jg("Firebase.onDisconnect().update",this.ra),ea(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,O("Passing an Array to Firebase.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}eg("Firebase.onDisconnect().update",e,this.ra),A("Firebase.onDisconnect().update",2,t,!0),hi(this.bd,this.ra,e,t)},X.prototype.update=X.prototype.update,g=Y.prototype,g.Ib=function(){return x("Query.ref",0,0,arguments.length),new U(this.k,this.path)},g.Eb=function(e,t,n,r){x("Query.on",2,4,arguments.length),gg("Query.on",e,!1),A("Query.on",2,t,!1);var i=vi("Query.on",n,r);if("value"===e)ii(this.k,this,new id(t,i.cancel||null,i.Ma||null));else{var a={};a[e]=t,ii(this.k,this,new jd(a,i.cancel,i.Ma))}return t},g.ic=function(e,t,n){x("Query.off",0,3,arguments.length),gg("Query.off",e,!0),A("Query.off",2,t,!0),mb("Query.off",3,n);var r=null,i=null;"value"===e?r=new id(t||null,null,n||null):e&&(t&&(i={},i[e]=t),r=new jd(i,null,n||null)),i=this.k,r=".info"===E(this.path)?i.Cd.jb(this,r):i.L.jb(this,r),yb(i.da,this.path,r)},g.Dg=function(e,t){function n(o){a&&(a=!1,i.ic(e,n),t.call(r.Ma,o))}x("Query.once",2,4,arguments.length),gg("Query.once",e,!1),A("Query.once",2,t,!1);var r=vi("Query.once",arguments[2],arguments[3]),i=this,a=!0;this.Eb(e,n,function(t){i.ic(e,n),r.cancel&&r.cancel.call(r.Ma,t)})},g.He=function(e){if(O("Query.limit() being deprecated. Please use Query.limitToFirst() or Query.limitToLast() instead."),x("Query.limit",1,1,arguments.length),!ga(e)||Math.floor(e)!==e||0>=e)throw Error("Query.limit: First argument must be a positive integer.");if(this.n.ja)throw Error("Query.limit: Limit was already set (by another call to limit, limitToFirst, orlimitToLast.");var t=this.n.He(e);return ti(t),new Y(this.k,this.path,t,this.lc)},g.Ie=function(e){if(x("Query.limitToFirst",1,1,arguments.length),!ga(e)||Math.floor(e)!==e||0>=e)throw Error("Query.limitToFirst: First argument must be a positive integer.");if(this.n.ja)throw Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Y(this.k,this.path,this.n.Ie(e),this.lc)},g.Je=function(e){if(x("Query.limitToLast",1,1,arguments.length),!ga(e)||Math.floor(e)!==e||0>=e)throw Error("Query.limitToLast: First argument must be a positive integer.");if(this.n.ja)throw Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Y(this.k,this.path,this.n.Je(e),this.lc)},g.Eg=function(e){if(x("Query.orderByChild",1,1,arguments.length),"$key"===e)throw Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');ig("Query.orderByChild",e),ui(this,"Query.orderByChild");var t=new L(e);if(t.e())throw Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");return t=new Ud(t),t=de(this.n,t),si(t),new Y(this.k,this.path,t,!0)},g.Fg=function(){x("Query.orderByKey",0,0,arguments.length),ui(this,"Query.orderByKey");var e=de(this.n,Qd);return si(e),new Y(this.k,this.path,e,!0)},g.Gg=function(){x("Query.orderByPriority",0,0,arguments.length),ui(this,"Query.orderByPriority");var e=de(this.n,N);return si(e),new Y(this.k,this.path,e,!0)},g.Hg=function(){x("Query.orderByValue",0,0,arguments.length),ui(this,"Query.orderByValue");var e=de(this.n,$d);return si(e),new Y(this.k,this.path,e,!0)},g.$d=function(e,t){x("Query.startAt",0,2,arguments.length),bg("Query.startAt",e,this.path,!0),hg("Query.startAt",t);var r=this.n.$d(e,t);if(ti(r),si(r),this.n.ma)throw Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return n(e)||(t=e=null),new Y(this.k,this.path,r,this.lc)},g.td=function(e,t){x("Query.endAt",0,2,arguments.length),bg("Query.endAt",e,this.path,!0),hg("Query.endAt",t);var n=this.n.td(e,t);if(ti(n),si(n),this.n.pa)throw Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new Y(this.k,this.path,n,this.lc)},g.kg=function(e,t){if(x("Query.equalTo",1,2,arguments.length),bg("Query.equalTo",e,this.path,!1),hg("Query.equalTo",t),this.n.ma)throw Error("Query.equalTo: Starting point was already set (by another call to endAt or equalTo).");if(this.n.pa)throw Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.$d(e,t).td(e,t)},g.toString=function(){x("Query.toString",0,0,arguments.length);for(var e=this.path,t="",n=e.Z;n<e.o.length;n++)""!==e.o[n]&&(t+="/"+encodeURIComponent(String(e.o[n])));return this.k.toString()+(t||"/")},g.va=function(){var e=Uc(ee(this.n));return"{}"===e?"default":e},Y.prototype.ref=Y.prototype.Ib,Y.prototype.on=Y.prototype.Eb,Y.prototype.off=Y.prototype.ic,Y.prototype.once=Y.prototype.Dg,Y.prototype.limit=Y.prototype.He,Y.prototype.limitToFirst=Y.prototype.Ie,Y.prototype.limitToLast=Y.prototype.Je,Y.prototype.orderByChild=Y.prototype.Eg,Y.prototype.orderByKey=Y.prototype.Fg,Y.prototype.orderByPriority=Y.prototype.Gg,Y.prototype.orderByValue=Y.prototype.Hg,Y.prototype.startAt=Y.prototype.$d,Y.prototype.endAt=Y.prototype.td,Y.prototype.equalTo=Y.prototype.kg,Y.prototype.toString=Y.prototype.toString;var Z={};Z.vc=Kh,Z.DataConnection=Z.vc,Kh.prototype.Rg=function(e,t){this.Fa("q",{p:e},t)},Z.vc.prototype.simpleListen=Z.vc.prototype.Rg,Kh.prototype.jg=function(e,t){this.Fa("echo",{d:e},t)},Z.vc.prototype.echo=Z.vc.prototype.jg,Kh.prototype.interrupt=Kh.prototype.yb,Z.Vf=yh,Z.RealTimeConnection=Z.Vf,yh.prototype.sendRequest=yh.prototype.Fa,yh.prototype.close=yh.prototype.close,Z.rg=function(e){var t=Kh.prototype.put;return Kh.prototype.put=function(r,i,a,o){n(o)&&(o=e()),t.call(this,r,i,a,o)},function(){Kh.prototype.put=t}},Z.hijackHash=Z.rg,Z.Uf=zc,Z.ConnectionTarget=Z.Uf,Z.va=function(e){return e.va()},Z.queryIdentifier=Z.va,Z.tg=function(e){return e.k.Ra.$},Z.listens=Z.tg,Z.ve=function(e){e.ve()},Z.forceRestClient=Z.ve,ma(U,Y);var wi=U,xi=["Firebase"],yi=aa;xi[0]in yi||!yi.execScript||yi.execScript("var "+xi[0]);for(var zi;xi.length&&(zi=xi.shift());)!xi.length&&n(wi)?yi[zi]=wi:yi=yi[zi]?yi[zi]:yi[zi]={};U.goOffline=function(){x("Firebase.goOffline",0,0,arguments.length),W.ub().yb()},U.goOnline=function(){x("Firebase.goOnline",0,0,arguments.length),W.ub().rc()},U.enableLogging=Lc,U.ServerValue={TIMESTAMP:{".sv":"timestamp"}},U.SDK_VERSION=hb,U.INTERNAL=V,U.Context=W,U.TEST_ACCESS=Z,U.prototype.name=function(){return O("Firebase.name() being deprecated. Please use Firebase.key() instead."),x("Firebase.name",0,0,arguments.length),this.key()},U.prototype.name=U.prototype.name,U.prototype.key=function(){return x("Firebase.key",0,0,arguments.length),this.path.e()?null:Ld(this.path)},U.prototype.key=U.prototype.key,U.prototype.u=function(e){if(x("Firebase.child",1,1,arguments.length),ga(e))e=String(e);else if(!(e instanceof L))if(null===E(this.path)){var t=e;t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),ig("Firebase.child",t)}else ig("Firebase.child",e);return new U(this.k,this.path.u(e))},U.prototype.child=U.prototype.u,U.prototype.parent=function(){x("Firebase.parent",0,0,arguments.length);var e=this.path.parent();return null===e?null:new U(this.k,e)},U.prototype.parent=U.prototype.parent,U.prototype.root=function(){x("Firebase.ref",0,0,arguments.length);for(var e=this;null!==e.parent();)e=e.parent();return e},U.prototype.root=U.prototype.root,U.prototype.set=function(e,t){x("Firebase.set",1,2,arguments.length),jg("Firebase.set",this.path),bg("Firebase.set",e,this.path,!1),A("Firebase.set",2,t,!0),this.k.Kb(this.path,e,null,t||null)},U.prototype.set=U.prototype.set,U.prototype.update=function(e,t){if(x("Firebase.update",1,2,arguments.length),jg("Firebase.update",this.path),ea(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,O("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}eg("Firebase.update",e,this.path),A("Firebase.update",2,t,!0),this.k.update(this.path,e,t||null)},U.prototype.update=U.prototype.update,U.prototype.Kb=function(e,t,n){if(x("Firebase.setWithPriority",2,3,arguments.length),jg("Firebase.setWithPriority",this.path),bg("Firebase.setWithPriority",e,this.path,!1),fg("Firebase.setWithPriority",2,t),
A("Firebase.setWithPriority",3,n,!0),".length"===this.key()||".keys"===this.key())throw"Firebase.setWithPriority failed: "+this.key()+" is a read-only object.";this.k.Kb(this.path,e,t,n||null)},U.prototype.setWithPriority=U.prototype.Kb,U.prototype.remove=function(e){x("Firebase.remove",0,1,arguments.length),jg("Firebase.remove",this.path),A("Firebase.remove",1,e,!0),this.set(null,e)},U.prototype.remove=U.prototype.remove,U.prototype.transaction=function(e,t,r){if(x("Firebase.transaction",1,3,arguments.length),jg("Firebase.transaction",this.path),A("Firebase.transaction",1,e,!1),A("Firebase.transaction",2,t,!0),n(r)&&"boolean"!=typeof r)throw Error(y("Firebase.transaction",3,!0)+"must be a boolean.");if(".length"===this.key()||".keys"===this.key())throw"Firebase.transaction failed: "+this.key()+" is a read-only object.";"undefined"==typeof r&&(r=!0),ji(this.k,this.path,e,t||null,r)},U.prototype.transaction=U.prototype.transaction,U.prototype.Og=function(e,t){x("Firebase.setPriority",1,2,arguments.length),jg("Firebase.setPriority",this.path),fg("Firebase.setPriority",1,e),A("Firebase.setPriority",2,t,!0),this.k.Kb(this.path.u(".priority"),e,null,t)},U.prototype.setPriority=U.prototype.Og,U.prototype.push=function(e,t){x("Firebase.push",0,2,arguments.length),jg("Firebase.push",this.path),bg("Firebase.push",e,this.path,!0),A("Firebase.push",2,t,!0);var n=$h(this.k),n=Fe(n),n=this.u(n);return"undefined"!=typeof e&&null!==e&&n.set(e,t),n},U.prototype.push=U.prototype.push,U.prototype.hb=function(){return jg("Firebase.onDisconnect",this.path),new X(this.k,this.path)},U.prototype.onDisconnect=U.prototype.hb,U.prototype.M=function(e,t,n){O("FirebaseRef.auth() being deprecated. Please use FirebaseRef.authWithCustomToken() instead."),x("Firebase.auth",1,3,arguments.length),kg("Firebase.auth",e),A("Firebase.auth",2,t,!0),A("Firebase.auth",3,t,!0),Yg(this.k.M,e,{},{remember:"none"},t,n)},U.prototype.auth=U.prototype.M,U.prototype.ge=function(e){x("Firebase.unauth",0,1,arguments.length),A("Firebase.unauth",1,e,!0),Zg(this.k.M,e)},U.prototype.unauth=U.prototype.ge,U.prototype.xe=function(){return x("Firebase.getAuth",0,0,arguments.length),this.k.M.xe()},U.prototype.getAuth=U.prototype.xe,U.prototype.xg=function(e,t){x("Firebase.onAuth",1,2,arguments.length),A("Firebase.onAuth",1,e,!1),mb("Firebase.onAuth",2,t),this.k.M.Eb("auth_status",e,t)},U.prototype.onAuth=U.prototype.xg,U.prototype.wg=function(e,t){x("Firebase.offAuth",1,2,arguments.length),A("Firebase.offAuth",1,e,!1),mb("Firebase.offAuth",2,t),this.k.M.ic("auth_status",e,t)},U.prototype.offAuth=U.prototype.wg,U.prototype.Zf=function(e,t,n){x("Firebase.authWithCustomToken",2,3,arguments.length),kg("Firebase.authWithCustomToken",e),A("Firebase.authWithCustomToken",2,t,!1),ng("Firebase.authWithCustomToken",3,n,!0),Yg(this.k.M,e,{},n||{},t)},U.prototype.authWithCustomToken=U.prototype.Zf,U.prototype.$f=function(e,t,n){x("Firebase.authWithOAuthPopup",2,3,arguments.length),mg("Firebase.authWithOAuthPopup",e),A("Firebase.authWithOAuthPopup",2,t,!1),ng("Firebase.authWithOAuthPopup",3,n,!0),ch(this.k.M,e,n,t)},U.prototype.authWithOAuthPopup=U.prototype.$f,U.prototype.ag=function(e,t,n){x("Firebase.authWithOAuthRedirect",2,3,arguments.length),mg("Firebase.authWithOAuthRedirect",e),A("Firebase.authWithOAuthRedirect",2,t,!1),ng("Firebase.authWithOAuthRedirect",3,n,!0);var r=this.k.M;ah(r);var i=[Kg],a=vg(n);"anonymous"===e||"firebase"===e?P(t,Mg("TRANSPORT_UNAVAILABLE")):(yc.set("redirect_client_options",a.od),bh(r,i,"/auth/"+e,a,t))},U.prototype.authWithOAuthRedirect=U.prototype.ag,U.prototype.bg=function(e,t,n,r){x("Firebase.authWithOAuthToken",3,4,arguments.length),mg("Firebase.authWithOAuthToken",e),A("Firebase.authWithOAuthToken",3,n,!1),ng("Firebase.authWithOAuthToken",4,r,!0),p(t)?(lg("Firebase.authWithOAuthToken",2,t),$g(this.k.M,e+"/token",{access_token:t},r,n)):(ng("Firebase.authWithOAuthToken",2,t,!1),$g(this.k.M,e+"/token",t,r,n))},U.prototype.authWithOAuthToken=U.prototype.bg,U.prototype.Yf=function(e,t){x("Firebase.authAnonymously",1,2,arguments.length),A("Firebase.authAnonymously",1,e,!1),ng("Firebase.authAnonymously",2,t,!0),$g(this.k.M,"anonymous",{},t,e)},U.prototype.authAnonymously=U.prototype.Yf,U.prototype.cg=function(e,t,n){x("Firebase.authWithPassword",2,3,arguments.length),ng("Firebase.authWithPassword",1,e,!1),og("Firebase.authWithPassword",e,"email"),og("Firebase.authWithPassword",e,"password"),A("Firebase.authWithPassword",2,t,!1),ng("Firebase.authWithPassword",3,n,!0),$g(this.k.M,"password",e,n,t)},U.prototype.authWithPassword=U.prototype.cg,U.prototype.se=function(e,t){x("Firebase.createUser",2,2,arguments.length),ng("Firebase.createUser",1,e,!1),og("Firebase.createUser",e,"email"),og("Firebase.createUser",e,"password"),A("Firebase.createUser",2,t,!1),this.k.M.se(e,t)},U.prototype.createUser=U.prototype.se,U.prototype.Te=function(e,t){x("Firebase.removeUser",2,2,arguments.length),ng("Firebase.removeUser",1,e,!1),og("Firebase.removeUser",e,"email"),og("Firebase.removeUser",e,"password"),A("Firebase.removeUser",2,t,!1),this.k.M.Te(e,t)},U.prototype.removeUser=U.prototype.Te,U.prototype.pe=function(e,t){x("Firebase.changePassword",2,2,arguments.length),ng("Firebase.changePassword",1,e,!1),og("Firebase.changePassword",e,"email"),og("Firebase.changePassword",e,"oldPassword"),og("Firebase.changePassword",e,"newPassword"),A("Firebase.changePassword",2,t,!1),this.k.M.pe(e,t)},U.prototype.changePassword=U.prototype.pe,U.prototype.oe=function(e,t){x("Firebase.changeEmail",2,2,arguments.length),ng("Firebase.changeEmail",1,e,!1),og("Firebase.changeEmail",e,"oldEmail"),og("Firebase.changeEmail",e,"newEmail"),og("Firebase.changeEmail",e,"password"),A("Firebase.changeEmail",2,t,!1),this.k.M.oe(e,t)},U.prototype.changeEmail=U.prototype.oe,U.prototype.Ve=function(e,t){x("Firebase.resetPassword",2,2,arguments.length),ng("Firebase.resetPassword",1,e,!1),og("Firebase.resetPassword",e,"email"),A("Firebase.resetPassword",2,t,!1),this.k.M.Ve(e,t)},U.prototype.resetPassword=U.prototype.Ve}(),module.exports=Firebase},function(e,t){e.exports=function(e){"function"==typeof execScript?execScript(e):eval.call(null,e)}},function(e,t){e.exports="function AudioFileRequest(url, async) {\n    this.url = url;\n    if (typeof async == 'undefined' || async == null) {\n        async = true;\n    }\n    this.async = async;\n    var splitURL = url.split('.');\n    this.extension = splitURL[splitURL.length - 1].toLowerCase();\n}\n\nAudioFileRequest.prototype.onSuccess = function(decoded) {\n};\n\nAudioFileRequest.prototype.onFailure = function(decoded) {\n};\n\n\nAudioFileRequest.prototype.send = function() {\n    if (this.extension != 'wav' &&\n        this.extension != 'aiff' &&\n        this.extension != 'aif') {\n        this.onFailure();\n        return;\n    }\n\n    var request = new XMLHttpRequest();\n    request.open('GET', this.url, this.async);\n    request.overrideMimeType('text/plain; charset=x-user-defined');\n    request.onreadystatechange = function(event) {\n        if (request.readyState == 4) {\n            if (request.status == 200 || request.status == 0) {\n                this.handleResponse(request.responseText);\n            }\n            else {\n                this.onFailure();\n            }\n        }\n    }.bind(this);\n    request.send(null);\n};\n\nAudioFileRequest.prototype.handleResponse = function(data) {\n    var decoder, decoded;\n    if (this.extension == 'wav') {\n        decoder = new WAVDecoder();\n        decoded = decoder.decode(data);\n    }\n    else if (this.extension == 'aiff' || this.extension == 'aif') {\n        decoder = new AIFFDecoder();\n        decoded = decoder.decode(data);\n    }\n    this.onSuccess(decoded);\n};\n\n\nfunction Decoder() {\n}\n\nDecoder.prototype.readString = function(data, offset, length) {\n    return data.slice(offset, offset + length);\n};\n\nDecoder.prototype.readIntL = function(data, offset, length) {\n    var value = 0;\n    for (var i = 0; i < length; i++) {\n        value = value + ((data.charCodeAt(offset + i) & 0xFF) *\n                         Math.pow(2, 8 * i));\n    }\n    return value;\n};\n\nDecoder.prototype.readChunkHeaderL = function(data, offset) {\n    var chunk = {};\n    chunk.name = this.readString(data, offset, 4);\n    chunk.length = this.readIntL(data, offset + 4, 4);\n    return chunk;\n};\n\nDecoder.prototype.readIntB = function(data, offset, length) {\n    var value = 0;\n    for (var i = 0; i < length; i++) {\n        value = value + ((data.charCodeAt(offset + i) & 0xFF) *\n                         Math.pow(2, 8 * (length - i - 1)));\n    }\n    return value;\n};\n\nDecoder.prototype.readChunkHeaderB = function(data, offset) {\n    var chunk = {};\n    chunk.name = this.readString(data, offset, 4);\n    chunk.length = this.readIntB(data, offset + 4, 4);\n    return chunk;\n};\n\nDecoder.prototype.readFloatB = function(data, offset) {\n    var expon = this.readIntB(data, offset, 2);\n    var range = 1 << 16 - 1;\n    if (expon >= range) {\n        expon |= ~(range - 1);\n    }\n\n    var sign = 1;\n    if (expon < 0) {\n        sign = -1;\n        expon += range;\n    }\n\n    var himant = this.readIntB(data, offset + 2, 4);\n    var lomant = this.readIntB(data, offset + 6, 4);\n    var value;\n    if (expon == himant == lomant == 0) {\n        value = 0;\n    }\n    else if (expon == 0x7FFF) {\n        value = Number.MAX_VALUE;\n    }\n    else {\n        expon -= 16383;\n        value = (himant * 0x100000000 + lomant) * Math.pow(2, expon - 63);\n    }\n    return sign * value;\n};\n\nfunction WAVDecoder(data) {\n}\n\nWAVDecoder.prototype.__proto__ = Decoder.prototype;\n\nWAVDecoder.prototype.decode = function(data) {\n    var decoded = {};\n    var offset = 0;\n    // Header\n    var chunk = this.readChunkHeaderL(data, offset);\n    offset += 8;\n    if (chunk.name != 'RIFF') {\n        console.error('File is not a WAV');\n        return null;\n    }\n\n    var fileLength = chunk.length;\n    fileLength += 8;\n\n    var wave = this.readString(data, offset, 4);\n    offset += 4;\n    if (wave != 'WAVE') {\n        console.error('File is not a WAV');\n        return null;\n    }\n\n    while (offset < fileLength) {\n        var chunk = this.readChunkHeaderL(data, offset);\n        offset += 8;\n        if (chunk.name == 'fmt ') {\n            // File encoding\n            var encoding = this.readIntL(data, offset, 2);\n            offset += 2;\n\n            if (encoding != 0x0001) {\n                // Only support PCM\n                console.error('Cannot decode non-PCM encoded WAV file');\n                return null;\n            }\n\n            // Number of channels\n            var numberOfChannels = this.readIntL(data, offset, 2);\n            offset += 2;\n\n            // Sample rate\n            var sampleRate = this.readIntL(data, offset, 4);\n            offset += 4;\n\n            // Ignore bytes/sec - 4 bytes\n            offset += 4;\n\n            // Ignore block align - 2 bytes\n            offset += 2;\n\n            // Bit depth\n            var bitDepth = this.readIntL(data, offset, 2);\n            var bytesPerSample = bitDepth / 8;\n            offset += 2;\n        }\n\n        else if (chunk.name == 'data') {\n            // Data must come after fmt, so we are okay to use it's variables\n            // here\n            var length = chunk.length / (bytesPerSample * numberOfChannels);\n            var channels = [];\n            for (var i = 0; i < numberOfChannels; i++) {\n                channels.push(new Float32Array(length));\n            }\n\n            for (var i = 0; i < numberOfChannels; i++) {\n                var channel = channels[i];\n                for (var j = 0; j < length; j++) {\n                    var index = offset;\n                    index += (j * numberOfChannels + i) * bytesPerSample;\n                    // Sample\n                    var value = this.readIntL(data, index, bytesPerSample);\n                    // Scale range from 0 to 2**bitDepth -> -2**(bitDepth-1) to\n                    // 2**(bitDepth-1)\n                    var range = 1 << bitDepth - 1;\n                    if (value >= range) {\n                        value |= ~(range - 1);\n                    }\n                    // Scale range to -1 to 1\n                    channel[j] = value / range;\n                }\n            }\n            offset += chunk.length;\n        }\n        else {\n            offset += chunk.length;\n        }\n    }\n    decoded.sampleRate = sampleRate;\n    decoded.bitDepth = bitDepth;\n    decoded.channels = channels;\n    decoded.length = length;\n    return decoded;\n};\n\n\nfunction AIFFDecoder() {\n}\n\nAIFFDecoder.prototype.__proto__ = Decoder.prototype;\n\nAIFFDecoder.prototype.decode = function(data) {\n    var decoded = {};\n    var offset = 0;\n    // Header\n    var chunk = this.readChunkHeaderB(data, offset);\n    offset += 8;\n    if (chunk.name != 'FORM') {\n        console.error('File is not an AIFF');\n        return null;\n    }\n\n    var fileLength = chunk.length;\n    fileLength += 8;\n\n    var aiff = this.readString(data, offset, 4);\n    offset += 4;\n    if (aiff != 'AIFF') {\n        console.error('File is not an AIFF');\n        return null;\n    }\n\n    while (offset < fileLength) {\n        var chunk = this.readChunkHeaderB(data, offset);\n        offset += 8;\n        if (chunk.name == 'COMM') {\n            // Number of channels\n            var numberOfChannels = this.readIntB(data, offset, 2);\n            offset += 2;\n\n            // Number of samples\n            var length = this.readIntB(data, offset, 4);\n            offset += 4;\n\n            var channels = [];\n            for (var i = 0; i < numberOfChannels; i++) {\n                channels.push(new Float32Array(length));\n            }\n\n            // Bit depth\n            var bitDepth = this.readIntB(data, offset, 2);\n            var bytesPerSample = bitDepth / 8;\n            offset += 2;\n\n            // Sample rate\n            var sampleRate = this.readFloatB(data, offset);\n            offset += 10;\n        }\n        else if (chunk.name == 'SSND') {\n            // Data offset\n            var dataOffset = this.readIntB(data, offset, 4);\n            offset += 4;\n\n            // Ignore block size\n            offset += 4;\n\n            // Skip over data offset\n            offset += dataOffset;\n\n            for (var i = 0; i < numberOfChannels; i++) {\n                var channel = channels[i];\n                for (var j = 0; j < length; j++) {\n                    var index = offset;\n                    index += (j * numberOfChannels + i) * bytesPerSample;\n                    // Sample\n                    var value = this.readIntB(data, index, bytesPerSample);\n                    // Scale range from 0 to 2**bitDepth -> -2**(bitDepth-1) to\n                    // 2**(bitDepth-1)\n                    var range = 1 << bitDepth - 1;\n                    if (value >= range) {\n                        value |= ~(range - 1);\n                    }\n                    // Scale range to -1 to 1\n                    channel[j] = value / range;\n                }\n            }\n            offset += chunk.length - dataOffset - 8;\n        }\n        else {\n            offset += chunk.length;\n        }\n    }\n    decoded.sampleRate = sampleRate;\n    decoded.bitDepth = bitDepth;\n    decoded.channels = channels;\n    decoded.length = length;\n    return decoded;\n};\n\n/*\n * @depends ../audiofile/audiofile.js\n */\n\n/**\n * A variable size multi-channel audio buffer.\n *\n * @constructor\n * @param {Number} numberOfChannels The initial number of channels.\n * @param {Number} length The length in samples of each channel.\n */\nvar AudioletBuffer = function(numberOfChannels, length) {\n    this.numberOfChannels = numberOfChannels;\n    this.length = length;\n\n    this.channels = [];\n    for (var i = 0; i < this.numberOfChannels; i++) {\n        this.channels.push(new Float32Array(length));\n    }\n\n    this.unslicedChannels = [];\n    for (var i = 0; i < this.numberOfChannels; i++) {\n        this.unslicedChannels.push(this.channels[i]);\n    }\n\n    this.isEmpty = false;\n    this.channelOffset = 0;\n};\n\n/**\n * Get a single channel of data\n *\n * @param {Number} channel The index of the channel.\n * @return {Float32Array} The requested channel.\n */\nAudioletBuffer.prototype.getChannelData = function(channel) {\n    return (this.channels[channel]);\n};\n\n/**\n * Set the data in the buffer by copying data from a second buffer\n *\n * @param {AudioletBuffer} buffer The buffer to copy data from.\n */\nAudioletBuffer.prototype.set = function(buffer) {\n    var numberOfChannels = buffer.numberOfChannels;\n    for (var i = 0; i < numberOfChannels; i++) {\n        this.channels[i].set(buffer.getChannelData(i));\n    }\n};\n\n/**\n * Set the data in a section of the buffer by copying data from a second buffer\n *\n * @param {AudioletBuffer} buffer The buffer to copy data from.\n * @param {Number} length The number of samples to copy.\n * @param {Number} [inputOffset=0] An offset to read data from.\n * @param {Number} [outputOffset=0] An offset to write data to.\n */\nAudioletBuffer.prototype.setSection = function(buffer, length, inputOffset,\n                                               outputOffset) {\n    inputOffset = inputOffset || 0;\n    outputOffset = outputOffset || 0;\n    var numberOfChannels = buffer.numberOfChannels;\n    for (var i = 0; i < numberOfChannels; i++) {\n        // Begin subarray-of-subarray fix\n        inputOffset += buffer.channelOffset;\n        outputOffset += this.channelOffset;\n        var channel1 = this.unslicedChannels[i].subarray(outputOffset,\n                outputOffset +\n                length);\n        var channel2 = buffer.unslicedChannels[i].subarray(inputOffset,\n                inputOffset +\n                length);\n        // End subarray-of-subarray fix\n        // Uncomment the following lines when subarray-of-subarray is fixed\n        /*!\n           var channel1 = this.getChannelData(i).subarray(outputOffset,\n           outputOffset +\n           length);\n           var channel2 = buffer.getChannelData(i).subarray(inputOffset,\n           inputOffset +\n           length);\n         */\n        channel1.set(channel2);\n    }\n};\n\n/**\n * Add the data from a second buffer to the data in this buffer\n *\n * @param {AudioletBuffer} buffer The buffer to add data from.\n */\nAudioletBuffer.prototype.add = function(buffer) {\n    var length = this.length;\n    var numberOfChannels = buffer.numberOfChannels;\n    for (var i = 0; i < numberOfChannels; i++) {\n        var channel1 = this.getChannelData(i);\n        var channel2 = buffer.getChannelData(i);\n        for (var j = 0; j < length; j++) {\n            channel1[j] += channel2[j];\n        }\n    }\n};\n\n/**\n * Add the data from a section of a second buffer to the data in this buffer\n *\n * @param {AudioletBuffer} buffer The buffer to add data from.\n * @param {Number} length The number of samples to add.\n * @param {Number} [inputOffset=0] An offset to read data from.\n * @param {Number} [outputOffset=0] An offset to write data to.\n */\nAudioletBuffer.prototype.addSection = function(buffer, length, inputOffset,\n                                               outputOffset) {\n    inputOffset = inputOffset || 0;\n    outputOffset = outputOffset || 0;\n    var numberOfChannels = buffer.numberOfChannels;\n    for (var i = 0; i < numberOfChannels; i++) {\n        var channel1 = this.getChannelData(i);\n        var channel2 = buffer.getChannelData(i);\n        for (var j = 0; j < length; j++) {\n            channel1[j + outputOffset] += channel2[j + inputOffset];\n        }\n    }\n};\n\n/**\n * Resize the buffer.  This operation can optionally be lazy, which is\n * generally faster but doesn't necessarily result in an empty buffer.\n *\n * @param {Number} numberOfChannel The new number of channels.\n * @param {Number} length The new length of each channel.\n * @param {Boolean} [lazy=false] If true a resized buffer may not be empty.\n * @param {Number} [offset=0] An offset to resize from.\n */\nAudioletBuffer.prototype.resize = function(numberOfChannels, length, lazy,\n                                           offset) {\n    offset = offset || 0;\n    // Local variables\n    var channels = this.channels;\n    var unslicedChannels = this.unslicedChannels;\n\n    var oldLength = this.length;\n    var channelOffset = this.channelOffset + offset;\n\n    for (var i = 0; i < numberOfChannels; i++) {\n        // Get the current channels\n        var channel = channels[i];\n        var unslicedChannel = unslicedChannels[i];\n\n        if (length > oldLength) {\n            // We are increasing the size of the buffer\n            var oldChannel = channel;\n\n            if (!lazy ||\n                !unslicedChannel ||\n                unslicedChannel.length < length) {\n                // Unsliced channel is not empty when it needs to be,\n                // does not exist, or is not large enough, so needs to be\n                // (re)created\n                unslicedChannel = new Float32Array(length);\n            }\n\n            channel = unslicedChannel.subarray(0, length);\n\n            if (!lazy && oldChannel) {\n                channel.set(oldChannel, offset);\n            }\n\n            channelOffset = 0;\n        }\n        else {\n            // We are decreasing the size of the buffer\n            if (!unslicedChannel) {\n                // Unsliced channel does not exist\n                // We can assume that we always have at least one unsliced\n                // channel, so we can copy its length\n                var unslicedLength = unslicedChannels[0].length;\n                unslicedChannel = new Float32Array(unslicedLength);\n            }\n            // Begin subarray-of-subarray fix\n            offset = channelOffset;\n            channel = unslicedChannel.subarray(offset, offset + length);\n            // End subarray-of-subarray fix\n            // Uncomment the following lines when subarray-of-subarray is\n            // fixed.\n            // TODO: Write version where subarray-of-subarray is used\n        }\n        channels[i] = channel;\n        unslicedChannels[i] = unslicedChannel;\n    }\n\n    this.channels = channels.slice(0, numberOfChannels);\n    this.unslicedChannels = unslicedChannels.slice(0, numberOfChannels);\n    this.length = length;\n    this.numberOfChannels = numberOfChannels;\n    this.channelOffset = channelOffset;\n};\n\n/**\n * Append the data from a second buffer to the end of the buffer\n *\n * @param {AudioletBuffer} buffer The buffer to append to this buffer.\n */\nAudioletBuffer.prototype.push = function(buffer) {\n    var bufferLength = buffer.length;\n    this.resize(this.numberOfChannels, this.length + bufferLength);\n    this.setSection(buffer, bufferLength, 0, this.length - bufferLength);\n};\n\n/**\n * Remove data from the end of the buffer, placing it in a second buffer.\n *\n * @param {AudioletBuffer} buffer The buffer to move data into.\n */\nAudioletBuffer.prototype.pop = function(buffer) {\n    var bufferLength = buffer.length;\n    var offset = this.length - bufferLength;\n    buffer.setSection(this, bufferLength, offset, 0);\n    this.resize(this.numberOfChannels, offset);\n};\n\n/**\n * Prepend data from a second buffer to the beginning of the buffer.\n *\n * @param {AudioletBuffer} buffer The buffer to prepend to this buffer.\n */\nAudioletBuffer.prototype.unshift = function(buffer) {\n    var bufferLength = buffer.length;\n    this.resize(this.numberOfChannels, this.length + bufferLength, false,\n            bufferLength);\n    this.setSection(buffer, bufferLength, 0, 0);\n};\n\n/**\n * Remove data from the beginning of the buffer, placing it in a second buffer.\n *\n * @param {AudioletBuffer} buffer The buffer to move data into.\n */\nAudioletBuffer.prototype.shift = function(buffer) {\n    var bufferLength = buffer.length;\n    buffer.setSection(this, bufferLength, 0, 0);\n    this.resize(this.numberOfChannels, this.length - bufferLength,\n            false, bufferLength);\n};\n\n/**\n * Make all values in the buffer 0\n */\nAudioletBuffer.prototype.zero = function() {\n    var numberOfChannels = this.numberOfChannels;\n    for (var i = 0; i < numberOfChannels; i++) {\n        var channel = this.getChannelData(i);\n        var length = this.length;\n        for (var j = 0; j < length; j++) {\n            channel[j] = 0;\n        }\n    }\n};\n\n/**\n * Copy the buffer into a single Float32Array, with each channel appended to\n * the end of the previous one.\n *\n * @return {Float32Array} The combined array of data.\n */\nAudioletBuffer.prototype.combined = function() {\n    var channels = this.channels;\n    var numberOfChannels = this.numberOfChannels;\n    var length = this.length;\n    var combined = new Float32Array(numberOfChannels * length);\n    for (var i = 0; i < numberOfChannels; i++) {\n        combined.set(channels[i], i * length);\n    }\n    return combined;\n};\n\n/**\n * Copy the buffer into a single Float32Array, with the channels interleaved.\n *\n * @return {Float32Array} The interleaved array of data.\n */\nAudioletBuffer.prototype.interleaved = function() {\n    var channels = this.channels;\n    var numberOfChannels = this.numberOfChannels;\n    var length = this.length;\n    var interleaved = new Float32Array(numberOfChannels * length);\n    for (var i = 0; i < length; i++) {\n        for (var j = 0; j < numberOfChannels; j++) {\n            interleaved[numberOfChannels * i + j] = channels[j][i];\n        }\n    }\n    return interleaved;\n};\n\n/**\n * Return a new copy of the buffer.\n *\n * @return {AudioletBuffer} The copy of the buffer.\n */\nAudioletBuffer.prototype.copy = function() {\n    var buffer = new AudioletBuffer(this.numberOfChannels, this.length);\n    buffer.set(this);\n    return buffer;\n};\n\n/**\n * Load a .wav or .aiff file into the buffer using audiofile.js\n *\n * @param {String} path The path to the file.\n * @param {Boolean} [async=true] Whether to load the file asynchronously.\n * @param {Function} [callback] Function called if the file loaded sucessfully.\n */\nAudioletBuffer.prototype.load = function(path, async, callback) {\n    var request = new AudioFileRequest(path, async);\n    request.onSuccess = function(decoded) {\n        this.length = decoded.length;\n        this.numberOfChannels = decoded.channels.length;\n        this.unslicedChannels = decoded.channels;\n        this.channels = decoded.channels;\n        this.channelOffset = 0;\n        if (callback) {\n            callback();\n        }\n    }.bind(this);\n\n    request.onFailure = function() {\n        console.error('Could not load', path);\n    }.bind(this);\n\n    request.send();\n};\n\n/**\n * A container for collections of connected AudioletNodes.  Groups make it\n * possible to create multiple copies of predefined networks of nodes,\n * without having to manually create and connect up each individual node.\n *\n * From the outside groups look and behave exactly the same as nodes.\n * Internally you can connect nodes directly to the group's inputs and\n * outputs, allowing connection to nodes outside of the group.\n *\n * @constructor\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} numberOfInputs The number of inputs.\n * @param {Number} numberOfOutputs The number of outputs.\n */\nvar AudioletGroup = function(audiolet, numberOfInputs, numberOfOutputs) {\n    this.audiolet = audiolet;\n\n    this.inputs = [];\n    for (var i = 0; i < numberOfInputs; i++) {\n        this.inputs.push(new PassThroughNode(this.audiolet, 1, 1));\n    }\n\n    this.outputs = [];\n    for (var i = 0; i < numberOfOutputs; i++) {\n        this.outputs.push(new PassThroughNode(this.audiolet, 1, 1));\n    }\n};\n\n/**\n * Connect the group to another node or group\n *\n * @param {AudioletNode|AudioletGroup} node The node to connect to.\n * @param {Number} [output=0] The index of the output to connect from.\n * @param {Number} [input=0] The index of the input to connect to.\n */\nAudioletGroup.prototype.connect = function(node, output, input) {\n    this.outputs[output || 0].connect(node, 0, input);\n};\n\n/**\n * Disconnect the group from another node or group\n *\n * @param {AudioletNode|AudioletGroup} node The node to disconnect from.\n * @param {Number} [output=0] The index of the output to disconnect.\n * @param {Number} [input=0] The index of the input to disconnect.\n */\nAudioletGroup.prototype.disconnect = function(node, output, input) {\n    this.outputs[output || 0].disconnect(node, 0, input);\n};\n\n/**\n * Remove the group completely from the processing graph, disconnecting all\n * of its inputs and outputs\n */\nAudioletGroup.prototype.remove = function() {\n    var numberOfInputs = this.inputs.length;\n    for (var i = 0; i < numberOfInputs; i++) {\n        this.inputs[i].remove();\n    }\n\n    var numberOfOutputs = this.outputs.length;\n    for (var i = 0; i < numberOfOutputs; i++) {\n        this.outputs[i].remove();\n    }\n};\n\n/*!\n * @depends AudioletGroup.js\n */\n\n/**\n * Group containing all of the components for the Audiolet output chain.  The\n * chain consists of:\n *\n *     Input => Scheduler => UpMixer => Output\n *\n * **Inputs**\n *\n * - Audio\n *\n * @constructor\n * @extends AudioletGroup\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} [sampleRate=44100] The sample rate to run at.\n * @param {Number} [numberOfChannels=2] The number of output channels.\n * @param {Number} [bufferSize=8192] A fixed buffer size to use.\n */\nvar AudioletDestination = function(audiolet, sampleRate, numberOfChannels,\n                                   bufferSize) {\n    AudioletGroup.call(this, audiolet, 1, 0);\n\n    this.device = new AudioletDevice(audiolet, sampleRate,\n            numberOfChannels, bufferSize);\n    audiolet.device = this.device; // Shortcut\n    this.scheduler = new Scheduler(audiolet);\n    audiolet.scheduler = this.scheduler; // Shortcut\n\n    this.upMixer = new UpMixer(audiolet, this.device.numberOfChannels);\n\n    this.inputs[0].connect(this.scheduler);\n    this.scheduler.connect(this.upMixer);\n    this.upMixer.connect(this.device);\n};\nextend(AudioletDestination, AudioletGroup);\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nAudioletDestination.prototype.toString = function() {\n    return 'Destination';\n};\n\n/**\n * The basic building block of Audiolet applications.  Nodes are connected\n * together to create a processing graph which governs the flow of audio data.\n * AudioletNodes can contain any number of inputs and outputs which send and\n * receive one or more channels of audio data.  Audio data is created and\n * processed using the generate function, which is called whenever new data is\n * needed.\n *\n * @constructor\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} numberOfInputs The number of inputs.\n * @param {Number} numberOfOutputs The number of outputs.\n * @param {Function} [generate] A replacement for the generate function.\n */\nvar AudioletNode = function(audiolet, numberOfInputs, numberOfOutputs,\n                            generate) {\n    this.audiolet = audiolet;\n\n    this.inputs = [];\n    for (var i = 0; i < numberOfInputs; i++) {\n        this.inputs.push(new AudioletInput(this, i));\n    }\n\n    this.outputs = [];\n    for (var i = 0; i < numberOfOutputs; i++) {\n        this.outputs.push(new AudioletOutput(this, i));\n    }\n\n    if (generate) {\n        this.generate = generate;\n    }\n};\n\n/**\n * Connect the node to another node or group.\n *\n * @param {AudioletNode|AudioletGroup} node The node to connect to.\n * @param {Number} [output=0] The index of the output to connect from.\n * @param {Number} [input=0] The index of the input to connect to.\n */\nAudioletNode.prototype.connect = function(node, output, input) {\n    if (node instanceof AudioletGroup) {\n        // Connect to the pass-through node rather than the group\n        node = node.inputs[input || 0];\n        input = 0;\n    }\n    var outputPin = this.outputs[output || 0];\n    var inputPin = node.inputs[input || 0];\n    outputPin.connect(inputPin);\n    inputPin.connect(outputPin);\n\n    this.audiolet.device.needTraverse = true;\n};\n\n/**\n * Disconnect the node from another node or group\n *\n * @param {AudioletNode|AudioletGroup} node The node to disconnect from.\n * @param {Number} [output=0] The index of the output to disconnect.\n * @param {Number} [input=0] The index of the input to disconnect.\n */\nAudioletNode.prototype.disconnect = function(node, output, input) {\n    if (node instanceof AudioletGroup) {\n        node = node.inputs[input || 0];\n        input = 0;\n    }\n\n    var outputPin = this.outputs[output || 0];\n    var inputPin = node.inputs[input || 0];\n    inputPin.disconnect(outputPin);\n    outputPin.disconnect(inputPin);\n\n    this.audiolet.device.needTraverse = true;\n};\n\n/**\n * Force an output to contain a fixed number of channels.\n *\n * @param {Number} output The index of the output.\n * @param {Number} numberOfChannels The number of channels.\n */\nAudioletNode.prototype.setNumberOfOutputChannels = function(output,\n                                                            numberOfChannels) {\n    this.outputs[output].numberOfChannels = numberOfChannels;\n};\n\n/**\n * Link an output to an input, forcing the output to always contain the\n * same number of channels as the input.\n *\n * @param {Number} output The index of the output.\n * @param {Number} input The index of the input.\n */\nAudioletNode.prototype.linkNumberOfOutputChannels = function(output, input) {\n    this.outputs[output].linkNumberOfChannels(this.inputs[input]);\n};\n\n/**\n * Process samples a from each channel. This function should not be called\n * manually by users, who should instead rely on automatic ticking from\n * connections to the AudioletDevice.\n */\nAudioletNode.prototype.tick = function() {\n    this.createInputSamples();\n    this.createOutputSamples();\n\n    this.generate();\n};\n\n/**\n * Traverse the audio graph, adding this and any parent nodes to the nodes\n * array.\n *\n * @param {AudioletNode[]} nodes Array to add nodes to.\n */\nAudioletNode.prototype.traverse = function(nodes) {\n    if (nodes.indexOf(this) == -1) {\n        nodes.push(this);\n        nodes = this.traverseParents(nodes);\n    }\n    return nodes;\n};\n\n/**\n * Call the traverse function on nodes which are connected to the inputs.\n */\nAudioletNode.prototype.traverseParents = function(nodes) {\n    var numberOfInputs = this.inputs.length;\n    for (var i = 0; i < numberOfInputs; i++) {\n        var input = this.inputs[i];\n        var numberOfStreams = input.connectedFrom.length;\n        for (var j = 0; j < numberOfStreams; j++) {\n            nodes = input.connectedFrom[j].node.traverse(nodes);\n        }\n    }\n    return nodes;\n};\n\n/**\n * Process a sample for each channel, reading from the inputs and putting new\n * values into the outputs.  Override me!\n */\nAudioletNode.prototype.generate = function() {\n};\n\n/**\n * Create the input samples by grabbing data from the outputs of connected\n * nodes and summing it.  If no nodes are connected to an input, then\n * give an empty array\n */\nAudioletNode.prototype.createInputSamples = function() {\n    var numberOfInputs = this.inputs.length;\n    for (var i = 0; i < numberOfInputs; i++) {\n        var input = this.inputs[i];\n\n        var numberOfInputChannels = 0;\n\n        for (var j = 0; j < input.connectedFrom.length; j++) {\n            var output = input.connectedFrom[j];\n            for (var k = 0; k < output.samples.length; k++) {\n                var sample = output.samples[k];\n                if (k < numberOfInputChannels) {\n                    input.samples[k] += sample;\n                }\n                else {\n                    input.samples[k] = sample;\n                    numberOfInputChannels += 1;\n                }\n            }\n        }\n\n        if (input.samples.length > numberOfInputChannels) {\n            input.samples = input.samples.slice(0, numberOfInputChannels);\n        }\n    }\n};\n\n\n/**\n* Create output samples for each channel.\n*/\nAudioletNode.prototype.createOutputSamples = function() {\n    var numberOfOutputs = this.outputs.length;\n    for (var i = 0; i < numberOfOutputs; i++) {\n        var output = this.outputs[i];\n        var numberOfChannels = output.getNumberOfChannels();\n        if (output.samples.length == numberOfChannels) {\n            continue;\n        }\n        else if (output.samples.length > numberOfChannels) {\n            output.samples = output.samples.slice(0, numberOfChannels);\n            continue;\n        }\n\n        for (var j = output.samples.length; j < numberOfChannels; j++) {\n            output.samples[j] = 0;\n        }\n    }\n};\n\n/**\n * Remove the node completely from the processing graph, disconnecting all\n * of its inputs and outputs.\n */\nAudioletNode.prototype.remove = function() {\n    // Disconnect inputs\n    var numberOfInputs = this.inputs.length;\n    for (var i = 0; i < numberOfInputs; i++) {\n        var input = this.inputs[i];\n        var numberOfStreams = input.connectedFrom.length;\n        for (var j = 0; j < numberOfStreams; j++) {\n            var outputPin = input.connectedFrom[j];\n            var output = outputPin.node;\n            output.disconnect(this, outputPin.index, i);\n        }\n    }\n\n    // Disconnect outputs\n    var numberOfOutputs = this.outputs.length;\n    for (var i = 0; i < numberOfOutputs; i++) {\n        var output = this.outputs[i];\n        var numberOfStreams = output.connectedTo.length;\n        for (var j = 0; j < numberOfStreams; j++) {\n            var inputPin = output.connectedTo[j];\n            var input = inputPin.node;\n            this.disconnect(input, i, inputPin.index);\n        }\n    }\n};\n\n\n/*!\n * @depends AudioletNode.js\n */\n\n/**\n * Audio output device.  Uses sink.js to output to a range of APIs.\n *\n * @constructor\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} [sampleRate=44100] The sample rate to run at.\n * @param {Number} [numberOfChannels=2] The number of output channels.\n * @param {Number} [bufferSize=8192] A fixed buffer size to use.\n */\nfunction AudioletDevice(audiolet, sampleRate, numberOfChannels, bufferSize) {\n    AudioletNode.call(this, audiolet, 1, 0);\n\n    this.sink = Sink(this.tick.bind(this), numberOfChannels, bufferSize,\n                     sampleRate);\n\n    // Re-read the actual values from the sink.  Sample rate especially is\n    // liable to change depending on what the soundcard allows.\n    this.sampleRate = this.sink.sampleRate;\n    this.numberOfChannels = this.sink.channelCount;\n    this.bufferSize = this.sink.preBufferSize;\n\n    this.writePosition = 0;\n    this.buffer = null;\n    this.paused = false;\n\n    this.needTraverse = true;\n    this.nodes = [];\n}\nextend(AudioletDevice, AudioletNode);\n\n/**\n* Overridden tick function. Pulls data from the input and writes it to the\n* device.\n*\n* @param {Float32Array} buffer Buffer to write data to.\n* @param {Number} numberOfChannels Number of channels in the buffer.\n*/\nAudioletDevice.prototype.tick = function(buffer, numberOfChannels) {\n    if (!this.paused) {\n        var input = this.inputs[0];\n\n        var samplesNeeded = buffer.length / numberOfChannels;\n        for (var i = 0; i < samplesNeeded; i++) {\n            if (this.needTraverse) {\n                this.nodes = this.traverse([]);\n                this.needTraverse = false;\n            }\n\n            // Tick in reverse order up to, but not including this node\n            for (var j = this.nodes.length - 1; j > 0; j--) {\n                this.nodes[j].tick();\n            }\n            // Cut down tick to just sum the input samples\n            this.createInputSamples();\n\n            for (var j = 0; j < numberOfChannels; j++) {\n                buffer[i * numberOfChannels + j] = input.samples[j];\n            }\n\n            this.writePosition += 1;\n        }\n    }\n};\n\n/**\n * Get the current output position\n *\n * @return {Number} Output position in samples.\n */\nAudioletDevice.prototype.getPlaybackTime = function() {\n    return this.sink.getPlaybackTime();\n};\n\n/**\n * Get the current write position\n *\n * @return {Number} Write position in samples.\n */\nAudioletDevice.prototype.getWriteTime = function() {\n    return this.writePosition;\n};\n\n/**\n * Pause the output stream, and stop everything from ticking.  The playback\n * time will continue to increase, but the write time will be paused.\n */\nAudioletDevice.prototype.pause = function() {\n    this.paused = true;\n};\n\n/**\n * Restart the output stream.\n */\nAudioletDevice.prototype.play = function() {\n   this.paused = false;\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nAudioletDevice.prototype.toString = function() {\n    return 'Audio Output Device';\n};\n\n/**\n * Class representing a single input of an AudioletNode\n *\n * @constructor\n * @param {AudioletNode} node The node which the input belongs to.\n * @param {Number} index The index of the input.\n */\nvar AudioletInput = function(node, index) {\n    this.node = node;\n    this.index = index;\n    this.connectedFrom = [];\n    // Minimum sized buffer, which we can resize from accordingly\n    this.samples = [];\n};\n\n/**\n * Connect the input to an output\n *\n * @param {AudioletOutput} output The output to connect to.\n */\nAudioletInput.prototype.connect = function(output) {\n    this.connectedFrom.push(output);\n};\n\n/**\n * Disconnect the input from an output\n *\n * @param {AudioletOutput} output The output to disconnect from.\n */\nAudioletInput.prototype.disconnect = function(output) {\n    var numberOfStreams = this.connectedFrom.length;\n    for (var i = 0; i < numberOfStreams; i++) {\n        if (output == this.connectedFrom[i]) {\n            this.connectedFrom.splice(i, 1);\n            break;\n        }\n    }\n    if (this.connectedFrom.length == 0) {\n        this.samples = [];\n    }\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nAudioletInput.prototype.toString = function() {\n    return this.node.toString() + 'Input #' + this.index;\n};\n\n\n/**\n * The base audiolet object.  Contains an output node which pulls data from\n * connected nodes.\n *\n * @constructor\n * @param {Number} [sampleRate=44100] The sample rate to run at.\n * @param {Number} [numberOfChannels=2] The number of output channels.\n * @param {Number} [bufferSize] Block size.  If undefined uses a sane default.\n */\nvar Audiolet = function(sampleRate, numberOfChannels, bufferSize) {\n    this.output = new AudioletDestination(this, sampleRate,\n                                          numberOfChannels, bufferSize);\n};\n\n\n/**\n * Class representing a single output of an AudioletNode\n *\n * @constructor\n * @param {AudioletNode} node The node which the input belongs to.\n * @param {Number} index The index of the input.\n */\nvar AudioletOutput = function(node, index) {\n    this.node = node;\n    this.index = index;\n    this.connectedTo = [];\n    this.samples = [];\n\n    this.linkedInput = null;\n    this.numberOfChannels = 1;\n};\n\n/**\n * Connect the output to an input\n *\n * @param {AudioletInput} input The input to connect to.\n */\nAudioletOutput.prototype.connect = function(input) {\n    this.connectedTo.push(input);\n};\n\n/**\n * Disconnect the output from an input\n *\n * @param {AudioletInput} input The input to disconnect from.\n */\nAudioletOutput.prototype.disconnect = function(input) {\n    var numberOfStreams = this.connectedTo.length;\n    for (var i = 0; i < numberOfStreams; i++) {\n        if (input == this.connectedTo[i]) {\n            this.connectedTo.splice(i, 1);\n            break;\n        }\n    }\n};\n\n/**\n * Link the output to an input, forcing the output to always contain the\n * same number of channels as the input.\n *\n * @param {AudioletInput} input The input to link to.\n */\nAudioletOutput.prototype.linkNumberOfChannels = function(input) {\n    this.linkedInput = input;\n};\n\n/**\n * Unlink the output from its linked input\n */\nAudioletOutput.prototype.unlinkNumberOfChannels = function() {\n    this.linkedInput = null;\n};\n\n/**\n * Get the number of output channels, taking the value from the input if the\n * output is linked.\n *\n * @return {Number} The number of output channels.\n */\nAudioletOutput.prototype.getNumberOfChannels = function() {\n    if (this.linkedInput && this.linkedInput.connectedFrom.length) {\n        return (this.linkedInput.samples.length);\n    }\n    return (this.numberOfChannels);\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nAudioletOutput.prototype.toString = function() {\n    return this.node.toString() + 'Output #' + this.index + ' - ';\n};\n\n\n/**\n * AudioletParameters are used to provide either constant or varying values to\n * be used inside AudioletNodes.  AudioletParameters hold a static value, and\n * can also be linked to an AudioletInput.  If a node or group is connected to\n * the linked input, then the dynamic value taken from the node should be\n * prioritised over the stored static value.  If no node is connected then the\n * static value should be used.\n *\n * @constructor\n * @param {AudioletNode} node The node which the parameter is associated with.\n * @param {Number} [inputIndex] The index of the AudioletInput to link to.\n * @param {Number} [value=0] The initial static value to store.\n */\nvar AudioletParameter = function(node, inputIndex, value) {\n    this.node = node;\n    if (typeof inputIndex != 'undefined' && inputIndex != null) {\n        this.input = node.inputs[inputIndex];\n    }\n    else {\n        this.input = null;\n    }\n    this.value = value || 0;\n};\n\n/**\n * Check whether the static value should be used.\n *\n * @return {Boolean} True if the static value should be used.\n */\nAudioletParameter.prototype.isStatic = function() {\n    return (this.input.samples.length == 0);\n};\n\n/**\n * Check whether the dynamic values should be used.\n *\n * @return {Boolean} True if the dynamic values should be used.\n */\nAudioletParameter.prototype.isDynamic = function() {\n    return (this.input.samples.length > 0);\n};\n\n/**\n * Set the stored static value\n *\n * @param {Number} value The value to store.\n */\nAudioletParameter.prototype.setValue = function(value) {\n    this.value = value;\n};\n\n/**\n * Get the stored static value\n *\n * @return {Number} The stored static value.\n */\nAudioletParameter.prototype.getValue = function() {\n    if (this.input != null && this.input.samples.length > 0) {\n        return this.input.samples[0];\n    }\n    else {\n        return this.value;\n    }\n};\n\n/*\n * A method for extending a javascript pseudo-class\n * Taken from\n * http://peter.michaux.ca/articles/class-based-inheritance-in-javascript\n *\n * @param {Object} subclass The class to extend.\n * @param {Object} superclass The class to be extended.\n */\nfunction extend(subclass, superclass) {\n    function Dummy() {}\n    Dummy.prototype = superclass.prototype;\n    subclass.prototype = new Dummy();\n    subclass.prototype.constructor = subclass;\n}\n\n/*!\n * @depends ../core/AudioletNode.js\n */\n\n/**\n * A type of AudioletNode designed to allow AudioletGroups to exactly replicate\n * the behaviour of AudioletParameters.  By linking one of the group's inputs\n * to the ParameterNode's input, and calling `this.parameterName =\n * parameterNode` in the group's constructor, `this.parameterName` will behave\n * as if it were an AudioletParameter contained within an AudioletNode.\n *\n * **Inputs**\n *\n * - Parameter input\n *\n * **Outputs**\n *\n * - Parameter value\n *\n * **Parameters**\n *\n * - parameter The contained parameter.  Linked to input 0.\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} value The initial static value of the parameter.\n */\nvar ParameterNode = function(audiolet, value) {\n    AudioletNode.call(this, audiolet, 1, 1);\n    this.parameter = new AudioletParameter(this, 0, value);\n};\nextend(ParameterNode, AudioletNode);\n\n/**\n * Process samples\n */\nParameterNode.prototype.generate = function() {\n    this.outputs[0].samples[0] = this.parameter.getValue();\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nParameterNode.prototype.toString = function() {\n    return 'Parameter Node';\n};\n\n/*!\n * @depends AudioletNode.js\n */\n\n/**\n * A specialized type of AudioletNode where values from the inputs are passed\n * straight to the corresponding outputs in the most efficient way possible.\n * PassThroughNodes are used in AudioletGroups to provide the inputs and\n * outputs, and can also be used in analysis nodes where no modifications to\n * the incoming audio are made.\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} numberOfInputs The number of inputs.\n * @param {Number} numberOfOutputs The number of outputs.\n */\nvar PassThroughNode = function(audiolet, numberOfInputs, numberOfOutputs) {\n    AudioletNode.call(this, audiolet, numberOfInputs, numberOfOutputs);\n};\nextend(PassThroughNode, AudioletNode);\n\n/**\n * Create output samples for each channel, copying any input samples to\n * the corresponding outputs.\n */\nPassThroughNode.prototype.createOutputSamples = function() {\n    var numberOfOutputs = this.outputs.length;\n    // Copy the inputs buffers straight to the output buffers\n    for (var i = 0; i < numberOfOutputs; i++) {\n        var input = this.inputs[i];\n        var output = this.outputs[i];\n        if (input && input.samples.length != 0) {\n            // Copy the input buffer straight to the output buffers\n            output.samples = input.samples;\n        }\n        else {\n            // Create the correct number of output samples\n            var numberOfChannels = output.getNumberOfChannels();\n            if (output.samples.length == numberOfChannels) {\n                continue;\n            }\n            else if (output.samples.length > numberOfChannels) {\n                output.samples = output.samples.slice(0, numberOfChannels);\n                continue;\n            }\n\n            for (var j = output.samples.length; j < numberOfChannels; j++) {\n                output.samples[j] = 0;\n            }\n        }\n    }\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nPassThroughNode.prototype.toString = function() {\n    return 'Pass Through Node';\n};\n\n/**\n * Priority Queue based on python heapq module\n * http://svn.python.org/view/python/branches/release27-maint/Lib/heapq.py\n *\n * @constructor\n * @param {Object[]} [array] Initial array of values to store.\n * @param {Function} [compare] Compare function.\n */\nvar PriorityQueue = function(array, compare) {\n    if (compare) {\n        this.compare = compare;\n    }\n\n    if (array) {\n        this.heap = array;\n        for (var i = 0; i < Math.floor(this.heap.length / 2); i++) {\n            this.siftUp(i);\n        }\n    }\n    else {\n        this.heap = [];\n    }\n};\n\n/**\n * Add an item to the queue\n *\n * @param {Object} item The item to add.\n */\nPriorityQueue.prototype.push = function(item) {\n    this.heap.push(item);\n    this.siftDown(0, this.heap.length - 1);\n};\n\n/**\n * Remove and return the top item from the queue.\n *\n * @return {Object} The top item.\n */\nPriorityQueue.prototype.pop = function() {\n    var lastElement, returnItem;\n    lastElement = this.heap.pop();\n    if (this.heap.length) {\n        var returnItem = this.heap[0];\n        this.heap[0] = lastElement;\n        this.siftUp(0);\n    }\n    else {\n        returnItem = lastElement;\n    }\n    return (returnItem);\n};\n\n/**\n * Return the top item from the queue, without removing it.\n *\n * @return {Object} The top item.\n */\nPriorityQueue.prototype.peek = function() {\n    return (this.heap[0]);\n};\n\n/**\n * Check whether the queue is empty.\n *\n * @return {Boolean} True if the queue is empty.\n */\nPriorityQueue.prototype.isEmpty = function() {\n    return (this.heap.length == 0);\n};\n\n\n/**\n * Sift item down the queue.\n *\n * @param {Number} startPosition Queue start position.\n * @param {Number} position Item position.\n */\nPriorityQueue.prototype.siftDown = function(startPosition, position) {\n    var newItem = this.heap[position];\n    while (position > startPosition) {\n        var parentPosition = (position - 1) >> 1;\n        var parent = this.heap[parentPosition];\n        if (this.compare(newItem, parent)) {\n            this.heap[position] = parent;\n            position = parentPosition;\n            continue;\n        }\n        break;\n    }\n    this.heap[position] = newItem;\n};\n\n/**\n * Sift item up the queue.\n *\n * @param {Number} position Item position.\n */\nPriorityQueue.prototype.siftUp = function(position) {\n    var endPosition = this.heap.length;\n    var startPosition = position;\n    var newItem = this.heap[position];\n    var childPosition = 2 * position + 1;\n    while (childPosition < endPosition) {\n        var rightPosition = childPosition + 1;\n        if (rightPosition < endPosition &&\n            !this.compare(this.heap[childPosition],\n                          this.heap[rightPosition])) {\n            childPosition = rightPosition;\n        }\n        this.heap[position] = this.heap[childPosition];\n        position = childPosition;\n        childPosition = 2 * position + 1;\n    }\n    this.heap[position] = newItem;\n    this.siftDown(startPosition, position);\n};\n\n/**\n * Default compare function.\n *\n * @param {Number} a First item.\n * @param {Number} b Second item.\n * @return {Boolean} True if a < b.\n */\nPriorityQueue.prototype.compare = function(a, b) {\n    return (a < b);\n};\n\n/*!\n * @depends PassThroughNode.js\n */\n\n/**\n * A sample-accurate scheduler built as an AudioletNode.  The scheduler works\n * by storing a queue of events, and running callback functions when the\n * correct sample is being processed.  All timing and events are handled in\n * beats, which are converted to sample positions using a master tempo.\n *\n * **Inputs**\n *\n * - Audio\n *\n * **Outputs**\n *\n * - Audio\n *\n * @constructor\n * @extends PassThroughNode\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} [bpm=120] Initial tempo.\n */\nvar Scheduler = function(audiolet, bpm) {\n    PassThroughNode.call(this, audiolet, 1, 1);\n    this.linkNumberOfOutputChannels(0, 0);\n    this.bpm = bpm || 120;\n    this.queue = new PriorityQueue(null, function(a, b) {\n        return (a.time < b.time);\n    });\n\n    this.time = 0;\n    this.beat = 0;\n    this.beatInBar = 0;\n    this.bar = 0;\n    this.seconds = 0;\n    this.beatsPerBar = 0;\n\n    this.lastBeatTime = 0;\n    this.beatLength = 60 / this.bpm * this.audiolet.device.sampleRate;\n};\nextend(Scheduler, PassThroughNode);\n\n/**\n * Set the tempo of the scheduler.\n *\n * @param {Number} bpm The tempo in beats per minute.\n */\nScheduler.prototype.setTempo = function(bpm) {\n    this.bpm = bpm;\n    this.beatLength = 60 / this.bpm * this.audiolet.device.sampleRate;\n};\n\n/**\n * Add an event relative to the current write position\n *\n * @param {Number} beats How many beats in the future to schedule the event.\n * @param {Function} callback A function called when it is time for the event.\n * @return {Object} The event object.\n */\nScheduler.prototype.addRelative = function(beats, callback) {\n    var event = {};\n    event.callback = callback;\n    event.time = this.time + beats * this.beatLength;\n    this.queue.push(event);\n    return event;\n};\n\n/**\n * Add an event at an absolute beat position\n *\n * @param {Number} beat The beat at which the event should take place.\n * @param {Function} callback A function called when it is time for the event.\n * @return {Object} The event object.\n */\nScheduler.prototype.addAbsolute = function(beat, callback) {\n    if (beat < this.beat ||\n        beat == this.beat && this.time > this.lastBeatTime) {\n        // Nah\n        return null;\n    }\n    var event = {};\n    event.callback = callback;\n    event.time = this.lastBeatTime + (beat - this.beat) * this.beatLength;\n    this.queue.push(event);\n    return event;\n};\n\n/**\n * Schedule patterns to play, and provide the values generated to a callback.\n * The durationPattern argument can be either a number, giving a constant time\n * between each event, or a pattern, allowing varying time difference.\n *\n * @param {Pattern[]} patterns An array of patterns to play.\n * @param {Pattern|Number} durationPattern The number of beats between events.\n * @param {Function} callback Function called with the generated pattern values.\n * @return {Object} The event object.\n */\nScheduler.prototype.play = function(patterns, durationPattern, callback) {\n    var event = {};\n    event.patterns = patterns;\n    event.durationPattern = durationPattern;\n    event.callback = callback;\n    // TODO: Quantizing start time\n    event.time = this.audiolet.device.getWriteTime();\n    this.queue.push(event);\n    return event;\n};\n\n/**\n * Schedule patterns to play starting at an absolute beat position,\n * and provide the values generated to a callback.\n * The durationPattern argument can be either a number, giving a constant time\n * between each event, or a pattern, allowing varying time difference.\n *\n * @param {Number} beat The beat at which the event should take place.\n * @param {Pattern[]} patterns An array of patterns to play.\n * @param {Pattern|Number} durationPattern The number of beats between events.\n * @param {Function} callback Function called with the generated pattern values.\n * @return {Object} The event object.\n */\nScheduler.prototype.playAbsolute = function(beat, patterns, durationPattern,\n                                            callback) {\n    if (beat < this.beat ||\n        beat == this.beat && this.time > this.lastBeatTime) {\n        // Nah\n        return null;\n    }\n    var event = {};\n    event.patterns = patterns;\n    event.durationPattern = durationPattern;\n    event.callback = callback;\n    event.time = this.lastBeatTime + (beat - this.beat) * this.beatLength;\n    this.queue.push(event);\n    return event;\n};\n\n\n/**\n * Remove a scheduled event from the scheduler\n *\n * @param {Object} event The event to remove.\n */\nScheduler.prototype.remove = function(event) {\n    var idx = this.queue.heap.indexOf(event);\n    if (idx != -1) {\n        this.queue.heap.splice(idx, 1);\n        // Recreate queue with event removed\n        this.queue = new PriorityQueue(this.queue.heap, function(a, b) {\n            return (a.time < b.time);\n        });\n    }\n};\n\n/**\n * Alias for remove, so for simple events we have add/remove, and for patterns\n * we have play/stop.\n *\n * @param {Object} event The event to remove.\n */\nScheduler.prototype.stop = function(event) {\n    this.remove(event);\n};\n\n/**\n * Overridden tick method.  Process any events which are due to take place\n * either now or previously.\n */\nScheduler.prototype.tick = function() {\n    PassThroughNode.prototype.tick.call(this);\n    this.tickClock();\n\n    while (!this.queue.isEmpty() &&\n           this.queue.peek().time <= this.time) {\n        var event = this.queue.pop();\n        this.processEvent(event);\n    }\n};\n\n/**\n * Update the various representations of time within the scheduler.\n */\nScheduler.prototype.tickClock = function() {\n    this.time += 1;\n    this.seconds = this.time / this.audiolet.device.sampleRate;\n    if (this.time >= this.lastBeatTime + this.beatLength) {\n        this.beat += 1;\n        this.beatInBar += 1;\n        if (this.beatInBar == this.beatsPerBar) {\n            this.bar += 1;\n            this.beatInBar = 0;\n        }\n        this.lastBeatTime += this.beatLength;\n    }\n};\n\n/**\n * Process a single event, grabbing any necessary values, calling the event's\n * callback, and rescheduling it if necessary.\n *\n * @param {Object} event The event to process.\n */\nScheduler.prototype.processEvent = function(event) {\n    var durationPattern = event.durationPattern;\n    if (durationPattern) {\n        // Pattern event\n        var args = [];\n        var patterns = event.patterns;\n        var numberOfPatterns = patterns.length;\n        for (var i = 0; i < numberOfPatterns; i++) {\n            var pattern = patterns[i];\n            var value = pattern.next();\n            if (value != null) {\n                args.push(value);\n            }\n            else {\n                // Null value for an argument, so don't process the\n                // callback or add any further events\n                return;\n            }\n        }\n        event.callback.apply(null, args);\n\n        var duration;\n        if (durationPattern instanceof Pattern) {\n            duration = durationPattern.next();\n        }\n        else {\n            duration = durationPattern;\n        }\n\n        if (duration) {\n            // Beats -> time\n            event.time += duration * this.beatLength;\n            this.queue.push(event);\n        }\n    }\n    else {\n        // Regular event\n        event.callback();\n    }\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nScheduler.prototype.toString = function() {\n    return 'Scheduler';\n};\n\n/**\n * Bidirectional shim for the renaming of slice to subarray.  Provides\n * backwards compatibility with old browser releases\n */\nvar Int8Array, Uint8Array, Int16Array, Uint16Array;\nvar Int32Array, Uint32Array, Float32Array, Float64Array;\nvar types = [Int8Array, Uint8Array, Int16Array, Uint16Array,\n             Int32Array, Uint32Array, Float32Array, Float64Array];\nvar original, shim;\nfor (var i = 0; i < types.length; ++i) {\n    if (types[i]) {\n        if (types[i].prototype.slice === undefined) {\n            original = 'subarray';\n            shim = 'slice';\n        }\n        else if (types[i].prototype.subarray === undefined) {\n            original = 'slice';\n            shim = 'subarray';\n        }\n        Object.defineProperty(types[i].prototype, shim, {\n            value: types[i].prototype[original],\n            enumerable: false\n        });\n    }\n}\n\n\n/*!\n * @depends ../core/AudioletNode.js\n */\n\n/**\n * A generic envelope consisting of linear transitions of varying duration\n * between a series of values.\n *\n * **Inputs**\n *\n * - Gate\n *\n * **Outputs**\n *\n * - Envelope\n *\n * **Parameters**\n *\n * - gate Gate controlling the envelope.  Values should be 0 (off) or 1 (on).\n * Linked to input 0.\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} [gate=1] Initial gate value.\n * @param {Number[]} levels An array (of length n) of values to move between.\n * @param {Number[]} times An array of n-1 durations - one for each transition.\n * @param {Number} [releaseStage] Sustain at this stage until the the gate is 0.\n * @param {Function} [onComplete] Function called as the envelope finishes.\n */\nvar Envelope = function(audiolet, gate, levels, times, releaseStage,\n                        onComplete) {\n    AudioletNode.call(this, audiolet, 1, 1);\n    this.gate = new AudioletParameter(this, 0, gate || 1);\n\n    this.levels = [];\n    for (var i=0; i<levels.length; i++) {\n        this.levels.push(new AudioletParameter(this, null, levels[i]));\n    }\n\n    this.times = [];\n    for (var i=0; i<times.length; i++) {\n        this.times.push(new AudioletParameter(this, null, times[i]));\n    }\n\n    this.releaseStage = releaseStage;\n    this.onComplete = onComplete;\n\n    this.stage = null;\n    this.time = null;\n    this.changeTime = null;\n\n    this.level = this.levels[0].getValue();\n    this.delta = 0;\n    this.gateOn = false;\n};\nextend(Envelope, AudioletNode);\n\n/**\n * Process samples\n */\nEnvelope.prototype.generate = function() {\n    var gate = this.gate.getValue();\n\n    var stageChanged = false;\n\n    if (gate && !this.gateOn) {\n        // Key pressed\n        this.gateOn = true;\n        this.stage = 0;\n        this.time = 0;\n        this.delta = 0;\n        this.level = this.levels[0].getValue();\n        if (this.stage != this.releaseStage) {\n            stageChanged = true;\n        }\n    }\n\n    if (this.gateOn && !gate) {\n        // Key released\n        this.gateOn = false;\n        if (this.releaseStage != null) {\n            // Jump to the release stage\n            this.stage = this.releaseStage;\n            stageChanged = true;\n        }\n    }\n\n    if (this.changeTime) {\n        // We are not sustaining, and we are playing, so increase the\n        // time\n        this.time += 1;\n        if (this.time >= this.changeTime) {\n            // Need to go to the next stage\n            this.stage += 1;\n            if (this.stage != this.releaseStage) {\n                stageChanged = true;\n            }\n            else {\n                // If we reach the release stage then sustain the value\n                // until the gate is released rather than moving on\n                // to the next level.\n                this.changeTime = null;\n                this.delta = 0;\n            }\n        }\n    }\n\n    if (stageChanged) {\n//        level = this.levels[stage];\n        if (this.stage != this.times.length) {\n            // Actually update the variables\n            this.delta = this.calculateDelta(this.stage, this.level);\n            this.changeTime = this.calculateChangeTime(this.stage, this.time);\n        }\n        else {\n            // Made it to the end, so finish up\n            if (this.onComplete) {\n                this.onComplete();\n            }\n            this.stage = null;\n            this.time = null;\n            this.changeTime = null;\n\n            this.delta = 0;\n        }\n    }\n\n    this.level += this.delta;\n    this.outputs[0].samples[0] = this.level;\n};\n\n/**\n * Calculate the change in level needed each sample for a section\n *\n * @param {Number} stage The index of the current stage.\n * @param {Number} level The current level.\n * @return {Number} The change in level.\n */\nEnvelope.prototype.calculateDelta = function(stage, level) {\n    var delta = this.levels[stage + 1].getValue() - level;\n    var stageTime = this.times[stage].getValue() *\n                    this.audiolet.device.sampleRate;\n    return (delta / stageTime);\n};\n\n/**\n * Calculate the time in samples at which the next stage starts\n *\n * @param {Number} stage The index of the current stage.\n * @param {Number} time The current time.\n * @return {Number} The change time.\n */\nEnvelope.prototype.calculateChangeTime = function(stage, time) {\n    var stageTime = this.times[stage].getValue() *\n                    this.audiolet.device.sampleRate;\n    return (time + stageTime);\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nEnvelope.prototype.toString = function() {\n    return 'Envelope';\n};\n\n/*!\n * @depends Envelope.js\n */\n\n/**\n * Linear attack-decay-sustain-release envelope\n *\n * **Inputs**\n *\n * - Gate\n *\n * **Outputs**\n *\n * - Envelope\n *\n * **Parameters**\n *\n * - gate The gate turning the envelope on and off.  Value changes from 0 -> 1\n * trigger the envelope.  Value changes from 1 -> 0 make the envelope move to\n * its release stage.  Linked to input 0.\n *\n * @constructor\n * @extends Envelope\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} gate The initial gate value.\n * @param {Number} attack The attack time in seconds.\n * @param {Number} decay The decay time in seconds.\n * @param {Number} sustain The sustain level (between 0 and 1).\n * @param {Number} release The release time in seconds.\n * @param {Function} onComplete A function called after the release stage.\n */\nvar ADSREnvelope = function(audiolet, gate, attack, decay, sustain, release,\n                            onComplete) {\n    var levels = [0, 1, sustain, 0];\n    var times = [attack, decay, release];\n    Envelope.call(this, audiolet, gate, levels, times, 2, onComplete);\n\n    this.attack = this.times[0];\n    this.decay = this.times[1];\n    this.sustain = this.levels[2];\n    this.release = this.levels[2];\n};\nextend(ADSREnvelope, Envelope);\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nADSREnvelope.prototype.toString = function() {\n    return 'ADSR Envelope';\n};\n\n/*!\n * @depends ../core/AudioletNode.js\n */\n\n/**\n * Generic biquad filter.  The coefficients (a0, a1, a2, b0, b1 and b2) are set\n * using the calculateCoefficients function, which should be overridden and\n * will be called automatically when new values are needed.\n *\n * **Inputs**\n *\n * - Audio\n * - Filter frequency\n *\n * **Outputs**\n *\n * - Filtered audio\n *\n * **Parameters**\n *\n * - frequency The filter frequency.  Linked to input 1.\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} frequency The initial frequency.\n */\nvar BiquadFilter = function(audiolet, frequency) {\n    AudioletNode.call(this, audiolet, 2, 1);\n\n    // Same number of output channels as input channels\n    this.linkNumberOfOutputChannels(0, 0);\n\n    this.frequency = new AudioletParameter(this, 1, frequency || 22100);\n    this.lastFrequency = null; // See if we need to recalculate coefficients\n\n    // Delayed values\n    this.xValues = [];\n    this.yValues = [];\n\n    // Coefficients\n    this.b0 = 0;\n    this.b1 = 0;\n    this.b2 = 0;\n    this.a0 = 0;\n    this.a1 = 0;\n    this.a2 = 0;\n};\nextend(BiquadFilter, AudioletNode);\n\n/**\n * Calculate the biquad filter coefficients.  This should be overridden.\n *\n * @param {Number} frequency The filter frequency.\n */\nBiquadFilter.prototype.calculateCoefficients = function(frequency) {\n};\n\n/**\n * Process samples\n */\nBiquadFilter.prototype.generate = function() {\n    var input = this.inputs[0];\n    var output = this.outputs[0]\n    var xValueArray = this.xValues;\n    var yValueArray = this.yValues;\n\n    var frequency = this.frequency.getValue();\n\n    if (frequency != this.lastFrequency) {\n        // Recalculate the coefficients\n        this.calculateCoefficients(frequency);\n        this.lastFrequency = frequency;\n    }\n\n    var a0 = this.a0;\n    var a1 = this.a1;\n    var a2 = this.a2;\n    var b0 = this.b0;\n    var b1 = this.b1;\n    var b2 = this.b2;\n\n    var numberOfChannels = input.samples.length;\n    for (var i = 0; i < numberOfChannels; i++) {\n        if (i >= xValueArray.length) {\n            xValueArray.push([0, 0]);\n            yValueArray.push([0, 0]);\n        }\n\n        var xValues = xValueArray[i];\n        var x1 = xValues[0];\n        var x2 = xValues[1];\n        var yValues = yValueArray[i];\n        var y1 = yValues[0];\n        var y2 = yValues[1];\n\n        var x0 = input.samples[i];\n        var y0 = (b0 / a0) * x0 +\n                 (b1 / a0) * x1 +\n                 (b2 / a0) * x2 -\n                 (a1 / a0) * y1 -\n                 (a2 / a0) * y2;\n\n        output.samples[i] = y0;\n\n        xValues[0] = x0;\n        xValues[1] = x1;\n        yValues[0] = y0;\n        yValues[1] = y1;\n    }\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nBiquadFilter.prototype.toString = function() {\n    return 'Biquad Filter';\n};\n\n/*!\n * @depends BiquadFilter.js\n */\n\n/**\n * All-pass filter\n *\n * **Inputs**\n *\n * - Audio\n * - Filter frequency\n *\n * **Outputs**\n *\n * - Filtered audio\n *\n * **Parameters**\n *\n * - frequency The filter frequency.  Linked to input 1.\n *\n * @constructor\n * @extends BiquadFilter\n *\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} frequency The initial frequency.\n */\nvar AllPassFilter = function(audiolet, frequency) {\n    BiquadFilter.call(this, audiolet, frequency);\n};\nextend(AllPassFilter, BiquadFilter);\n\n/**\n * Calculate the biquad filter coefficients using maths from\n * http://www.musicdsp.org/files/Audio-EQ-Cookbook.txt\n *\n * @param {Number} frequency The filter frequency.\n */\nAllPassFilter.prototype.calculateCoefficients = function(frequency) {\n    var w0 = 2 * Math.PI * frequency /\n             this.audiolet.device.sampleRate;\n    var cosw0 = Math.cos(w0);\n    var sinw0 = Math.sin(w0);\n    var alpha = sinw0 / (2 / Math.sqrt(2));\n\n    this.b0 = 1 - alpha;\n    this.b1 = -2 * cosw0;\n    this.b2 = 1 + alpha;\n    this.a0 = 1 + alpha;\n    this.a1 = -2 * cosw0;\n    this.a2 = 1 - alpha;\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nAllPassFilter.prototype.toString = function() {\n    return 'All Pass Filter';\n};\n\n/*!\n * @depends ../core/AudioletNode.js\n */\n\n/**\n * Amplitude envelope follower\n *\n * **Inputs**\n *\n * - Audio\n * - Attack time\n * - Release time\n *\n * **Outputs**\n *\n * - Amplitude envelope\n *\n * **Parameters**\n *\n * - attack The attack time of the envelope follower.  Linked to input 1.\n * - release The release time of the envelope follower.  Linked to input 2.\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} [attack=0.01] The initial attack time in seconds.\n * @param {Number} [release=0.01] The initial release time in seconds.\n */\nvar Amplitude = function(audiolet, attack, release) {\n    AudioletNode.call(this, audiolet, 3, 1);\n    this.linkNumberOfOutputChannels(0, 0);\n\n    this.followers = [];\n\n    this.attack = new AudioletParameter(this, 1, attack || 0.01);\n    this.release = new AudioletParameter(this, 2, release || 0.01);\n};\nextend(Amplitude, AudioletNode);\n\n/**\n * Process samples\n */\nAmplitude.prototype.generate = function() {\n    var input = this.inputs[0];\n    var output = this.outputs[0];\n\n    var followers = this.followers;\n    var numberOfFollowers = followers.length;\n\n    var sampleRate = this.audiolet.device.sampleRate;\n\n    // Local processing variables\n    var attack = this.attack.getValue();\n    attack = Math.pow(0.01, 1 / (attack * sampleRate));\n    var release = this.release.getValue();\n    release = Math.pow(0.01, 1 / (release * sampleRate));\n\n    var numberOfChannels = input.samples.length;\n    for (var i = 0; i < numberOfChannels; i++) {\n        if (i >= numberOfFollowers) {\n            followers.push(0);\n        }\n        var follower = followers[i];\n\n        var value = Math.abs(input.samples[i]);\n        if (value > follower) {\n            follower = attack * (follower - value) + value;\n        }\n        else {\n            follower = release * (follower - value) + value;\n        }\n        output.samples[i] = follower;\n        followers[i] = follower;\n    }\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nAmplitude.prototype.toString = function() {\n    return ('Amplitude');\n};\n\n/*!\n * @depends ../core/PassThroughNode.js\n */\n\n/**\n * Detect potentially hazardous values in the audio stream.  Looks for\n * undefineds, nulls, NaNs and Infinities.\n *\n * **Inputs**\n *\n * - Audio\n *\n * **Outputs**\n *\n * - Audio\n *\n * @constructor\n * @extends PassThroughNode\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Function} [callback] Function called if a bad value is detected.\n */\nvar BadValueDetector = function(audiolet, callback) {\n    PassThroughNode.call(this, audiolet, 1, 1);\n    this.linkNumberOfOutputChannels(0, 0);\n\n    if (callback) {\n        this.callback = callback;\n    }\n};\nextend(BadValueDetector, PassThroughNode);\n\n/**\n * Default callback.  Logs the value and position of the bad value.\n *\n * @param {Number|Object|'undefined'} value The value detected.\n * @param {Number} channel The index of the channel the value was found in.\n * @param {Number} index The sample index the value was found at.\n */\nBadValueDetector.prototype.callback = function(value, channel) {\n    console.error(value + ' detected at channel ' + channel);\n};\n\n/**\n * Process samples\n */\nBadValueDetector.prototype.generate = function() {\n    var input = this.inputs[0];\n\n    var numberOfChannels = input.samples.length;\n    for (var i = 0; i < numberOfChannels; i++) {\n        var value = input.samples[i];\n        if (typeof value == 'undefined' ||\n            value == null ||\n            isNaN(value) ||\n            value == Infinity ||\n            value == -Infinity) {\n            this.callback(value, i);\n        }\n    }\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nBadValueDetector.prototype.toString = function() {\n    return 'Bad Value Detector';\n};\n\n/*!\n * @depends BiquadFilter.js\n */\n\n/**\n * Band-pass filter\n *\n * **Inputs**\n *\n * - Audio\n * - Filter frequency\n *\n * **Outputs**\n *\n * - Filtered audio\n *\n * **Parameters**\n *\n * - frequency The filter frequency.  Linked to input 1.\n *\n * @constructor\n * @extends BiquadFilter\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} frequency The initial frequency.\n */\nvar BandPassFilter = function(audiolet, frequency) {\n    BiquadFilter.call(this, audiolet, frequency);\n};\nextend(BandPassFilter, BiquadFilter);\n\n/**\n * Calculate the biquad filter coefficients using maths from\n * http://www.musicdsp.org/files/Audio-EQ-Cookbook.txt\n *\n * @param {Number} frequency The filter frequency.\n */\nBandPassFilter.prototype.calculateCoefficients = function(frequency) {\n    var w0 = 2 * Math.PI * frequency / this.audiolet.device.sampleRate;\n    var cosw0 = Math.cos(w0);\n    var sinw0 = Math.sin(w0);\n    var alpha = sinw0 / (2 / Math.sqrt(2));\n\n    this.b0 = alpha;\n    this.b1 = 0;\n    this.b2 = -alpha;\n    this.a0 = 1 + alpha;\n    this.a1 = -2 * cosw0;\n    this.a2 = 1 - alpha;\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nBandPassFilter.prototype.toString = function() {\n    return 'Band Pass Filter';\n};\n\n/*!\n * @depends BiquadFilter.js\n */\n\n/**\n * Band-reject filter\n *\n * **Inputs**\n *\n * - Audio\n * - Filter frequency\n *\n * **Outputs**\n *\n * - Filtered audio\n *\n * **Parameters**\n *\n * - frequency The filter frequency.  Linked to input 1.\n *\n * @constructor\n * @extends BiquadFilter\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} frequency The initial frequency.\n */\nvar BandRejectFilter = function(audiolet, frequency) {\n    BiquadFilter.call(this, audiolet, frequency);\n};\nextend(BandRejectFilter, BiquadFilter);\n\n/**\n * Calculate the biquad filter coefficients using maths from\n * http://www.musicdsp.org/files/Audio-EQ-Cookbook.txt\n *\n * @param {Number} frequency The filter frequency.\n */\nBandRejectFilter.prototype.calculateCoefficients = function(frequency) {\n    var w0 = 2 * Math.PI * frequency /\n             this.audiolet.device.sampleRate;\n    var cosw0 = Math.cos(w0);\n    var sinw0 = Math.sin(w0);\n    var alpha = sinw0 / (2 / Math.sqrt(2));\n\n    this.b0 = 1;\n    this.b1 = -2 * cosw0;\n    this.b2 = 1;\n    this.a0 = 1 + alpha;\n    this.a1 = -2 * cosw0;\n    this.a2 = 1 - alpha;\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nBandRejectFilter.prototype.toString = function() {\n    return 'Band Reject Filter';\n};\n\n/*!\n * @depends ../core/AudioletNode.js\n */\n\n/**\n * Reduce the bitrate of incoming audio\n *\n * **Inputs**\n *\n * - Audio 1\n * - Number of bits\n *\n * **Outputs**\n *\n * - Bit Crushed Audio\n *\n * **Parameters**\n *\n * - bits The number of bit to reduce to.  Linked to input 1.\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} bits The initial number of bits.\n */\nvar BitCrusher = function(audiolet, bits) {\n    AudioletNode.call(this, audiolet, 2, 1);\n    this.linkNumberOfOutputChannels(0, 0);\n    this.bits = new AudioletParameter(this, 1, bits);\n};\nextend(BitCrusher, AudioletNode);\n\n/**\n * Process samples\n */\nBitCrusher.prototype.generate = function() {\n    var input = this.inputs[0];\n\n    var maxValue = Math.pow(2, this.bits.getValue()) - 1;\n\n    var numberOfChannels = input.samples.length;\n    for (var i = 0; i < numberOfChannels; i++) {\n        this.outputs[0].samples[i] = Math.floor(input.samples[i] * maxValue) /\n                                     maxValue;\n    }\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nBitCrusher.prototype.toString = function() {\n    return 'BitCrusher';\n};\n\n\n/*!\n * @depends ../core/AudioletNode.js\n */\n\n/**\n * Play the contents of an audio buffer\n *\n * **Inputs**\n *\n * - Playback rate\n * - Restart trigger\n * - Start position\n * - Loop on/off\n *\n * **Outputs**\n *\n * - Audio\n *\n * **Parameters**\n *\n * - playbackRate The rate that the buffer should play at.  Value of 1 plays at\n * the regular rate.  Values > 1 are pitched up.  Values < 1 are pitched down.\n * Linked to input 0.\n * - restartTrigger Changes of value from 0 -> 1 restart the playback from the\n * start position.  Linked to input 1.\n * - startPosition The position at which playback should begin.  Values between\n * 0 (the beginning of the buffer) and 1 (the end of the buffer).  Linked to\n * input 2.\n * - loop Whether the buffer should loop when it reaches the end.  Linked to\n * input 3\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n * @param {AudioletBuffer} buffer The buffer to play.\n * @param {Number} [playbackRate=1] The initial playback rate.\n * @param {Number} [startPosition=0] The initial start position.\n * @param {Number} [loop=0] Initial value for whether to loop.\n * @param {Function} [onComplete] Called when the buffer has finished playing.\n */\nvar BufferPlayer = function(audiolet, buffer, playbackRate, startPosition,\n                            loop, onComplete) {\n    AudioletNode.call(this, audiolet, 3, 1);\n    this.buffer = buffer;\n    this.setNumberOfOutputChannels(0, this.buffer.numberOfChannels);\n    this.position = startPosition || 0;\n    this.playbackRate = new AudioletParameter(this, 0, playbackRate || 1);\n    this.restartTrigger = new AudioletParameter(this, 1, 0);\n    this.startPosition = new AudioletParameter(this, 2, startPosition || 0);\n    this.loop = new AudioletParameter(this, 3, loop || 0);\n    this.onComplete = onComplete;\n\n    this.restartTriggerOn = false;\n    this.playing = true;\n};\nextend(BufferPlayer, AudioletNode);\n\n/**\n * Process samples\n */\nBufferPlayer.prototype.generate = function() {\n    var output = this.outputs[0];\n\n    // Cache local variables\n    var numberOfChannels = output.samples.length;\n\n    if (this.buffer.length == 0 || !this.playing) {\n        // No buffer data, or not playing, so output zeros and return\n        for (var i=0; i<numberOfChannels; i++) {\n            output.samples[i] = 0;\n        }\n        return;\n    }\n\n    // Crap load of parameters\n    var playbackRate = this.playbackRate.getValue();\n    var restartTrigger = this.restartTrigger.getValue();\n    var startPosition = this.startPosition.getValue();\n    var loop = this.loop.getValue();\n\n    if (restartTrigger > 0 && !this.restartTriggerOn) {\n        // Trigger moved from <=0 to >0, so we restart playback from\n        // startPosition\n        this.position = startPosition;\n        this.restartTriggerOn = true;\n        this.playing = true;\n    }\n\n    if (restartTrigger <= 0 && this.restartTriggerOn) {\n        // Trigger moved back to <= 0\n        this.restartTriggerOn = false;\n    }\n\n    var numberOfChannels = this.buffer.channels.length;\n\n    for (var i = 0; i < numberOfChannels; i++) {\n        var inputChannel = this.buffer.getChannelData(i);\n        output.samples[i] = inputChannel[Math.floor(this.position)];\n    }\n\n    this.position += playbackRate;\n\n    if (this.position >= this.buffer.length) {\n        if (loop) {\n            // Back to the start\n            this.position %= this.buffer.length;\n        }\n        else {\n            // Finish playing until a new restart trigger\n            this.playing = false;\n            if (this.onComplete) {\n               this.onComplete();\n            }\n        }\n    }\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nBufferPlayer.prototype.toString = function() {\n    return ('Buffer player');\n};\n\n/*!\n * @depends ../core/AudioletNode.js\n */\n\n/**\n * Undamped comb filter\n *\n * **Inputs**\n *\n * - Audio\n * - Delay Time\n * - Decay Time\n *\n * **Outputs**\n *\n * - Filtered audio\n *\n * **Parameters**\n *\n * - delayTime The delay time in seconds.  Linked to input 1.\n * - decayTime Time for the echoes to decay by 60dB.  Linked to input 0.\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} maximumDelayTime The largest allowable delay time.\n * @param {Number} delayTime The initial delay time.\n * @param {Number} decayTime The initial decay time.\n */\nvar CombFilter = function(audiolet, maximumDelayTime, delayTime, decayTime) {\n    AudioletNode.call(this, audiolet, 3, 1);\n    this.linkNumberOfOutputChannels(0, 0);\n    this.maximumDelayTime = maximumDelayTime;\n    this.delayTime = new AudioletParameter(this, 1, delayTime || 1);\n    this.decayTime = new AudioletParameter(this, 2, decayTime);\n    this.buffers = [];\n    this.readWriteIndex = 0;\n};\nextend(CombFilter, AudioletNode);\n\n/**\n * Process samples\n */\nCombFilter.prototype.generate = function() {\n    var input = this.inputs[0];\n    var output = this.outputs[0];\n\n    var sampleRate = this.audiolet.device.sampleRate;\n\n    var delayTime = this.delayTime.getValue() * sampleRate;\n    var decayTime = this.decayTime.getValue() * sampleRate;\n    var feedback = Math.exp(-3 * delayTime / decayTime);\n\n    var numberOfChannels = input.samples.length;\n    for (var i = 0; i < numberOfChannels; i++) {\n        if (i >= this.buffers.length) {\n            // Create buffer for channel if it doesn't already exist\n            var bufferSize = this.maximumDelayTime * sampleRate;\n            this.buffers.push(new Float32Array(bufferSize));\n        }\n\n        var buffer = this.buffers[i];\n        var outputValue = buffer[this.readWriteIndex];\n        output.samples[i] = outputValue;\n        buffer[this.readWriteIndex] = input.samples[i] + feedback * outputValue;\n    }\n\n    this.readWriteIndex += 1;\n    if (this.readWriteIndex >= delayTime) {\n        this.readWriteIndex = 0;\n    }\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nCombFilter.prototype.toString = function() {\n    return 'Comb Filter';\n};\n\n/*!\n * @depends ../core/AudioletNode.js\n */\n\n/**\n * Sine wave oscillator\n *\n * **Inputs**\n *\n * - Frequency\n *\n * **Outputs**\n *\n * - Sine wave\n *\n * **Parameters**\n *\n * - frequency The frequency of the oscillator.  Linked to input 0.\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} [frequency=440] Initial frequency.\n */\nvar Sine = function(audiolet, frequency) {\n    AudioletNode.call(this, audiolet, 1, 1);\n    this.frequency = new AudioletParameter(this, 0, frequency || 440);\n    this.phase = 0;\n};\nextend(Sine, AudioletNode);\n\n/**\n * Process samples\n */\nSine.prototype.generate = function() {\n    var output = this.outputs[0];\n\n    var frequency = this.frequency.getValue();\n    var sampleRate = this.audiolet.device.sampleRate;\n\n    output.samples[0] = Math.sin(this.phase);\n\n    this.phase += 2 * Math.PI * frequency / sampleRate;\n    if (this.phase > 2 * Math.PI) {\n        this.phase %= 2 * Math.PI;\n    }\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nSine.prototype.toString = function() {\n    return 'Sine';\n};\n\n\n/*!\n * @depends ../core/AudioletNode.js\n * @depends Sine.js\n */\n\n/**\n * Equal-power cross-fade between two signals\n *\n * **Inputs**\n *\n * - Audio 1\n * - Audio 2\n * - Fade Position\n *\n * **Outputs**\n *\n * - Mixed audio\n *\n * **Parameters**\n *\n * - position The fade position.  Values between 0 (Audio 1 only) and 1 (Audio\n * 2 only).  Linked to input 2.\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} [position=0.5] The initial fade position.\n */\nvar CrossFade = function(audiolet, position) {\n    AudioletNode.call(this, audiolet, 3, 1);\n    this.linkNumberOfOutputChannels(0, 0);\n    this.position = new AudioletParameter(this, 2, position || 0.5);\n};\nextend(CrossFade, AudioletNode);\n\n/**\n * Process samples\n */\nCrossFade.prototype.generate = function() {\n    var inputA = this.inputs[0];\n    var inputB = this.inputs[1];\n    var output = this.outputs[0];\n\n    // Local processing variables\n    var position = this.position.getValue();\n\n    var scaledPosition = position * Math.PI / 2;\n    var gainA = Math.cos(scaledPosition);\n    var gainB = Math.sin(scaledPosition);\n\n    var numberOfChannels = output.samples.length;\n    for (var i = 0; i < numberOfChannels; i++) {\n        var valueA = inputA.samples[i] || 0;\n        var valueB = inputB.samples[i] || 0;\n        output.samples[i] = valueA * gainA + valueB * gainB;\n    }\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nCrossFade.prototype.toString = function() {\n    return 'Cross Fader';\n};\n\n/*!\n * @depends ../core/AudioletNode.js\n */\n\n/**\n * Damped comb filter\n *\n * **Inputs**\n *\n * - Audio\n * - Delay Time\n * - Decay Time\n * - Damping\n *\n * **Outputs**\n *\n * - Filtered audio\n *\n * **Parameters**\n *\n * - delayTime The delay time in seconds.  Linked to input 1.\n * - decayTime Time for the echoes to decay by 60dB.  Linked to input 2.\n * - damping The amount of high-frequency damping of echoes.  Linked to input 3.\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} maximumDelayTime The largest allowable delay time.\n * @param {Number} delayTime The initial delay time.\n * @param {Number} decayTime The initial decay time.\n * @param {Number} damping The initial amount of damping.\n */\nvar DampedCombFilter = function(audiolet, maximumDelayTime, delayTime,\n                                decayTime, damping) {\n    AudioletNode.call(this, audiolet, 4, 1);\n    this.linkNumberOfOutputChannels(0, 0);\n    this.maximumDelayTime = maximumDelayTime;\n    this.delayTime = new AudioletParameter(this, 1, delayTime || 1);\n    this.decayTime = new AudioletParameter(this, 2, decayTime);\n    this.damping = new AudioletParameter(this, 3, damping);\n    var bufferSize = maximumDelayTime * this.audiolet.device.sampleRate;\n    this.buffers = [];\n    this.readWriteIndex = 0;\n    this.filterStores = [];\n};\nextend(DampedCombFilter, AudioletNode);\n\n/**\n * Process samples\n */\nDampedCombFilter.prototype.generate = function() {\n    var input = this.inputs[0];\n    var output = this.outputs[0];\n\n    var sampleRate = this.audiolet.device.sampleRate;\n\n    var delayTime = this.delayTime.getValue() * sampleRate;\n    var decayTime = this.decayTime.getValue() * sampleRate;\n    var damping = this.damping.getValue();\n    var feedback = Math.exp(-3 * delayTime / decayTime);\n\n    var numberOfChannels = input.samples.length;\n    for (var i = 0; i < numberOfChannels; i++) {\n        if (i >= this.buffers.length) {\n            var bufferSize = this.maximumDelayTime * sampleRate;\n            this.buffers.push(new Float32Array(bufferSize));\n        }\n\n        if (i >= this.filterStores.length) {\n            this.filterStores.push(0);\n        }\n\n        var buffer = this.buffers[i];\n        var filterStore = this.filterStores[i];\n\n        var outputValue = buffer[this.readWriteIndex];\n        filterStore = (outputValue * (1 - damping)) +\n                      (filterStore * damping);\n        output.samples[i] = outputValue;\n        buffer[this.readWriteIndex] = input.samples[i] +\n                                      feedback * filterStore;\n\n        this.filterStores[i] = filterStore;\n    }\n\n    this.readWriteIndex += 1;\n    if (this.readWriteIndex >= delayTime) {\n        this.readWriteIndex = 0;\n    }\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nDampedCombFilter.prototype.toString = function() {\n    return 'Damped Comb Filter';\n};\n\n/*!\n * @depends ../core/AudioletNode.js\n */\n\n/**\n * Filter for leaking DC offset.  Maths is taken from\n * https://ccrma.stanford.edu/~jos/filters/DC_Blocker.html\n *\n * **Inputs**\n *\n * - Audio\n * - Filter coefficient\n *\n * **Outputs**\n *\n * - Filtered audio\n *\n * **Parameters**\n *\n * - coefficient The filter coefficient.  Linked to input 1.\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} [coefficient=0.995] The initial coefficient.\n */\nvar DCFilter = function(audiolet, coefficient) {\n    AudioletNode.call(this, audiolet, 2, 1);\n\n    // Same number of output channels as input channels\n    this.linkNumberOfOutputChannels(0, 0);\n\n    this.coefficient = new AudioletParameter(this, 1, coefficient || 0.995);\n\n    // Delayed values\n    this.xValues = [];\n    this.yValues = [];\n};\nextend(DCFilter, AudioletNode);\n\n/**\n * Process samples\n */\nDCFilter.prototype.generate = function() {\n    var coefficient = this.coefficient.getValue();\n    var input = this.inputs[0];\n    var numberOfChannels = input.samples.length;\n    for (var i = 0; i < numberOfChannels; i++) {\n        if (i >= this.xValues.length) {\n            this.xValues.push(0);\n        }\n        if (i >= this.yValues.length) {\n            this.yValues.push(0);\n        }\n\n        var x0 = input.samples[i];\n        var y0 = x0 - this.xValues[i] + coefficient * this.yValues[i];\n\n        this.outputs[0].samples[i] = y0;\n\n        this.xValues[i] = x0;\n        this.yValues[i] = y0;\n    }\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nDCFilter.prototype.toString = function() {\n    return 'DC Filter';\n};\n\n/*!\n * @depends ../core/AudioletNode.js\n */\n\n/**\n * A simple delay line.\n *\n * **Inputs**\n *\n * - Audio\n * - Delay Time\n *\n * **Outputs**\n *\n * - Delayed audio\n *\n * **Parameters**\n *\n * - delayTime The delay time in seconds.  Linked to input 1.\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} maximumDelayTime The largest allowable delay time.\n * @param {Number} delayTime The initial delay time.\n */\nvar Delay = function(audiolet, maximumDelayTime, delayTime) {\n    AudioletNode.call(this, audiolet, 2, 1);\n    this.linkNumberOfOutputChannels(0, 0);\n    this.maximumDelayTime = maximumDelayTime;\n    this.delayTime = new AudioletParameter(this, 1, delayTime || 1);\n    var bufferSize = maximumDelayTime * this.audiolet.device.sampleRate;\n    this.buffers = [];\n    this.readWriteIndex = 0;\n};\nextend(Delay, AudioletNode);\n\n/**\n * Process samples\n */\nDelay.prototype.generate = function() {\n    var input = this.inputs[0];\n    var output = this.outputs[0];\n\n    var sampleRate = this.audiolet.device.sampleRate;\n\n    var delayTime = this.delayTime.getValue() * sampleRate;\n\n    var numberOfChannels = input.samples.length;\n\n    for (var i = 0; i < numberOfChannels; i++) {\n        if (i >= this.buffers.length) {\n            var bufferSize = this.maximumDelayTime * sampleRate;\n            this.buffers.push(new Float32Array(bufferSize));\n        }\n\n        var buffer = this.buffers[i];\n        output.samples[i] = buffer[this.readWriteIndex];\n        buffer[this.readWriteIndex] = input.samples[i];\n    }\n\n    this.readWriteIndex += 1;\n    if (this.readWriteIndex >= delayTime) {\n        this.readWriteIndex = 0;\n    }\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nDelay.prototype.toString = function() {\n    return 'Delay';\n};\n\n/*!\n * @depends ../core/AudioletNode.js\n */\n\n/**\n * Detect discontinuities in the input stream.  Looks for consecutive samples\n * with a difference larger than a threshold value.\n *\n * **Inputs**\n *\n * - Audio\n *\n * **Outputs**\n *\n * - Audio\n *\n * @constructor\n * @extends PassThroughNode\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} [threshold=0.2] The threshold value.\n * @param {Function} [callback] Function called if a discontinuity is detected.\n */\nvar DiscontinuityDetector = function(audiolet, threshold, callback) {\n    AudioletNode.call(this, audiolet, 1, 1);\n    this.linkNumberOfOutputChannels(0, 0);\n\n    this.threshold = threshold || 0.2;\n    if (callback) {\n        this.callback = callback;\n    }\n    this.lastValues = [];\n\n};\nextend(DiscontinuityDetector, AudioletNode);\n\n/**\n * Default callback.  Logs the size and position of the discontinuity.\n *\n * @param {Number} size The size of the discontinuity.\n * @param {Number} channel The index of the channel the samples were found in.\n * @param {Number} index The sample index the discontinuity was found at.\n */\nDiscontinuityDetector.prototype.callback = function(size, channel) {\n    console.error('Discontinuity of ' + size + ' detected on channel ' +\n                  channel);\n};\n\n/**\n * Process samples\n */\nDiscontinuityDetector.prototype.generate = function() {\n    var input = this.inputs[0];\n    var output = this.outputs[0];\n\n    var numberOfChannels = input.samples.length;\n    for (var i = 0; i < numberOfChannels; i++) {\n        if (i >= this.lastValues.length) {\n            this.lastValues.push(0);\n        }\n\n        var value = input.samples[i];\n        var diff = Math.abs(this.lastValues[i] - value);\n        if (diff > this.threshold) {\n            this.callback(diff, i);\n        }\n\n        this.lastValues[i] = value;\n    }\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nDiscontinuityDetector.prototype.toString = function() {\n    return 'Discontinuity Detector';\n};\n\n\n/*!\n * @depends ../core/AudioletNode.js\n */\n\n/**\n * Delay line with feedback\n *\n * **Inputs**\n *\n * - Audio\n * - Delay Time\n * - Feedback\n * - Mix\n *\n * **Outputs**\n *\n * - Delayed audio\n *\n * **Parameters**\n *\n * - delayTime The delay time in seconds.  Linked to input 1.\n * - feedback The amount of feedback.  Linked to input 2.\n * - mix The amount of delay to mix into the dry signal.  Linked to input 3.\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} maximumDelayTime The largest allowable delay time.\n * @param {Number} delayTime The initial delay time.\n * @param {Number} feedabck The initial feedback amount.\n * @param {Number} mix The initial mix amount.\n */\nvar FeedbackDelay = function(audiolet, maximumDelayTime, delayTime, feedback,\n                             mix) {\n    AudioletNode.call(this, audiolet, 4, 1);\n    this.linkNumberOfOutputChannels(0, 0);\n    this.maximumDelayTime = maximumDelayTime;\n    this.delayTime = new AudioletParameter(this, 1, delayTime || 1);\n    this.feedback = new AudioletParameter(this, 2, feedback || 0.5);\n    this.mix = new AudioletParameter(this, 3, mix || 1);\n    var bufferSize = maximumDelayTime * this.audiolet.device.sampleRate;\n    this.buffers = [];\n    this.readWriteIndex = 0;\n};\nextend(FeedbackDelay, AudioletNode);\n\n/**\n * Process samples\n */\nFeedbackDelay.prototype.generate = function() {\n    var input = this.inputs[0];\n    var output = this.outputs[0];\n\n    var sampleRate = this.audiolet.output.device.sampleRate;\n\n    var delayTime = this.delayTime.getValue() * sampleRate;\n    var feedback = this.feedback.getValue();\n    var mix = this.mix.getValue();\n\n    var numberOfChannels = input.samples.length;\n    var numberOfBuffers = this.buffers.length;\n    for (var i = 0; i < numberOfChannels; i++) {\n        if (i >= numberOfBuffers) {\n            // Create buffer for channel if it doesn't already exist\n            var bufferSize = this.maximumDelayTime * sampleRate;\n            this.buffers.push(new Float32Array(bufferSize));\n        }\n\n        var buffer = this.buffers[i];\n\n        var inputSample = input.samples[i];\n        var bufferSample = buffer[this.readWriteIndex];\n\n        output.samples[i] = mix * bufferSample + (1 - mix) * inputSample;\n        buffer[this.readWriteIndex] = inputSample + feedback * bufferSample;\n    }\n\n    this.readWriteIndex += 1;\n    if (this.readWriteIndex >= delayTime) {\n        this.readWriteIndex = 0;\n    }\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nFeedbackDelay.prototype.toString = function() {\n    return 'Feedback Delay';\n};\n\n/*!\n * @depends ../core/AudioletNode.js\n */\n\n/**\n * Fast Fourier Transform\n *\n * **Inputs**\n *\n * - Audio\n * - Delay Time\n *\n * **Outputs**\n *\n * - Fourier transformed audio\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} bufferSize The FFT buffer size.\n */\nvar FFT = function(audiolet, bufferSize) {\n    AudioletNode.call(this, audiolet, 2, 1);\n    this.linkNumberOfOutputChannels(0, 0);\n    this.bufferSize = bufferSize;\n    this.readWriteIndex = 0;\n\n    this.buffer = new Float32Array(this.bufferSize);\n\n    this.realBuffer = new Float32Array(this.bufferSize);\n    this.imaginaryBuffer = new Float32Array(this.bufferSize);\n\n    this.reverseTable = new Uint32Array(this.bufferSize);\n    this.calculateReverseTable();\n};\nextend(FFT, AudioletNode);\n\n/**\n * Process samples\n */\nFFT.prototype.generate = function() {\n    var input = this.inputs[0];\n    var output = this.outputs[0];\n\n    if (input.samples.length == 0) {\n        return;\n    }\n\n    this.buffer[this.readWriteIndex] = input.samples[0];\n    output.samples[0] = [this.realBuffer[this.readWriteIndex],\n                         this.imaginaryBuffer[this.readWriteIndex]];\n\n    this.readWriteIndex += 1;\n    if (this.readWriteIndex >= this.bufferSize) {\n        this.transform();\n        this.readWriteIndex = 0;\n    }\n};\n\n/**\n * Precalculate the reverse table.\n * TODO: Split the function out so it can be reused in FFT and IFFT\n */\nFFT.prototype.calculateReverseTable = function() {\n    var limit = 1;\n    var bit = this.bufferSize >> 1;\n\n    while (limit < this.bufferSize) {\n        for (var i = 0; i < limit; i++) {\n            this.reverseTable[i + limit] = this.reverseTable[i] + bit;\n        }\n\n        limit = limit << 1;\n        bit = bit >> 1;\n    }\n};\n\n\n/**\n * Calculate the FFT for the saved buffer\n */\nFFT.prototype.transform = function() {\n    for (var i = 0; i < this.bufferSize; i++) {\n        this.realBuffer[i] = this.buffer[this.reverseTable[i]];\n        this.imaginaryBuffer[i] = 0;\n    }\n\n    var halfSize = 1;\n\n    while (halfSize < this.bufferSize) {\n        var phaseShiftStepReal = Math.cos(-Math.PI / halfSize);\n        var phaseShiftStepImag = Math.sin(-Math.PI / halfSize);\n\n        var currentPhaseShiftReal = 1;\n        var currentPhaseShiftImag = 0;\n\n        for (var fftStep = 0; fftStep < halfSize; fftStep++) {\n            var i = fftStep;\n\n            while (i < this.bufferSize) {\n                var off = i + halfSize;\n                var tr = (currentPhaseShiftReal * this.realBuffer[off]) -\n                         (currentPhaseShiftImag * this.imaginaryBuffer[off]);\n                var ti = (currentPhaseShiftReal * this.imaginaryBuffer[off]) +\n                         (currentPhaseShiftImag * this.realBuffer[off]);\n\n                this.realBuffer[off] = this.realBuffer[i] - tr;\n                this.imaginaryBuffer[off] = this.imaginaryBuffer[i] - ti;\n                this.realBuffer[i] += tr;\n                this.imaginaryBuffer[i] += ti;\n\n                i += halfSize << 1;\n            }\n\n            var tmpReal = currentPhaseShiftReal;\n            currentPhaseShiftReal = (tmpReal * phaseShiftStepReal) -\n                                    (currentPhaseShiftImag *\n                                     phaseShiftStepImag);\n            currentPhaseShiftImag = (tmpReal * phaseShiftStepImag) +\n                                    (currentPhaseShiftImag *\n                                     phaseShiftStepReal);\n        }\n\n        halfSize = halfSize << 1;\n    }\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nFFT.prototype.toString = function() {\n    return 'FFT';\n};\n\n/*!\n * @depends ../core/AudioletNode.js\n */\n\n/*\n * Multiply values\n *\n * **Inputs**\n *\n * - Audio 1\n * - Audio 2\n *\n * **Outputs**\n *\n * - Multiplied audio\n *\n * **Parameters**\n *\n * - value The value to multiply by.  Linked to input 1.\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} [value=1] The initial value to multiply by.\n */\nvar Multiply = function(audiolet, value) {\n    AudioletNode.call(this, audiolet, 2, 1);\n    this.linkNumberOfOutputChannels(0, 0);\n    this.value = new AudioletParameter(this, 1, value || 1);\n};\nextend(Multiply, AudioletNode);\n\n/**\n * Process samples\n */\nMultiply.prototype.generate = function() {\n    var value = this.value.getValue();\n    var input = this.inputs[0];\n    var numberOfChannels = input.samples.length;\n    for (var i = 0; i < numberOfChannels; i++) {\n        this.outputs[0].samples[i] = input.samples[i] * value;\n    }\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nMultiply.prototype.toString = function() {\n    return 'Multiply';\n};\n\n\n/*!\n * @depends ../operators/Multiply.js\n */\n\n/**\n * Simple gain control\n *\n * **Inputs**\n *\n * - Audio\n * - Gain\n *\n * **Outputs**\n *\n * - Audio\n *\n * **Parameters**\n *\n * - gain The amount of gain.  Linked to input 1.\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} [gain=1] Initial gain.\n */\nvar Gain = function(audiolet, gain) {\n    // Same DSP as operators/Multiply.js, but different parameter name\n    Multiply.call(this, audiolet, gain);\n    this.gain = this.value;\n};\nextend(Gain, Multiply);\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nGain.prototype.toString = function() {\n    return ('Gain');\n};\n\n/*!\n * @depends BiquadFilter.js\n */\n\n/**\n * High-pass filter\n *\n * **Inputs**\n *\n * - Audio\n * - Filter frequency\n *\n * **Outputs**\n *\n * - Filtered audio\n *\n * **Parameters**\n *\n * - frequency The filter frequency.  Linked to input 1.\n *\n * @constructor\n * @extends BiquadFilter\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} frequency The initial frequency.\n */\nvar HighPassFilter = function(audiolet, frequency) {\n    BiquadFilter.call(this, audiolet, frequency);\n};\nextend(HighPassFilter, BiquadFilter);\n\n/**\n * Calculate the biquad filter coefficients using maths from\n * http://www.musicdsp.org/files/Audio-EQ-Cookbook.txt\n *\n * @param {Number} frequency The filter frequency.\n */\nHighPassFilter.prototype.calculateCoefficients = function(frequency) {\n    var w0 = 2 * Math.PI * frequency /\n             this.audiolet.device.sampleRate;\n    var cosw0 = Math.cos(w0);\n    var sinw0 = Math.sin(w0);\n    var alpha = sinw0 / (2 / Math.sqrt(2));\n\n    this.b0 = (1 + cosw0) / 2;\n    this.b1 = - (1 + cosw0);\n    this.b2 = this.b0;\n    this.a0 = 1 + alpha;\n    this.a1 = -2 * cosw0;\n    this.a2 = 1 - alpha;\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nHighPassFilter.prototype.toString = function() {\n    return 'High Pass Filter';\n};\n\n/*!\n * @depends ../core/AudioletNode.js\n */\n\n/**\n * Inverse Fast Fourier Transform.  Code liberally stolen with kind permission\n * of Corben Brook from DSP.js (https://github.com/corbanbrook/dsp.js).\n *\n * **Inputs**\n *\n * - Fourier transformed audio\n * - Delay Time\n *\n * **Outputs**\n *\n * - Audio\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} bufferSize The FFT buffer size.\n */\nvar IFFT = function(audiolet, bufferSize) {\n    AudioletNode.call(this, audiolet, 2, 1);\n    this.linkNumberOfOutputChannels(0, 0);\n    this.bufferSize = bufferSize;\n    this.readWriteIndex = 0;\n\n    this.buffer = new Float32Array(this.bufferSize);\n\n    this.realBuffer = new Float32Array(this.bufferSize);\n    this.imaginaryBuffer = new Float32Array(this.bufferSize);\n\n    this.reverseTable = new Uint32Array(this.bufferSize);\n    this.calculateReverseTable();\n\n    this.reverseReal = new Float32Array(this.bufferSize);\n    this.reverseImaginary = new Float32Array(this.bufferSize);\n};\nextend(IFFT, AudioletNode);\n\n/**\n * Process samples\n */\nIFFT.prototype.generate = function() {\n    var input = this.inputs[0];\n    var output = this.outputs[0];\n\n    if (!input.samples.length) {\n        return;\n    }\n\n    var values = input.samples[0];\n    this.realBuffer[this.readWriteIndex] = values[0];\n    this.imaginaryBuffer[this.readWriteIndex] = values[1];\n    output.samples[0] = this.buffer[this.readWriteIndex];\n\n    this.readWriteIndex += 1;\n    if (this.readWriteIndex >= this.bufferSize) {\n        this.transform();\n        this.readWriteIndex = 0;\n    }\n};\n\n/**\n * Precalculate the reverse table.\n * TODO: Split the function out so it can be reused in FFT and IFFT\n */\nIFFT.prototype.calculateReverseTable = function() {\n    var limit = 1;\n    var bit = this.bufferSize >> 1;\n\n    while (limit < this.bufferSize) {\n        for (var i = 0; i < limit; i++) {\n            this.reverseTable[i + limit] = this.reverseTable[i] + bit;\n        }\n\n        limit = limit << 1;\n        bit = bit >> 1;\n    }\n};\n\n/**\n * Calculate the inverse FFT for the saved real and imaginary buffers\n */\nIFFT.prototype.transform = function() {\n    var halfSize = 1;\n\n    for (var i = 0; i < this.bufferSize; i++) {\n        this.imaginaryBuffer[i] *= -1;\n    }\n\n    for (var i = 0; i < this.bufferSize; i++) {\n        this.reverseReal[i] = this.realBuffer[this.reverseTable[i]];\n        this.reverseImaginary[i] = this.imaginaryBuffer[this.reverseTable[i]];\n    }\n\n    this.realBuffer.set(this.reverseReal);\n    this.imaginaryBuffer.set(this.reverseImaginary);\n\n\n    while (halfSize < this.bufferSize) {\n        var phaseShiftStepReal = Math.cos(-Math.PI / halfSize);\n        var phaseShiftStepImag = Math.sin(-Math.PI / halfSize);\n        var currentPhaseShiftReal = 1;\n        var currentPhaseShiftImag = 0;\n\n        for (var fftStep = 0; fftStep < halfSize; fftStep++) {\n            i = fftStep;\n\n            while (i < this.bufferSize) {\n                var off = i + halfSize;\n                var tr = (currentPhaseShiftReal * this.realBuffer[off]) -\n                         (currentPhaseShiftImag * this.imaginaryBuffer[off]);\n                var ti = (currentPhaseShiftReal * this.imaginaryBuffer[off]) +\n                         (currentPhaseShiftImag * this.realBuffer[off]);\n\n                this.realBuffer[off] = this.realBuffer[i] - tr;\n                this.imaginaryBuffer[off] = this.imaginaryBuffer[i] - ti;\n                this.realBuffer[i] += tr;\n                this.imaginaryBuffer[i] += ti;\n\n                i += halfSize << 1;\n            }\n\n            var tmpReal = currentPhaseShiftReal;\n            currentPhaseShiftReal = (tmpReal * phaseShiftStepReal) -\n                                    (currentPhaseShiftImag *\n                                     phaseShiftStepImag);\n            currentPhaseShiftImag = (tmpReal * phaseShiftStepImag) +\n                                    (currentPhaseShiftImag *\n                                     phaseShiftStepReal);\n        }\n\n        halfSize = halfSize << 1;\n    }\n\n    for (i = 0; i < this.bufferSize; i++) {\n        this.buffer[i] = this.realBuffer[i] / this.bufferSize;\n    }\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nIFFT.prototype.toString = function() {\n    return 'IFFT';\n};\n\n/*!\n * @depends ../core/AudioletNode.js\n */\n\n/**\n * Exponential lag for smoothing signals.\n *\n * **Inputs**\n *\n * - Value\n * - Lag time\n *\n * **Outputs**\n *\n * - Lagged value\n *\n * **Parameters**\n *\n * - value The value to lag.  Linked to input 0.\n * - lag The 60dB lag time. Linked to input 1.\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} [value=0] The initial value.\n * @param {Number} [lagTime=1] The initial lag time.\n */\nvar Lag = function(audiolet, value, lagTime) {\n    AudioletNode.call(this, audiolet, 2, 1);\n    this.value = new AudioletParameter(this, 0, value || 0);\n    this.lag = new AudioletParameter(this, 1, lagTime || 1);\n    this.lastValue = 0;\n\n    this.log001 = Math.log(0.001);\n};\nextend(Lag, AudioletNode);\n\n/**\n * Process samples\n */\nLag.prototype.generate = function() {\n    var input = this.inputs[0];\n    var output = this.outputs[0];\n\n    var sampleRate = this.audiolet.device.sampleRate;\n\n    var value = this.value.getValue();\n    var lag = this.lag.getValue();\n    var coefficient = Math.exp(this.log001 / (lag * sampleRate));\n\n    var outputValue = ((1 - coefficient) * value) +\n                      (coefficient * this.lastValue);\n    output.samples[0] = outputValue;\n    this.lastValue = outputValue;\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nLag.prototype.toString = function() {\n    return 'Lag';\n};\n\n\n/*!\n * @depends ../core/AudioletGroup.js\n */\n\n/**\n * A simple (and frankly shoddy) zero-lookahead limiter.\n *\n * **Inputs**\n *\n * - Audio\n * - Threshold\n * - Attack\n * - Release\n *\n * **Outputs**\n *\n * - Limited audio\n *\n * **Parameters**\n *\n * - threshold The limiter threshold.  Linked to input 1.\n * - attack The attack time in seconds. Linked to input 2.\n * - release The release time in seconds.  Linked to input 3.\n *\n * @constructor\n * @extends AudioletGroup\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} [threshold=0.95] The initial threshold.\n * @param {Number} [attack=0.01] The initial attack time.\n * @param {Number} [release=0.4] The initial release time.\n */\nvar Limiter = function(audiolet, threshold, attack, release) {\n    AudioletNode.call(this, audiolet, 4, 1);\n    this.linkNumberOfOutputChannels(0, 0);\n\n    // Parameters\n    this.threshold = new AudioletParameter(this, 1, threshold || 0.95);\n    this.attack = new AudioletParameter(this, 2, attack || 0.01);\n    this.release = new AudioletParameter(this, 2, release || 0.4);\n\n    this.followers = [];\n};\nextend(Limiter, AudioletNode);\n\n/**\n * Process samples\n */\nLimiter.prototype.generate = function() {\n    var input = this.inputs[0];\n    var output = this.outputs[0];\n\n    var sampleRate = this.audiolet.device.sampleRate;\n\n    // Local processing variables\n    var attack = Math.pow(0.01, 1 / (this.attack.getValue() *\n                                     sampleRate));\n    var release = Math.pow(0.01, 1 / (this.release.getValue() *\n                                      sampleRate));\n\n    var threshold = this.threshold.getValue();\n\n    var numberOfChannels = input.samples.length;\n    for (var i = 0; i < numberOfChannels; i++) {\n        if (i >= this.followers.length) {\n            this.followers.push(0);\n        }\n\n        var follower = this.followers[i];\n\n        var value = input.samples[i];\n\n        // Calculate amplitude envelope\n        var absValue = Math.abs(value);\n        if (absValue > follower) {\n            follower = attack * (follower - absValue) + absValue;\n        }\n        else {\n            follower = release * (follower - absValue) + absValue;\n        }\n\n        var diff = follower - threshold;\n        if (diff > 0) {\n            output.samples[i] = value / (1 + diff);\n        }\n        else {\n            output.samples[i] = value;\n        }\n\n        this.followers[i] = follower;\n    }\n};\n\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nLimiter.prototype.toString = function() {\n    return 'Limiter';\n};\n\n/*!\n * @depends ../core/AudioletNode.js\n */\n\n/**\n * Linear cross-fade between two signals\n *\n * **Inputs**\n *\n * - Audio 1\n * - Audio 2\n * - Fade Position\n *\n * **Outputs**\n *\n * - Mixed audio\n *\n * **Parameters**\n *\n * - position The fade position.  Values between 0 (Audio 1 only) and 1 (Audio\n * 2 only).  Linked to input 2.\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} [position=0.5] The initial fade position.\n */\nvar LinearCrossFade = function(audiolet, position) {\n    AudioletNode.call(this, audiolet, 3, 1);\n    this.linkNumberOfOutputChannels(0, 0);\n    this.position = new AudioletParameter(this, 2, position || 0.5);\n};\nextend(LinearCrossFade, AudioletNode);\n\n/**\n * Process samples\n */\nLinearCrossFade.prototype.generate = function() {\n    var inputA = this.inputs[0];\n    var inputB = this.inputs[1];\n    var output = this.outputs[0];\n\n    var position = this.position.getValue();\n\n    var gainA = 1 - position;\n    var gainB = position;\n\n    var numberOfChannels = output.samples.length;\n    for (var i = 0; i < numberOfChannels; i++) {\n        var valueA = inputA.samples[i] || 0;\n        var valueB = inputB.samples[i] || 0;\n        output.samples[i] = valueA * gainA + valueB * gainB;\n    }\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nLinearCrossFade.prototype.toString = function() {\n    return 'Linear Cross Fader';\n};\n\n/*!\n * @depends BiquadFilter.js\n */\n\n/**\n * Low-pass filter\n *\n * **Inputs**\n *\n * - Audio\n * - Filter frequency\n *\n * **Outputs**\n *\n * - Filtered audio\n *\n * **Parameters**\n *\n * - frequency The filter frequency.  Linked to input 1.\n *\n * @constructor\n * @extends BiquadFilter\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} frequency The initial frequency.\n */\nvar LowPassFilter = function(audiolet, frequency) {\n    BiquadFilter.call(this, audiolet, frequency);\n};\nextend(LowPassFilter, BiquadFilter);\n\n/**\n * Calculate the biquad filter coefficients using maths from\n * http://www.musicdsp.org/files/Audio-EQ-Cookbook.txt\n *\n * @param {Number} frequency The filter frequency.\n */\nLowPassFilter.prototype.calculateCoefficients = function(frequency) {\n    var w0 = 2 * Math.PI * frequency /\n             this.audiolet.device.sampleRate;\n    var cosw0 = Math.cos(w0);\n    var sinw0 = Math.sin(w0);\n    var alpha = sinw0 / (2 / Math.sqrt(2));\n\n    this.b0 = (1 - cosw0) / 2;\n    this.b1 = 1 - cosw0;\n    this.b2 = this.b0;\n    this.a0 = 1 + alpha;\n    this.a1 = -2 * cosw0;\n    this.a2 = 1 - alpha;\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nLowPassFilter.prototype.toString = function() {\n    return 'Low Pass Filter';\n};\n\n/*!\n * @depends ../core/AudioletNode.js\n */\n\n/**\n * Position a single-channel input in stereo space\n *\n * **Inputs**\n *\n * - Audio\n * - Pan Position\n *\n * **Outputs**\n *\n * - Panned audio\n *\n * **Parameters**\n *\n * - pan The pan position.  Values between 0 (hard-left) and 1 (hard-right).\n * Linked to input 1.\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} [pan=0.5] The initial pan position.\n */\nvar Pan = function(audiolet, pan) {\n    AudioletNode.call(this, audiolet, 2, 1);\n    // Hardcode two output channels\n    this.setNumberOfOutputChannels(0, 2);\n    if (pan == null) {\n        var pan = 0.5;\n    }\n    this.pan = new AudioletParameter(this, 1, pan);\n};\nextend(Pan, AudioletNode);\n\n/**\n * Process samples\n */\nPan.prototype.generate = function() {\n    var input = this.inputs[0];\n    var output = this.outputs[0];\n\n    var pan = this.pan.getValue();\n\n    var value = input.samples[0] || 0;\n    var scaledPan = pan * Math.PI / 2;\n    output.samples[0] = value * Math.cos(scaledPan);\n    output.samples[1] = value * Math.sin(scaledPan);\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nPan.prototype.toString = function() {\n    return 'Stereo Panner';\n};\n\n/*!\n * @depends Envelope.js\n */\n\n/**\n * Simple attack-release envelope\n *\n * **Inputs**\n *\n * - Gate\n *\n * **Outputs**\n *\n * - Envelope\n *\n * **Parameters**\n *\n * - gate The gate controlling the envelope.  Value changes from 0 -> 1\n * trigger the envelope.  Linked to input 0.\n *\n * @constructor\n * @extends Envelope\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} gate The initial gate value.\n * @param {Number} attack The attack time in seconds.\n * @param {Number} release The release time in seconds.\n * @param {Function} [onComplete] A function called after the release stage.\n */\nvar PercussiveEnvelope = function(audiolet, gate, attack, release,\n                                  onComplete) {\n    var levels = [0, 1, 0];\n    var times = [attack, release];\n    Envelope.call(this, audiolet, gate, levels, times, null, onComplete);\n\n    this.attack = this.times[0];\n    this.release = this.times[1];\n};\nextend(PercussiveEnvelope, Envelope);\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nPercussiveEnvelope.prototype.toString = function() {\n    return 'Percussive Envelope';\n};\n\n/*!\n * @depends ../core/AudioletNode.js\n */\n\n/**\n * Pulse wave oscillator.\n *\n * **Inputs**\n *\n * - Frequency\n * - Pulse width\n *\n * **Outputs**\n *\n * - Waveform\n *\n * **Parameters**\n *\n * - frequency The oscillator frequency.  Linked to input 0.\n * - pulseWidth The pulse width.  Linked to input 1.\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} [frequency=440] The initial frequency.\n * @param {Number} [pulseWidth=0.5] The initial pulse width.\n */\nvar Pulse = function(audiolet, frequency, pulseWidth) {\n    AudioletNode.call(this, audiolet, 2, 1);\n    this.frequency = new AudioletParameter(this, 0, frequency || 440);\n    this.pulseWidth = new AudioletParameter(this, 1, pulseWidth || 0.5);\n    this.phase = 0;\n};\nextend(Pulse, AudioletNode);\n\n/**\n * Process samples\n */\nPulse.prototype.generate = function() {\n    var pulseWidth = this.pulseWidth.getValue();\n    this.outputs[0].samples[0] = (this.phase < pulseWidth) ? 1 : -1;\n\n    var frequency = this.frequency.getValue();\n    var sampleRate = this.audiolet.device.sampleRate;\n    this.phase += frequency / sampleRate;\n    if (this.phase > 1) {\n        this.phase %= 1;\n    }\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nPulse.prototype.toString = function() {\n    return 'Pulse';\n};\n\n\n/*!\n * @depends ../core/AudioletNode.js\n * @depends ../core/AudioletGroup.js\n */\n\n/**\n * Port of the Freeverb Schrodoer/Moorer reverb model.  See\n * https://ccrma.stanford.edu/~jos/pasp/Freeverb.html for a description of how\n * each part works.\n *\n * **Inputs**\n *\n * - Audio\n * - Mix\n * - Room Size\n * - Damping\n *\n * **Outputs**\n *\n * - Reverberated Audio\n *\n * **Parameters**\n *\n * - mix The wet/dry mix.  Values between 0 and 1.  Linked to input 1.\n * - roomSize The reverb's room size.  Values between 0 and 1.  Linked to input\n * 2.\n * - damping The amount of high-frequency damping.  Values between 0 and 1.\n * Linked to input 3.\n *\n * @constructor\n * @extends AudioletGroup\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} [mix=0.33] The initial wet/dry mix.\n * @param {Number} [roomSize=0.5] The initial room size.\n * @param {Number} [damping=0.5] The initial damping amount.\n */\nvar Reverb = function(audiolet, mix, roomSize, damping) {\n    AudioletNode.call(this, audiolet, 4, 1);\n\n    // Constants\n    this.initialMix = 0.33;\n    this.fixedGain = 0.015;\n    this.initialDamping = 0.5;\n    this.scaleDamping = 0.4;\n    this.initialRoomSize = 0.5;\n    this.scaleRoom = 0.28;\n    this.offsetRoom = 0.7;\n\n    // Parameters: for 44.1k or 48k\n    this.combTuning = [1116, 1188, 1277, 1356, 1422, 1491, 1557, 1617];\n    this.allPassTuning = [556, 441, 341, 225];\n\n    // Controls\n    // Mix control\n    var mix = mix || this.initialMix;\n    this.mix = new AudioletParameter(this, 1, mix);\n\n    // Room size control\n    var roomSize = roomSize || this.initialRoomSize;\n    this.roomSize = new AudioletParameter(this, 2, roomSize);\n\n    // Damping control\n    var damping = damping || this.initialDamping;\n    this.damping = new AudioletParameter(this, 3, damping);\n\n    // Damped comb filters\n    this.combBuffers = [];\n    this.combIndices = [];\n    this.filterStores = [];\n\n    var numberOfCombs = this.combTuning.length;\n    for (var i = 0; i < numberOfCombs; i++) {\n        this.combBuffers.push(new Float32Array(this.combTuning[i]));\n        this.combIndices.push(0);\n        this.filterStores.push(0);\n    }\n\n    // All-pass filters\n    this.allPassBuffers = [];\n    this.allPassIndices = [];\n\n    var numberOfFilters = this.allPassTuning.length;\n    for (var i = 0; i < numberOfFilters; i++) {\n        this.allPassBuffers.push(new Float32Array(this.allPassTuning[i]));\n        this.allPassIndices.push(0);\n    }\n};\nextend(Reverb, AudioletNode);\n\n/**\n * Process samples\n */\nReverb.prototype.generate = function() {\n    var mix = this.mix.getValue();\n    var roomSize = this.roomSize.getValue();\n    var damping = this.damping.getValue();\n\n    var numberOfCombs = this.combTuning.length;\n    var numberOfFilters = this.allPassTuning.length;\n\n    var value = this.inputs[0].samples[0] || 0;\n    var dryValue = value;\n\n    value *= this.fixedGain;\n    var gainedValue = value;\n\n    var damping = damping * this.scaleDamping;\n    var feedback = roomSize * this.scaleRoom + this.offsetRoom;\n\n    for (var i = 0; i < numberOfCombs; i++) {\n        var combIndex = this.combIndices[i];\n        var combBuffer = this.combBuffers[i];\n        var filterStore = this.filterStores[i];\n\n        var output = combBuffer[combIndex];\n        filterStore = (output * (1 - damping)) +\n                      (filterStore * damping);\n        value += output;\n        combBuffer[combIndex] = gainedValue + feedback * filterStore;\n\n        combIndex += 1;\n        if (combIndex >= combBuffer.length) {\n            combIndex = 0;\n        }\n\n        this.combIndices[i] = combIndex;\n        this.filterStores[i] = filterStore;\n    }\n\n    for (var i = 0; i < numberOfFilters; i++) {\n        var allPassBuffer = this.allPassBuffers[i];\n        var allPassIndex = this.allPassIndices[i];\n\n        var input = value;\n        var bufferValue = allPassBuffer[allPassIndex];\n        value = -value + bufferValue;\n        allPassBuffer[allPassIndex] = input + (bufferValue * 0.5);\n\n        allPassIndex += 1;\n        if (allPassIndex >= allPassBuffer.length) {\n            allPassIndex = 0;\n        }\n\n        this.allPassIndices[i] = allPassIndex;\n    }\n\n    this.outputs[0].samples[0] = mix * value + (1 - mix) * dryValue;\n};\n\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nReverb.prototype.toString = function() {\n    return 'Reverb';\n};\n\n\n/*!\n * @depends ../core/AudioletNode.js\n */\n\n/**\n * Saw wave oscillator using a lookup table\n *\n * **Inputs**\n *\n * - Frequency\n *\n * **Outputs**\n *\n * - Saw wave\n *\n * **Parameters**\n *\n * - frequency The frequency of the oscillator.  Linked to input 0.\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} [frequency=440] Initial frequency.\n */\nvar Saw = function(audiolet, frequency) {\n    AudioletNode.call(this, audiolet, 1, 1);\n    this.frequency = new AudioletParameter(this, 0, frequency || 440);\n    this.phase = 0;\n};\nextend(Saw, AudioletNode);\n\n/**\n * Process samples\n */\nSaw.prototype.generate = function() {\n    var output = this.outputs[0];\n    var frequency = this.frequency.getValue();\n    var sampleRate = this.audiolet.device.sampleRate;\n\n    output.samples[0] = ((this.phase / 2 + 0.25) % 0.5 - 0.25) * 4;\n    this.phase += frequency / sampleRate;\n\n    if (this.phase > 1) {\n        this.phase %= 1;\n    }\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nSaw.prototype.toString = function() {\n    return 'Saw';\n};\n\n\n/*!\n * @depends ../core/AudioletNode.js\n */\n\n/**\n * A soft-clipper, which distorts at values over +-0.5.\n *\n * **Inputs**\n *\n * - Audio\n *\n * **Outputs**\n *\n * - Clipped audio\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n */\n\nvar SoftClip = function(audiolet) {\n    AudioletNode.call(this, audiolet, 1, 1);\n    this.linkNumberOfOutputChannels(0, 0);\n};\nextend(SoftClip, AudioletNode);\n\n/**\n * Process samples\n */\nSoftClip.prototype.generate = function() {\n    var input = this.inputs[0];\n    var output = this.outputs[0];\n\n    var numberOfChannels = input.samples.length;\n    for (var i = 0; i < numberOfChannels; i++) {\n        var value = input.samples[i];\n        if (value > 0.5 || value < -0.5) {\n            output.samples[i] = (Math.abs(value) - 0.25) / value;\n        }\n        else {\n            output.samples[i] = value;\n        }\n    }\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nSoftClip.prototype.toString = function() {\n    return ('SoftClip');\n};\n\n\n/*!\n * @depends ../core/AudioletNode.js\n */\n\n/**\n * Square wave oscillator\n *\n * **Inputs**\n *\n * - Frequency\n *\n * **Outputs**\n *\n * - Square wave\n *\n * **Parameters**\n *\n * - frequency The frequency of the oscillator.  Linked to input 0.\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} [frequency=440] Initial frequency.\n */\nvar Square = function(audiolet, frequency) {\n    AudioletNode.call(this, audiolet, 1, 1);\n    this.frequency = new AudioletParameter(this, 0, frequency || 440);\n    this.phase = 0;\n};\nextend(Square, AudioletNode);\n\n/**\n * Process samples\n */\nSquare.prototype.generate = function() {\n    var output = this.outputs[0];\n\n    var frequency = this.frequency.getValue();\n    var sampleRate = this.audiolet.device.sampleRate;\n\n    output.samples[0] = this.phase > 0.5 ? 1 : -1;\n\n    this.phase += frequency / sampleRate;\n    if (this.phase > 1) {\n        this.phase %= 1;\n    }\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nSquare.prototype.toString = function() {\n    return 'Square';\n};\n\n\n/*!\n * @depends ../core/AudioletNode.js\n */\n\n/**\n * Triangle wave oscillator using a lookup table\n *\n * **Inputs**\n *\n * - Frequency\n *\n * **Outputs**\n *\n * - Triangle wave\n *\n * **Parameters**\n *\n * - frequency The frequency of the oscillator.  Linked to input 0.\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} [frequency=440] Initial frequency.\n */\nvar Triangle = function(audiolet, frequency) {\n    AudioletNode.call(this, audiolet, 1, 1);\n    this.frequency = new AudioletParameter(this, 0, frequency || 440);\n    this.phase = 0;\n};\nextend(Triangle, AudioletNode);\n\n/**\n * Process samples\n */\nTriangle.prototype.generate = function() {\n    var output = this.outputs[0];\n\n    var frequency = this.frequency.getValue();\n    var sampleRate = this.audiolet.device.sampleRate;\n\n    output.samples[0] = 1 - 4 * Math.abs((this.phase + 0.25) % 1 - 0.5);\n\n    this.phase += frequency / sampleRate;\n    if (this.phase > 1) {\n        this.phase %= 1;\n    }\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nTriangle.prototype.toString = function() {\n    return 'Triangle';\n};\n\n\n/*!\n * @depends ../core/AudioletNode.js\n */\n\n/**\n * Simple trigger which allows you to set a single sample to be 1 and then\n * resets itself.\n *\n * **Outputs**\n *\n * - Triggers\n *\n * **Parameters**\n *\n * - trigger Set to 1 to fire a trigger.\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} [trigger=0] The initial trigger state.\n */\nvar TriggerControl = function(audiolet, trigger) {\n    AudioletNode.call(this, audiolet, 0, 1);\n    this.trigger = new AudioletParameter(this, null, trigger || 0);\n};\nextend(TriggerControl, AudioletNode);\n\n/**\n * Process samples\n */\nTriggerControl.prototype.generate = function() {\n    if (this.trigger.getValue() > 0) {\n        this.outputs[0].samples[0] = 1;\n        this.trigger.setValue(0);\n    }\n    else {\n        this.outputs[0].samples[0] = 0;\n    }\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nTriggerControl.prototype.toString = function() {\n    return 'Trigger Control';\n};\n\n/*!\n * @depends ../core/AudioletNode.js\n */\n\n/**\n * Upmix an input to a constant number of output channels\n *\n * **Inputs**\n *\n * - Audio\n *\n * **Outputs**\n *\n * - Upmixed audio\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} outputChannels The number of output channels.\n */\nvar UpMixer = function(audiolet, outputChannels) {\n    AudioletNode.call(this, audiolet, 1, 1);\n    this.outputs[0].numberOfChannels = outputChannels;\n};\nextend(UpMixer, AudioletNode);\n\n/**\n * Process samples\n */\nUpMixer.prototype.generate = function() {\n    var input = this.inputs[0];\n    var output = this.outputs[0];\n\n    var numberOfInputChannels = input.samples.length;\n    var numberOfOutputChannels = output.samples.length;\n\n    if (numberOfInputChannels == numberOfOutputChannels) {\n        output.samples = input.samples;\n    }\n    else {\n        for (var i = 0; i < numberOfOutputChannels; i++) {\n            output.samples[i] = input.samples[i % numberOfInputChannels];\n        }\n    }\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nUpMixer.prototype.toString = function() {\n    return 'UpMixer';\n};\n\n\nvar WebKitBufferPlayer = function(audiolet, onComplete) {\n    AudioletNode.call(this, audiolet, 0, 1);\n    this.onComplete = onComplete;\n    this.isWebKit = this.audiolet.device.sink instanceof Sink.sinks.webkit;\n    this.ready = false;\n\n    // Until we are loaded, output no channels.\n    this.setNumberOfOutputChannels(0, 0);\n\n    if (!this.isWebKit) {\n        return;\n    }\n\n    this.context = this.audiolet.device.sink._context;\n    this.jsNode = null;\n    this.source = null;\n\n    this.ready = false;\n    this.loaded = false;\n\n    this.buffers = [];\n    this.readPosition = 0;\n\n    this.endTime = null;\n};\nextend(WebKitBufferPlayer, AudioletNode);\n\nWebKitBufferPlayer.prototype.load = function(url, onLoad, onError) {\n    if (!this.isWebKit) {\n        return;\n    }\n\n    this.stop();\n\n    // Request the new file\n    this.xhr = new XMLHttpRequest();\n    this.xhr.open(\"GET\", url, true);\n    this.xhr.responseType = \"arraybuffer\";\n    this.xhr.onload = this.onLoad.bind(this, onLoad, onError);\n    this.xhr.onerror = onError;\n    this.xhr.send();\n};\n\nWebKitBufferPlayer.prototype.stop = function() {\n    this.ready = false;\n    this.loaded = false;\n\n    this.buffers = [];\n    this.readPosition = 0;\n    this.endTime = null;\n\n    this.setNumberOfOutputChannels(0);\n\n    this.disconnectWebKitNodes();\n};\n\nWebKitBufferPlayer.prototype.disconnectWebKitNodes = function() {\n    if (this.source && this.jsNode) {\n        this.source.disconnect(this.jsNode);\n        this.jsNode.disconnect(this.context.destination);\n        this.source = null;\n        this.jsNode = null;\n    }\n};\n\nWebKitBufferPlayer.prototype.onLoad = function(onLoad, onError) {\n    // Load the buffer into memory for decoding\n//    this.fileBuffer = this.context.createBuffer(this.xhr.response, false);\n    this.context.decodeAudioData(this.xhr.response, function(buffer) {\n        this.onDecode(buffer);\n        onLoad();\n    }.bind(this), onError);\n};\n\nWebKitBufferPlayer.prototype.onDecode = function(buffer) {\n    this.fileBuffer = buffer;\n\n    // Create the WebKit buffer source for playback\n    this.source = this.context.createBufferSource();\n    this.source.buffer = this.fileBuffer;\n\n    // Make sure we are outputting the right number of channels on Audiolet's\n    // side\n    var numberOfChannels = this.fileBuffer.numberOfChannels;\n    this.setNumberOfOutputChannels(0, numberOfChannels);\n\n    // Create the JavaScript node for reading the data into Audiolet\n    this.jsNode = this.context.createJavaScriptNode(4096, numberOfChannels, 0);\n    this.jsNode.onaudioprocess = this.onData.bind(this);\n\n    // Connect it all up\n    this.source.connect(this.jsNode);\n    this.jsNode.connect(this.context.destination);\n    this.source.noteOn(0);\n    this.endTime = this.context.currentTime + this.fileBuffer.duration;\n\n    this.loaded = true;\n};\n\nWebKitBufferPlayer.prototype.onData = function(event) {\n    if (this.loaded) {\n        this.ready = true;\n    }\n\n    var numberOfChannels = event.inputBuffer.numberOfChannels;\n\n    for (var i=0; i<numberOfChannels; i++) {\n        this.buffers[i] = event.inputBuffer.getChannelData(i);\n        this.readPosition = 0;\n    }\n};\n\nWebKitBufferPlayer.prototype.generate = function() {\n    if (!this.ready) {\n        return;\n    }\n\n    var output = this.outputs[0];\n\n    var numberOfChannels = output.samples.length;\n    for (var i=0; i<numberOfChannels; i++) {\n        output.samples[i] = this.buffers[i][this.readPosition];\n    }\n    this.readPosition += 1;\n\n    if (this.context.currentTime > this.endTime) {\n        this.stop();\n        this.onComplete();\n    }\n};\n\n/*!\n * @depends ../core/AudioletNode.js\n */\n\n/**\n * A white noise source\n *\n * **Outputs**\n *\n * - White noise\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n */\nvar WhiteNoise = function(audiolet) {\n    AudioletNode.call(this, audiolet, 0, 1);\n};\nextend(WhiteNoise, AudioletNode);\n\n/**\n * Process samples\n */\nWhiteNoise.prototype.generate = function() {\n    this.outputs[0].samples[0] = Math.random() * 2 - 1;\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nWhiteNoise.prototype.toString = function() {\n    return 'White Noise';\n};\n\n\n/*!\n * @depends ../core/AudioletNode.js\n */\n\n/**\n * Add values\n *\n * **Inputs**\n *\n * - Audio 1\n * - Audio 2\n *\n * **Outputs**\n *\n * - Summed audio\n *\n * **Parameters**\n *\n * - value The value to add.  Linked to input 1.\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} [value=0] The initial value to add.\n */\nvar Add = function(audiolet, value) {\n    AudioletNode.call(this, audiolet, 2, 1);\n    this.linkNumberOfOutputChannels(0, 0);\n    this.value = new AudioletParameter(this, 1, value || 0);\n};\nextend(Add, AudioletNode);\n\n/**\n * Process samples\n */\nAdd.prototype.generate = function() {\n    var input = this.inputs[0];\n    var output = this.outputs[0];\n\n    var value = this.value.getValue();\n\n    var numberOfChannels = input.samples.length;\n    for (var i = 0; i < numberOfChannels; i++) {\n        output.samples[i] = input.samples[i] + value;\n    }\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nAdd.prototype.toString = function() {\n    return 'Add';\n};\n\n\n/*!\n * @depends ../core/AudioletNode.js\n */\n\n/**\n * Divide values\n *\n * **Inputs**\n *\n * - Audio 1\n * - Audio 2\n *\n * **Outputs**\n *\n * - Divided audio\n *\n * **Parameters**\n *\n * - value The value to divide by.  Linked to input 1.\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} [value=1] The initial value to divide by.\n */\nvar Divide = function(audiolet, value) {\n    AudioletNode.call(this, audiolet, 2, 1);\n    this.linkNumberOfOutputChannels(0, 0);\n    this.value = new AudioletParameter(this, 1, value || 1);\n};\nextend(Divide, AudioletNode);\n\n/**\n * Process samples\n */\nDivide.prototype.generate = function() {\n    var input = this.inputs[0];\n    var output = this.outputs[0];\n\n    var value = this.value.getValue();\n\n    var numberOfChannels = input.samples.length;\n    for (var i = 0; i < numberOfChannels; i++) {\n        output.samples[i] = input.samples[i] / value;\n    }\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nDivide.prototype.toString = function() {\n    return 'Divide';\n};\n\n\n/*!\n * @depends ../core/AudioletNode.js\n */\n\n/**\n * Modulo values\n *\n * **Inputs**\n *\n * - Audio 1\n * - Audio 2\n *\n * **Outputs**\n *\n * - Moduloed audio\n *\n * **Parameters**\n *\n * - value The value to modulo by.  Linked to input 1.\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} [value=1] The initial value to modulo by.\n */\nvar Modulo = function(audiolet, value) {\n    AudioletNode.call(this, audiolet, 2, 1);\n    this.linkNumberOfOutputChannels(0, 0);\n    this.value = new AudioletParameter(this, 1, value || 1);\n};\nextend(Modulo, AudioletNode);\n\n/**\n * Process samples\n */\nModulo.prototype.generate = function() {\n    var input = this.inputs[0];\n    var output = this.outputs[0];\n\n    var value = this.value.getValue();\n\n    var numberOfChannels = input.samples.length;\n    for (var i = 0; i < numberOfChannels; i++) {\n        output.samples[i] = input.samples[i] % value;\n    }\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nModulo.prototype.toString = function() {\n    return 'Modulo';\n};\n\n\n/*!\n * @depends ../core/AudioletNode.js\n */\n\n/*\n * Multiply and add values\n *\n * **Inputs**\n *\n * - Audio\n * - Multiply audio\n * - Add audio\n *\n * **Outputs**\n *\n * - MulAdded audio\n *\n * **Parameters**\n *\n * - mul The value to multiply by.  Linked to input 1.\n * - add The value to add.  Linked to input 2.\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} [mul=1] The initial value to multiply by.\n * @param {Number} [add=0] The initial value to add.\n */\nvar MulAdd = function(audiolet, mul, add) {\n    AudioletNode.call(this, audiolet, 3, 1);\n    this.linkNumberOfOutputChannels(0, 0);\n    this.mul = new AudioletParameter(this, 1, mul || 1);\n    this.add = new AudioletParameter(this, 2, add || 0);\n};\nextend(MulAdd, AudioletNode);\n\n/**\n * Process samples\n */\nMulAdd.prototype.generate = function() {\n    var input = this.inputs[0];\n    var output = this.outputs[0];\n\n    var mul = this.mul.getValue();\n    var add = this.add.getValue();\n\n    var numberOfChannels = input.samples.length;\n    for (var i = 0; i < numberOfChannels; i++) {\n        output.samples[i] = input.samples[i] * mul + add;\n    }\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nMulAdd.prototype.toString = function() {\n    return 'Multiplier/Adder';\n};\n\n\n/*!\n * @depends ../core/AudioletNode.js\n */\n\n/**\n * Reciprocal (1/x) of values\n *\n * **Inputs**\n *\n * - Audio\n *\n * **Outputs**\n *\n * - Reciprocal audio\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n */\nvar Reciprocal = function(audiolet) {\n    AudioletNode.call(this, audiolet, 1, 1);\n    this.linkNumberOfOutputChannels(0, 0);\n};\nextend(Reciprocal, AudioletNode);\n\n/**\n * Process samples\n */\nReciprocal.prototype.generate = function() {\n    var input = this.inputs[0];\n    var output = this.outputs[0];\n\n    var numberOfChannels = input.samples.length;\n    for (var i = 0; i < numberOfChannels; i++) {\n        output.samples[i] = 1 / input.samples[i];\n    }\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nReciprocal.prototype.toString = function() {\n    return 'Reciprocal';\n};\n\n\n/*!\n * @depends ../core/AudioletNode.js\n */\n\n/**\n * Subtract values\n *\n * **Inputs**\n *\n * - Audio 1\n * - Audio 2\n *\n * **Outputs**\n *\n * - Subtracted audio\n *\n * **Parameters**\n *\n * - value The value to subtract.  Linked to input 1.\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n * @param {Number} [value=0] The initial value to subtract.\n */\nvar Subtract = function(audiolet, value) {\n    AudioletNode.call(this, audiolet, 2, 1);\n    this.linkNumberOfOutputChannels(0, 0);\n    this.value = new AudioletParameter(this, 1, value || 0);\n};\nextend(Subtract, AudioletNode);\n\n/**\n * Process samples\n */\nSubtract.prototype.generate = function() {\n    var input = this.inputs[0];\n    var output = this.outputs[0];\n\n    var value = this.value.getValue();\n\n    var numberOfChannels = input.samples.length;\n    for (var i = 0; i < numberOfChannels; i++) {\n        output.samples[i] = input.samples[i] - value;\n    }\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nSubtract.prototype.toString = function() {\n    return 'Subtract';\n};\n\n\n/**\n * @depends ../core/AudioletNode.js\n */\n\n/**\n * Hyperbolic tangent of values.  Works nicely as a distortion function.\n *\n * **Inputs**\n *\n * - Audio\n *\n * **Outputs**\n *\n * - Tanh audio\n *\n * @constructor\n * @extends AudioletNode\n * @param {Audiolet} audiolet The audiolet object.\n */\n\nvar Tanh = function(audiolet) {\n    AudioletNode.call(this, audiolet, 1, 1);\n    this.linkNumberOfOutputChannels(0, 0);\n};\nextend(Tanh, AudioletNode);\n\n/**\n * Process samples\n */\nTanh.prototype.generate = function() {\n    var input = this.inputs[0];\n    var output = this.outputs[0];\n\n    var numberOfChannels = input.samples.length;\n    for (var i = 0; i < numberOfChannels; i++) {\n        var value = input.samples[i];\n        output.samples[i] = (Math.exp(value) - Math.exp(-value)) /\n                            (Math.exp(value) + Math.exp(-value));\n    }\n};\n\n/**\n * toString\n *\n * @return {String} String representation.\n */\nTanh.prototype.toString = function() {\n    return ('Tanh');\n};\n\n\n/**\n * A generic pattern.  Patterns are simple classes which return the next value\n * in a sequence when the next function is called.  Patterns can be embedded\n * inside other patterns to produce complex sequences of values.  When a\n * pattern is finished its next function returns null.\n *\n * @constructor\n */\nvar Pattern = function() {\n};\n\n/**\n * Default next function.\n *\n * @return {null} Null.\n */\nPattern.prototype.next = function() {\n    return null;\n};\n\n/**\n * Return the current value of an item contained in a pattern.\n *\n * @param {Pattern|Object} The item.\n * @return {Object} The value of the item.\n */\nPattern.prototype.valueOf = function(item) {\n    if (item instanceof Pattern) {\n        return (item.next());\n    }\n    else {\n        return (item);\n    }\n};\n\n/**\n * Default reset function.\n */\nPattern.prototype.reset = function() {\n};\n\n\n/*!\n * @depends Pattern.js\n */\n\n/**\n * Arithmetic sequence.  Adds a value to a running total on each next call.\n *\n * @constructor\n * @extends Pattern\n * @param {Number} start Starting value.\n * @param {Pattern|Number} step Value to add.\n * @param {Number} repeats Number of values to generate.\n */\nvar PArithmetic = function(start, step, repeats) {\n    Pattern.call(this);\n    this.start = start;\n    this.value = start;\n    this.step = step;\n    this.repeats = repeats;\n    this.position = 0;\n};\nextend(PArithmetic, Pattern);\n\n/**\n * Generate the next value in the pattern.\n *\n * @return {Number} The next value.\n */\nPArithmetic.prototype.next = function() {\n    var returnValue;\n    if (this.position == 0) {\n        returnValue = this.value;\n        this.position += 1;\n    }\n    else if (this.position < this.repeats) {\n        var step = this.valueOf(this.step);\n        if (step != null) {\n            this.value += step;\n            returnValue = this.value;\n            this.position += 1;\n        }\n        else {\n            returnValue = null;\n        }\n    }\n    else {\n        returnValue = null;\n    }\n    return (returnValue);\n};\n\n/**\n * Reset the pattern\n */\nPArithmetic.prototype.reset = function() {\n    this.value = this.start;\n    this.position = 0;\n    if (this.step instanceof Pattern) {\n        this.step.reset();\n    }\n};\n\n/**\n * Supercollider alias\n */\nvar Pseries = PArithmetic;\n\n\n/*!\n * @depends Pattern.js\n */\n\n/**\n * Choose a random value from an array.\n *\n * @constructor\n * @extends Pattern\n * @param {Object[]} list Array of items to choose from.\n * @param {Number} [repeats=1] Number of values to generate.\n */\nvar PChoose = function(list, repeats) {\n    Pattern.call(this);\n    this.list = list;\n    this.repeats = repeats || 1;\n    this.position = 0;\n};\nextend(PChoose, Pattern);\n\n/**\n * Generate the next value in the pattern.\n *\n * @return {Number} The next value.\n */\nPChoose.prototype.next = function() {\n    var returnValue;\n    if (this.position < this.repeats) {\n        var index = Math.floor(Math.random() * this.list.length);\n        var item = this.list[index];\n        var value = this.valueOf(item);\n        if (value != null) {\n            if (!(item instanceof Pattern)) {\n                this.position += 1;\n            }\n            returnValue = value;\n        }\n        else {\n            if (item instanceof Pattern) {\n                item.reset();\n            }\n            this.position += 1;\n            returnValue = this.next();\n        }\n    }\n    else {\n        returnValue = null;\n    }\n    return (returnValue);\n};\n\n/**\n * Reset the pattern\n */\nPChoose.prototype.reset = function() {\n    this.position = 0;\n    for (var i = 0; i < this.list.length; i++) {\n        var item = this.list[i];\n        if (item instanceof Pattern) {\n            item.reset();\n        }\n    }\n};\n\n/**\n * Supercollider alias\n */\nvar Prand = PChoose;\n\n\n/*!\n * @depends Pattern.js\n */\n\n\n/**\n * Geometric sequence.  Multiplies a running total by a value on each next\n * call.\n *\n * @constructor\n * @extends Pattern\n * @param {Number} start Starting value.\n * @param {Pattern|Number} step Value to multiply by.\n * @param {Number} repeats Number of values to generate.\n */\nvar PGeometric = function(start, step, repeats) {\n    Pattern.call(this);\n    this.start = start;\n    this.value = start;\n    this.step = step;\n    this.repeats = repeats;\n    this.position = 0;\n};\nextend(PGeometric, Pattern);\n\n/**\n * Generate the next value in the pattern.\n *\n * @return {Number} The next value.\n */\nPGeometric.prototype.next = function() {\n    var returnValue;\n    if (this.position == 0) {\n        returnValue = this.value;\n        this.position += 1;\n    }\n    else if (this.position < this.repeats) {\n        var step = this.valueOf(this.step);\n        if (step != null) {\n            this.value *= step;\n            returnValue = this.value;\n            this.position += 1;\n        }\n        else {\n            returnValue = null;\n        }\n    }\n    else {\n        returnValue = null;\n    }\n    return (returnValue);\n};\n\n/**\n * Reset the pattern\n */\nPGeometric.prototype.reset = function() {\n    this.value = this.start;\n    this.position = 0;\n    if (this.step instanceof Pattern) {\n        this.step.reset();\n    }\n};\n\n/**\n * Supercollider alias\n */\nvar Pgeom = PGeometric;\n\n\n/*!\n * @depends Pattern.js\n */\n\n/**\n * Proxy pattern.  Holds a pattern which can safely be replaced by a different\n * pattern while it is running.\n *\n *\n * @constructor\n * @extends Pattern\n * @param {Pattern} pattern The initial pattern.\n */\nvar PProxy = function(pattern) {\n    Pattern.call(this);\n    if (pattern) {\n        this.pattern = pattern;\n    }\n};\nextend(PProxy, Pattern);\n\n/**\n * Generate the next value in the pattern.\n *\n * @return {Number} The next value.\n */\nPProxy.prototype.next = function() {\n    var returnValue;\n    if (this.pattern) {\n        var returnValue = this.pattern.next();\n    }\n    else {\n        returnValue = null;\n    }\n    return returnValue;\n};\n\n/**\n * Alias\n */\nvar Pp = PProxy;\n\n\n/*!\n * @depends Pattern.js\n */\n\n/**\n * Sequence of random numbers.\n *\n * @constructor\n * @extends Pattern\n * @param {Number|Pattern} low Lowest possible value.\n * @param {Number|Pattern} high Highest possible value.\n * @param {Number} repeats Number of values to generate.\n */\nvar PRandom = function(low, high, repeats) {\n    Pattern.call(this);\n    this.low = low;\n    this.high = high;\n    this.repeats = repeats;\n    this.position = 0;\n};\nextend(PRandom, Pattern);\n\n/**\n * Generate the next value in the pattern.\n *\n * @return {Number} The next value.\n */\nPRandom.prototype.next = function() {\n    var returnValue;\n    if (this.position < this.repeats) {\n        var low = this.valueOf(this.low);\n        var high = this.valueOf(this.high);\n        if (low != null && high != null) {\n            returnValue = low + Math.random() * (high - low);\n            this.position += 1;\n        }\n        else {\n            returnValue = null;\n        }\n    }\n    else {\n        returnValue = null;\n    }\n    return (returnValue);\n};\n\n/**\n * Reset the pattern\n */\nPRandom.prototype.reset = function() {\n    this.position = 0;\n};\n\n/**\n * Supercollider alias\n */\nvar Pwhite = PRandom;\n\n\n/*!\n * @depends Pattern.js\n */\n\n/**\n * Iterate through a list of values.\n *\n * @constructor\n * @extends Pattern\n * @param {Object[]} list Array of values.\n * @param {Number} [repeats=1] Number of times to loop through the array.\n * @param {Number} [offset=0] Index to start from.\n */\nvar PSequence = function(list, repeats, offset) {\n    Pattern.call(this);\n    this.list = list;\n    this.repeats = repeats || 1;\n    this.position = 0;\n    this.offset = offset || 0;\n};\nextend(PSequence, Pattern);\n\n/**\n * Generate the next value in the pattern.\n *\n * @return {Number} The next value.\n */\nPSequence.prototype.next = function() {\n    var returnValue;\n    if (this.position < this.repeats * this.list.length) {\n        var index = (this.position + this.offset) % this.list.length;\n        var item = this.list[index];\n        var value = this.valueOf(item);\n        if (value != null) {\n            if (!(item instanceof Pattern)) {\n                this.position += 1;\n            }\n            returnValue = value;\n        }\n        else {\n            if (item instanceof Pattern) {\n                item.reset();\n            }\n            this.position += 1;\n            returnValue = this.next();\n        }\n    }\n    else {\n        returnValue = null;\n    }\n    return (returnValue);\n};\n\n/**\n * Reset the pattern\n */\nPSequence.prototype.reset = function() {\n    this.position = 0;\n    for (var i = 0; i < this.list.length; i++) {\n        var item = this.list[i];\n        if (item instanceof Pattern) {\n            item.reset();\n        }\n    }\n};\n\n/**\n * Supercollider alias\n */\nvar Pseq = PSequence;\n\n\n/*!\n * @depends Pattern.js\n */\n\n/**\n * Iterate through a list of values.\n *\n * @constructor\n * @extends Pattern\n * @param {Object[]} list Array of values.\n * @param {Number} [repeats=1] Number of values to generate.\n * @param {Number} [offset=0] Index to start from.\n */\nvar PSeries = function(list, repeats, offset) {\n    Pattern.call(this);\n    this.list = list;\n    this.repeats = repeats || 1;\n    this.position = 0;\n    this.offset = offset || 0;\n};\nextend(PSeries, Pattern);\n\n/**\n * Generate the next value in the pattern.\n *\n * @return {Number} The next value.\n */\nPSeries.prototype.next = function() {\n    var returnValue;\n    if (this.position < this.repeats) {\n        var index = (this.position + this.offset) % this.list.length;\n        var item = this.list[index];\n        var value = this.valueOf(item);\n        if (value != null) {\n            if (!(item instanceof Pattern)) {\n                this.position += 1;\n            }\n            returnValue = value;\n        }\n        else {\n            if (item instanceof Pattern) {\n                item.reset();\n            }\n            this.position += 1;\n            returnValue = this.next();\n        }\n    }\n    else {\n        returnValue = null;\n    }\n    return (returnValue);\n};\n\n/**\n * Reset the pattern\n */\nPSeries.prototype.reset = function() {\n    this.position = 0;\n    for (var i = 0; i < this.list.length; i++) {\n        var item = this.list[i];\n        if (item instanceof Pattern) {\n            item.reset();\n        }\n    }\n};\n\n/**\n * Supercollider alias\n */\nvar Pser = PSeries;\n\n\n/*!\n * @depends Pattern.js\n */\n\n/**\n * Reorder an array, then iterate through it's values.\n *\n * @constructor\n * @extends Pattern\n * @param {Object[]} list Array of values.\n * @param {Number} repeats Number of times to loop through the array.\n */\nvar PShuffle = function(list, repeats) {\n    Pattern.call(this);\n    this.list = [];\n    // Shuffle values into new list\n    while (list.length) {\n        var index = Math.floor(Math.random() * list.length);\n        var value = list.splice(index, 1);\n        this.list.push(value);\n    }\n    this.repeats = repeats;\n    this.position = 0;\n};\nextend(PShuffle, Pattern);\n\n/**\n * Generate the next value in the pattern.\n *\n * @return {Number} The next value.\n */\nPShuffle.prototype.next = function() {\n    var returnValue;\n    if (this.position < this.repeats * this.list.length) {\n        var index = (this.position + this.offset) % this.list.length;\n        var item = this.list[index];\n        var value = this.valueOf(item);\n        if (value != null) {\n            if (!(item instanceof Pattern)) {\n                this.position += 1;\n            }\n            returnValue = value;\n        }\n        else {\n            if (item instanceof Pattern) {\n                item.reset();\n            }\n            this.position += 1;\n            returnValue = this.next();\n        }\n    }\n    else {\n        returnValue = null;\n    }\n    return (returnValue);\n};\n\n/**\n * Supercollider alias\n */\nvar Pshuffle = PShuffle;\n\n\n/**\n * Representation of a generic musical scale.  Can be subclassed to produce\n * specific scales.\n *\n * @constructor\n * @param {Number[]} degrees Array of integer degrees.\n * @param {Tuning} [tuning] The scale's tuning.  Defaults to 12-tone ET.\n */\nvar Scale = function(degrees, tuning) {\n    this.degrees = degrees;\n    this.tuning = tuning || new EqualTemperamentTuning(12);\n};\n\n/**\n * Get the frequency of a note in the scale.\n *\n * @constructor\n * @param {Number} degree The note's degree.\n * @param {Number} rootFrequency  The root frequency of the scale.\n * @param {Number} octave The octave of the note.\n * @return {Number} The frequency of the note in hz.\n */\nScale.prototype.getFrequency = function(degree, rootFrequency, octave) {\n    var frequency = rootFrequency;\n    octave += Math.floor(degree / this.degrees.length);\n    degree %= this.degrees.length;\n    frequency *= Math.pow(this.tuning.octaveRatio, octave);\n    frequency *= this.tuning.ratios[this.degrees[degree]];\n    return frequency;\n};\n\n/*!\n * @depends Scale.js\n */\n\n/**\n * Major scale.\n *\n * @constructor\n * @extends Scale\n */\nvar MajorScale = function() {\n    Scale.call(this, [0, 2, 4, 5, 7, 9, 11]);\n};\nextend(MajorScale, Scale);\n\n/*!\n * @depends Scale.js\n */\n\n/**\n * Minor scale.\n *\n * @constructor\n * @extends Scale\n */\n\nvar MinorScale = function() {\n    Scale.call(this, [0, 2, 3, 5, 7, 8, 10]);\n};\nextend(MinorScale, Scale);\n\n/**\n *  Representation of a generic musical tuning.  Can be subclassed to produce\n * specific tunings.\n *\n * @constructor\n * @param {Number[]} semitones Array of semitone values for the tuning.\n * @param {Number} [octaveRatio=2] Frequency ratio for notes an octave apart.\n */\n\nvar Tuning = function(semitones, octaveRatio) {\n    this.semitones = semitones;\n    this.octaveRatio = octaveRatio || 2;\n    this.ratios = [];\n    var tuningLength = this.semitones.length;\n    for (var i = 0; i < tuningLength; i++) {\n        this.ratios.push(Math.pow(2, this.semitones[i] / tuningLength));\n    }\n};\n\n/*!\n * @depends Tuning.js\n */\n\n/**\n * Equal temperament tuning.\n *\n * @constructor\n * @extends Tuning\n * @param {Number} pitchesPerOctave The number of notes in each octave.\n */\nvar EqualTemperamentTuning = function(pitchesPerOctave) {\n    var semitones = [];\n    for (var i = 0; i < pitchesPerOctave; i++) {\n        semitones.push(i);\n    }\n    Tuning.call(this, semitones, 2);\n};\nextend(EqualTemperamentTuning, Tuning);\n\nvar Sink = this.Sink = function (global) {\n\n/**\n * Creates a Sink according to specified parameters, if possible.\n *\n * @class\n *\n * @arg =!readFn\n * @arg =!channelCount\n * @arg =!bufferSize\n * @arg =!sampleRate\n *\n * @param {Function} readFn A callback to handle the buffer fills.\n * @param {Number} channelCount Channel count.\n * @param {Number} bufferSize (Optional) Specifies a pre-buffer size to control the amount of latency.\n * @param {Number} sampleRate Sample rate (ms).\n * @param {Number} default=0 writePosition Write position of the sink, as in how many samples have been written per channel.\n * @param {String} default=async writeMode The default mode of writing to the sink.\n * @param {String} default=interleaved channelMode The mode in which the sink asks the sample buffers to be channeled in.\n * @param {Number} default=0 previousHit The previous time of a callback.\n * @param {Buffer} default=null ringBuffer The ring buffer array of the sink. If null, ring buffering will not be applied.\n * @param {Number} default=0 ringOffset The current position of the ring buffer.\n*/\nfunction Sink (readFn, channelCount, bufferSize, sampleRate) {\n	var	sinks	= Sink.sinks.list,\n		i;\n	for (i=0; i<sinks.length; i++) {\n		if (sinks[i].enabled) {\n			try {\n				return new sinks[i](readFn, channelCount, bufferSize, sampleRate);\n			} catch(e1){}\n		}\n	}\n\n	throw Sink.Error(0x02);\n}\n\nfunction SinkClass () {\n}\n\nSink.SinkClass = SinkClass;\n\nSinkClass.prototype = Sink.prototype = {\n	sampleRate: 44100,\n	channelCount: 2,\n	bufferSize: 4096,\n\n	writePosition: 0,\n	previousHit: 0,\n	ringOffset: 0,\n\n	channelMode: 'interleaved',\n	isReady: false,\n\n/**\n * Does the initialization of the sink.\n * @method Sink\n*/\n	start: function (readFn, channelCount, bufferSize, sampleRate) {\n		this.channelCount	= isNaN(channelCount) || channelCount === null ? this.channelCount: channelCount;\n		this.bufferSize		= isNaN(bufferSize) || bufferSize === null ? this.bufferSize : bufferSize;\n		this.sampleRate		= isNaN(sampleRate) || sampleRate === null ? this.sampleRate : sampleRate;\n		this.readFn		= readFn;\n		this.activeRecordings	= [];\n		this.previousHit	= +new Date();\n		Sink.EventEmitter.call(this);\n		Sink.emit('init', [this].concat([].slice.call(arguments)));\n	},\n/**\n * The method which will handle all the different types of processing applied on a callback.\n * @method Sink\n*/\n	process: function (soundData, channelCount) {\n		this.emit('preprocess', arguments);\n\n		if (this.ringBuffer) {\n			(this.channelMode === 'interleaved' ? this.ringSpin : this.ringSpinInterleaved).apply(this, arguments);\n		}\n\n		if (this.channelMode === 'interleaved') {\n			this.emit('audioprocess', arguments);\n\n			if (this.readFn) {\n				this.readFn.apply(this, arguments);\n			}\n		} else {\n			var	soundDataSplit	= Sink.deinterleave(soundData, this.channelCount),\n				args		= [soundDataSplit].concat([].slice.call(arguments, 1));\n			this.emit('audioprocess', args);\n\n			if (this.readFn) {\n				this.readFn.apply(this, args);\n			}\n\n			Sink.interleave(soundDataSplit, this.channelCount, soundData);\n		}\n		this.emit('postprocess', arguments);\n		this.previousHit = +new Date();\n		this.writePosition += soundData.length / channelCount;\n	},\n/**\n * Get the current output position, defaults to writePosition - bufferSize.\n *\n * @method Sink\n *\n * @return {Number} The position of the write head, in samples, per channel.\n*/\n	getPlaybackTime: function () {\n		return this.writePosition - this.bufferSize;\n	},\n/**\n * Internal method to send the ready signal if not ready yet.\n * @method Sink\n*/\n	ready: function () {\n		if (this.isReady) return;\n\n		this.isReady = true;\n		this.emit('ready', []);\n	}\n};\n\n/**\n * The container for all the available sinks. Also a decorator function for creating a new Sink class and binding it.\n *\n * @method Sink\n * @static\n *\n * @arg {String} type The name / type of the Sink.\n * @arg {Function} constructor The constructor function for the Sink.\n * @arg {Object} prototype The prototype of the Sink. (optional)\n * @arg {Boolean} disabled Whether the Sink should be disabled at first.\n*/\n\nfunction sinks (type, constructor, prototype, disabled, priority) {\n	prototype = prototype || constructor.prototype;\n	constructor.prototype = new Sink.SinkClass();\n	constructor.prototype.type = type;\n	constructor.enabled = !disabled;\n\n	var k;\n	for (k in prototype) {\n		if (prototype.hasOwnProperty(k)) {\n			constructor.prototype[k] = prototype[k];\n		}\n	}\n\n	sinks[type] = constructor;\n	sinks.list[priority ? 'unshift' : 'push'](constructor);\n}\n\nSink.sinks = Sink.devices = sinks;\nSink.sinks.list = [];\n\nSink.singleton = function () {\n	var sink = Sink.apply(null, arguments);\n\n	Sink.singleton = function () {\n		return sink;\n	};\n\n	return sink;\n};\n\nglobal.Sink = Sink;\n\nreturn Sink;\n\n}(function (){ return this; }());\nvoid function (Sink) {\n\n/**\n * A light event emitter.\n *\n * @class\n * @static Sink\n*/\nfunction EventEmitter () {\n	var k;\n	for (k in EventEmitter.prototype) {\n		if (EventEmitter.prototype.hasOwnProperty(k)) {\n			this[k] = EventEmitter.prototype[k];\n		}\n	}\n	this._listeners = {};\n}\n\nEventEmitter.prototype = {\n	_listeners: null,\n/**\n * Emits an event.\n *\n * @method EventEmitter\n *\n * @arg {String} name The name of the event to emit.\n * @arg {Array} args The arguments to pass to the event handlers.\n*/\n	emit: function (name, args) {\n		if (this._listeners[name]) {\n			for (var i=0; i<this._listeners[name].length; i++) {\n				this._listeners[name][i].apply(this, args);\n			}\n		}\n		return this;\n	},\n/**\n * Adds an event listener to an event.\n *\n * @method EventEmitter\n *\n * @arg {String} name The name of the event.\n * @arg {Function} listener The event listener to attach to the event.\n*/\n	on: function (name, listener) {\n		this._listeners[name] = this._listeners[name] || [];\n		this._listeners[name].push(listener);\n		return this;\n	},\n/**\n * Adds an event listener to an event.\n *\n * @method EventEmitter\n *\n * @arg {String} name The name of the event.\n * @arg {Function} !listener The event listener to remove from the event. If not specified, will delete all.\n*/\n	off: function (name, listener) {\n		if (this._listeners[name]) {\n			if (!listener) {\n				delete this._listeners[name];\n				return this;\n			}\n\n			for (var i=0; i<this._listeners[name].length; i++) {\n				if (this._listeners[name][i] === listener) {\n					this._listeners[name].splice(i--, 1);\n				}\n			}\n\n			if (!this._listeners[name].length) {\n				delete this._listeners[name];\n			}\n		}\n		return this;\n	}\n};\n\nSink.EventEmitter = EventEmitter;\n\nEventEmitter.call(Sink);\n\n}(this.Sink);\nvoid function (Sink) {\n\n/**\n * Creates a timer with consistent (ie. not clamped) intervals even in background tabs.\n * Uses inline workers to achieve this. If not available, will revert to regular timers.\n *\n * @static Sink\n * @name doInterval\n *\n * @arg {Function} callback The callback to trigger on timer hit.\n * @arg {Number} timeout The interval between timer hits.\n *\n * @return {Function} A function to cancel the timer.\n*/\n\nSink.doInterval = function (callback, timeout) {\n	var timer, kill;\n\n	function create (noWorker) {\n		if (Sink.inlineWorker.working && !noWorker) {\n			timer = Sink.inlineWorker('setInterval(function (){ postMessage(\"tic\"); }, ' + timeout + ');');\n			timer.onmessage = function (){\n				callback();\n			};\n			kill = function () {\n				timer.terminate();\n			};\n		} else {\n			timer = setInterval(callback, timeout);\n			kill = function (){\n				clearInterval(timer);\n			};\n		}\n	}\n\n	if (Sink.inlineWorker.ready) {\n		create();\n	} else {\n		Sink.inlineWorker.on('ready', function () {\n			create();\n		});\n	}\n\n	return function () {\n		if (!kill) {\n			if (!Sink.inlineWorker.ready) {\n				Sink.inlineWorker.on('ready', function () {\n					if (kill) kill();\n				});\n			}\n		} else {\n			kill();\n		}\n	};\n};\n\n}(this.Sink);\nvoid function (Sink) {\n\nvar _Blob, _BlobBuilder, _URL, _btoa;\n\nvoid function (prefixes, urlPrefixes) {\n	function find (name, prefixes) {\n		var b, a = prefixes.slice();\n\n		for (b=a.shift(); typeof b !== 'undefined'; b=a.shift()) {\n			b = Function('return typeof ' + b + name +\n				'=== \"undefined\" ? undefined : ' +\n				b + name)();\n\n			if (b) return b;\n		}\n	}\n\n	_Blob = find('Blob', prefixes);\n	_BlobBuilder = find('BlobBuilder', prefixes);\n	_URL = find('URL', urlPrefixes);\n	_btoa = find('btoa', ['']);\n}([\n	'',\n	'Moz',\n	'WebKit',\n	'MS'\n], [\n	'',\n	'webkit'\n]);\n\nvar createBlob = _Blob && _URL && function (content, type) {\n	return _URL.createObjectURL(new _Blob([content], { type: type }));\n};\n\nvar createBlobBuilder = _BlobBuilder && _URL && function (content, type) {\n	var bb = new _BlobBuilder();\n	bb.append(content);\n\n	return _URL.createObjectURL(bb.getBlob(type));\n};\n\nvar createData = _btoa && function (content, type) {\n	return 'data:' + type + ';base64,' + _btoa(content);\n};\n\nvar createDynURL =\n	createBlob ||\n	createBlobBuilder ||\n	createData;\n\nif (!createDynURL) return;\n\nif (createBlob) createDynURL.createBlob = createBlob;\nif (createBlobBuilder) createDynURL.createBlobBuilder = createBlobBuilder;\nif (createData) createDynURL.createData = createData;\n\nif (_Blob) createDynURL.Blob = _Blob;\nif (_BlobBuilder) createDynURL.BlobBuilder = _BlobBuilder;\nif (_URL) createDynURL.URL = _URL;\n\nSink.createDynURL = createDynURL;\n\nSink.revokeDynURL = function (url) {\n	if (typeof url === 'string' && url.indexOf('data:') === 0) {\n		return false;\n	} else {\n		return _URL.revokeObjectURL(url);\n	}\n};\n\n}(this.Sink);\nvoid function (Sink) {\n\n/*\n * A Sink-specific error class.\n *\n * @class\n * @static Sink\n * @name Error\n *\n * @arg =code\n *\n * @param {Number} code The error code.\n * @param {String} message A brief description of the error.\n * @param {String} explanation A more verbose explanation of why the error occured and how to fix.\n*/\n\nfunction SinkError(code) {\n	if (!SinkError.hasOwnProperty(code)) throw SinkError(1);\n	if (!(this instanceof SinkError)) return new SinkError(code);\n\n	var k;\n	for (k in SinkError[code]) {\n		if (SinkError[code].hasOwnProperty(k)) {\n			this[k] = SinkError[code][k];\n		}\n	}\n\n	this.code = code;\n}\n\nSinkError.prototype = new Error();\n\nSinkError.prototype.toString = function () {\n	return 'SinkError 0x' + this.code.toString(16) + ': ' + this.message;\n};\n\nSinkError[0x01] = {\n	message: 'No such error code.',\n	explanation: 'The error code does not exist.'\n};\nSinkError[0x02] = {\n	message: 'No audio sink available.',\n	explanation: 'The audio device may be busy, or no supported output API is available for this browser.'\n};\n\nSinkError[0x10] = {\n	message: 'Buffer underflow.',\n	explanation: 'Trying to recover...'\n};\nSinkError[0x11] = {\n	message: 'Critical recovery fail.',\n	explanation: 'The buffer underflow has reached a critical point, trying to recover, but will probably fail anyway.'\n};\nSinkError[0x12] = {\n	message: 'Buffer size too large.',\n	explanation: 'Unable to allocate the buffer due to excessive length, please try a smaller buffer. Buffer size should probably be smaller than the sample rate.'\n};\n\nSink.Error = SinkError;\n\n}(this.Sink);\nvoid function (Sink) {\n\n/**\n * Creates an inline worker using a data/blob URL, if possible.\n *\n * @static Sink\n *\n * @arg {String} script\n *\n * @return {Worker} A web worker, or null if impossible to create.\n*/\n\nvar define = Object.defineProperty ? function (obj, name, value) {\n	Object.defineProperty(obj, name, {\n		value: value,\n		configurable: true,\n		writable: true\n	});\n} : function (obj, name, value) {\n	obj[name] = value;\n};\n\nfunction terminate () {\n	define(this, 'terminate', this._terminate);\n\n	Sink.revokeDynURL(this._url);\n\n	delete this._url;\n	delete this._terminate;\n	return this.terminate();\n}\n\nfunction inlineWorker (script) {\n	function wrap (type, content, typeName) {\n		try {\n			var url = type(content, 'text/javascript');\n			var worker = new Worker(url);\n\n			define(worker, '_url', url);\n			define(worker, '_terminate', worker.terminate);\n			define(worker, 'terminate', terminate);\n\n			if (inlineWorker.type) return worker;\n\n			inlineWorker.type = typeName;\n			inlineWorker.createURL = type;\n\n			return worker;\n		} catch (e) {\n			return null;\n		}\n	}\n\n	var createDynURL = Sink.createDynURL;\n	var worker;\n\n	if (inlineWorker.createURL) {\n		return wrap(inlineWorker.createURL, script, inlineWorker.type);\n	}\n\n	worker = wrap(createDynURL.createBlob, script, 'blob');\n	if (worker) return worker;\n\n	worker = wrap(createDynURL.createBlobBuilder, script, 'blobbuilder');\n	if (worker) return worker;\n\n	worker = wrap(createDynURL.createData, script, 'data');\n\n	return worker;\n}\n\nSink.EventEmitter.call(inlineWorker);\n\ninlineWorker.test = function () {\n	inlineWorker.ready = inlineWorker.working = false;\n	inlineWorker.type = '';\n	inlineWorker.createURL = null;\n\n	var worker = inlineWorker('this.onmessage=function(e){postMessage(e.data)}');\n	var data = 'inlineWorker';\n\n	function ready (success) {\n		if (inlineWorker.ready) return;\n\n		inlineWorker.ready = true;\n		inlineWorker.working = success;\n		inlineWorker.emit('ready', [success]);\n		inlineWorker.off('ready');\n\n		if (success && worker) {\n			worker.terminate();\n		}\n\n		worker = null;\n	}\n\n	if (!worker) {\n		setTimeout(function () {\n			ready(false);\n		}, 0);\n	} else {\n		worker.onmessage = function (e) {\n			ready(e.data === data);\n		};\n\n		worker.postMessage(data);\n\n		setTimeout(function () {\n			ready(false);\n		}, 1000);\n	}\n};\n\nSink.inlineWorker = inlineWorker;\n\ninlineWorker.test();\n\n}(this.Sink);\nvoid function (Sink) {\n\n/**\n * A Sink class for the Mozilla Audio Data API.\n*/\n\nSink.sinks('audiodata', function () {\n	var	self			= this,\n		currentWritePosition	= 0,\n		tail			= null,\n		audioDevice		= new Audio(),\n		written, currentPosition, available, soundData, prevPos,\n		timer; // Fix for https://bugzilla.mozilla.org/show_bug.cgi?id=630117\n	self.start.apply(self, arguments);\n	self.preBufferSize = isNaN(arguments[4]) || arguments[4] === null ? this.preBufferSize : arguments[4];\n\n	function bufferFill() {\n		if (tail) {\n			written = audioDevice.mozWriteAudio(tail);\n			currentWritePosition += written;\n			if (written < tail.length){\n				tail = tail.subarray(written);\n				return tail;\n			}\n			tail = null;\n		}\n\n		currentPosition = audioDevice.mozCurrentSampleOffset();\n		available = Number(currentPosition + (prevPos !== currentPosition ? self.bufferSize : self.preBufferSize) * self.channelCount - currentWritePosition);\n\n		if (currentPosition === prevPos) {\n			self.emit('error', [Sink.Error(0x10)]);\n		}\n\n		if (available > 0 || prevPos === currentPosition){\n			self.ready();\n\n			try {\n				soundData = new Float32Array(prevPos === currentPosition ? self.preBufferSize * self.channelCount :\n					self.forceBufferSize ? available < self.bufferSize * 2 ? self.bufferSize * 2 : available : available);\n			} catch(e) {\n				self.emit('error', [Sink.Error(0x12)]);\n				self.kill();\n				return;\n			}\n			self.process(soundData, self.channelCount);\n			written = self._audio.mozWriteAudio(soundData);\n			if (written < soundData.length){\n				tail = soundData.subarray(written);\n			}\n			currentWritePosition += written;\n		}\n		prevPos = currentPosition;\n	}\n\n	audioDevice.mozSetup(self.channelCount, self.sampleRate);\n\n	this._timers = [];\n\n	this._timers.push(Sink.doInterval(function () {\n		// Check for complete death of the output\n		if (+new Date() - self.previousHit > 2000) {\n			self._audio = audioDevice = new Audio();\n			audioDevice.mozSetup(self.channelCount, self.sampleRate);\n			currentWritePosition = 0;\n			self.emit('error', [Sink.Error(0x11)]);\n		}\n	}, 1000));\n\n	this._timers.push(Sink.doInterval(bufferFill, self.interval));\n\n	self._bufferFill	= bufferFill;\n	self._audio		= audioDevice;\n}, {\n	// These are somewhat safe values...\n	bufferSize: 24576,\n	preBufferSize: 24576,\n	forceBufferSize: false,\n	interval: 100,\n\n	kill: function () {\n		while (this._timers.length) {\n			this._timers.shift()();\n		}\n\n		this.emit('kill');\n	},\n\n	getPlaybackTime: function () {\n		return this._audio.mozCurrentSampleOffset() / this.channelCount;\n	}\n}, false, true);\n\nSink.sinks.moz = Sink.sinks.audiodata;\n\n}(this.Sink);\nvoid function (Sink) {\n\n/**\n * A dummy Sink. (No output)\n*/\n\nSink.sinks('dummy', function () {\n	var	self = this;\n	self.start.apply(self, arguments);\n\n	function bufferFill () {\n		var	soundData = new Float32Array(self.bufferSize * self.channelCount);\n		self.process(soundData, self.channelCount);\n	}\n\n	self._kill = Sink.doInterval(bufferFill, self.bufferSize / self.sampleRate * 1000);\n\n	self._callback		= bufferFill;\n}, {\n	kill: function () {\n		this._kill();\n		this.emit('kill');\n	}\n}, true);\n\n}(this.Sink);\n(function (Sink, sinks) {\n\nsinks = Sink.sinks;\n\nfunction newAudio (src) {\n	var audio = document.createElement('audio');\n	if (src) {\n		audio.src = src;\n	}\n	return audio;\n}\n\n/* TODO: Implement a <BGSOUND> hack for IE8. */\n\n/**\n * A sink class for WAV data URLs\n * Relies on pcmdata.js and utils to be present.\n * Thanks to grantgalitz and others for the idea.\n*/\nsinks('wav', function () {\n	var	self			= this,\n		audio			= new sinks.wav.wavAudio(),\n		PCMData			= typeof PCMData === 'undefined' ? audioLib.PCMData : PCMData;\n	self.start.apply(self, arguments);\n	var	soundData		= new Float32Array(self.bufferSize * self.channelCount),\n		zeroData		= new Float32Array(self.bufferSize * self.channelCount);\n\n	if (!newAudio().canPlayType('audio/wav; codecs=1') || !btoa) throw 0;\n\n	function bufferFill () {\n		if (self._audio.hasNextFrame) return;\n\n		self.ready();\n\n		Sink.memcpy(zeroData, 0, soundData, 0);\n		self.process(soundData, self.channelCount);\n\n		self._audio.setSource('data:audio/wav;base64,' + btoa(\n			audioLib.PCMData.encode({\n				data:		soundData,\n				sampleRate:	self.sampleRate,\n				channelCount:	self.channelCount,\n				bytesPerSample:	self.quality\n			})\n		));\n\n		if (!self._audio.currentFrame.src) self._audio.nextClip();\n	}\n\n	self.kill		= Sink.doInterval(bufferFill, 40);\n	self._bufferFill	= bufferFill;\n	self._audio		= audio;\n}, {\n	quality: 1,\n	bufferSize: 22050,\n\n	getPlaybackTime: function () {\n		var audio = this._audio;\n		return (audio.currentFrame ? audio.currentFrame.currentTime * this.sampleRate : 0) + audio.samples;\n	}\n});\n\nfunction wavAudio () {\n	var self = this;\n\n	self.currentFrame	= newAudio();\n	self.nextFrame		= newAudio();\n\n	self._onended		= function () {\n		self.samples += self.bufferSize;\n		self.nextClip();\n	};\n}\n\nwavAudio.prototype = {\n	samples:	0,\n	nextFrame:	null,\n	currentFrame:	null,\n	_onended:	null,\n	hasNextFrame:	false,\n\n	nextClip: function () {\n		var	curFrame	= this.currentFrame;\n		this.currentFrame	= this.nextFrame;\n		this.nextFrame		= curFrame;\n		this.hasNextFrame	= false;\n		this.currentFrame.play();\n	},\n\n	setSource: function (src) {\n		this.nextFrame.src = src;\n		this.nextFrame.addEventListener('ended', this._onended, true);\n\n		this.hasNextFrame = true;\n	}\n};\n\nsinks.wav.wavAudio = wavAudio;\n\n}(this.Sink));\n (function (sinks, fixChrome82795) {\n\nvar AudioContext = typeof window === 'undefined' ? null : window.webkitAudioContext || window.AudioContext;\n\n/**\n * A sink class for the Web Audio API\n*/\n\nsinks('webaudio', function (readFn, channelCount, bufferSize, sampleRate) {\n	var	self		= this,\n		context		= sinks.webaudio.getContext(),\n		node		= null,\n		soundData	= null,\n		zeroBuffer	= null;\n	self.start.apply(self, arguments);\n    node = context.createScriptProcessor(self.bufferSize, self.channelCount, self.channelCount);\n\n	function bufferFill(e) {\n		var	outputBuffer	= e.outputBuffer,\n			channelCount	= outputBuffer.numberOfChannels,\n			i, n, l		= outputBuffer.length,\n			size		= outputBuffer.size,\n			channels	= new Array(channelCount),\n			tail;\n\n		self.ready();\n\n		soundData	= soundData && soundData.length === l * channelCount ? soundData : new Float32Array(l * channelCount);\n		zeroBuffer	= zeroBuffer && zeroBuffer.length === soundData.length ? zeroBuffer : new Float32Array(l * channelCount);\n		soundData.set(zeroBuffer);\n\n		for (i=0; i<channelCount; i++) {\n			channels[i] = outputBuffer.getChannelData(i);\n		}\n\n		self.process(soundData, self.channelCount);\n\n		for (i=0; i<l; i++) {\n			for (n=0; n < channelCount; n++) {\n				channels[n][i] = soundData[i * self.channelCount + n];\n			}\n		}\n	}\n\n	self.sampleRate = context.sampleRate;\n\n	node.onaudioprocess = bufferFill;\n	node.connect(context.destination);\n\n	self._context		= context;\n	self._node		= node;\n	self._callback		= bufferFill;\n	/* Keep references in order to avoid garbage collection removing the listeners, working around http://code.google.com/p/chromium/issues/detail?id=82795 */\n	// Thanks to @baffo32\n	fixChrome82795.push(node);\n}, {\n	kill: function () {\n		this._node.disconnect(0);\n\n		for (var i=0; i<fixChrome82795.length; i++) {\n			if (fixChrome82795[i] === this._node) {\n				fixChrome82795.splice(i--, 1);\n			}\n		}\n\n		this._node = this._context = null;\n		this.emit('kill');\n	},\n\n	getPlaybackTime: function () {\n		return this._context.currentTime * this.sampleRate;\n	}\n}, false, true);\n\nsinks.webkit = sinks.webaudio;\n\nsinks.webaudio.fix82795 = fixChrome82795;\n\nsinks.webaudio.getContext = function () {\n	// For now, we have to accept that the AudioContext is at 48000Hz, or whatever it decides.\n	var context = new AudioContext(/*sampleRate*/);\n\n	sinks.webaudio.getContext = function () {\n		return context;\n	};\n\n	return context;\n};\n\n}(this.Sink.sinks, []));\n(function (Sink) {\n\n/**\n * A Sink class for the Media Streams Processing API and/or Web Audio API in a Web Worker.\n*/\n\nSink.sinks('worker', function () {\n	var	self		= this,\n		global		= (function(){ return this; }()),\n		soundData	= null,\n		outBuffer	= null,\n		zeroBuffer	= null;\n	self.start.apply(self, arguments);\n\n	// Let's see if we're in a worker.\n\n	importScripts();\n\n	function mspBufferFill (e) {\n		if (!self.isReady) {\n			self.initMSP(e);\n		}\n\n		self.ready();\n\n		var	channelCount	= self.channelCount,\n			l		= e.audioLength,\n			n, i;\n\n		soundData	= soundData && soundData.length === l * channelCount ? soundData : new Float32Array(l * channelCount);\n		outBuffer	= outBuffer && outBuffer.length === soundData.length ? outBuffer : new Float32Array(l * channelCount);\n		zeroBuffer	= zeroBuffer && zeroBuffer.length === soundData.length ? zeroBuffer : new Float32Array(l * channelCount);\n\n		soundData.set(zeroBuffer);\n		outBuffer.set(zeroBuffer);\n\n		self.process(soundData, self.channelCount);\n\n		for (n=0; n<channelCount; n++) {\n			for (i=0; i<l; i++) {\n				outBuffer[n * e.audioLength + i] = soundData[n + i * channelCount];\n			}\n		}\n\n		e.writeAudio(outBuffer);\n	}\n\n	function waBufferFill(e) {\n		if (!self.isReady) {\n			self.initWA(e);\n		}\n\n		self.ready();\n\n		var	outputBuffer	= e.outputBuffer,\n			channelCount	= outputBuffer.numberOfChannels,\n			i, n, l		= outputBuffer.length,\n			size		= outputBuffer.size,\n			channels	= new Array(channelCount),\n			tail;\n\n		soundData	= soundData && soundData.length === l * channelCount ? soundData : new Float32Array(l * channelCount);\n		zeroBuffer	= zeroBuffer && zeroBuffer.length === soundData.length ? zeroBuffer : new Float32Array(l * channelCount);\n		soundData.set(zeroBuffer);\n\n		for (i=0; i<channelCount; i++) {\n			channels[i] = outputBuffer.getChannelData(i);\n		}\n\n		self.process(soundData, self.channelCount);\n\n		for (i=0; i<l; i++) {\n			for (n=0; n < channelCount; n++) {\n				channels[n][i] = soundData[i * self.channelCount + n];\n			}\n		}\n	}\n\n	global.onprocessmedia	= mspBufferFill;\n	global.onaudioprocess	= waBufferFill;\n\n	self._mspBufferFill	= mspBufferFill;\n	self._waBufferFill	= waBufferFill;\n\n}, {\n	ready: false,\n\n	initMSP: function (e) {\n		this.channelCount	= e.audioChannels;\n		this.sampleRate		= e.audioSampleRate;\n		this.bufferSize		= e.audioLength * this.channelCount;\n		this.ready		= true;\n		this.emit('ready', []);\n	},\n\n	initWA: function (e) {\n		var b = e.outputBuffer;\n		this.channelCount	= b.numberOfChannels;\n		this.sampleRate		= b.sampleRate;\n		this.bufferSize		= b.length * this.channelCount;\n		this.ready		= true;\n		this.emit('ready', []);\n	}\n});\n\n}(this.Sink));\n(function (Sink) {\n\n/**\n * Splits a sample buffer into those of different channels.\n *\n * @static Sink\n * @name deinterleave\n *\n * @arg {Buffer} buffer The sample buffer to split.\n * @arg {Number} channelCount The number of channels to split to.\n *\n * @return {Array} An array containing the resulting sample buffers.\n*/\n\nSink.deinterleave = function (buffer, channelCount) {\n	var	l	= buffer.length,\n		size	= l / channelCount,\n		ret	= [],\n		i, n;\n	for (i=0; i<channelCount; i++){\n		ret[i] = new Float32Array(size);\n		for (n=0; n<size; n++){\n			ret[i][n] = buffer[n * channelCount + i];\n		}\n	}\n	return ret;\n};\n\n/**\n * Joins an array of sample buffers into a single buffer.\n *\n * @static Sink\n * @name resample\n *\n * @arg {Array} buffers The buffers to join.\n * @arg {Number} !channelCount The number of channels. Defaults to buffers.length\n * @arg {Buffer} !buffer The output buffer.\n *\n * @return {Buffer} The interleaved buffer created.\n*/\n\nSink.interleave = function (buffers, channelCount, buffer) {\n	channelCount		= channelCount || buffers.length;\n	var	l		= buffers[0].length,\n		bufferCount	= buffers.length,\n		i, n;\n	buffer			= buffer || new Float32Array(l * channelCount);\n	for (i=0; i<bufferCount; i++) {\n		for (n=0; n<l; n++) {\n			buffer[i + n * channelCount] = buffers[i][n];\n		}\n	}\n	return buffer;\n};\n\n/**\n * Mixes two or more buffers down to one.\n *\n * @static Sink\n * @name mix\n *\n * @arg {Buffer} buffer The buffer to append the others to.\n * @arg {Buffer} bufferX The buffers to append from.\n *\n * @return {Buffer} The mixed buffer.\n*/\n\nSink.mix = function (buffer) {\n	var	buffers	= [].slice.call(arguments, 1),\n		l, i, c;\n	for (c=0; c<buffers.length; c++){\n		l = Math.max(buffer.length, buffers[c].length);\n		for (i=0; i<l; i++){\n			buffer[i] += buffers[c][i];\n		}\n	}\n	return buffer;\n};\n\n/**\n * Resets a buffer to all zeroes.\n *\n * @static Sink\n * @name resetBuffer\n *\n * @arg {Buffer} buffer The buffer to reset.\n *\n * @return {Buffer} The 0-reset buffer.\n*/\n\nSink.resetBuffer = function (buffer) {\n	var	l	= buffer.length,\n		i;\n	for (i=0; i<l; i++){\n		buffer[i] = 0;\n	}\n	return buffer;\n};\n\n/**\n * Copies the content of a buffer to another buffer.\n *\n * @static Sink\n * @name clone\n *\n * @arg {Buffer} buffer The buffer to copy from.\n * @arg {Buffer} !result The buffer to copy to.\n *\n * @return {Buffer} A clone of the buffer.\n*/\n\nSink.clone = function (buffer, result) {\n	var	l	= buffer.length,\n		i;\n	result = result || new Float32Array(l);\n	for (i=0; i<l; i++){\n		result[i] = buffer[i];\n	}\n	return result;\n};\n\n/**\n * Creates an array of buffers of the specified length and the specified count.\n *\n * @static Sink\n * @name createDeinterleaved\n *\n * @arg {Number} length The length of a single channel.\n * @arg {Number} channelCount The number of channels.\n * @return {Array} The array of buffers.\n*/\n\nSink.createDeinterleaved = function (length, channelCount) {\n	var	result	= new Array(channelCount),\n		i;\n	for (i=0; i<channelCount; i++){\n		result[i] = new Float32Array(length);\n	}\n	return result;\n};\n\nSink.memcpy = function (src, srcOffset, dst, dstOffset, length) {\n	src	= src.subarray || src.slice ? src : src.buffer;\n	dst	= dst.subarray || dst.slice ? dst : dst.buffer;\n\n	src	= srcOffset ? src.subarray ?\n		src.subarray(srcOffset, length && srcOffset + length) :\n		src.slice(srcOffset, length && srcOffset + length) : src;\n\n	if (dst.set) {\n		dst.set(src, dstOffset);\n	} else {\n		for (var i=0; i<src.length; i++) {\n			dst[i + dstOffset] = src[i];\n		}\n	}\n\n	return dst;\n};\n\nSink.memslice = function (buffer, offset, length) {\n	return buffer.subarray ? buffer.subarray(offset, length) : buffer.slice(offset, length);\n};\n\nSink.mempad = function (buffer, out, offset) {\n	out = out.length ? out : new (buffer.constructor)(out);\n	Sink.memcpy(buffer, 0, out, offset);\n	return out;\n};\n\nSink.linspace = function (start, end, out) {\n	var l, i, n, step;\n	out	= out.length ? (l=out.length) && out : Array(l=out);\n	step	= (end - start) / --l;\n	for (n=start+step, i=1; i<l; i++, n+=step) {\n		out[i] = n;\n	}\n	out[0]	= start;\n	out[l]	= end;\n	return out;\n};\n\nSink.ftoi = function (input, bitCount, output) {\n	var i, mask = Math.pow(2, bitCount - 1);\n\n	output = output || new (input.constructor)(input.length);\n\n	for (i=0; i<input.length; i++) {\n		output[i] = ~~(mask * input[i]);\n	}\n\n	return output;\n};\n\n}(this.Sink));\n(function (Sink) {\n\nfunction Proxy (bufferSize, channelCount) {\n	Sink.EventEmitter.call(this);\n\n	this.bufferSize		= isNaN(bufferSize) || bufferSize === null ? this.bufferSize : bufferSize;\n	this.channelCount	= isNaN(channelCount) || channelCount === null ? this.channelCount : channelCount;\n\n	var self = this;\n	this.callback = function () {\n		return self.process.apply(self, arguments);\n	};\n\n	this.resetBuffer();\n}\n\nProxy.prototype = {\n	buffer: null,\n	zeroBuffer: null,\n	parentSink: null,\n	bufferSize: 4096,\n	channelCount: 2,\n	offset: null,\n\n	resetBuffer: function () {\n		this.buffer	= new Float32Array(this.bufferSize);\n		this.zeroBuffer	= new Float32Array(this.bufferSize);\n	},\n\n	process: function (buffer, channelCount) {\n		if (this.offset === null) {\n			this.loadBuffer();\n		}\n\n		for (var i=0; i<buffer.length; i++) {\n			if (this.offset >= this.buffer.length) {\n				this.loadBuffer();\n			}\n\n			buffer[i] = this.buffer[this.offset++];\n		}\n	},\n\n	loadBuffer: function () {\n		this.offset = 0;\n		Sink.memcpy(this.zeroBuffer, 0, this.buffer, 0);\n		this.emit('audioprocess', [this.buffer, this.channelCount]);\n	}\n};\n\nSink.Proxy = Proxy;\n\n/**\n * Creates a proxy callback system for the sink instance.\n * Requires Sink utils.\n *\n * @method Sink\n * @method createProxy\n *\n * @arg {Number} !bufferSize The buffer size for the proxy.\n*/\nSink.prototype.createProxy = function (bufferSize) {\n	var	proxy		= new Sink.Proxy(bufferSize, this.channelCount);\n	proxy.parentSink	= this;\n\n	this.on('audioprocess', proxy.callback);\n\n	return proxy;\n};\n\n}(this.Sink));\n(function (Sink) {\n\n(function(){\n\n/**\n * If method is supplied, adds a new interpolation method to Sink.interpolation, otherwise sets the default interpolation method (Sink.interpolate) to the specified property of Sink.interpolate.\n *\n * @arg {String} name The name of the interpolation method to get / set.\n * @arg {Function} !method The interpolation method.\n*/\n\nfunction interpolation(name, method) {\n	if (name && method) {\n		interpolation[name] = method;\n	} else if (name && interpolation[name] instanceof Function) {\n		Sink.interpolate = interpolation[name];\n	}\n	return interpolation[name];\n}\n\nSink.interpolation = interpolation;\n\n\n/**\n * Interpolates a fractal part position in an array to a sample. (Linear interpolation)\n *\n * @param {Array} arr The sample buffer.\n * @param {number} pos The position to interpolate from.\n * @return {Float32} The interpolated sample.\n*/\ninterpolation('linear', function (arr, pos) {\n	var	first	= Math.floor(pos),\n		second	= first + 1,\n		frac	= pos - first;\n	second		= second < arr.length ? second : 0;\n	return arr[first] * (1 - frac) + arr[second] * frac;\n});\n\n/**\n * Interpolates a fractal part position in an array to a sample. (Nearest neighbour interpolation)\n *\n * @param {Array} arr The sample buffer.\n * @param {number} pos The position to interpolate from.\n * @return {Float32} The interpolated sample.\n*/\ninterpolation('nearest', function (arr, pos) {\n	return pos >= arr.length - 0.5 ? arr[0] : arr[Math.round(pos)];\n});\n\ninterpolation('linear');\n\n}());\n\n\n/**\n * Resamples a sample buffer from a frequency to a frequency and / or from a sample rate to a sample rate.\n *\n * @static Sink\n * @name resample\n *\n * @arg {Buffer} buffer The sample buffer to resample.\n * @arg {Number} fromRate The original sample rate of the buffer, or if the last argument, the speed ratio to convert with.\n * @arg {Number} fromFrequency The original frequency of the buffer, or if the last argument, used as toRate and the secondary comparison will not be made.\n * @arg {Number} toRate The sample rate of the created buffer.\n * @arg {Number} toFrequency The frequency of the created buffer.\n *\n * @return The new resampled buffer.\n*/\nSink.resample	= function (buffer, fromRate /* or speed */, fromFrequency /* or toRate */, toRate, toFrequency) {\n	var\n		argc		= arguments.length,\n		speed		= argc === 2 ? fromRate : argc === 3 ? fromRate / fromFrequency : toRate / fromRate * toFrequency / fromFrequency,\n		l		= buffer.length,\n		length		= Math.ceil(l / speed),\n		newBuffer	= new Float32Array(length),\n		i, n;\n	for (i=0, n=0; i<l; i += speed) {\n		newBuffer[n++] = Sink.interpolate(buffer, i);\n	}\n	return newBuffer;\n};\n\n}(this.Sink));\nvoid function (Sink) {\n\nSink.on('init', function (sink) {\n	sink.activeRecordings = [];\n	sink.on('postprocess', sink.recordData);\n});\n\nSink.prototype.activeRecordings = null;\n\n/**\n * Starts recording the sink output.\n *\n * @method Sink\n * @name record\n *\n * @return {Recording} The recording object for the recording started.\n*/\nSink.prototype.record = function () {\n	var recording = new Sink.Recording(this);\n	this.emit('record', [recording]);\n	return recording;\n};\n/**\n * Private method that handles the adding the buffers to all the current recordings.\n *\n * @method Sink\n * @method recordData\n *\n * @arg {Array} buffer The buffer to record.\n*/\nSink.prototype.recordData = function (buffer) {\n	var	activeRecs	= this.activeRecordings,\n		i, l		= activeRecs.length;\n	for (i=0; i<l; i++) {\n		activeRecs[i].add(buffer);\n	}\n};\n\n/**\n * A Recording class for recording sink output.\n *\n * @class\n * @static Sink\n * @arg {Object} bindTo The sink to bind the recording to.\n*/\n\nfunction Recording (bindTo) {\n	this.boundTo = bindTo;\n	this.buffers = [];\n	bindTo.activeRecordings.push(this);\n}\n\nRecording.prototype = {\n/**\n * Adds a new buffer to the recording.\n *\n * @arg {Array} buffer The buffer to add.\n *\n * @method Recording\n*/\n	add: function (buffer) {\n		this.buffers.push(buffer);\n	},\n/**\n * Empties the recording.\n *\n * @method Recording\n*/\n	clear: function () {\n		this.buffers = [];\n	},\n/**\n * Stops the recording and unbinds it from it's host sink.\n *\n * @method Recording\n*/\n	stop: function () {\n		var	recordings = this.boundTo.activeRecordings,\n			i;\n		for (i=0; i<recordings.length; i++) {\n			if (recordings[i] === this) {\n				recordings.splice(i--, 1);\n			}\n		}\n	},\n/**\n * Joins the recorded buffers into a single buffer.\n *\n * @method Recording\n*/\n	join: function () {\n		var	bufferLength	= 0,\n			bufPos		= 0,\n			buffers		= this.buffers,\n			newArray,\n			n, i, l		= buffers.length;\n\n		for (i=0; i<l; i++) {\n			bufferLength += buffers[i].length;\n		}\n		newArray = new Float32Array(bufferLength);\n		for (i=0; i<l; i++) {\n			for (n=0; n<buffers[i].length; n++) {\n				newArray[bufPos + n] = buffers[i][n];\n			}\n			bufPos += buffers[i].length;\n		}\n		return newArray;\n	}\n};\n\nSink.Recording = Recording;\n\n}(this.Sink);\nvoid function (Sink) {\n\nfunction processRingBuffer () {\n	if (this.ringBuffer) {\n		(this.channelMode === 'interleaved' ? this.ringSpin : this.ringSpinInterleaved).apply(this, arguments);\n	}\n}\n\nSink.on('init', function (sink) {\n	sink.on('preprocess', processRingBuffer);\n});\n\nSink.prototype.ringBuffer = null;\n\n/**\n * A private method that applies the ring buffer contents to the specified buffer, while in interleaved mode.\n *\n * @method Sink\n * @name ringSpin\n *\n * @arg {Array} buffer The buffer to write to.\n*/\nSink.prototype.ringSpin = function (buffer) {\n	var	ring	= this.ringBuffer,\n		l	= buffer.length,\n		m	= ring.length,\n		off	= this.ringOffset,\n		i;\n	for (i=0; i<l; i++){\n		buffer[i] += ring[off];\n		off = (off + 1) % m;\n	}\n	this.ringOffset = off;\n};\n\n/**\n * A private method that applies the ring buffer contents to the specified buffer, while in deinterleaved mode.\n *\n * @method Sink\n * @name ringSpinDeinterleaved\n *\n * @param {Array} buffer The buffers to write to.\n*/\nSink.prototype.ringSpinDeinterleaved = function (buffer) {\n	var	ring	= this.ringBuffer,\n		l	= buffer.length,\n		ch	= ring.length,\n		m	= ring[0].length,\n		len	= ch * m,\n		off	= this.ringOffset,\n		i, n;\n	for (i=0; i<l; i+=ch){\n		for (n=0; n<ch; n++){\n			buffer[i + n] += ring[n][off];\n		}\n		off = (off + 1) % m;\n	}\n	this.ringOffset = n;\n};\n\n}(this.Sink);\nvoid function (Sink, proto) {\n\nproto = Sink.prototype;\n\nSink.on('init', function (sink) {\n	sink.asyncBuffers	= [];\n	sink.syncBuffers	= [];\n	sink.on('preprocess', sink.writeBuffersSync);\n	sink.on('postprocess', sink.writeBuffersAsync);\n});\n\nproto.writeMode		= 'async';\nproto.asyncBuffers	= proto.syncBuffers = null;\n\n/**\n * Private method that handles the mixing of asynchronously written buffers.\n *\n * @method Sink\n * @name writeBuffersAsync\n *\n * @arg {Array} buffer The buffer to write to.\n*/\nproto.writeBuffersAsync = function (buffer) {\n	var	buffers		= this.asyncBuffers,\n		l		= buffer.length,\n		buf,\n		bufLength,\n		i, n, offset;\n	if (buffers) {\n		for (i=0; i<buffers.length; i++) {\n			buf		= buffers[i];\n			bufLength	= buf.b.length;\n			offset		= buf.d;\n			buf.d		-= Math.min(offset, l);\n\n			for (n=0; n + offset < l && n < bufLength; n++) {\n				buffer[n + offset] += buf.b[n];\n			}\n			buf.b = buf.b.subarray(n + offset);\n			if (i >= bufLength) {\n				buffers.splice(i--, 1);\n			}\n		}\n	}\n};\n\n/**\n * A private method that handles mixing synchronously written buffers.\n *\n * @method Sink\n * @name writeBuffersSync\n *\n * @arg {Array} buffer The buffer to write to.\n*/\nproto.writeBuffersSync = function (buffer) {\n	var	buffers		= this.syncBuffers,\n		l		= buffer.length,\n		i		= 0,\n		soff		= 0;\n	for (;i<l && buffers.length; i++) {\n		buffer[i] += buffers[0][soff];\n		if (buffers[0].length <= soff){\n			buffers.splice(0, 1);\n			soff = 0;\n			continue;\n		}\n		soff++;\n	}\n	if (buffers.length) {\n		buffers[0] = buffers[0].subarray(soff);\n	}\n};\n\n/**\n * Writes a buffer asynchronously on top of the existing signal, after a specified delay.\n *\n * @method Sink\n * @name writeBufferAsync\n *\n * @arg {Array} buffer The buffer to write.\n * @arg {Number} delay The delay to write after. If not specified, the Sink will calculate a delay to compensate the latency.\n * @return {Number} The number of currently stored asynchronous buffers.\n*/\nproto.writeBufferAsync = function (buffer, delay) {\n	buffer			= this.mode === 'deinterleaved' ? Sink.interleave(buffer, this.channelCount) : buffer;\n	var	buffers		= this.asyncBuffers;\n	buffers.push({\n		b: buffer,\n		d: isNaN(delay) ? ~~((+new Date() - this.previousHit) / 1000 * this.sampleRate) : delay\n	});\n	return buffers.length;\n};\n\n/**\n * Writes a buffer synchronously to the output.\n *\n * @method Sink\n * @name writeBufferSync\n *\n * @param {Array} buffer The buffer to write.\n * @return {Number} The number of currently stored synchronous buffers.\n*/\nproto.writeBufferSync = function (buffer) {\n	buffer			= this.mode === 'deinterleaved' ? Sink.interleave(buffer, this.channelCount) : buffer;\n	var	buffers		= this.syncBuffers;\n	buffers.push(buffer);\n	return buffers.length;\n};\n\n/**\n * Writes a buffer, according to the write mode specified.\n *\n * @method Sink\n * @name writeBuffer\n *\n * @arg {Array} buffer The buffer to write.\n * @arg {Number} delay The delay to write after. If not specified, the Sink will calculate a delay to compensate the latency. (only applicable in asynchronous write mode)\n * @return {Number} The number of currently stored (a)synchronous buffers.\n*/\nproto.writeBuffer = function () {\n	return this[this.writeMode === 'async' ? 'writeBufferAsync' : 'writeBufferSync'].apply(this, arguments);\n};\n\n/**\n * Gets the total amount of yet unwritten samples in the synchronous buffers.\n *\n * @method Sink\n * @name getSyncWriteOffset\n *\n * @return {Number} The total amount of yet unwritten samples in the synchronous buffers.\n*/\nproto.getSyncWriteOffset = function () {\n	var	buffers		= this.syncBuffers,\n		offset		= 0,\n		i;\n	for (i=0; i<buffers.length; i++) {\n		offset += buffers[i].length;\n	}\n	return offset;\n};\n\n} (this.Sink);\n\n";
},function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=f[r.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](r.parts[a]);for(;a<r.parts.length;a++)i.parts.push(s(r.parts[a],t))}else{for(var o=[],a=0;a<r.parts.length;a++)o.push(s(r.parts[a],t));f[r.id]={id:r.id,refs:1,parts:o}}}}function i(e){for(var t=[],n={},r=0;r<e.length;r++){var i=e[r],a=i[0],o=i[1],s=i[2],u=i[3],l={css:o,media:s,sourceMap:u};n[a]?n[a].parts.push(l):t.push(n[a]={id:a,parts:[l]})}return t}function a(){var e=document.createElement("style"),t=d();return e.type="text/css",t.appendChild(e),e}function o(){var e=document.createElement("link"),t=d();return e.rel="stylesheet",t.appendChild(e),e}function s(e,t){var n,r,i;if(t.singleton){var s=g++;n=m||(m=a()),r=u.bind(null,n,s,!1),i=u.bind(null,n,s,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=o(),r=c.bind(null,n),i=function(){n.parentNode.removeChild(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(),r=l.bind(null,n),i=function(){n.parentNode.removeChild(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}function u(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=v(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function l(e,t){var n=t.css,r=t.media;t.sourceMap;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function c(e,t){var n=t.css,r=(t.media,t.sourceMap);r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var i=new Blob([n],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(i),a&&URL.revokeObjectURL(a)}var f={},h=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},p=h(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),d=h(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,g=0;e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=p());var n=i(e);return r(n,t),function(e){for(var a=[],o=0;o<n.length;o++){var s=n[o],u=f[s.id];u.refs--,a.push(u)}if(e){var l=i(e);r(l,t)}for(var o=0;o<a.length;o++){var u=a[o];if(0===u.refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete f[u.id]}}}};var v=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){var r=n(49);"string"==typeof r&&(r=[[e.id,r,""]]);n(53)(r,{});r.locals&&(e.exports=r.locals)}]);